'use strict';function a69_0x40a5(){const _0x30fbcf=['317216VASLPl','method','7lmlHAz','__esModule','Injectable','4849770LIyfVn','object','getStatus','659487sBiXaa','toISOString','design:paramtypes','x-api-key','HttpException','Failed\x20to\x20send\x20exception\x20email:','logger','url','error','Internal\x20Server\x20Error','Catch','8843952pqAJiE','decorate','1527688oWhSeF','@nestjs/common','cookie','authorization','switchToHttp','length','assign','AppExceptionFilter','stack','json','headers','getResponse','__metadata','status','Logger','defineProperty','function','message','1088121IhTHQc','2979948vxDitw','getOwnPropertyDescriptor','sanitizeHeaders','metadata','env'];a69_0x40a5=function(){return _0x30fbcf;};return a69_0x40a5();}const a69_0x25628e=a69_0x3444;(function(_0x21308b,_0x58ef10){const _0x2ab975=a69_0x3444,_0x5afdb9=_0x21308b();while(!![]){try{const _0x3eda04=-parseInt(_0x2ab975(0x17e))/0x1+-parseInt(_0x2ab975(0x16c))/0x2+-parseInt(_0x2ab975(0x15f))/0x3+parseInt(_0x2ab975(0x157))/0x4+parseInt(_0x2ab975(0x15c))/0x5+parseInt(_0x2ab975(0x152))/0x6*(parseInt(_0x2ab975(0x159))/0x7)+parseInt(_0x2ab975(0x16a))/0x8;if(_0x3eda04===_0x58ef10)break;else _0x5afdb9['push'](_0x5afdb9['shift']());}catch(_0x2ed308){_0x5afdb9['push'](_0x5afdb9['shift']());}}}(a69_0x40a5,0x8d820));function a69_0x3444(_0x197160,_0x59fd7b){const _0x40a5ce=a69_0x40a5();return a69_0x3444=function(_0x3444a0,_0xbcbb2a){_0x3444a0=_0x3444a0-0x152;let _0x45b991=_0x40a5ce[_0x3444a0];return _0x45b991;},a69_0x3444(_0x197160,_0x59fd7b);}var __decorate=this&&this['__decorate']||function(_0x32bbad,_0x9390a5,_0x478902,_0x2d4d4a){const _0x4520ad=a69_0x3444;var _0x375c3a=arguments[_0x4520ad(0x171)],_0x2dc233=_0x375c3a<0x3?_0x9390a5:_0x2d4d4a===null?_0x2d4d4a=Object[_0x4520ad(0x153)](_0x9390a5,_0x478902):_0x2d4d4a,_0x3c1cb;if(typeof Reflect===_0x4520ad(0x15d)&&typeof Reflect[_0x4520ad(0x16b)]===_0x4520ad(0x17c))_0x2dc233=Reflect['decorate'](_0x32bbad,_0x9390a5,_0x478902,_0x2d4d4a);else{for(var _0x52ab7b=_0x32bbad['length']-0x1;_0x52ab7b>=0x0;_0x52ab7b--)if(_0x3c1cb=_0x32bbad[_0x52ab7b])_0x2dc233=(_0x375c3a<0x3?_0x3c1cb(_0x2dc233):_0x375c3a>0x3?_0x3c1cb(_0x9390a5,_0x478902,_0x2dc233):_0x3c1cb(_0x9390a5,_0x478902))||_0x2dc233;}return _0x375c3a>0x3&&_0x2dc233&&Object[_0x4520ad(0x17b)](_0x9390a5,_0x478902,_0x2dc233),_0x2dc233;},__metadata=this&&this[a69_0x25628e(0x178)]||function(_0x21a474,_0x4b0b4f){const _0x492233=a69_0x25628e;if(typeof Reflect===_0x492233(0x15d)&&typeof Reflect[_0x492233(0x155)]==='function')return Reflect[_0x492233(0x155)](_0x21a474,_0x4b0b4f);};Object['defineProperty'](exports,a69_0x25628e(0x15a),{'value':!![]}),exports[a69_0x25628e(0x173)]=void 0x0;const common_1=require(a69_0x25628e(0x16d)),email_service_1=require('../../email/email.service');let AppExceptionFilter=class AppExceptionFilter{constructor(_0x5e26bf){const _0x35c64f=a69_0x25628e;this['emailService']=_0x5e26bf,this[_0x35c64f(0x165)]=new common_1[(_0x35c64f(0x17a))]('AppException');}async['catch'](_0x5d4860,_0x85c019){const _0x5cf0f2=a69_0x25628e,_0x291524=_0x85c019[_0x5cf0f2(0x170)](),_0x425711=_0x291524['getRequest'](),_0x490501=_0x291524['getResponse']();this[_0x5cf0f2(0x165)][_0x5cf0f2(0x167)](_0x5d4860);if(!(_0x5d4860 instanceof common_1[_0x5cf0f2(0x163)]))try{await this['emailService']['sendExceptionNotification']({'message':_0x5d4860[_0x5cf0f2(0x174)]||_0x5d4860[_0x5cf0f2(0x17d)],'url':_0x425711[_0x5cf0f2(0x166)],'method':_0x425711[_0x5cf0f2(0x158)],'body':_0x425711['body'],'headers':this[_0x5cf0f2(0x154)](_0x425711[_0x5cf0f2(0x176)]),'timestamp':new Date()[_0x5cf0f2(0x160)](),'piName':process[_0x5cf0f2(0x156)]['PI_NAME']});}catch(_0x467cea){this['logger']['error'](_0x5cf0f2(0x164),_0x467cea);}_0x5d4860 instanceof common_1[_0x5cf0f2(0x163)]?_0x490501[_0x5cf0f2(0x179)](_0x5d4860[_0x5cf0f2(0x15e)]())['json'](_0x5d4860[_0x5cf0f2(0x177)]()):_0x490501[_0x5cf0f2(0x179)](0x1f4)[_0x5cf0f2(0x175)]({'statusCode':0x1f4,'message':_0x5cf0f2(0x168)});}[a69_0x25628e(0x154)](_0xddfc2a){const _0x3ec716=a69_0x25628e,_0x13a601=Object[_0x3ec716(0x172)]({},_0xddfc2a);return delete _0x13a601[_0x3ec716(0x16f)],delete _0x13a601[_0x3ec716(0x16e)],delete _0x13a601[_0x3ec716(0x162)],_0x13a601;}};AppExceptionFilter=__decorate([(0x0,common_1[a69_0x25628e(0x169)])(),(0x0,common_1[a69_0x25628e(0x15b)])(),__metadata(a69_0x25628e(0x161),[email_service_1['EmailService']])],AppExceptionFilter),exports[a69_0x25628e(0x173)]=AppExceptionFilter;