'use strict';const a145_0x1db278=a145_0x2ae5;(function(_0x38b5e4,_0x5958be){const _0x5aad59=a145_0x2ae5,_0x113b81=_0x38b5e4();while(!![]){try{const _0x361e55=parseInt(_0x5aad59(0x18d))/0x1+parseInt(_0x5aad59(0x1aa))/0x2+parseInt(_0x5aad59(0x17f))/0x3+-parseInt(_0x5aad59(0x15d))/0x4+-parseInt(_0x5aad59(0x19a))/0x5*(-parseInt(_0x5aad59(0x175))/0x6)+parseInt(_0x5aad59(0x1a9))/0x7*(parseInt(_0x5aad59(0x185))/0x8)+-parseInt(_0x5aad59(0x17a))/0x9*(parseInt(_0x5aad59(0x162))/0xa);if(_0x361e55===_0x5958be)break;else _0x113b81['push'](_0x113b81['shift']());}catch(_0x4e83c7){_0x113b81['push'](_0x113b81['shift']());}}}(a145_0x1bd3,0x92c6b));function a145_0x2ae5(_0x52aaa6,_0x123092){const _0x1bd3e6=a145_0x1bd3();return a145_0x2ae5=function(_0x2ae53b,_0x21198e){_0x2ae53b=_0x2ae53b-0x15a;let _0x1f59f3=_0x1bd3e6[_0x2ae53b];return _0x1f59f3;},a145_0x2ae5(_0x52aaa6,_0x123092);}function a145_0x1bd3(){const _0x54fe69=['saveStreamToFile','../common/file','Admin','60DJmvRE','Logger','../auth/enums/role.enum','__param','error','6153885CMLMJN','design:paramtypes','../auth/guards/jwt.guard','length','Res','2705925mlAEAq','__esModule','AUDIO_TO_MESSAGE_DIR','__metadata','decorate','processRootPath','9443464gRMxKL','send','Roles','StreamingService','Role','isFileExist','@nestjs/common','textToAudioService','879193vBoifB','../auth/decorators/roles.decorator','JwtAuthGuard','Put','../streaming/streaming.service','RolesGuard','../auth/guards/roles.guard','updateTextMessage','assign','logger','design:returntype','playAudioFile','__decorate','508295TnhrrL','Body','.wav','./saveStreamToFile','getOwnPropertyDescriptor','TextDTO','getMessages','/:id','prototype','log','Get','text','createFolder','TextToAudioController','User','7eHchNu','1201820PhrDpL','defineProperty','getAllMessage','streamingService','../common/audio/audio-player','../common/path','2236324ErTqmz','TextToAudioService','volume','path','Param','50cMPHQu','textToAudio','metadata','Success\x20save\x20text:\x20','design:type','deleteTextMessage','AudioPlayer','/message','There\x20is\x20no\x20message\x20to\x20play','saveMessage','Post','./text-to-audio.service','UseGuards','name','object','play'];a145_0x1bd3=function(){return _0x54fe69;};return a145_0x1bd3();}var __decorate=this&&this[a145_0x1db278(0x199)]||function(_0x14d730,_0x495526,_0x49b752,_0x4ad059){const _0x12e077=a145_0x1db278;var _0x28afb0=arguments[_0x12e077(0x17d)],_0x33e460=_0x28afb0<0x3?_0x495526:_0x4ad059===null?_0x4ad059=Object[_0x12e077(0x19e)](_0x495526,_0x49b752):_0x4ad059,_0x3d2a46;if(typeof Reflect===_0x12e077(0x170)&&typeof Reflect[_0x12e077(0x183)]==='function')_0x33e460=Reflect[_0x12e077(0x183)](_0x14d730,_0x495526,_0x49b752,_0x4ad059);else{for(var _0x12452c=_0x14d730[_0x12e077(0x17d)]-0x1;_0x12452c>=0x0;_0x12452c--)if(_0x3d2a46=_0x14d730[_0x12452c])_0x33e460=(_0x28afb0<0x3?_0x3d2a46(_0x33e460):_0x28afb0>0x3?_0x3d2a46(_0x495526,_0x49b752,_0x33e460):_0x3d2a46(_0x495526,_0x49b752))||_0x33e460;}return _0x28afb0>0x3&&_0x33e460&&Object[_0x12e077(0x1ab)](_0x495526,_0x49b752,_0x33e460),_0x33e460;},__metadata=this&&this[a145_0x1db278(0x182)]||function(_0x1a28e9,_0x5312e2){const _0x35368e=a145_0x1db278;if(typeof Reflect===_0x35368e(0x170)&&typeof Reflect['metadata']==='function')return Reflect[_0x35368e(0x164)](_0x1a28e9,_0x5312e2);},__param=this&&this[a145_0x1db278(0x178)]||function(_0x19b8b2,_0x6ba6f4){return function(_0x454920,_0x26e65b){_0x6ba6f4(_0x454920,_0x26e65b,_0x19b8b2);};},TextToAudioController_1;Object['defineProperty'](exports,a145_0x1db278(0x180),{'value':!![]}),exports[a145_0x1db278(0x1a7)]=void 0x0;const common_1=require(a145_0x1db278(0x18b)),text_to_audio_service_1=require(a145_0x1db278(0x16d)),text_dto_1=require('./dtos/text.dto'),streaming_service_1=require(a145_0x1db278(0x191)),roles_decorator_1=require(a145_0x1db278(0x18e)),role_enum_1=require(a145_0x1db278(0x177)),jwt_guard_1=require(a145_0x1db278(0x17c)),roles_guard_1=require(a145_0x1db278(0x193)),saveStreamToFile_1=require(a145_0x1db278(0x19d)),path=require(a145_0x1db278(0x160)),path_1=require(a145_0x1db278(0x15c)),constants_1=require('../common/constants'),file_1=require(a145_0x1db278(0x173)),audio_player_1=require(a145_0x1db278(0x15b));let TextToAudioController=TextToAudioController_1=class TextToAudioController{constructor(_0x31c731,_0x48f6dc){const _0x122c34=a145_0x1db278;this['textToAudioService']=_0x31c731,this[_0x122c34(0x15a)]=_0x48f6dc,this[_0x122c34(0x196)]=new common_1[(_0x122c34(0x176))](TextToAudioController_1[_0x122c34(0x16f)]);}async[a145_0x1db278(0x198)](_0x4b3140,_0x9818a3){const _0x1aa503=a145_0x1db278;try{const _0x4ba349=_0x9818a3[_0x1aa503(0x1a5)];if(!_0x4ba349){_0x4b3140[_0x1aa503(0x186)](_0x1aa503(0x16a));return;}const {id:_0x49c6c4,volume:_0x35f997}=await this[_0x1aa503(0x18c)][_0x1aa503(0x16b)](_0x4ba349);!(0x0,file_1[_0x1aa503(0x18a)])(constants_1[_0x1aa503(0x181)])&&(0x0,file_1[_0x1aa503(0x1a6)])(constants_1['AUDIO_TO_MESSAGE_DIR']);const _0x3c1aa2=path['join'](path_1[_0x1aa503(0x184)],constants_1[_0x1aa503(0x181)]),_0x3d4e9d=_0x3c1aa2+'/'+_0x49c6c4+_0x1aa503(0x19c);!(0x0,file_1[_0x1aa503(0x18a)])(_0x3d4e9d)?await this['textToAudioService'][_0x1aa503(0x163)](_0x9818a3[_0x1aa503(0x1a5)],async _0x3a1dd8=>{const _0x29e013=_0x1aa503;await(0x0,saveStreamToFile_1[_0x29e013(0x172)])(_0x3a1dd8,_0x3c1aa2+'/'+_0x49c6c4+'.wav'),audio_player_1['AudioPlayer']['play'](_0x3d4e9d,_0x35f997!==null&&_0x35f997!==void 0x0?_0x35f997:0x32);}):audio_player_1[_0x1aa503(0x168)][_0x1aa503(0x171)](_0x3d4e9d,_0x35f997!==null&&_0x35f997!==void 0x0?_0x35f997:0x32),_0x4b3140[_0x1aa503(0x186)]('Success\x20play\x20text\x20to\x20audio:\x20'+_0x9818a3[_0x1aa503(0x1a5)]);}catch(_0x398cad){return this[_0x1aa503(0x196)]['log'](_0x398cad,'error'),'';}}async[a145_0x1db278(0x16b)](_0x14ed59,_0x2c859d){const _0x34c420=a145_0x1db278;try{const _0x39ff29=_0x2c859d['text'];if(!_0x39ff29){_0x14ed59[_0x34c420(0x186)](_0x34c420(0x16a));return;}await this[_0x34c420(0x18c)][_0x34c420(0x16b)](_0x39ff29),_0x14ed59['send'](_0x34c420(0x165)+_0x2c859d[_0x34c420(0x1a5)]);}catch(_0x5c283d){return this[_0x34c420(0x196)]['log'](_0x5c283d,'error\x20'),'';}}async['getAllMessage'](){const _0x1fad06=a145_0x1db278;try{const _0x3794d0=await this[_0x1fad06(0x18c)][_0x1fad06(0x1a0)]();return _0x3794d0!==null&&_0x3794d0!==void 0x0?_0x3794d0:[];}catch(_0x257221){return this['logger'][_0x1fad06(0x1a3)](_0x257221,_0x1fad06(0x179)),'';}}['deleteTextMessage'](_0x9e6002){const _0x571095=a145_0x1db278;return this[_0x571095(0x18c)][_0x571095(0x167)](_0x9e6002);}[a145_0x1db278(0x194)](_0x2c8d5e,_0x18e713){const _0xa61916=a145_0x1db278;var _0x37dc56;return this[_0xa61916(0x18c)][_0xa61916(0x194)](_0x2c8d5e,Object[_0xa61916(0x195)](Object[_0xa61916(0x195)]({},_0x18e713),{'volume':(_0x37dc56=_0x18e713[_0xa61916(0x15f)])!==null&&_0x37dc56!==void 0x0?_0x37dc56:0x32}));}};__decorate([(0x0,common_1[a145_0x1db278(0x16c)])('/'),(0x0,common_1[a145_0x1db278(0x16e)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1['Roles'])(role_enum_1[a145_0x1db278(0x189)]['Admin'],role_enum_1[a145_0x1db278(0x189)][a145_0x1db278(0x1a8)]),__param(0x0,(0x0,common_1[a145_0x1db278(0x17e)])({'passthrough':!![]})),__param(0x1,(0x0,common_1[a145_0x1db278(0x19b)])()),__metadata(a145_0x1db278(0x166),Function),__metadata('design:paramtypes',[Object,text_dto_1['TextDTO']]),__metadata(a145_0x1db278(0x197),Promise)],TextToAudioController[a145_0x1db278(0x1a2)],a145_0x1db278(0x198),null),__decorate([(0x0,common_1[a145_0x1db278(0x16c)])(a145_0x1db278(0x16b)),(0x0,common_1[a145_0x1db278(0x16e)])(jwt_guard_1[a145_0x1db278(0x18f)],roles_guard_1[a145_0x1db278(0x192)]),(0x0,roles_decorator_1[a145_0x1db278(0x187)])(role_enum_1[a145_0x1db278(0x189)][a145_0x1db278(0x174)],role_enum_1[a145_0x1db278(0x189)][a145_0x1db278(0x1a8)]),__param(0x0,(0x0,common_1['Res'])({'passthrough':!![]})),__param(0x1,(0x0,common_1[a145_0x1db278(0x19b)])()),__metadata(a145_0x1db278(0x166),Function),__metadata(a145_0x1db278(0x17b),[Object,text_dto_1[a145_0x1db278(0x19f)]]),__metadata(a145_0x1db278(0x197),Promise)],TextToAudioController[a145_0x1db278(0x1a2)],'saveMessage',null),__decorate([(0x0,common_1[a145_0x1db278(0x1a4)])(a145_0x1db278(0x169)),(0x0,common_1[a145_0x1db278(0x16e)])(jwt_guard_1[a145_0x1db278(0x18f)],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1['Roles'])(role_enum_1[a145_0x1db278(0x189)][a145_0x1db278(0x174)],role_enum_1[a145_0x1db278(0x189)][a145_0x1db278(0x1a8)]),__metadata(a145_0x1db278(0x166),Function),__metadata(a145_0x1db278(0x17b),[]),__metadata('design:returntype',Promise)],TextToAudioController[a145_0x1db278(0x1a2)],a145_0x1db278(0x1ac),null),__decorate([(0x0,common_1['Delete'])(a145_0x1db278(0x1a1)),(0x0,common_1[a145_0x1db278(0x16e)])(jwt_guard_1[a145_0x1db278(0x18f)],roles_guard_1[a145_0x1db278(0x192)]),(0x0,roles_decorator_1[a145_0x1db278(0x187)])(role_enum_1[a145_0x1db278(0x189)]['Admin'],role_enum_1[a145_0x1db278(0x189)][a145_0x1db278(0x1a8)]),__param(0x0,(0x0,common_1[a145_0x1db278(0x161)])('id')),__metadata(a145_0x1db278(0x166),Function),__metadata('design:paramtypes',[String]),__metadata(a145_0x1db278(0x197),void 0x0)],TextToAudioController[a145_0x1db278(0x1a2)],a145_0x1db278(0x167),null),__decorate([(0x0,common_1[a145_0x1db278(0x190)])(a145_0x1db278(0x1a1)),(0x0,common_1[a145_0x1db278(0x16e)])(jwt_guard_1[a145_0x1db278(0x18f)],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1[a145_0x1db278(0x187)])(role_enum_1[a145_0x1db278(0x189)]['Admin'],role_enum_1['Role'][a145_0x1db278(0x1a8)]),__param(0x0,(0x0,common_1[a145_0x1db278(0x161)])('id')),__param(0x1,(0x0,common_1['Body'])()),__metadata(a145_0x1db278(0x166),Function),__metadata(a145_0x1db278(0x17b),[String,text_dto_1[a145_0x1db278(0x19f)]]),__metadata(a145_0x1db278(0x197),void 0x0)],TextToAudioController[a145_0x1db278(0x1a2)],'updateTextMessage',null),TextToAudioController=TextToAudioController_1=__decorate([(0x0,common_1['Controller'])('textToAudio'),__metadata('design:paramtypes',[text_to_audio_service_1[a145_0x1db278(0x15e)],streaming_service_1[a145_0x1db278(0x188)]])],TextToAudioController),exports[a145_0x1db278(0x1a7)]=TextToAudioController;