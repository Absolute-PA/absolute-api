'use strict';function a142_0x42b0(_0x5a06fb,_0x407a6a){const _0x2ea6e6=a142_0x2ea6();return a142_0x42b0=function(_0x42b070,_0x57074e){_0x42b070=_0x42b070-0x19d;let _0x426ecf=_0x2ea6e6[_0x42b070];return _0x426ecf;},a142_0x42b0(_0x5a06fb,_0x407a6a);}const a142_0x155e5a=a142_0x42b0;(function(_0x5e59e8,_0x55765e){const _0x112b00=a142_0x42b0,_0x49aeb3=_0x5e59e8();while(!![]){try{const _0x575513=parseInt(_0x112b00(0x1d7))/0x1+-parseInt(_0x112b00(0x1c0))/0x2*(parseInt(_0x112b00(0x19f))/0x3)+parseInt(_0x112b00(0x1c7))/0x4*(-parseInt(_0x112b00(0x1ec))/0x5)+parseInt(_0x112b00(0x1c2))/0x6*(-parseInt(_0x112b00(0x1dc))/0x7)+-parseInt(_0x112b00(0x1bc))/0x8*(parseInt(_0x112b00(0x1cf))/0x9)+-parseInt(_0x112b00(0x1f1))/0xa*(-parseInt(_0x112b00(0x1b3))/0xb)+parseInt(_0x112b00(0x1d4))/0xc;if(_0x575513===_0x55765e)break;else _0x49aeb3['push'](_0x49aeb3['shift']());}catch(_0x3c23d2){_0x49aeb3['push'](_0x49aeb3['shift']());}}}(a142_0x2ea6,0x80ee1));function a142_0x2ea6(){const _0x8adb2=['19003560XZVpgD','JwtAuthGuard','__param','842591kshzqA','logger','TextDTO','playAudioFile','send','9037WGSQcV','updateTextMessage','Param','design:paramtypes','deleteTextMessage','name','prototype','@nestjs/common','There\x20is\x20no\x20message\x20to\x20play','TextToAudioController','length','join','createFolder','Post','RolesGuard','__metadata','35kyTdgJ','defineProperty','/:id','__decorate','AUDIO_TO_MESSAGE_DIR','227530PhSVNJ','object','textToAudioService','271341QJjqfb','design:type','Role','text','play','./dtos/text.dto','Put','Res','Body','textToAudio','isFileExist','./text-to-audio.service','UseGuards','error','../common/path','/message','Controller','design:returntype','function','Delete','154thzMpe','StreamingService','getAllMessage','../streaming/streaming.service','streamingService','.wav','User','Roles','Admin','16ToKfAH','Logger','TextToAudioService','Get','12rDLlJg','../auth/guards/jwt.guard','3018aOwXQm','../auth/decorators/roles.decorator','processRootPath','assign','../common/constants','260668RyzBgX','AudioPlayer','log','saveMessage','../auth/enums/role.enum','Success\x20save\x20text:\x20','../common/file','saveStreamToFile','2557989vtDcCC','volume','../auth/guards/roles.guard','Success\x20play\x20text\x20to\x20audio:\x20','metadata'];a142_0x2ea6=function(){return _0x8adb2;};return a142_0x2ea6();}var __decorate=this&&this[a142_0x155e5a(0x1ef)]||function(_0x216457,_0x44d495,_0xedd57b,_0x5c2c52){const _0x1f4baa=a142_0x155e5a;var _0x30b4ca=arguments[_0x1f4baa(0x1e6)],_0xdde4cf=_0x30b4ca<0x3?_0x44d495:_0x5c2c52===null?_0x5c2c52=Object['getOwnPropertyDescriptor'](_0x44d495,_0xedd57b):_0x5c2c52,_0x30a534;if(typeof Reflect===_0x1f4baa(0x19d)&&typeof Reflect['decorate']==='function')_0xdde4cf=Reflect['decorate'](_0x216457,_0x44d495,_0xedd57b,_0x5c2c52);else{for(var _0x381f68=_0x216457[_0x1f4baa(0x1e6)]-0x1;_0x381f68>=0x0;_0x381f68--)if(_0x30a534=_0x216457[_0x381f68])_0xdde4cf=(_0x30b4ca<0x3?_0x30a534(_0xdde4cf):_0x30b4ca>0x3?_0x30a534(_0x44d495,_0xedd57b,_0xdde4cf):_0x30a534(_0x44d495,_0xedd57b))||_0xdde4cf;}return _0x30b4ca>0x3&&_0xdde4cf&&Object[_0x1f4baa(0x1ed)](_0x44d495,_0xedd57b,_0xdde4cf),_0xdde4cf;},__metadata=this&&this[a142_0x155e5a(0x1eb)]||function(_0x4ca3cd,_0x32c555){const _0x12b31a=a142_0x155e5a;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x12b31a(0x1b1))return Reflect[_0x12b31a(0x1d3)](_0x4ca3cd,_0x32c555);},__param=this&&this[a142_0x155e5a(0x1d6)]||function(_0x4816e7,_0x24a402){return function(_0x38cc5d,_0x4229f9){_0x24a402(_0x38cc5d,_0x4229f9,_0x4816e7);};},TextToAudioController_1;Object[a142_0x155e5a(0x1ed)](exports,'__esModule',{'value':!![]}),exports[a142_0x155e5a(0x1e5)]=void 0x0;const common_1=require(a142_0x155e5a(0x1e3)),text_to_audio_service_1=require(a142_0x155e5a(0x1aa)),text_dto_1=require(a142_0x155e5a(0x1a4)),streaming_service_1=require(a142_0x155e5a(0x1b6)),roles_decorator_1=require(a142_0x155e5a(0x1c3)),role_enum_1=require(a142_0x155e5a(0x1cb)),jwt_guard_1=require(a142_0x155e5a(0x1c1)),roles_guard_1=require(a142_0x155e5a(0x1d1)),saveStreamToFile_1=require('./saveStreamToFile'),path=require('path'),path_1=require(a142_0x155e5a(0x1ad)),constants_1=require(a142_0x155e5a(0x1c6)),file_1=require(a142_0x155e5a(0x1cd)),audio_player_1=require('../common/audio/audio-player');let TextToAudioController=TextToAudioController_1=class TextToAudioController{constructor(_0xaff07b,_0x2924d1){const _0x8b06fe=a142_0x155e5a;this['textToAudioService']=_0xaff07b,this[_0x8b06fe(0x1b7)]=_0x2924d1,this[_0x8b06fe(0x1d8)]=new common_1[(_0x8b06fe(0x1bd))](TextToAudioController_1[_0x8b06fe(0x1e1)]);}async[a142_0x155e5a(0x1da)](_0x4bbd8b,_0x3aa5dd){const _0x145c0=a142_0x155e5a;try{const _0x587ef1=_0x3aa5dd[_0x145c0(0x1a2)];if(!_0x587ef1){_0x4bbd8b[_0x145c0(0x1db)](_0x145c0(0x1e4));return;}const {id:_0x4390ed,volume:_0x5e8f24}=await this[_0x145c0(0x19e)][_0x145c0(0x1ca)](_0x587ef1);!(0x0,file_1[_0x145c0(0x1a9)])(constants_1['AUDIO_TO_MESSAGE_DIR'])&&(0x0,file_1[_0x145c0(0x1e8)])(constants_1[_0x145c0(0x1f0)]);const _0xac2879=path[_0x145c0(0x1e7)](path_1[_0x145c0(0x1c4)],constants_1['AUDIO_TO_MESSAGE_DIR']),_0x9bc054=_0xac2879+'/'+_0x4390ed+_0x145c0(0x1b8);!(0x0,file_1[_0x145c0(0x1a9)])(_0x9bc054)?await this[_0x145c0(0x19e)][_0x145c0(0x1a8)](_0x3aa5dd['text'],async _0x37f352=>{const _0x3f1d4c=_0x145c0;await(0x0,saveStreamToFile_1[_0x3f1d4c(0x1ce)])(_0x37f352,_0xac2879+'/'+_0x4390ed+_0x3f1d4c(0x1b8)),audio_player_1[_0x3f1d4c(0x1c8)][_0x3f1d4c(0x1a3)](_0x9bc054,_0x5e8f24!==null&&_0x5e8f24!==void 0x0?_0x5e8f24:0x32);}):audio_player_1[_0x145c0(0x1c8)][_0x145c0(0x1a3)](_0x9bc054,_0x5e8f24!==null&&_0x5e8f24!==void 0x0?_0x5e8f24:0x32),_0x4bbd8b[_0x145c0(0x1db)](_0x145c0(0x1d2)+_0x3aa5dd[_0x145c0(0x1a2)]);}catch(_0x463184){return this[_0x145c0(0x1d8)][_0x145c0(0x1c9)](_0x463184,'error'),'';}}async[a142_0x155e5a(0x1ca)](_0x3d3ccb,_0x4ee466){const _0x48aed9=a142_0x155e5a;try{const _0x22dd8d=_0x4ee466[_0x48aed9(0x1a2)];if(!_0x22dd8d){_0x3d3ccb[_0x48aed9(0x1db)](_0x48aed9(0x1e4));return;}await this[_0x48aed9(0x19e)][_0x48aed9(0x1ca)](_0x22dd8d),_0x3d3ccb[_0x48aed9(0x1db)](_0x48aed9(0x1cc)+_0x4ee466[_0x48aed9(0x1a2)]);}catch(_0x4ddf41){return this[_0x48aed9(0x1d8)][_0x48aed9(0x1c9)](_0x4ddf41,'error\x20'),'';}}async[a142_0x155e5a(0x1b5)](){const _0xa6b462=a142_0x155e5a;try{const _0x274dcf=await this[_0xa6b462(0x19e)]['getMessages']();return _0x274dcf!==null&&_0x274dcf!==void 0x0?_0x274dcf:[];}catch(_0x5eddae){return this[_0xa6b462(0x1d8)][_0xa6b462(0x1c9)](_0x5eddae,_0xa6b462(0x1ac)),'';}}[a142_0x155e5a(0x1e0)](_0x48f32f){return this['textToAudioService']['deleteTextMessage'](_0x48f32f);}[a142_0x155e5a(0x1dd)](_0x28c4f3,_0x44e9ca){const _0x4304e7=a142_0x155e5a;var _0x407b36;return this[_0x4304e7(0x19e)][_0x4304e7(0x1dd)](_0x28c4f3,Object['assign'](Object[_0x4304e7(0x1c5)]({},_0x44e9ca),{'volume':(_0x407b36=_0x44e9ca[_0x4304e7(0x1d0)])!==null&&_0x407b36!==void 0x0?_0x407b36:0x32}));}};__decorate([(0x0,common_1['Post'])('/'),(0x0,common_1['UseGuards'])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a142_0x155e5a(0x1ea)]),(0x0,roles_decorator_1[a142_0x155e5a(0x1ba)])(role_enum_1[a142_0x155e5a(0x1a1)][a142_0x155e5a(0x1bb)],role_enum_1[a142_0x155e5a(0x1a1)][a142_0x155e5a(0x1b9)]),__param(0x0,(0x0,common_1['Res'])({'passthrough':!![]})),__param(0x1,(0x0,common_1[a142_0x155e5a(0x1a7)])()),__metadata('design:type',Function),__metadata(a142_0x155e5a(0x1df),[Object,text_dto_1[a142_0x155e5a(0x1d9)]]),__metadata(a142_0x155e5a(0x1b0),Promise)],TextToAudioController[a142_0x155e5a(0x1e2)],'playAudioFile',null),__decorate([(0x0,common_1[a142_0x155e5a(0x1e9)])(a142_0x155e5a(0x1ca)),(0x0,common_1[a142_0x155e5a(0x1ab)])(jwt_guard_1[a142_0x155e5a(0x1d5)],roles_guard_1[a142_0x155e5a(0x1ea)]),(0x0,roles_decorator_1[a142_0x155e5a(0x1ba)])(role_enum_1['Role'][a142_0x155e5a(0x1bb)],role_enum_1[a142_0x155e5a(0x1a1)][a142_0x155e5a(0x1b9)]),__param(0x0,(0x0,common_1[a142_0x155e5a(0x1a6)])({'passthrough':!![]})),__param(0x1,(0x0,common_1['Body'])()),__metadata(a142_0x155e5a(0x1a0),Function),__metadata(a142_0x155e5a(0x1df),[Object,text_dto_1[a142_0x155e5a(0x1d9)]]),__metadata('design:returntype',Promise)],TextToAudioController[a142_0x155e5a(0x1e2)],'saveMessage',null),__decorate([(0x0,common_1[a142_0x155e5a(0x1bf)])(a142_0x155e5a(0x1ae)),(0x0,common_1[a142_0x155e5a(0x1ab)])(jwt_guard_1[a142_0x155e5a(0x1d5)],roles_guard_1[a142_0x155e5a(0x1ea)]),(0x0,roles_decorator_1[a142_0x155e5a(0x1ba)])(role_enum_1[a142_0x155e5a(0x1a1)][a142_0x155e5a(0x1bb)],role_enum_1[a142_0x155e5a(0x1a1)]['User']),__metadata(a142_0x155e5a(0x1a0),Function),__metadata('design:paramtypes',[]),__metadata('design:returntype',Promise)],TextToAudioController[a142_0x155e5a(0x1e2)],'getAllMessage',null),__decorate([(0x0,common_1[a142_0x155e5a(0x1b2)])('/:id'),(0x0,common_1[a142_0x155e5a(0x1ab)])(jwt_guard_1[a142_0x155e5a(0x1d5)],roles_guard_1[a142_0x155e5a(0x1ea)]),(0x0,roles_decorator_1[a142_0x155e5a(0x1ba)])(role_enum_1[a142_0x155e5a(0x1a1)][a142_0x155e5a(0x1bb)],role_enum_1[a142_0x155e5a(0x1a1)][a142_0x155e5a(0x1b9)]),__param(0x0,(0x0,common_1[a142_0x155e5a(0x1de)])('id')),__metadata(a142_0x155e5a(0x1a0),Function),__metadata(a142_0x155e5a(0x1df),[String]),__metadata(a142_0x155e5a(0x1b0),void 0x0)],TextToAudioController[a142_0x155e5a(0x1e2)],'deleteTextMessage',null),__decorate([(0x0,common_1[a142_0x155e5a(0x1a5)])(a142_0x155e5a(0x1ee)),(0x0,common_1['UseGuards'])(jwt_guard_1[a142_0x155e5a(0x1d5)],roles_guard_1[a142_0x155e5a(0x1ea)]),(0x0,roles_decorator_1[a142_0x155e5a(0x1ba)])(role_enum_1[a142_0x155e5a(0x1a1)][a142_0x155e5a(0x1bb)],role_enum_1[a142_0x155e5a(0x1a1)]['User']),__param(0x0,(0x0,common_1[a142_0x155e5a(0x1de)])('id')),__param(0x1,(0x0,common_1[a142_0x155e5a(0x1a7)])()),__metadata(a142_0x155e5a(0x1a0),Function),__metadata(a142_0x155e5a(0x1df),[String,text_dto_1[a142_0x155e5a(0x1d9)]]),__metadata('design:returntype',void 0x0)],TextToAudioController['prototype'],a142_0x155e5a(0x1dd),null),TextToAudioController=TextToAudioController_1=__decorate([(0x0,common_1[a142_0x155e5a(0x1af)])(a142_0x155e5a(0x1a8)),__metadata(a142_0x155e5a(0x1df),[text_to_audio_service_1[a142_0x155e5a(0x1be)],streaming_service_1[a142_0x155e5a(0x1b4)]])],TextToAudioController),exports[a142_0x155e5a(0x1e5)]=TextToAudioController;