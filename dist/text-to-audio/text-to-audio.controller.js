'use strict';const a145_0x571165=a145_0x4bb4;(function(_0xfaebe4,_0x479ec5){const _0x24d38c=a145_0x4bb4,_0x338566=_0xfaebe4();while(!![]){try{const _0x74624b=-parseInt(_0x24d38c(0x1ac))/0x1+parseInt(_0x24d38c(0x192))/0x2*(parseInt(_0x24d38c(0x1b9))/0x3)+-parseInt(_0x24d38c(0x1b7))/0x4*(-parseInt(_0x24d38c(0x1c7))/0x5)+parseInt(_0x24d38c(0x1a1))/0x6*(parseInt(_0x24d38c(0x1cd))/0x7)+-parseInt(_0x24d38c(0x1a6))/0x8+parseInt(_0x24d38c(0x19b))/0x9+parseInt(_0x24d38c(0x1b1))/0xa*(parseInt(_0x24d38c(0x1a4))/0xb);if(_0x74624b===_0x479ec5)break;else _0x338566['push'](_0x338566['shift']());}catch(_0x51198e){_0x338566['push'](_0x338566['shift']());}}}(a145_0x28f8,0x31d8f));var __decorate=this&&this[a145_0x571165(0x1aa)]||function(_0x3a709a,_0x1fc9f6,_0x16050a,_0x52eda6){const _0x4103ee=a145_0x571165;var _0x1847db=arguments['length'],_0x498c6a=_0x1847db<0x3?_0x1fc9f6:_0x52eda6===null?_0x52eda6=Object[_0x4103ee(0x19a)](_0x1fc9f6,_0x16050a):_0x52eda6,_0x340522;if(typeof Reflect===_0x4103ee(0x19c)&&typeof Reflect['decorate']===_0x4103ee(0x190))_0x498c6a=Reflect[_0x4103ee(0x1a3)](_0x3a709a,_0x1fc9f6,_0x16050a,_0x52eda6);else{for(var _0x3fabf0=_0x3a709a[_0x4103ee(0x1bf)]-0x1;_0x3fabf0>=0x0;_0x3fabf0--)if(_0x340522=_0x3a709a[_0x3fabf0])_0x498c6a=(_0x1847db<0x3?_0x340522(_0x498c6a):_0x1847db>0x3?_0x340522(_0x1fc9f6,_0x16050a,_0x498c6a):_0x340522(_0x1fc9f6,_0x16050a))||_0x498c6a;}return _0x1847db>0x3&&_0x498c6a&&Object[_0x4103ee(0x184)](_0x1fc9f6,_0x16050a,_0x498c6a),_0x498c6a;},__metadata=this&&this['__metadata']||function(_0x15c53c,_0x33bf67){const _0x346828=a145_0x571165;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x346828(0x190))return Reflect['metadata'](_0x15c53c,_0x33bf67);},__param=this&&this['__param']||function(_0x50667e,_0xba599c){return function(_0x21978d,_0x596147){_0xba599c(_0x21978d,_0x596147,_0x50667e);};},TextToAudioController_1;function a145_0x28f8(){const _0x56d442=['../streaming/streaming.service','decorate','796389XheesP','Delete','2712200oEbiUR','./text-to-audio.service','__esModule','./dtos/text.dto','__decorate','Role','398699EaPyaa','TextDTO','../auth/guards/jwt.guard','.wav','../common/audio/audio-player','30XuOifI','design:returntype','Res','TextToAudioService','Success\x20save\x20text:\x20','/message','391484JWKabm','UseGuards','9OPeUKT','RolesGuard','text','@nestjs/common','Param','./saveStreamToFile','length','play','There\x20is\x20no\x20message\x20to\x20play','../common/constants','TextToAudioController','design:type','saveMessage','AudioPlayer','10KyKRas','volume','../auth/decorators/roles.decorator','deleteTextMessage','join','design:paramtypes','49qsAuPR','textToAudio','../common/path','../auth/enums/role.enum','Roles','playAudioFile','/:id','Post','defineProperty','error\x20','Body','isFileExist','AUDIO_TO_MESSAGE_DIR','createFolder','streamingService','Success\x20play\x20text\x20to\x20audio:\x20','Admin','name','Put','getMessages','function','updateTextMessage','159452AlVFdy','log','send','Controller','path','prototype','JwtAuthGuard','getAllMessage','getOwnPropertyDescriptor','703737GmLmdL','object','textToAudioService','../auth/guards/roles.guard','User','logger','181362OHVnoU'];a145_0x28f8=function(){return _0x56d442;};return a145_0x28f8();}Object[a145_0x571165(0x184)](exports,a145_0x571165(0x1a8),{'value':!![]}),exports[a145_0x571165(0x1c3)]=void 0x0;function a145_0x4bb4(_0x26b999,_0x1e21ad){const _0x28f879=a145_0x28f8();return a145_0x4bb4=function(_0x4bb4ae,_0x5eb06c){_0x4bb4ae=_0x4bb4ae-0x17e;let _0x4c2e89=_0x28f879[_0x4bb4ae];return _0x4c2e89;},a145_0x4bb4(_0x26b999,_0x1e21ad);}const common_1=require(a145_0x571165(0x1bc)),text_to_audio_service_1=require(a145_0x571165(0x1a7)),text_dto_1=require(a145_0x571165(0x1a9)),streaming_service_1=require(a145_0x571165(0x1a2)),roles_decorator_1=require(a145_0x571165(0x1c9)),role_enum_1=require(a145_0x571165(0x17f)),jwt_guard_1=require(a145_0x571165(0x1ae)),roles_guard_1=require(a145_0x571165(0x19e)),saveStreamToFile_1=require(a145_0x571165(0x1be)),path=require(a145_0x571165(0x196)),path_1=require(a145_0x571165(0x17e)),constants_1=require(a145_0x571165(0x1c2)),file_1=require('../common/file'),audio_player_1=require(a145_0x571165(0x1b0));let TextToAudioController=TextToAudioController_1=class TextToAudioController{constructor(_0x1a6d36,_0x9ab617){const _0x28bee=a145_0x571165;this[_0x28bee(0x19d)]=_0x1a6d36,this[_0x28bee(0x18a)]=_0x9ab617,this[_0x28bee(0x1a0)]=new common_1['Logger'](TextToAudioController_1[_0x28bee(0x18d)]);}async[a145_0x571165(0x181)](_0xe81ff6,_0x2eeadc){const _0x285ad2=a145_0x571165;try{const _0x9e3ca6=_0x2eeadc[_0x285ad2(0x1bb)];if(!_0x9e3ca6){_0xe81ff6[_0x285ad2(0x194)](_0x285ad2(0x1c1));return;}const {id:_0x361735,volume:_0x1587ac}=await this[_0x285ad2(0x19d)][_0x285ad2(0x1c5)](_0x9e3ca6);!(0x0,file_1[_0x285ad2(0x187)])(constants_1['AUDIO_TO_MESSAGE_DIR'])&&(0x0,file_1[_0x285ad2(0x189)])(constants_1['AUDIO_TO_MESSAGE_DIR']);const _0x5a08b3=path[_0x285ad2(0x1cb)](path_1['processRootPath'],constants_1[_0x285ad2(0x188)]),_0x120fa2=_0x5a08b3+'/'+_0x361735+_0x285ad2(0x1af);!(0x0,file_1['isFileExist'])(_0x120fa2)?await this[_0x285ad2(0x19d)][_0x285ad2(0x1ce)](_0x2eeadc[_0x285ad2(0x1bb)],async _0x41805e=>{const _0x175c08=_0x285ad2;await(0x0,saveStreamToFile_1['saveStreamToFile'])(_0x41805e,_0x5a08b3+'/'+_0x361735+_0x175c08(0x1af)),audio_player_1[_0x175c08(0x1c6)][_0x175c08(0x1c0)](_0x120fa2,_0x1587ac!==null&&_0x1587ac!==void 0x0?_0x1587ac:0x32);}):audio_player_1['AudioPlayer'][_0x285ad2(0x1c0)](_0x120fa2,_0x1587ac!==null&&_0x1587ac!==void 0x0?_0x1587ac:0x32),_0xe81ff6['send'](_0x285ad2(0x18b)+_0x2eeadc['text']);}catch(_0x2e1bc9){return this['logger'][_0x285ad2(0x193)](_0x2e1bc9,'error'),'';}}async[a145_0x571165(0x1c5)](_0x12a17f,_0x46eb65){const _0x55cf14=a145_0x571165;try{const _0x13ee91=_0x46eb65[_0x55cf14(0x1bb)];if(!_0x13ee91){_0x12a17f[_0x55cf14(0x194)](_0x55cf14(0x1c1));return;}await this[_0x55cf14(0x19d)][_0x55cf14(0x1c5)](_0x13ee91),_0x12a17f[_0x55cf14(0x194)](_0x55cf14(0x1b5)+_0x46eb65[_0x55cf14(0x1bb)]);}catch(_0x19ed08){return this[_0x55cf14(0x1a0)]['log'](_0x19ed08,_0x55cf14(0x185)),'';}}async[a145_0x571165(0x199)](){const _0x5b8d8d=a145_0x571165;try{const _0x3ba13b=await this['textToAudioService'][_0x5b8d8d(0x18f)]();return _0x3ba13b!==null&&_0x3ba13b!==void 0x0?_0x3ba13b:[];}catch(_0x19c121){return this[_0x5b8d8d(0x1a0)][_0x5b8d8d(0x193)](_0x19c121,'error'),'';}}[a145_0x571165(0x1ca)](_0x5282c5){const _0x549f58=a145_0x571165;return this[_0x549f58(0x19d)][_0x549f58(0x1ca)](_0x5282c5);}[a145_0x571165(0x191)](_0x216bbf,_0x216fc7){const _0x418855=a145_0x571165;var _0x39cf40;return this[_0x418855(0x19d)][_0x418855(0x191)](_0x216bbf,Object['assign'](Object['assign']({},_0x216fc7),{'volume':(_0x39cf40=_0x216fc7[_0x418855(0x1c8)])!==null&&_0x39cf40!==void 0x0?_0x39cf40:0x32}));}};__decorate([(0x0,common_1[a145_0x571165(0x183)])('/'),(0x0,common_1[a145_0x571165(0x1b8)])(jwt_guard_1[a145_0x571165(0x198)],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1['Roles'])(role_enum_1[a145_0x571165(0x1ab)][a145_0x571165(0x18c)],role_enum_1[a145_0x571165(0x1ab)][a145_0x571165(0x19f)]),__param(0x0,(0x0,common_1[a145_0x571165(0x1b3)])({'passthrough':!![]})),__param(0x1,(0x0,common_1[a145_0x571165(0x186)])()),__metadata(a145_0x571165(0x1c4),Function),__metadata('design:paramtypes',[Object,text_dto_1[a145_0x571165(0x1ad)]]),__metadata(a145_0x571165(0x1b2),Promise)],TextToAudioController[a145_0x571165(0x197)],'playAudioFile',null),__decorate([(0x0,common_1['Post'])('saveMessage'),(0x0,common_1[a145_0x571165(0x1b8)])(jwt_guard_1[a145_0x571165(0x198)],roles_guard_1[a145_0x571165(0x1ba)]),(0x0,roles_decorator_1[a145_0x571165(0x180)])(role_enum_1[a145_0x571165(0x1ab)][a145_0x571165(0x18c)],role_enum_1[a145_0x571165(0x1ab)][a145_0x571165(0x19f)]),__param(0x0,(0x0,common_1[a145_0x571165(0x1b3)])({'passthrough':!![]})),__param(0x1,(0x0,common_1[a145_0x571165(0x186)])()),__metadata(a145_0x571165(0x1c4),Function),__metadata('design:paramtypes',[Object,text_dto_1[a145_0x571165(0x1ad)]]),__metadata(a145_0x571165(0x1b2),Promise)],TextToAudioController[a145_0x571165(0x197)],a145_0x571165(0x1c5),null),__decorate([(0x0,common_1['Get'])(a145_0x571165(0x1b6)),(0x0,common_1[a145_0x571165(0x1b8)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a145_0x571165(0x1ba)]),(0x0,roles_decorator_1['Roles'])(role_enum_1[a145_0x571165(0x1ab)][a145_0x571165(0x18c)],role_enum_1[a145_0x571165(0x1ab)][a145_0x571165(0x19f)]),__metadata(a145_0x571165(0x1c4),Function),__metadata(a145_0x571165(0x1cc),[]),__metadata('design:returntype',Promise)],TextToAudioController[a145_0x571165(0x197)],a145_0x571165(0x199),null),__decorate([(0x0,common_1[a145_0x571165(0x1a5)])(a145_0x571165(0x182)),(0x0,common_1[a145_0x571165(0x1b8)])(jwt_guard_1[a145_0x571165(0x198)],roles_guard_1[a145_0x571165(0x1ba)]),(0x0,roles_decorator_1[a145_0x571165(0x180)])(role_enum_1[a145_0x571165(0x1ab)][a145_0x571165(0x18c)],role_enum_1[a145_0x571165(0x1ab)]['User']),__param(0x0,(0x0,common_1[a145_0x571165(0x1bd)])('id')),__metadata(a145_0x571165(0x1c4),Function),__metadata(a145_0x571165(0x1cc),[String]),__metadata(a145_0x571165(0x1b2),void 0x0)],TextToAudioController[a145_0x571165(0x197)],a145_0x571165(0x1ca),null),__decorate([(0x0,common_1[a145_0x571165(0x18e)])('/:id'),(0x0,common_1[a145_0x571165(0x1b8)])(jwt_guard_1[a145_0x571165(0x198)],roles_guard_1[a145_0x571165(0x1ba)]),(0x0,roles_decorator_1[a145_0x571165(0x180)])(role_enum_1[a145_0x571165(0x1ab)][a145_0x571165(0x18c)],role_enum_1['Role'][a145_0x571165(0x19f)]),__param(0x0,(0x0,common_1[a145_0x571165(0x1bd)])('id')),__param(0x1,(0x0,common_1['Body'])()),__metadata('design:type',Function),__metadata(a145_0x571165(0x1cc),[String,text_dto_1[a145_0x571165(0x1ad)]]),__metadata('design:returntype',void 0x0)],TextToAudioController[a145_0x571165(0x197)],a145_0x571165(0x191),null),TextToAudioController=TextToAudioController_1=__decorate([(0x0,common_1[a145_0x571165(0x195)])(a145_0x571165(0x1ce)),__metadata(a145_0x571165(0x1cc),[text_to_audio_service_1[a145_0x571165(0x1b4)],streaming_service_1['StreamingService']])],TextToAudioController),exports['TextToAudioController']=TextToAudioController;