'use strict';const a142_0x533afc=a142_0x1bb7;(function(_0x269bd0,_0x1625da){const _0x48fd5b=a142_0x1bb7,_0x599f9a=_0x269bd0();while(!![]){try{const _0x559c16=parseInt(_0x48fd5b(0x117))/0x1+parseInt(_0x48fd5b(0x11b))/0x2+parseInt(_0x48fd5b(0x150))/0x3*(parseInt(_0x48fd5b(0x133))/0x4)+-parseInt(_0x48fd5b(0x131))/0x5+-parseInt(_0x48fd5b(0x132))/0x6*(-parseInt(_0x48fd5b(0x12c))/0x7)+-parseInt(_0x48fd5b(0x100))/0x8*(parseInt(_0x48fd5b(0x139))/0x9)+-parseInt(_0x48fd5b(0x14e))/0xa*(parseInt(_0x48fd5b(0x11f))/0xb);if(_0x559c16===_0x1625da)break;else _0x599f9a['push'](_0x599f9a['shift']());}catch(_0x104103){_0x599f9a['push'](_0x599f9a['shift']());}}}(a142_0x47b2,0x886d9));function a142_0x47b2(){const _0x288f7d=['__esModule','522LcFlnA','length','Param','TextToAudioController','Delete','log','metadata','Roles','AudioPlayer','Role','Body','error','/:id','design:returntype','Controller','name','getAllMessage','UseGuards','../auth/guards/roles.guard','updateTextMessage','There\x20is\x20no\x20message\x20to\x20play','8540JhkdmX','TextToAudioService','2814QWMAjB','defineProperty','../streaming/streaming.service','design:paramtypes','80024SeMbQh','__metadata','processRootPath','saveMessage','design:type','RolesGuard','play','Res','Post','text','JwtAuthGuard','isFileExist','path','AUDIO_TO_MESSAGE_DIR','../common/path','StreamingService','__param','logger','deleteTextMessage','TextDTO','../auth/enums/role.enum','createFolder','join','910103nYnpoI','../common/constants','Put','Get','1389566sLpBvn','send','../common/audio/audio-player','Admin','16412twcOkL','Success\x20save\x20text:\x20','textToAudioService','Logger','../common/file','object','User','Success\x20play\x20text\x20to\x20audio:\x20','decorate','.wav','@nestjs/common','./text-to-audio.service','function','126350DgIeKq','../auth/decorators/roles.decorator','getMessages','textToAudio','prototype','2699445xcWyVA','204SXuglE','3132jrBDML','playAudioFile','./dtos/text.dto','volume','/message'];a142_0x47b2=function(){return _0x288f7d;};return a142_0x47b2();}function a142_0x1bb7(_0x50e3f2,_0x21dcff){const _0x47b2a6=a142_0x47b2();return a142_0x1bb7=function(_0x1bb7ff,_0x196faa){_0x1bb7ff=_0x1bb7ff-0xfe;let _0x2ad2a9=_0x47b2a6[_0x1bb7ff];return _0x2ad2a9;},a142_0x1bb7(_0x50e3f2,_0x21dcff);}var __decorate=this&&this['__decorate']||function(_0x100341,_0x11cf42,_0x491e61,_0x38f307){const _0x5e5fc7=a142_0x1bb7;var _0x41573c=arguments[_0x5e5fc7(0x13a)],_0xd7b3dc=_0x41573c<0x3?_0x11cf42:_0x38f307===null?_0x38f307=Object['getOwnPropertyDescriptor'](_0x11cf42,_0x491e61):_0x38f307,_0x17949d;if(typeof Reflect===_0x5e5fc7(0x124)&&typeof Reflect[_0x5e5fc7(0x127)]==='function')_0xd7b3dc=Reflect[_0x5e5fc7(0x127)](_0x100341,_0x11cf42,_0x491e61,_0x38f307);else{for(var _0x40bd31=_0x100341[_0x5e5fc7(0x13a)]-0x1;_0x40bd31>=0x0;_0x40bd31--)if(_0x17949d=_0x100341[_0x40bd31])_0xd7b3dc=(_0x41573c<0x3?_0x17949d(_0xd7b3dc):_0x41573c>0x3?_0x17949d(_0x11cf42,_0x491e61,_0xd7b3dc):_0x17949d(_0x11cf42,_0x491e61))||_0xd7b3dc;}return _0x41573c>0x3&&_0xd7b3dc&&Object['defineProperty'](_0x11cf42,_0x491e61,_0xd7b3dc),_0xd7b3dc;},__metadata=this&&this[a142_0x533afc(0x101)]||function(_0x4c66d3,_0x3d0218){const _0x2671a2=a142_0x533afc;if(typeof Reflect===_0x2671a2(0x124)&&typeof Reflect[_0x2671a2(0x13f)]===_0x2671a2(0x12b))return Reflect[_0x2671a2(0x13f)](_0x4c66d3,_0x3d0218);},__param=this&&this[a142_0x533afc(0x110)]||function(_0x53d68d,_0xa83f80){return function(_0x2c21b6,_0x453774){_0xa83f80(_0x2c21b6,_0x453774,_0x53d68d);};},TextToAudioController_1;Object[a142_0x533afc(0x151)](exports,a142_0x533afc(0x138),{'value':!![]}),exports[a142_0x533afc(0x13c)]=void 0x0;const common_1=require(a142_0x533afc(0x129)),text_to_audio_service_1=require(a142_0x533afc(0x12a)),text_dto_1=require(a142_0x533afc(0x135)),streaming_service_1=require(a142_0x533afc(0xfe)),roles_decorator_1=require(a142_0x533afc(0x12d)),role_enum_1=require(a142_0x533afc(0x114)),jwt_guard_1=require('../auth/guards/jwt.guard'),roles_guard_1=require(a142_0x533afc(0x14b)),saveStreamToFile_1=require('./saveStreamToFile'),path=require(a142_0x533afc(0x10c)),path_1=require(a142_0x533afc(0x10e)),constants_1=require(a142_0x533afc(0x118)),file_1=require(a142_0x533afc(0x123)),audio_player_1=require(a142_0x533afc(0x11d));let TextToAudioController=TextToAudioController_1=class TextToAudioController{constructor(_0x58b434,_0x2c9511){const _0x40048d=a142_0x533afc;this['textToAudioService']=_0x58b434,this['streamingService']=_0x2c9511,this[_0x40048d(0x111)]=new common_1[(_0x40048d(0x122))](TextToAudioController_1[_0x40048d(0x148)]);}async['playAudioFile'](_0x1298ef,_0x206996){const _0x39cbd2=a142_0x533afc;try{const _0x4b75d7=_0x206996[_0x39cbd2(0x109)];if(!_0x4b75d7){_0x1298ef[_0x39cbd2(0x11c)](_0x39cbd2(0x14d));return;}const {id:_0x5e3967,volume:_0x157ace}=await this['textToAudioService'][_0x39cbd2(0x103)](_0x4b75d7);!(0x0,file_1['isFileExist'])(constants_1['AUDIO_TO_MESSAGE_DIR'])&&(0x0,file_1[_0x39cbd2(0x115)])(constants_1[_0x39cbd2(0x10d)]);const _0x406024=path[_0x39cbd2(0x116)](path_1[_0x39cbd2(0x102)],constants_1['AUDIO_TO_MESSAGE_DIR']),_0x39f691=_0x406024+'/'+_0x5e3967+_0x39cbd2(0x128);!(0x0,file_1[_0x39cbd2(0x10b)])(_0x39f691)?await this[_0x39cbd2(0x121)]['textToAudio'](_0x206996[_0x39cbd2(0x109)],async _0x14eb5b=>{const _0x8394c6=_0x39cbd2;await(0x0,saveStreamToFile_1['saveStreamToFile'])(_0x14eb5b,_0x406024+'/'+_0x5e3967+'.wav'),audio_player_1[_0x8394c6(0x141)][_0x8394c6(0x106)](_0x39f691,_0x157ace!==null&&_0x157ace!==void 0x0?_0x157ace:0x32);}):audio_player_1[_0x39cbd2(0x141)]['play'](_0x39f691,_0x157ace!==null&&_0x157ace!==void 0x0?_0x157ace:0x32),_0x1298ef[_0x39cbd2(0x11c)](_0x39cbd2(0x126)+_0x206996[_0x39cbd2(0x109)]);}catch(_0x2356b3){return this[_0x39cbd2(0x111)]['log'](_0x2356b3,_0x39cbd2(0x144)),'';}}async['saveMessage'](_0x2ecad0,_0x36cbfc){const _0x1a8334=a142_0x533afc;try{const _0x65425f=_0x36cbfc[_0x1a8334(0x109)];if(!_0x65425f){_0x2ecad0[_0x1a8334(0x11c)](_0x1a8334(0x14d));return;}await this[_0x1a8334(0x121)][_0x1a8334(0x103)](_0x65425f),_0x2ecad0[_0x1a8334(0x11c)](_0x1a8334(0x120)+_0x36cbfc['text']);}catch(_0x5d5189){return this[_0x1a8334(0x111)][_0x1a8334(0x13e)](_0x5d5189,'error\x20'),'';}}async[a142_0x533afc(0x149)](){const _0xdfa3b=a142_0x533afc;try{const _0x481572=await this['textToAudioService'][_0xdfa3b(0x12e)]();return _0x481572!==null&&_0x481572!==void 0x0?_0x481572:[];}catch(_0x1a3c4b){return this[_0xdfa3b(0x111)]['log'](_0x1a3c4b,_0xdfa3b(0x144)),'';}}[a142_0x533afc(0x112)](_0x16f3cd){const _0xdb7d46=a142_0x533afc;return this[_0xdb7d46(0x121)][_0xdb7d46(0x112)](_0x16f3cd);}[a142_0x533afc(0x14c)](_0x5cd060,_0x18fc93){const _0x32827e=a142_0x533afc;var _0x256473;return this['textToAudioService'][_0x32827e(0x14c)](_0x5cd060,Object['assign'](Object['assign']({},_0x18fc93),{'volume':(_0x256473=_0x18fc93[_0x32827e(0x136)])!==null&&_0x256473!==void 0x0?_0x256473:0x32}));}};__decorate([(0x0,common_1['Post'])('/'),(0x0,common_1[a142_0x533afc(0x14a)])(jwt_guard_1[a142_0x533afc(0x10a)],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1[a142_0x533afc(0x140)])(role_enum_1[a142_0x533afc(0x142)]['Admin'],role_enum_1[a142_0x533afc(0x142)][a142_0x533afc(0x125)]),__param(0x0,(0x0,common_1[a142_0x533afc(0x107)])({'passthrough':!![]})),__param(0x1,(0x0,common_1[a142_0x533afc(0x143)])()),__metadata(a142_0x533afc(0x104),Function),__metadata(a142_0x533afc(0xff),[Object,text_dto_1[a142_0x533afc(0x113)]]),__metadata('design:returntype',Promise)],TextToAudioController['prototype'],a142_0x533afc(0x134),null),__decorate([(0x0,common_1[a142_0x533afc(0x108)])('saveMessage'),(0x0,common_1[a142_0x533afc(0x14a)])(jwt_guard_1[a142_0x533afc(0x10a)],roles_guard_1[a142_0x533afc(0x105)]),(0x0,roles_decorator_1[a142_0x533afc(0x140)])(role_enum_1[a142_0x533afc(0x142)][a142_0x533afc(0x11e)],role_enum_1[a142_0x533afc(0x142)]['User']),__param(0x0,(0x0,common_1[a142_0x533afc(0x107)])({'passthrough':!![]})),__param(0x1,(0x0,common_1[a142_0x533afc(0x143)])()),__metadata('design:type',Function),__metadata(a142_0x533afc(0xff),[Object,text_dto_1[a142_0x533afc(0x113)]]),__metadata(a142_0x533afc(0x146),Promise)],TextToAudioController[a142_0x533afc(0x130)],a142_0x533afc(0x103),null),__decorate([(0x0,common_1[a142_0x533afc(0x11a)])(a142_0x533afc(0x137)),(0x0,common_1[a142_0x533afc(0x14a)])(jwt_guard_1[a142_0x533afc(0x10a)],roles_guard_1[a142_0x533afc(0x105)]),(0x0,roles_decorator_1['Roles'])(role_enum_1[a142_0x533afc(0x142)]['Admin'],role_enum_1[a142_0x533afc(0x142)][a142_0x533afc(0x125)]),__metadata('design:type',Function),__metadata(a142_0x533afc(0xff),[]),__metadata(a142_0x533afc(0x146),Promise)],TextToAudioController[a142_0x533afc(0x130)],'getAllMessage',null),__decorate([(0x0,common_1[a142_0x533afc(0x13d)])(a142_0x533afc(0x145)),(0x0,common_1[a142_0x533afc(0x14a)])(jwt_guard_1[a142_0x533afc(0x10a)],roles_guard_1[a142_0x533afc(0x105)]),(0x0,roles_decorator_1[a142_0x533afc(0x140)])(role_enum_1['Role'][a142_0x533afc(0x11e)],role_enum_1[a142_0x533afc(0x142)][a142_0x533afc(0x125)]),__param(0x0,(0x0,common_1['Param'])('id')),__metadata(a142_0x533afc(0x104),Function),__metadata(a142_0x533afc(0xff),[String]),__metadata(a142_0x533afc(0x146),void 0x0)],TextToAudioController[a142_0x533afc(0x130)],'deleteTextMessage',null),__decorate([(0x0,common_1[a142_0x533afc(0x119)])(a142_0x533afc(0x145)),(0x0,common_1[a142_0x533afc(0x14a)])(jwt_guard_1[a142_0x533afc(0x10a)],roles_guard_1[a142_0x533afc(0x105)]),(0x0,roles_decorator_1['Roles'])(role_enum_1['Role'][a142_0x533afc(0x11e)],role_enum_1[a142_0x533afc(0x142)][a142_0x533afc(0x125)]),__param(0x0,(0x0,common_1[a142_0x533afc(0x13b)])('id')),__param(0x1,(0x0,common_1[a142_0x533afc(0x143)])()),__metadata(a142_0x533afc(0x104),Function),__metadata(a142_0x533afc(0xff),[String,text_dto_1[a142_0x533afc(0x113)]]),__metadata(a142_0x533afc(0x146),void 0x0)],TextToAudioController[a142_0x533afc(0x130)],a142_0x533afc(0x14c),null),TextToAudioController=TextToAudioController_1=__decorate([(0x0,common_1[a142_0x533afc(0x147)])(a142_0x533afc(0x12f)),__metadata(a142_0x533afc(0xff),[text_to_audio_service_1[a142_0x533afc(0x14f)],streaming_service_1[a142_0x533afc(0x10f)]])],TextToAudioController),exports['TextToAudioController']=TextToAudioController;