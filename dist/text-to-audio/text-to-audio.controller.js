'use strict';const a145_0x9bd1c7=a145_0x460f;(function(_0x107f6a,_0x4ec975){const _0x264fb0=a145_0x460f,_0x927170=_0x107f6a();while(!![]){try{const _0x4f3ff9=parseInt(_0x264fb0(0x192))/0x1*(-parseInt(_0x264fb0(0x15a))/0x2)+-parseInt(_0x264fb0(0x17b))/0x3*(parseInt(_0x264fb0(0x144))/0x4)+-parseInt(_0x264fb0(0x146))/0x5*(-parseInt(_0x264fb0(0x171))/0x6)+parseInt(_0x264fb0(0x16f))/0x7*(-parseInt(_0x264fb0(0x15e))/0x8)+parseInt(_0x264fb0(0x198))/0x9+parseInt(_0x264fb0(0x158))/0xa*(parseInt(_0x264fb0(0x178))/0xb)+parseInt(_0x264fb0(0x14d))/0xc*(parseInt(_0x264fb0(0x152))/0xd);if(_0x4f3ff9===_0x4ec975)break;else _0x927170['push'](_0x927170['shift']());}catch(_0x8fc4de){_0x927170['push'](_0x927170['shift']());}}}(a145_0x31dc,0x45e9b));function a145_0x31dc(){const _0x780621=['getMessages','play','./text-to-audio.service','11hIdljV','Delete','Post','1426611GHgaGL','Logger','playAudioFile','/message','saveStreamToFile','__metadata','prototype','./dtos/text.dto','TextDTO','error\x20','Get','streamingService','updateTextMessage','isFileExist','RolesGuard','../common/constants','createFolder','Res','design:type','UseGuards','Role','Param','../auth/decorators/roles.decorator','2wbafOu','processRootPath','send','getAllMessage','design:paramtypes','volume','2067885zmUPJi','.wav','path','4wzhWkQ','../auth/guards/roles.guard','7610WJRwBm','Admin','Controller','AudioPlayer','User','error','function','60lOSpkD','/:id','TextToAudioService','text','./saveStreamToFile','1630239JkNCdG','log','../streaming/streaming.service','Roles','TextToAudioController','defineProperty','5025850xNISTZ','../common/audio/audio-player','264092RQcNRr','JwtAuthGuard','StreamingService','name','8mSJmYZ','../auth/guards/jwt.guard','object','deleteTextMessage','There\x20is\x20no\x20message\x20to\x20play','Body','saveMessage','../auth/enums/role.enum','../common/file','length','__esModule','Put','__param','AUDIO_TO_MESSAGE_DIR','textToAudioService','@nestjs/common','Success\x20play\x20text\x20to\x20audio:\x20','2536037WdWMoT','design:returntype','114XhwbEP','decorate','logger','getOwnPropertyDescriptor'];a145_0x31dc=function(){return _0x780621;};return a145_0x31dc();}function a145_0x460f(_0x48edf0,_0x258fd4){const _0x31dc39=a145_0x31dc();return a145_0x460f=function(_0x460f21,_0x329ebb){_0x460f21=_0x460f21-0x143;let _0x110fc5=_0x31dc39[_0x460f21];return _0x110fc5;},a145_0x460f(_0x48edf0,_0x258fd4);}var __decorate=this&&this['__decorate']||function(_0x1c3597,_0x1aec84,_0x2b7223,_0x25037f){const _0x327bd7=a145_0x460f;var _0x968efa=arguments[_0x327bd7(0x167)],_0x16929a=_0x968efa<0x3?_0x1aec84:_0x25037f===null?_0x25037f=Object[_0x327bd7(0x174)](_0x1aec84,_0x2b7223):_0x25037f,_0x24cf41;if(typeof Reflect===_0x327bd7(0x160)&&typeof Reflect[_0x327bd7(0x172)]===_0x327bd7(0x14c))_0x16929a=Reflect[_0x327bd7(0x172)](_0x1c3597,_0x1aec84,_0x2b7223,_0x25037f);else{for(var _0x297850=_0x1c3597[_0x327bd7(0x167)]-0x1;_0x297850>=0x0;_0x297850--)if(_0x24cf41=_0x1c3597[_0x297850])_0x16929a=(_0x968efa<0x3?_0x24cf41(_0x16929a):_0x968efa>0x3?_0x24cf41(_0x1aec84,_0x2b7223,_0x16929a):_0x24cf41(_0x1aec84,_0x2b7223))||_0x16929a;}return _0x968efa>0x3&&_0x16929a&&Object[_0x327bd7(0x157)](_0x1aec84,_0x2b7223,_0x16929a),_0x16929a;},__metadata=this&&this[a145_0x9bd1c7(0x180)]||function(_0x3b57a6,_0x4be88e){const _0x1eff53=a145_0x9bd1c7;if(typeof Reflect===_0x1eff53(0x160)&&typeof Reflect['metadata']===_0x1eff53(0x14c))return Reflect['metadata'](_0x3b57a6,_0x4be88e);},__param=this&&this[a145_0x9bd1c7(0x16a)]||function(_0x1a2285,_0x4140f7){return function(_0x1cc570,_0x4406b8){_0x4140f7(_0x1cc570,_0x4406b8,_0x1a2285);};},TextToAudioController_1;Object[a145_0x9bd1c7(0x157)](exports,a145_0x9bd1c7(0x168),{'value':!![]}),exports[a145_0x9bd1c7(0x156)]=void 0x0;const common_1=require(a145_0x9bd1c7(0x16d)),text_to_audio_service_1=require(a145_0x9bd1c7(0x177)),text_dto_1=require(a145_0x9bd1c7(0x182)),streaming_service_1=require(a145_0x9bd1c7(0x154)),roles_decorator_1=require(a145_0x9bd1c7(0x191)),role_enum_1=require(a145_0x9bd1c7(0x165)),jwt_guard_1=require(a145_0x9bd1c7(0x15f)),roles_guard_1=require(a145_0x9bd1c7(0x145)),saveStreamToFile_1=require(a145_0x9bd1c7(0x151)),path=require(a145_0x9bd1c7(0x143)),path_1=require('../common/path'),constants_1=require(a145_0x9bd1c7(0x18a)),file_1=require(a145_0x9bd1c7(0x166)),audio_player_1=require(a145_0x9bd1c7(0x159));let TextToAudioController=TextToAudioController_1=class TextToAudioController{constructor(_0x370a6f,_0x16f64e){const _0x2e9031=a145_0x9bd1c7;this[_0x2e9031(0x16c)]=_0x370a6f,this[_0x2e9031(0x186)]=_0x16f64e,this['logger']=new common_1[(_0x2e9031(0x17c))](TextToAudioController_1[_0x2e9031(0x15d)]);}async['playAudioFile'](_0x4b939b,_0x136d0a){const _0x9e2433=a145_0x9bd1c7;try{const _0x428fa5=_0x136d0a[_0x9e2433(0x150)];if(!_0x428fa5){_0x4b939b[_0x9e2433(0x194)](_0x9e2433(0x162));return;}const {id:_0x44a077,volume:_0x2dd306}=await this[_0x9e2433(0x16c)][_0x9e2433(0x164)](_0x428fa5);!(0x0,file_1[_0x9e2433(0x188)])(constants_1[_0x9e2433(0x16b)])&&(0x0,file_1[_0x9e2433(0x18b)])(constants_1['AUDIO_TO_MESSAGE_DIR']);const _0x46742a=path['join'](path_1[_0x9e2433(0x193)],constants_1[_0x9e2433(0x16b)]),_0x3494e5=_0x46742a+'/'+_0x44a077+_0x9e2433(0x199);!(0x0,file_1[_0x9e2433(0x188)])(_0x3494e5)?await this[_0x9e2433(0x16c)]['textToAudio'](_0x136d0a['text'],async _0xf794ff=>{const _0x475dcc=_0x9e2433;await(0x0,saveStreamToFile_1[_0x475dcc(0x17f)])(_0xf794ff,_0x46742a+'/'+_0x44a077+'.wav'),audio_player_1[_0x475dcc(0x149)]['play'](_0x3494e5,_0x2dd306!==null&&_0x2dd306!==void 0x0?_0x2dd306:0x32);}):audio_player_1[_0x9e2433(0x149)][_0x9e2433(0x176)](_0x3494e5,_0x2dd306!==null&&_0x2dd306!==void 0x0?_0x2dd306:0x32),_0x4b939b[_0x9e2433(0x194)](_0x9e2433(0x16e)+_0x136d0a[_0x9e2433(0x150)]);}catch(_0x35f418){return this[_0x9e2433(0x173)][_0x9e2433(0x153)](_0x35f418,'error'),'';}}async[a145_0x9bd1c7(0x164)](_0x322ce7,_0x3b364d){const _0x2d0a45=a145_0x9bd1c7;try{const _0x2b5fd2=_0x3b364d[_0x2d0a45(0x150)];if(!_0x2b5fd2){_0x322ce7[_0x2d0a45(0x194)](_0x2d0a45(0x162));return;}await this['textToAudioService']['saveMessage'](_0x2b5fd2),_0x322ce7[_0x2d0a45(0x194)]('Success\x20save\x20text:\x20'+_0x3b364d[_0x2d0a45(0x150)]);}catch(_0x389f89){return this[_0x2d0a45(0x173)][_0x2d0a45(0x153)](_0x389f89,_0x2d0a45(0x184)),'';}}async['getAllMessage'](){const _0x2becc6=a145_0x9bd1c7;try{const _0x4f5d84=await this[_0x2becc6(0x16c)][_0x2becc6(0x175)]();return _0x4f5d84!==null&&_0x4f5d84!==void 0x0?_0x4f5d84:[];}catch(_0x5407d7){return this['logger']['log'](_0x5407d7,_0x2becc6(0x14b)),'';}}[a145_0x9bd1c7(0x161)](_0x140c45){const _0x306694=a145_0x9bd1c7;return this[_0x306694(0x16c)][_0x306694(0x161)](_0x140c45);}[a145_0x9bd1c7(0x187)](_0x2ae171,_0x412a99){const _0x2880e0=a145_0x9bd1c7;var _0x26f602;return this['textToAudioService'][_0x2880e0(0x187)](_0x2ae171,Object['assign'](Object['assign']({},_0x412a99),{'volume':(_0x26f602=_0x412a99[_0x2880e0(0x197)])!==null&&_0x26f602!==void 0x0?_0x26f602:0x32}));}};__decorate([(0x0,common_1[a145_0x9bd1c7(0x17a)])('/'),(0x0,common_1[a145_0x9bd1c7(0x18e)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a145_0x9bd1c7(0x189)]),(0x0,roles_decorator_1[a145_0x9bd1c7(0x155)])(role_enum_1[a145_0x9bd1c7(0x18f)][a145_0x9bd1c7(0x147)],role_enum_1[a145_0x9bd1c7(0x18f)]['User']),__param(0x0,(0x0,common_1[a145_0x9bd1c7(0x18c)])({'passthrough':!![]})),__param(0x1,(0x0,common_1[a145_0x9bd1c7(0x163)])()),__metadata(a145_0x9bd1c7(0x18d),Function),__metadata('design:paramtypes',[Object,text_dto_1['TextDTO']]),__metadata(a145_0x9bd1c7(0x170),Promise)],TextToAudioController[a145_0x9bd1c7(0x181)],a145_0x9bd1c7(0x17d),null),__decorate([(0x0,common_1[a145_0x9bd1c7(0x17a)])('saveMessage'),(0x0,common_1[a145_0x9bd1c7(0x18e)])(jwt_guard_1[a145_0x9bd1c7(0x15b)],roles_guard_1[a145_0x9bd1c7(0x189)]),(0x0,roles_decorator_1[a145_0x9bd1c7(0x155)])(role_enum_1['Role']['Admin'],role_enum_1[a145_0x9bd1c7(0x18f)][a145_0x9bd1c7(0x14a)]),__param(0x0,(0x0,common_1[a145_0x9bd1c7(0x18c)])({'passthrough':!![]})),__param(0x1,(0x0,common_1[a145_0x9bd1c7(0x163)])()),__metadata(a145_0x9bd1c7(0x18d),Function),__metadata(a145_0x9bd1c7(0x196),[Object,text_dto_1[a145_0x9bd1c7(0x183)]]),__metadata(a145_0x9bd1c7(0x170),Promise)],TextToAudioController[a145_0x9bd1c7(0x181)],a145_0x9bd1c7(0x164),null),__decorate([(0x0,common_1[a145_0x9bd1c7(0x185)])(a145_0x9bd1c7(0x17e)),(0x0,common_1[a145_0x9bd1c7(0x18e)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a145_0x9bd1c7(0x189)]),(0x0,roles_decorator_1[a145_0x9bd1c7(0x155)])(role_enum_1[a145_0x9bd1c7(0x18f)][a145_0x9bd1c7(0x147)],role_enum_1[a145_0x9bd1c7(0x18f)][a145_0x9bd1c7(0x14a)]),__metadata('design:type',Function),__metadata(a145_0x9bd1c7(0x196),[]),__metadata(a145_0x9bd1c7(0x170),Promise)],TextToAudioController[a145_0x9bd1c7(0x181)],a145_0x9bd1c7(0x195),null),__decorate([(0x0,common_1[a145_0x9bd1c7(0x179)])('/:id'),(0x0,common_1[a145_0x9bd1c7(0x18e)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1['Roles'])(role_enum_1[a145_0x9bd1c7(0x18f)][a145_0x9bd1c7(0x147)],role_enum_1[a145_0x9bd1c7(0x18f)][a145_0x9bd1c7(0x14a)]),__param(0x0,(0x0,common_1[a145_0x9bd1c7(0x190)])('id')),__metadata(a145_0x9bd1c7(0x18d),Function),__metadata(a145_0x9bd1c7(0x196),[String]),__metadata('design:returntype',void 0x0)],TextToAudioController[a145_0x9bd1c7(0x181)],a145_0x9bd1c7(0x161),null),__decorate([(0x0,common_1[a145_0x9bd1c7(0x169)])(a145_0x9bd1c7(0x14e)),(0x0,common_1[a145_0x9bd1c7(0x18e)])(jwt_guard_1[a145_0x9bd1c7(0x15b)],roles_guard_1[a145_0x9bd1c7(0x189)]),(0x0,roles_decorator_1[a145_0x9bd1c7(0x155)])(role_enum_1[a145_0x9bd1c7(0x18f)][a145_0x9bd1c7(0x147)],role_enum_1['Role'][a145_0x9bd1c7(0x14a)]),__param(0x0,(0x0,common_1['Param'])('id')),__param(0x1,(0x0,common_1[a145_0x9bd1c7(0x163)])()),__metadata(a145_0x9bd1c7(0x18d),Function),__metadata('design:paramtypes',[String,text_dto_1[a145_0x9bd1c7(0x183)]]),__metadata(a145_0x9bd1c7(0x170),void 0x0)],TextToAudioController['prototype'],a145_0x9bd1c7(0x187),null),TextToAudioController=TextToAudioController_1=__decorate([(0x0,common_1[a145_0x9bd1c7(0x148)])('textToAudio'),__metadata(a145_0x9bd1c7(0x196),[text_to_audio_service_1[a145_0x9bd1c7(0x14f)],streaming_service_1[a145_0x9bd1c7(0x15c)]])],TextToAudioController),exports[a145_0x9bd1c7(0x156)]=TextToAudioController;