'use strict';const a142_0x14f16f=a142_0x1be8;function a142_0x1be8(_0x1700cb,_0x3a990b){const _0x3ef362=a142_0x3ef3();return a142_0x1be8=function(_0x1be880,_0x71fdde){_0x1be880=_0x1be880-0xe6;let _0x2e0879=_0x3ef362[_0x1be880];return _0x2e0879;},a142_0x1be8(_0x1700cb,_0x3a990b);}(function(_0x51da19,_0x50e74b){const _0x1f56c1=a142_0x1be8,_0x2a6347=_0x51da19();while(!![]){try{const _0x4b0f5c=parseInt(_0x1f56c1(0xfc))/0x1*(parseInt(_0x1f56c1(0xe6))/0x2)+parseInt(_0x1f56c1(0x10f))/0x3*(parseInt(_0x1f56c1(0x121))/0x4)+parseInt(_0x1f56c1(0x102))/0x5+parseInt(_0x1f56c1(0x109))/0x6*(parseInt(_0x1f56c1(0x111))/0x7)+parseInt(_0x1f56c1(0x12a))/0x8+-parseInt(_0x1f56c1(0x100))/0x9+-parseInt(_0x1f56c1(0xee))/0xa;if(_0x4b0f5c===_0x50e74b)break;else _0x2a6347['push'](_0x2a6347['shift']());}catch(_0x231552){_0x2a6347['push'](_0x2a6347['shift']());}}}(a142_0x3ef3,0xdb20a));var __decorate=this&&this[a142_0x14f16f(0x126)]||function(_0x61bef6,_0x24f140,_0x5a9b3e,_0x393b47){const _0x562d6d=a142_0x14f16f;var _0x4b1236=arguments[_0x562d6d(0xef)],_0x321a8c=_0x4b1236<0x3?_0x24f140:_0x393b47===null?_0x393b47=Object['getOwnPropertyDescriptor'](_0x24f140,_0x5a9b3e):_0x393b47,_0x160875;if(typeof Reflect===_0x562d6d(0x127)&&typeof Reflect[_0x562d6d(0x103)]===_0x562d6d(0x104))_0x321a8c=Reflect[_0x562d6d(0x103)](_0x61bef6,_0x24f140,_0x5a9b3e,_0x393b47);else{for(var _0x1826ce=_0x61bef6[_0x562d6d(0xef)]-0x1;_0x1826ce>=0x0;_0x1826ce--)if(_0x160875=_0x61bef6[_0x1826ce])_0x321a8c=(_0x4b1236<0x3?_0x160875(_0x321a8c):_0x4b1236>0x3?_0x160875(_0x24f140,_0x5a9b3e,_0x321a8c):_0x160875(_0x24f140,_0x5a9b3e))||_0x321a8c;}return _0x4b1236>0x3&&_0x321a8c&&Object[_0x562d6d(0x125)](_0x24f140,_0x5a9b3e,_0x321a8c),_0x321a8c;},__metadata=this&&this[a142_0x14f16f(0xf2)]||function(_0x50ce29,_0x5e5a26){const _0x31c267=a142_0x14f16f;if(typeof Reflect===_0x31c267(0x127)&&typeof Reflect[_0x31c267(0x112)]===_0x31c267(0x104))return Reflect[_0x31c267(0x112)](_0x50ce29,_0x5e5a26);},__param=this&&this['__param']||function(_0x2b8dff,_0x208ca3){return function(_0x13a68c,_0x2c731a){_0x208ca3(_0x13a68c,_0x2c731a,_0x2b8dff);};},TextToAudioController_1;Object[a142_0x14f16f(0x125)](exports,a142_0x14f16f(0xf0),{'value':!![]}),exports[a142_0x14f16f(0xed)]=void 0x0;const common_1=require(a142_0x14f16f(0x130)),text_to_audio_service_1=require(a142_0x14f16f(0xff)),text_dto_1=require(a142_0x14f16f(0x128)),streaming_service_1=require(a142_0x14f16f(0xf4)),roles_decorator_1=require(a142_0x14f16f(0x110)),role_enum_1=require(a142_0x14f16f(0x106)),jwt_guard_1=require(a142_0x14f16f(0xf8)),roles_guard_1=require('../auth/guards/roles.guard'),saveStreamToFile_1=require('./saveStreamToFile'),path=require(a142_0x14f16f(0x107)),path_1=require(a142_0x14f16f(0x115)),constants_1=require(a142_0x14f16f(0xf1)),file_1=require('../common/file'),audio_player_1=require(a142_0x14f16f(0x116));let TextToAudioController=TextToAudioController_1=class TextToAudioController{constructor(_0xaa67e7,_0x2c5629){const _0x749d02=a142_0x14f16f;this[_0x749d02(0x12e)]=_0xaa67e7,this[_0x749d02(0x124)]=_0x2c5629,this[_0x749d02(0xf6)]=new common_1[(_0x749d02(0xea))](TextToAudioController_1['name']);}async[a142_0x14f16f(0x119)](_0x2dd55e,_0xa50a35){const _0x366afb=a142_0x14f16f;try{const _0x5b5399=_0xa50a35[_0x366afb(0xe8)];if(!_0x5b5399){_0x2dd55e[_0x366afb(0x122)]('There\x20is\x20no\x20message\x20to\x20play');return;}const {id:_0x3f2982,volume:_0xa0d13f}=await this[_0x366afb(0x12e)][_0x366afb(0x129)](_0x5b5399);!(0x0,file_1[_0x366afb(0x131)])(constants_1[_0x366afb(0x10b)])&&(0x0,file_1['createFolder'])(constants_1[_0x366afb(0x10b)]);const _0x10baab=path[_0x366afb(0xfd)](path_1[_0x366afb(0xe7)],constants_1[_0x366afb(0x10b)]),_0x17d4f4=_0x10baab+'/'+_0x3f2982+_0x366afb(0x10c);!(0x0,file_1[_0x366afb(0x131)])(_0x17d4f4)?await this[_0x366afb(0x12e)][_0x366afb(0x12d)](_0xa50a35[_0x366afb(0xe8)],async _0x5b4542=>{const _0x38039f=_0x366afb;await(0x0,saveStreamToFile_1[_0x38039f(0x10e)])(_0x5b4542,_0x10baab+'/'+_0x3f2982+_0x38039f(0x10c)),audio_player_1[_0x38039f(0x118)]['play'](_0x17d4f4,_0xa0d13f!==null&&_0xa0d13f!==void 0x0?_0xa0d13f:0x32);}):audio_player_1[_0x366afb(0x118)][_0x366afb(0xeb)](_0x17d4f4,_0xa0d13f!==null&&_0xa0d13f!==void 0x0?_0xa0d13f:0x32),_0x2dd55e['send']('Success\x20play\x20text\x20to\x20audio:\x20'+_0xa50a35[_0x366afb(0xe8)]);}catch(_0x4c8454){return this[_0x366afb(0xf6)][_0x366afb(0x123)](_0x4c8454,_0x366afb(0xf7)),'';}}async[a142_0x14f16f(0x129)](_0x3d962a,_0x2de719){const _0x14d2b5=a142_0x14f16f;try{const _0x4e3430=_0x2de719[_0x14d2b5(0xe8)];if(!_0x4e3430){_0x3d962a[_0x14d2b5(0x122)]('There\x20is\x20no\x20message\x20to\x20play');return;}await this['textToAudioService'][_0x14d2b5(0x129)](_0x4e3430),_0x3d962a[_0x14d2b5(0x122)](_0x14d2b5(0x11a)+_0x2de719[_0x14d2b5(0xe8)]);}catch(_0xa6deee){return this[_0x14d2b5(0xf6)]['log'](_0xa6deee,_0x14d2b5(0x12b)),'';}}async[a142_0x14f16f(0x132)](){const _0x408e0d=a142_0x14f16f;try{const _0x4d0272=await this[_0x408e0d(0x12e)][_0x408e0d(0x11e)]();return _0x4d0272!==null&&_0x4d0272!==void 0x0?_0x4d0272:[];}catch(_0x4ec48a){return this[_0x408e0d(0xf6)][_0x408e0d(0x123)](_0x4ec48a,_0x408e0d(0xf7)),'';}}[a142_0x14f16f(0x12c)](_0x23d8c9){const _0x32e1c2=a142_0x14f16f;return this[_0x32e1c2(0x12e)]['deleteTextMessage'](_0x23d8c9);}[a142_0x14f16f(0x108)](_0x200d6c,_0x3adf1b){const _0x4c3a72=a142_0x14f16f;var _0x361c32;return this['textToAudioService']['updateTextMessage'](_0x200d6c,Object['assign'](Object[_0x4c3a72(0x135)]({},_0x3adf1b),{'volume':(_0x361c32=_0x3adf1b[_0x4c3a72(0x120)])!==null&&_0x361c32!==void 0x0?_0x361c32:0x32}));}};__decorate([(0x0,common_1[a142_0x14f16f(0xfb)])('/'),(0x0,common_1[a142_0x14f16f(0x12f)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a142_0x14f16f(0xf5)]),(0x0,roles_decorator_1['Roles'])(role_enum_1[a142_0x14f16f(0x11f)]['Admin'],role_enum_1[a142_0x14f16f(0x11f)]['User']),__param(0x0,(0x0,common_1[a142_0x14f16f(0xf9)])({'passthrough':!![]})),__param(0x1,(0x0,common_1[a142_0x14f16f(0x11b)])()),__metadata(a142_0x14f16f(0xf3),Function),__metadata(a142_0x14f16f(0xfa),[Object,text_dto_1[a142_0x14f16f(0xe9)]]),__metadata(a142_0x14f16f(0x114),Promise)],TextToAudioController[a142_0x14f16f(0x133)],a142_0x14f16f(0x119),null),__decorate([(0x0,common_1['Post'])(a142_0x14f16f(0x129)),(0x0,common_1['UseGuards'])(jwt_guard_1[a142_0x14f16f(0x10d)],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1[a142_0x14f16f(0xec)])(role_enum_1[a142_0x14f16f(0x11f)][a142_0x14f16f(0x10a)],role_enum_1[a142_0x14f16f(0x11f)][a142_0x14f16f(0x113)]),__param(0x0,(0x0,common_1[a142_0x14f16f(0xf9)])({'passthrough':!![]})),__param(0x1,(0x0,common_1[a142_0x14f16f(0x11b)])()),__metadata(a142_0x14f16f(0xf3),Function),__metadata(a142_0x14f16f(0xfa),[Object,text_dto_1[a142_0x14f16f(0xe9)]]),__metadata('design:returntype',Promise)],TextToAudioController[a142_0x14f16f(0x133)],a142_0x14f16f(0x129),null),__decorate([(0x0,common_1[a142_0x14f16f(0x117)])(a142_0x14f16f(0x134)),(0x0,common_1[a142_0x14f16f(0x12f)])(jwt_guard_1[a142_0x14f16f(0x10d)],roles_guard_1[a142_0x14f16f(0xf5)]),(0x0,roles_decorator_1['Roles'])(role_enum_1[a142_0x14f16f(0x11f)][a142_0x14f16f(0x10a)],role_enum_1['Role']['User']),__metadata(a142_0x14f16f(0xf3),Function),__metadata(a142_0x14f16f(0xfa),[]),__metadata('design:returntype',Promise)],TextToAudioController[a142_0x14f16f(0x133)],a142_0x14f16f(0x132),null),__decorate([(0x0,common_1[a142_0x14f16f(0x101)])(a142_0x14f16f(0x11c)),(0x0,common_1[a142_0x14f16f(0x12f)])(jwt_guard_1[a142_0x14f16f(0x10d)],roles_guard_1[a142_0x14f16f(0xf5)]),(0x0,roles_decorator_1[a142_0x14f16f(0xec)])(role_enum_1['Role'][a142_0x14f16f(0x10a)],role_enum_1[a142_0x14f16f(0x11f)][a142_0x14f16f(0x113)]),__param(0x0,(0x0,common_1[a142_0x14f16f(0x11d)])('id')),__metadata(a142_0x14f16f(0xf3),Function),__metadata(a142_0x14f16f(0xfa),[String]),__metadata(a142_0x14f16f(0x114),void 0x0)],TextToAudioController['prototype'],a142_0x14f16f(0x12c),null),__decorate([(0x0,common_1[a142_0x14f16f(0xfe)])(a142_0x14f16f(0x11c)),(0x0,common_1[a142_0x14f16f(0x12f)])(jwt_guard_1[a142_0x14f16f(0x10d)],roles_guard_1[a142_0x14f16f(0xf5)]),(0x0,roles_decorator_1[a142_0x14f16f(0xec)])(role_enum_1[a142_0x14f16f(0x11f)][a142_0x14f16f(0x10a)],role_enum_1['Role']['User']),__param(0x0,(0x0,common_1[a142_0x14f16f(0x11d)])('id')),__param(0x1,(0x0,common_1['Body'])()),__metadata(a142_0x14f16f(0xf3),Function),__metadata('design:paramtypes',[String,text_dto_1[a142_0x14f16f(0xe9)]]),__metadata(a142_0x14f16f(0x114),void 0x0)],TextToAudioController['prototype'],a142_0x14f16f(0x108),null),TextToAudioController=TextToAudioController_1=__decorate([(0x0,common_1['Controller'])(a142_0x14f16f(0x12d)),__metadata('design:paramtypes',[text_to_audio_service_1['TextToAudioService'],streaming_service_1[a142_0x14f16f(0x105)]])],TextToAudioController),exports['TextToAudioController']=TextToAudioController;function a142_0x3ef3(){const _0x409496=['./dtos/text.dto','saveMessage','9333888PpniPb','error\x20','deleteTextMessage','textToAudio','textToAudioService','UseGuards','@nestjs/common','isFileExist','getAllMessage','prototype','/message','assign','56944pLdqKq','processRootPath','text','TextDTO','Logger','play','Roles','TextToAudioController','36394020agJIWB','length','__esModule','../common/constants','__metadata','design:type','../streaming/streaming.service','RolesGuard','logger','error','../auth/guards/jwt.guard','Res','design:paramtypes','Post','20oQcuHF','join','Put','./text-to-audio.service','5502357vORmhq','Delete','4210410PrQFVP','decorate','function','StreamingService','../auth/enums/role.enum','path','updateTextMessage','6zvsFyP','Admin','AUDIO_TO_MESSAGE_DIR','.wav','JwtAuthGuard','saveStreamToFile','20334jokcWH','../auth/decorators/roles.decorator','6508509MwNWwS','metadata','User','design:returntype','../common/path','../common/audio/audio-player','Get','AudioPlayer','playAudioFile','Success\x20save\x20text:\x20','Body','/:id','Param','getMessages','Role','volume','968kKEnHQ','send','log','streamingService','defineProperty','__decorate','object'];a142_0x3ef3=function(){return _0x409496;};return a142_0x3ef3();}