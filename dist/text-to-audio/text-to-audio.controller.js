'use strict';const a145_0x5255c8=a145_0x2c7b;(function(_0x43fb48,_0x33237b){const _0x5709e8=a145_0x2c7b,_0x67a083=_0x43fb48();while(!![]){try{const _0x542b0b=parseInt(_0x5709e8(0x142))/0x1*(-parseInt(_0x5709e8(0x138))/0x2)+parseInt(_0x5709e8(0x156))/0x3+parseInt(_0x5709e8(0x13d))/0x4+parseInt(_0x5709e8(0x153))/0x5+parseInt(_0x5709e8(0x116))/0x6+-parseInt(_0x5709e8(0x124))/0x7*(parseInt(_0x5709e8(0x12f))/0x8)+-parseInt(_0x5709e8(0x147))/0x9;if(_0x542b0b===_0x33237b)break;else _0x67a083['push'](_0x67a083['shift']());}catch(_0x53fe28){_0x67a083['push'](_0x67a083['shift']());}}}(a145_0x2ba1,0x660df));function a145_0x2c7b(_0x34839f,_0x2dd97a){const _0x2ba194=a145_0x2ba1();return a145_0x2c7b=function(_0x2c7bf1,_0x39a5cd){_0x2c7bf1=_0x2c7bf1-0x10b;let _0x12a295=_0x2ba194[_0x2c7bf1];return _0x12a295;},a145_0x2c7b(_0x34839f,_0x2dd97a);}var __decorate=this&&this['__decorate']||function(_0x2a5d7d,_0xdaf381,_0x5b4b06,_0x2fb5f4){const _0x42969e=a145_0x2c7b;var _0xdd76ae=arguments[_0x42969e(0x121)],_0x1f2786=_0xdd76ae<0x3?_0xdaf381:_0x2fb5f4===null?_0x2fb5f4=Object['getOwnPropertyDescriptor'](_0xdaf381,_0x5b4b06):_0x2fb5f4,_0x5b36b6;if(typeof Reflect===_0x42969e(0x152)&&typeof Reflect[_0x42969e(0x13e)]===_0x42969e(0x14d))_0x1f2786=Reflect['decorate'](_0x2a5d7d,_0xdaf381,_0x5b4b06,_0x2fb5f4);else{for(var _0x5066ab=_0x2a5d7d[_0x42969e(0x121)]-0x1;_0x5066ab>=0x0;_0x5066ab--)if(_0x5b36b6=_0x2a5d7d[_0x5066ab])_0x1f2786=(_0xdd76ae<0x3?_0x5b36b6(_0x1f2786):_0xdd76ae>0x3?_0x5b36b6(_0xdaf381,_0x5b4b06,_0x1f2786):_0x5b36b6(_0xdaf381,_0x5b4b06))||_0x1f2786;}return _0xdd76ae>0x3&&_0x1f2786&&Object[_0x42969e(0x14b)](_0xdaf381,_0x5b4b06,_0x1f2786),_0x1f2786;},__metadata=this&&this['__metadata']||function(_0x5b5f61,_0x8701fb){const _0x1190f6=a145_0x2c7b;if(typeof Reflect===_0x1190f6(0x152)&&typeof Reflect['metadata']===_0x1190f6(0x14d))return Reflect[_0x1190f6(0x154)](_0x5b5f61,_0x8701fb);},__param=this&&this[a145_0x5255c8(0x13f)]||function(_0x47cfb5,_0x2cf6c3){return function(_0x2b8a4e,_0x2ee3e5){_0x2cf6c3(_0x2b8a4e,_0x2ee3e5,_0x47cfb5);};},TextToAudioController_1;Object[a145_0x5255c8(0x14b)](exports,'__esModule',{'value':!![]}),exports['TextToAudioController']=void 0x0;const common_1=require(a145_0x5255c8(0x126)),text_to_audio_service_1=require(a145_0x5255c8(0x12d)),text_dto_1=require(a145_0x5255c8(0x12c)),streaming_service_1=require('../streaming/streaming.service'),roles_decorator_1=require(a145_0x5255c8(0x10f)),role_enum_1=require(a145_0x5255c8(0x130)),jwt_guard_1=require(a145_0x5255c8(0x12b)),roles_guard_1=require(a145_0x5255c8(0x158)),saveStreamToFile_1=require(a145_0x5255c8(0x133)),path=require(a145_0x5255c8(0x127)),path_1=require(a145_0x5255c8(0x146)),constants_1=require(a145_0x5255c8(0x113)),file_1=require(a145_0x5255c8(0x141)),audio_player_1=require('../common/audio/audio-player');let TextToAudioController=TextToAudioController_1=class TextToAudioController{constructor(_0x5c90ee,_0x461542){const _0x54c453=a145_0x5255c8;this[_0x54c453(0x122)]=_0x5c90ee,this['streamingService']=_0x461542,this['logger']=new common_1[(_0x54c453(0x14f))](TextToAudioController_1[_0x54c453(0x10b)]);}async['playAudioFile'](_0x211fca,_0x4ff086){const _0xdbf539=a145_0x5255c8;try{const _0x1c14e2=_0x4ff086[_0xdbf539(0x14a)];if(!_0x1c14e2){_0x211fca[_0xdbf539(0x136)](_0xdbf539(0x140));return;}const {id:_0x42a0ab,volume:_0xd84302}=await this[_0xdbf539(0x122)][_0xdbf539(0x120)](_0x1c14e2);!(0x0,file_1['isFileExist'])(constants_1[_0xdbf539(0x10d)])&&(0x0,file_1[_0xdbf539(0x119)])(constants_1[_0xdbf539(0x10d)]);const _0x5beaef=path[_0xdbf539(0x14e)](path_1[_0xdbf539(0x128)],constants_1[_0xdbf539(0x10d)]),_0xb03ede=_0x5beaef+'/'+_0x42a0ab+'.wav';!(0x0,file_1[_0xdbf539(0x11e)])(_0xb03ede)?await this[_0xdbf539(0x122)][_0xdbf539(0x148)](_0x4ff086['text'],async _0x423318=>{const _0x44d7a4=_0xdbf539;await(0x0,saveStreamToFile_1[_0x44d7a4(0x129)])(_0x423318,_0x5beaef+'/'+_0x42a0ab+'.wav'),audio_player_1[_0x44d7a4(0x123)]['play'](_0xb03ede,_0xd84302!==null&&_0xd84302!==void 0x0?_0xd84302:0x32);}):audio_player_1[_0xdbf539(0x123)][_0xdbf539(0x118)](_0xb03ede,_0xd84302!==null&&_0xd84302!==void 0x0?_0xd84302:0x32),_0x211fca['send']('Success\x20play\x20text\x20to\x20audio:\x20'+_0x4ff086['text']);}catch(_0x78fe27){return this[_0xdbf539(0x151)][_0xdbf539(0x12e)](_0x78fe27,_0xdbf539(0x11a)),'';}}async[a145_0x5255c8(0x120)](_0x258e7f,_0x2205c1){const _0xf432e0=a145_0x5255c8;try{const _0x2f2f3d=_0x2205c1[_0xf432e0(0x14a)];if(!_0x2f2f3d){_0x258e7f[_0xf432e0(0x136)](_0xf432e0(0x140));return;}await this[_0xf432e0(0x122)]['saveMessage'](_0x2f2f3d),_0x258e7f['send'](_0xf432e0(0x13b)+_0x2205c1['text']);}catch(_0x26e032){return this[_0xf432e0(0x151)][_0xf432e0(0x12e)](_0x26e032,_0xf432e0(0x117)),'';}}async[a145_0x5255c8(0x144)](){const _0x449277=a145_0x5255c8;try{const _0x2e372f=await this[_0x449277(0x122)]['getMessages']();return _0x2e372f!==null&&_0x2e372f!==void 0x0?_0x2e372f:[];}catch(_0x3a51cf){return this[_0x449277(0x151)][_0x449277(0x12e)](_0x3a51cf,'error'),'';}}[a145_0x5255c8(0x11d)](_0x1531a4){const _0x21d2fb=a145_0x5255c8;return this[_0x21d2fb(0x122)][_0x21d2fb(0x11d)](_0x1531a4);}[a145_0x5255c8(0x150)](_0x44fb00,_0x218fc1){const _0x243a37=a145_0x5255c8;var _0x12169a;return this[_0x243a37(0x122)]['updateTextMessage'](_0x44fb00,Object[_0x243a37(0x11f)](Object['assign']({},_0x218fc1),{'volume':(_0x12169a=_0x218fc1[_0x243a37(0x159)])!==null&&_0x12169a!==void 0x0?_0x12169a:0x32}));}};__decorate([(0x0,common_1[a145_0x5255c8(0x10c)])('/'),(0x0,common_1[a145_0x5255c8(0x132)])(jwt_guard_1[a145_0x5255c8(0x13c)],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1[a145_0x5255c8(0x145)])(role_enum_1[a145_0x5255c8(0x125)][a145_0x5255c8(0x12a)],role_enum_1['Role'][a145_0x5255c8(0x137)]),__param(0x0,(0x0,common_1[a145_0x5255c8(0x11b)])({'passthrough':!![]})),__param(0x1,(0x0,common_1[a145_0x5255c8(0x143)])()),__metadata(a145_0x5255c8(0x115),Function),__metadata(a145_0x5255c8(0x13a),[Object,text_dto_1[a145_0x5255c8(0x139)]]),__metadata(a145_0x5255c8(0x112),Promise)],TextToAudioController[a145_0x5255c8(0x135)],a145_0x5255c8(0x110),null),__decorate([(0x0,common_1[a145_0x5255c8(0x10c)])(a145_0x5255c8(0x120)),(0x0,common_1[a145_0x5255c8(0x132)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a145_0x5255c8(0x134)]),(0x0,roles_decorator_1['Roles'])(role_enum_1[a145_0x5255c8(0x125)][a145_0x5255c8(0x12a)],role_enum_1[a145_0x5255c8(0x125)][a145_0x5255c8(0x137)]),__param(0x0,(0x0,common_1['Res'])({'passthrough':!![]})),__param(0x1,(0x0,common_1[a145_0x5255c8(0x143)])()),__metadata(a145_0x5255c8(0x115),Function),__metadata(a145_0x5255c8(0x13a),[Object,text_dto_1['TextDTO']]),__metadata(a145_0x5255c8(0x112),Promise)],TextToAudioController[a145_0x5255c8(0x135)],a145_0x5255c8(0x120),null),__decorate([(0x0,common_1['Get'])(a145_0x5255c8(0x131)),(0x0,common_1[a145_0x5255c8(0x132)])(jwt_guard_1[a145_0x5255c8(0x13c)],roles_guard_1[a145_0x5255c8(0x134)]),(0x0,roles_decorator_1[a145_0x5255c8(0x145)])(role_enum_1[a145_0x5255c8(0x125)]['Admin'],role_enum_1[a145_0x5255c8(0x125)]['User']),__metadata(a145_0x5255c8(0x115),Function),__metadata(a145_0x5255c8(0x13a),[]),__metadata('design:returntype',Promise)],TextToAudioController[a145_0x5255c8(0x135)],a145_0x5255c8(0x144),null),__decorate([(0x0,common_1[a145_0x5255c8(0x155)])(a145_0x5255c8(0x149)),(0x0,common_1[a145_0x5255c8(0x132)])(jwt_guard_1[a145_0x5255c8(0x13c)],roles_guard_1[a145_0x5255c8(0x134)]),(0x0,roles_decorator_1[a145_0x5255c8(0x145)])(role_enum_1[a145_0x5255c8(0x125)][a145_0x5255c8(0x12a)],role_enum_1[a145_0x5255c8(0x125)][a145_0x5255c8(0x137)]),__param(0x0,(0x0,common_1[a145_0x5255c8(0x11c)])('id')),__metadata('design:type',Function),__metadata(a145_0x5255c8(0x13a),[String]),__metadata(a145_0x5255c8(0x112),void 0x0)],TextToAudioController[a145_0x5255c8(0x135)],a145_0x5255c8(0x11d),null),__decorate([(0x0,common_1[a145_0x5255c8(0x114)])('/:id'),(0x0,common_1['UseGuards'])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a145_0x5255c8(0x134)]),(0x0,roles_decorator_1['Roles'])(role_enum_1[a145_0x5255c8(0x125)]['Admin'],role_enum_1[a145_0x5255c8(0x125)][a145_0x5255c8(0x137)]),__param(0x0,(0x0,common_1[a145_0x5255c8(0x11c)])('id')),__param(0x1,(0x0,common_1['Body'])()),__metadata(a145_0x5255c8(0x115),Function),__metadata('design:paramtypes',[String,text_dto_1[a145_0x5255c8(0x139)]]),__metadata(a145_0x5255c8(0x112),void 0x0)],TextToAudioController['prototype'],a145_0x5255c8(0x150),null),TextToAudioController=TextToAudioController_1=__decorate([(0x0,common_1[a145_0x5255c8(0x14c)])(a145_0x5255c8(0x148)),__metadata('design:paramtypes',[text_to_audio_service_1[a145_0x5255c8(0x10e)],streaming_service_1[a145_0x5255c8(0x111)]])],TextToAudioController),exports[a145_0x5255c8(0x157)]=TextToAudioController;function a145_0x2ba1(){const _0x546ef6=['error','Res','Param','deleteTextMessage','isFileExist','assign','saveMessage','length','textToAudioService','AudioPlayer','13958DdLngX','Role','@nestjs/common','path','processRootPath','saveStreamToFile','Admin','../auth/guards/jwt.guard','./dtos/text.dto','./text-to-audio.service','log','248pOmSFP','../auth/enums/role.enum','/message','UseGuards','./saveStreamToFile','RolesGuard','prototype','send','User','4jiamKW','TextDTO','design:paramtypes','Success\x20save\x20text:\x20','JwtAuthGuard','2053912WZzVYt','decorate','__param','There\x20is\x20no\x20message\x20to\x20play','../common/file','146737ZWlbjI','Body','getAllMessage','Roles','../common/path','13827114NXTvlz','textToAudio','/:id','text','defineProperty','Controller','function','join','Logger','updateTextMessage','logger','object','1728095NFHLHR','metadata','Delete','1989573uraUuJ','TextToAudioController','../auth/guards/roles.guard','volume','name','Post','AUDIO_TO_MESSAGE_DIR','TextToAudioService','../auth/decorators/roles.decorator','playAudioFile','StreamingService','design:returntype','../common/constants','Put','design:type','4724166VuVTsT','error\x20','play','createFolder'];a145_0x2ba1=function(){return _0x546ef6;};return a145_0x2ba1();}