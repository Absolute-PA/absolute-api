'use strict';const a142_0xe285e7=a142_0x4f72;(function(_0x1a505a,_0x1e85af){const _0x44aa54=a142_0x4f72,_0x1b9249=_0x1a505a();while(!![]){try{const _0x38bc1e=parseInt(_0x44aa54(0x222))/0x1*(parseInt(_0x44aa54(0x207))/0x2)+parseInt(_0x44aa54(0x214))/0x3+-parseInt(_0x44aa54(0x1f2))/0x4*(-parseInt(_0x44aa54(0x21a))/0x5)+parseInt(_0x44aa54(0x20b))/0x6+-parseInt(_0x44aa54(0x21b))/0x7+-parseInt(_0x44aa54(0x226))/0x8*(-parseInt(_0x44aa54(0x233))/0x9)+-parseInt(_0x44aa54(0x236))/0xa;if(_0x38bc1e===_0x1e85af)break;else _0x1b9249['push'](_0x1b9249['shift']());}catch(_0x5a6f9d){_0x1b9249['push'](_0x1b9249['shift']());}}}(a142_0x9453,0x65ac5));function a142_0x9453(){const _0xcb375b=['../auth/decorators/roles.decorator','__metadata','design:returntype','createFolder','metadata','AudioPlayer','deleteTextMessage','189YTZpwI','TextToAudioService','../common/audio/audio-player','11770870SKIjpg','Admin','playAudioFile','../streaming/streaming.service','./text-to-audio.service','saveMessage','/:id','Body','prototype','streamingService','join','../auth/guards/jwt.guard','path','../common/path','115356RvTCto','getAllMessage','Post','text','send','__param','UseGuards','User','There\x20is\x20no\x20message\x20to\x20play','length','Res','updateTextMessage','../common/constants','isFileExist','design:paramtypes','Role','Logger','Put','error','logger','__decorate','10086hFqUGs','function','decorate','assign','3963894hINbLo','./saveStreamToFile','defineProperty','Param','../common/file','@nestjs/common','Controller','../auth/guards/roles.guard','Delete','1124472bOQVVv','TextToAudioController','Get','AUDIO_TO_MESSAGE_DIR','object','__esModule','75MvRtVC','83489pQEdot','../auth/enums/role.enum','TextDTO','JwtAuthGuard','/message','volume','RolesGuard','9CEapgW','log','StreamingService','processRootPath','35056WicfEC','textToAudioService','Success\x20save\x20text:\x20','Roles','getMessages','design:type'];a142_0x9453=function(){return _0xcb375b;};return a142_0x9453();}var __decorate=this&&this[a142_0xe285e7(0x206)]||function(_0x290538,_0x370277,_0x47c7e0,_0x3d1b0d){const _0x596962=a142_0xe285e7;var _0x4f485f=arguments['length'],_0x2209cc=_0x4f485f<0x3?_0x370277:_0x3d1b0d===null?_0x3d1b0d=Object['getOwnPropertyDescriptor'](_0x370277,_0x47c7e0):_0x3d1b0d,_0x49ef46;if(typeof Reflect===_0x596962(0x218)&&typeof Reflect[_0x596962(0x209)]===_0x596962(0x208))_0x2209cc=Reflect[_0x596962(0x209)](_0x290538,_0x370277,_0x47c7e0,_0x3d1b0d);else{for(var _0x39ef18=_0x290538[_0x596962(0x1fb)]-0x1;_0x39ef18>=0x0;_0x39ef18--)if(_0x49ef46=_0x290538[_0x39ef18])_0x2209cc=(_0x4f485f<0x3?_0x49ef46(_0x2209cc):_0x4f485f>0x3?_0x49ef46(_0x370277,_0x47c7e0,_0x2209cc):_0x49ef46(_0x370277,_0x47c7e0))||_0x2209cc;}return _0x4f485f>0x3&&_0x2209cc&&Object[_0x596962(0x20d)](_0x370277,_0x47c7e0,_0x2209cc),_0x2209cc;},__metadata=this&&this[a142_0xe285e7(0x22d)]||function(_0x4e0094,_0x2799a7){const _0x877414=a142_0xe285e7;if(typeof Reflect===_0x877414(0x218)&&typeof Reflect['metadata']===_0x877414(0x208))return Reflect[_0x877414(0x230)](_0x4e0094,_0x2799a7);},__param=this&&this[a142_0xe285e7(0x1f7)]||function(_0x3d4bf8,_0x2b58b0){return function(_0x1e9b2a,_0x4f10cd){_0x2b58b0(_0x1e9b2a,_0x4f10cd,_0x3d4bf8);};},TextToAudioController_1;function a142_0x4f72(_0x1e1853,_0x146564){const _0x9453b0=a142_0x9453();return a142_0x4f72=function(_0x4f7213,_0xe3c9c5){_0x4f7213=_0x4f7213-0x1e5;let _0x52b319=_0x9453b0[_0x4f7213];return _0x52b319;},a142_0x4f72(_0x1e1853,_0x146564);}Object[a142_0xe285e7(0x20d)](exports,a142_0xe285e7(0x219),{'value':!![]}),exports[a142_0xe285e7(0x215)]=void 0x0;const common_1=require(a142_0xe285e7(0x210)),text_to_audio_service_1=require(a142_0xe285e7(0x1e8)),text_dto_1=require('./dtos/text.dto'),streaming_service_1=require(a142_0xe285e7(0x1e7)),roles_decorator_1=require(a142_0xe285e7(0x22c)),role_enum_1=require(a142_0xe285e7(0x21c)),jwt_guard_1=require(a142_0xe285e7(0x1ef)),roles_guard_1=require(a142_0xe285e7(0x212)),saveStreamToFile_1=require(a142_0xe285e7(0x20c)),path=require(a142_0xe285e7(0x1f0)),path_1=require(a142_0xe285e7(0x1f1)),constants_1=require(a142_0xe285e7(0x1fe)),file_1=require(a142_0xe285e7(0x20f)),audio_player_1=require(a142_0xe285e7(0x235));let TextToAudioController=TextToAudioController_1=class TextToAudioController{constructor(_0x25fa88,_0x5a02e4){const _0x3a8317=a142_0xe285e7;this[_0x3a8317(0x227)]=_0x25fa88,this[_0x3a8317(0x1ed)]=_0x5a02e4,this[_0x3a8317(0x205)]=new common_1[(_0x3a8317(0x202))](TextToAudioController_1['name']);}async[a142_0xe285e7(0x1e6)](_0x1ee832,_0x510bb3){const _0xa1345b=a142_0xe285e7;try{const _0x46533c=_0x510bb3[_0xa1345b(0x1f5)];if(!_0x46533c){_0x1ee832[_0xa1345b(0x1f6)](_0xa1345b(0x1fa));return;}const {id:_0x4e4cd9,volume:_0x121ef6}=await this['textToAudioService'][_0xa1345b(0x1e9)](_0x46533c);!(0x0,file_1[_0xa1345b(0x1ff)])(constants_1[_0xa1345b(0x217)])&&(0x0,file_1[_0xa1345b(0x22f)])(constants_1[_0xa1345b(0x217)]);const _0x541eb0=path[_0xa1345b(0x1ee)](path_1[_0xa1345b(0x225)],constants_1[_0xa1345b(0x217)]),_0x40d832=_0x541eb0+'/'+_0x4e4cd9+'.wav';!(0x0,file_1[_0xa1345b(0x1ff)])(_0x40d832)?await this['textToAudioService']['textToAudio'](_0x510bb3[_0xa1345b(0x1f5)],async _0x5b8874=>{const _0x539931=_0xa1345b;await(0x0,saveStreamToFile_1['saveStreamToFile'])(_0x5b8874,_0x541eb0+'/'+_0x4e4cd9+'.wav'),audio_player_1[_0x539931(0x231)]['play'](_0x40d832,_0x121ef6!==null&&_0x121ef6!==void 0x0?_0x121ef6:0x32);}):audio_player_1['AudioPlayer']['play'](_0x40d832,_0x121ef6!==null&&_0x121ef6!==void 0x0?_0x121ef6:0x32),_0x1ee832['send']('Success\x20play\x20text\x20to\x20audio:\x20'+_0x510bb3['text']);}catch(_0x47625e){return this[_0xa1345b(0x205)][_0xa1345b(0x223)](_0x47625e,_0xa1345b(0x204)),'';}}async[a142_0xe285e7(0x1e9)](_0x52f3c0,_0x2fc133){const _0x3d1d5f=a142_0xe285e7;try{const _0x1e25d8=_0x2fc133['text'];if(!_0x1e25d8){_0x52f3c0[_0x3d1d5f(0x1f6)]('There\x20is\x20no\x20message\x20to\x20play');return;}await this[_0x3d1d5f(0x227)][_0x3d1d5f(0x1e9)](_0x1e25d8),_0x52f3c0['send'](_0x3d1d5f(0x228)+_0x2fc133[_0x3d1d5f(0x1f5)]);}catch(_0x1812a3){return this[_0x3d1d5f(0x205)][_0x3d1d5f(0x223)](_0x1812a3,'error\x20'),'';}}async[a142_0xe285e7(0x1f3)](){const _0x147b48=a142_0xe285e7;try{const _0x4a602f=await this[_0x147b48(0x227)][_0x147b48(0x22a)]();return _0x4a602f!==null&&_0x4a602f!==void 0x0?_0x4a602f:[];}catch(_0x382a19){return this[_0x147b48(0x205)][_0x147b48(0x223)](_0x382a19,_0x147b48(0x204)),'';}}[a142_0xe285e7(0x232)](_0x3903d9){const _0x15c6ee=a142_0xe285e7;return this[_0x15c6ee(0x227)][_0x15c6ee(0x232)](_0x3903d9);}[a142_0xe285e7(0x1fd)](_0x5071e0,_0x404400){const _0x109d46=a142_0xe285e7;var _0x47a430;return this[_0x109d46(0x227)]['updateTextMessage'](_0x5071e0,Object['assign'](Object[_0x109d46(0x20a)]({},_0x404400),{'volume':(_0x47a430=_0x404400[_0x109d46(0x220)])!==null&&_0x47a430!==void 0x0?_0x47a430:0x32}));}};__decorate([(0x0,common_1[a142_0xe285e7(0x1f4)])('/'),(0x0,common_1[a142_0xe285e7(0x1f8)])(jwt_guard_1[a142_0xe285e7(0x21e)],roles_guard_1[a142_0xe285e7(0x221)]),(0x0,roles_decorator_1['Roles'])(role_enum_1[a142_0xe285e7(0x201)][a142_0xe285e7(0x1e5)],role_enum_1[a142_0xe285e7(0x201)][a142_0xe285e7(0x1f9)]),__param(0x0,(0x0,common_1['Res'])({'passthrough':!![]})),__param(0x1,(0x0,common_1[a142_0xe285e7(0x1eb)])()),__metadata(a142_0xe285e7(0x22b),Function),__metadata(a142_0xe285e7(0x200),[Object,text_dto_1['TextDTO']]),__metadata(a142_0xe285e7(0x22e),Promise)],TextToAudioController[a142_0xe285e7(0x1ec)],a142_0xe285e7(0x1e6),null),__decorate([(0x0,common_1[a142_0xe285e7(0x1f4)])(a142_0xe285e7(0x1e9)),(0x0,common_1[a142_0xe285e7(0x1f8)])(jwt_guard_1[a142_0xe285e7(0x21e)],roles_guard_1[a142_0xe285e7(0x221)]),(0x0,roles_decorator_1['Roles'])(role_enum_1['Role']['Admin'],role_enum_1['Role'][a142_0xe285e7(0x1f9)]),__param(0x0,(0x0,common_1[a142_0xe285e7(0x1fc)])({'passthrough':!![]})),__param(0x1,(0x0,common_1[a142_0xe285e7(0x1eb)])()),__metadata(a142_0xe285e7(0x22b),Function),__metadata(a142_0xe285e7(0x200),[Object,text_dto_1[a142_0xe285e7(0x21d)]]),__metadata(a142_0xe285e7(0x22e),Promise)],TextToAudioController['prototype'],a142_0xe285e7(0x1e9),null),__decorate([(0x0,common_1[a142_0xe285e7(0x216)])(a142_0xe285e7(0x21f)),(0x0,common_1['UseGuards'])(jwt_guard_1['JwtAuthGuard'],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1['Roles'])(role_enum_1[a142_0xe285e7(0x201)][a142_0xe285e7(0x1e5)],role_enum_1[a142_0xe285e7(0x201)][a142_0xe285e7(0x1f9)]),__metadata(a142_0xe285e7(0x22b),Function),__metadata(a142_0xe285e7(0x200),[]),__metadata(a142_0xe285e7(0x22e),Promise)],TextToAudioController['prototype'],'getAllMessage',null),__decorate([(0x0,common_1[a142_0xe285e7(0x213)])(a142_0xe285e7(0x1ea)),(0x0,common_1['UseGuards'])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a142_0xe285e7(0x221)]),(0x0,roles_decorator_1[a142_0xe285e7(0x229)])(role_enum_1[a142_0xe285e7(0x201)][a142_0xe285e7(0x1e5)],role_enum_1[a142_0xe285e7(0x201)][a142_0xe285e7(0x1f9)]),__param(0x0,(0x0,common_1[a142_0xe285e7(0x20e)])('id')),__metadata('design:type',Function),__metadata('design:paramtypes',[String]),__metadata(a142_0xe285e7(0x22e),void 0x0)],TextToAudioController[a142_0xe285e7(0x1ec)],a142_0xe285e7(0x232),null),__decorate([(0x0,common_1[a142_0xe285e7(0x203)])('/:id'),(0x0,common_1['UseGuards'])(jwt_guard_1[a142_0xe285e7(0x21e)],roles_guard_1[a142_0xe285e7(0x221)]),(0x0,roles_decorator_1[a142_0xe285e7(0x229)])(role_enum_1[a142_0xe285e7(0x201)][a142_0xe285e7(0x1e5)],role_enum_1[a142_0xe285e7(0x201)][a142_0xe285e7(0x1f9)]),__param(0x0,(0x0,common_1[a142_0xe285e7(0x20e)])('id')),__param(0x1,(0x0,common_1[a142_0xe285e7(0x1eb)])()),__metadata(a142_0xe285e7(0x22b),Function),__metadata(a142_0xe285e7(0x200),[String,text_dto_1['TextDTO']]),__metadata('design:returntype',void 0x0)],TextToAudioController['prototype'],a142_0xe285e7(0x1fd),null),TextToAudioController=TextToAudioController_1=__decorate([(0x0,common_1[a142_0xe285e7(0x211)])('textToAudio'),__metadata(a142_0xe285e7(0x200),[text_to_audio_service_1[a142_0xe285e7(0x234)],streaming_service_1[a142_0xe285e7(0x224)]])],TextToAudioController),exports[a142_0xe285e7(0x215)]=TextToAudioController;