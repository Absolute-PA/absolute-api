'use strict';const a142_0x45b2db=a142_0x2341;(function(_0x142282,_0x2251ac){const _0x4b37ce=a142_0x2341,_0x38f905=_0x142282();while(!![]){try{const _0x525c03=parseInt(_0x4b37ce(0x14e))/0x1*(-parseInt(_0x4b37ce(0x141))/0x2)+-parseInt(_0x4b37ce(0x153))/0x3*(parseInt(_0x4b37ce(0x158))/0x4)+-parseInt(_0x4b37ce(0x13e))/0x5*(parseInt(_0x4b37ce(0x140))/0x6)+-parseInt(_0x4b37ce(0x156))/0x7+-parseInt(_0x4b37ce(0x149))/0x8+-parseInt(_0x4b37ce(0x114))/0x9*(parseInt(_0x4b37ce(0x14c))/0xa)+parseInt(_0x4b37ce(0x146))/0xb*(parseInt(_0x4b37ce(0x15a))/0xc);if(_0x525c03===_0x2251ac)break;else _0x38f905['push'](_0x38f905['shift']());}catch(_0x2fd8a4){_0x38f905['push'](_0x38f905['shift']());}}}(a142_0xec3d,0x3fde5));function a142_0xec3d(){const _0x36b3c7=['Post','Param','updateTextMessage','78SucDDo','./text-to-audio.service','length','2313542xGCAJN','textToAudio','28516EwwOQr','__metadata','6147780esRnvl','StreamingService','defineProperty','Admin','join','createFolder','../common/audio/audio-player','playAudioFile','../auth/decorators/roles.decorator','/:id','logger','assign','Controller','@nestjs/common','Res','error','Delete','126qvmSuw','getMessages','Success\x20play\x20text\x20to\x20audio:\x20','name','__decorate','textToAudioService','deleteTextMessage','./saveStreamToFile','Success\x20save\x20text:\x20','text','__esModule','RolesGuard','TextToAudioController','../streaming/streaming.service','AUDIO_TO_MESSAGE_DIR','design:returntype','Roles','UseGuards','./dtos/text.dto','saveStreamToFile','Get','__param','Body','play','../common/path','TextToAudioService','User','streamingService','object','Logger','decorate','../auth/guards/roles.guard','processRootPath','isFileExist','prototype','There\x20is\x20no\x20message\x20to\x20play','design:paramtypes','function','volume','getOwnPropertyDescriptor','.wav','TextDTO','175GtHfjJ','saveMessage','13434SlBgyG','10LfxfSy','design:type','Role','metadata','log','33owNKpe','JwtAuthGuard','../auth/enums/role.enum','2788464FkmWec','../common/constants','getAllMessage','184030pNejEI','error\x20','14983DqkEMJ','send'];a142_0xec3d=function(){return _0x36b3c7;};return a142_0xec3d();}var __decorate=this&&this[a142_0x45b2db(0x118)]||function(_0x5e3c8b,_0x511f0d,_0x3ce26d,_0x6719e3){const _0x43de36=a142_0x45b2db;var _0x3caf2a=arguments[_0x43de36(0x155)],_0x55b379=_0x3caf2a<0x3?_0x511f0d:_0x6719e3===null?_0x6719e3=Object[_0x43de36(0x13b)](_0x511f0d,_0x3ce26d):_0x6719e3,_0x1556c4;if(typeof Reflect===_0x43de36(0x130)&&typeof Reflect[_0x43de36(0x132)]===_0x43de36(0x139))_0x55b379=Reflect[_0x43de36(0x132)](_0x5e3c8b,_0x511f0d,_0x3ce26d,_0x6719e3);else{for(var _0x1a2135=_0x5e3c8b[_0x43de36(0x155)]-0x1;_0x1a2135>=0x0;_0x1a2135--)if(_0x1556c4=_0x5e3c8b[_0x1a2135])_0x55b379=(_0x3caf2a<0x3?_0x1556c4(_0x55b379):_0x3caf2a>0x3?_0x1556c4(_0x511f0d,_0x3ce26d,_0x55b379):_0x1556c4(_0x511f0d,_0x3ce26d))||_0x55b379;}return _0x3caf2a>0x3&&_0x55b379&&Object[_0x43de36(0x105)](_0x511f0d,_0x3ce26d,_0x55b379),_0x55b379;},__metadata=this&&this[a142_0x45b2db(0x159)]||function(_0x14715c,_0x57bb13){const _0x1d546e=a142_0x45b2db;if(typeof Reflect==='object'&&typeof Reflect[_0x1d546e(0x144)]===_0x1d546e(0x139))return Reflect[_0x1d546e(0x144)](_0x14715c,_0x57bb13);},__param=this&&this[a142_0x45b2db(0x129)]||function(_0x5d4bbd,_0x16e4de){return function(_0x3902c0,_0x368538){_0x16e4de(_0x3902c0,_0x368538,_0x5d4bbd);};},TextToAudioController_1;Object['defineProperty'](exports,a142_0x45b2db(0x11e),{'value':!![]}),exports[a142_0x45b2db(0x120)]=void 0x0;function a142_0x2341(_0x21946c,_0x557610){const _0xec3d9c=a142_0xec3d();return a142_0x2341=function(_0x234168,_0x14d5b4){_0x234168=_0x234168-0x105;let _0x218b32=_0xec3d9c[_0x234168];return _0x218b32;},a142_0x2341(_0x21946c,_0x557610);}const common_1=require(a142_0x45b2db(0x110)),text_to_audio_service_1=require(a142_0x45b2db(0x154)),text_dto_1=require(a142_0x45b2db(0x126)),streaming_service_1=require(a142_0x45b2db(0x121)),roles_decorator_1=require(a142_0x45b2db(0x10b)),role_enum_1=require(a142_0x45b2db(0x148)),jwt_guard_1=require('../auth/guards/jwt.guard'),roles_guard_1=require(a142_0x45b2db(0x133)),saveStreamToFile_1=require(a142_0x45b2db(0x11b)),path=require('path'),path_1=require(a142_0x45b2db(0x12c)),constants_1=require(a142_0x45b2db(0x14a)),file_1=require('../common/file'),audio_player_1=require(a142_0x45b2db(0x109));let TextToAudioController=TextToAudioController_1=class TextToAudioController{constructor(_0x3be314,_0x2eff01){const _0x116e23=a142_0x45b2db;this['textToAudioService']=_0x3be314,this[_0x116e23(0x12f)]=_0x2eff01,this[_0x116e23(0x10d)]=new common_1[(_0x116e23(0x131))](TextToAudioController_1[_0x116e23(0x117)]);}async['playAudioFile'](_0x53f60f,_0x1fd46c){const _0x54861d=a142_0x45b2db;try{const _0x506f36=_0x1fd46c['text'];if(!_0x506f36){_0x53f60f['send'](_0x54861d(0x137));return;}const {id:_0x2fa138,volume:_0x15b22e}=await this[_0x54861d(0x119)][_0x54861d(0x13f)](_0x506f36);!(0x0,file_1[_0x54861d(0x135)])(constants_1[_0x54861d(0x122)])&&(0x0,file_1[_0x54861d(0x108)])(constants_1[_0x54861d(0x122)]);const _0x43621b=path[_0x54861d(0x107)](path_1[_0x54861d(0x134)],constants_1[_0x54861d(0x122)]),_0x4e7e72=_0x43621b+'/'+_0x2fa138+_0x54861d(0x13c);!(0x0,file_1[_0x54861d(0x135)])(_0x4e7e72)?await this[_0x54861d(0x119)][_0x54861d(0x157)](_0x1fd46c[_0x54861d(0x11d)],async _0x3ca741=>{const _0x494b83=_0x54861d;await(0x0,saveStreamToFile_1[_0x494b83(0x127)])(_0x3ca741,_0x43621b+'/'+_0x2fa138+_0x494b83(0x13c)),audio_player_1['AudioPlayer'][_0x494b83(0x12b)](_0x4e7e72,_0x15b22e!==null&&_0x15b22e!==void 0x0?_0x15b22e:0x32);}):audio_player_1['AudioPlayer'][_0x54861d(0x12b)](_0x4e7e72,_0x15b22e!==null&&_0x15b22e!==void 0x0?_0x15b22e:0x32),_0x53f60f[_0x54861d(0x14f)](_0x54861d(0x116)+_0x1fd46c[_0x54861d(0x11d)]);}catch(_0x2ecf02){return this['logger'][_0x54861d(0x145)](_0x2ecf02,_0x54861d(0x112)),'';}}async[a142_0x45b2db(0x13f)](_0x2e8236,_0x3461ca){const _0x39fe8c=a142_0x45b2db;try{const _0x2d0471=_0x3461ca[_0x39fe8c(0x11d)];if(!_0x2d0471){_0x2e8236[_0x39fe8c(0x14f)](_0x39fe8c(0x137));return;}await this['textToAudioService'][_0x39fe8c(0x13f)](_0x2d0471),_0x2e8236[_0x39fe8c(0x14f)](_0x39fe8c(0x11c)+_0x3461ca[_0x39fe8c(0x11d)]);}catch(_0x200e53){return this[_0x39fe8c(0x10d)][_0x39fe8c(0x145)](_0x200e53,_0x39fe8c(0x14d)),'';}}async[a142_0x45b2db(0x14b)](){const _0x1ee6a6=a142_0x45b2db;try{const _0xa2df11=await this['textToAudioService'][_0x1ee6a6(0x115)]();return _0xa2df11!==null&&_0xa2df11!==void 0x0?_0xa2df11:[];}catch(_0x3d86d6){return this['logger'][_0x1ee6a6(0x145)](_0x3d86d6,'error'),'';}}[a142_0x45b2db(0x11a)](_0x38cabb){const _0x23c171=a142_0x45b2db;return this[_0x23c171(0x119)]['deleteTextMessage'](_0x38cabb);}[a142_0x45b2db(0x152)](_0x3ec3f0,_0x27d7d0){const _0x324961=a142_0x45b2db;var _0x25dfe9;return this[_0x324961(0x119)][_0x324961(0x152)](_0x3ec3f0,Object[_0x324961(0x10e)](Object['assign']({},_0x27d7d0),{'volume':(_0x25dfe9=_0x27d7d0[_0x324961(0x13a)])!==null&&_0x25dfe9!==void 0x0?_0x25dfe9:0x32}));}};__decorate([(0x0,common_1[a142_0x45b2db(0x150)])('/'),(0x0,common_1[a142_0x45b2db(0x125)])(jwt_guard_1[a142_0x45b2db(0x147)],roles_guard_1[a142_0x45b2db(0x11f)]),(0x0,roles_decorator_1[a142_0x45b2db(0x124)])(role_enum_1[a142_0x45b2db(0x143)][a142_0x45b2db(0x106)],role_enum_1[a142_0x45b2db(0x143)][a142_0x45b2db(0x12e)]),__param(0x0,(0x0,common_1[a142_0x45b2db(0x111)])({'passthrough':!![]})),__param(0x1,(0x0,common_1[a142_0x45b2db(0x12a)])()),__metadata(a142_0x45b2db(0x142),Function),__metadata(a142_0x45b2db(0x138),[Object,text_dto_1[a142_0x45b2db(0x13d)]]),__metadata(a142_0x45b2db(0x123),Promise)],TextToAudioController['prototype'],a142_0x45b2db(0x10a),null),__decorate([(0x0,common_1['Post'])('saveMessage'),(0x0,common_1['UseGuards'])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a142_0x45b2db(0x11f)]),(0x0,roles_decorator_1[a142_0x45b2db(0x124)])(role_enum_1[a142_0x45b2db(0x143)][a142_0x45b2db(0x106)],role_enum_1[a142_0x45b2db(0x143)][a142_0x45b2db(0x12e)]),__param(0x0,(0x0,common_1[a142_0x45b2db(0x111)])({'passthrough':!![]})),__param(0x1,(0x0,common_1[a142_0x45b2db(0x12a)])()),__metadata('design:type',Function),__metadata('design:paramtypes',[Object,text_dto_1[a142_0x45b2db(0x13d)]]),__metadata(a142_0x45b2db(0x123),Promise)],TextToAudioController[a142_0x45b2db(0x136)],'saveMessage',null),__decorate([(0x0,common_1[a142_0x45b2db(0x128)])('/message'),(0x0,common_1['UseGuards'])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a142_0x45b2db(0x11f)]),(0x0,roles_decorator_1[a142_0x45b2db(0x124)])(role_enum_1[a142_0x45b2db(0x143)][a142_0x45b2db(0x106)],role_enum_1[a142_0x45b2db(0x143)][a142_0x45b2db(0x12e)]),__metadata(a142_0x45b2db(0x142),Function),__metadata('design:paramtypes',[]),__metadata(a142_0x45b2db(0x123),Promise)],TextToAudioController[a142_0x45b2db(0x136)],a142_0x45b2db(0x14b),null),__decorate([(0x0,common_1[a142_0x45b2db(0x113)])(a142_0x45b2db(0x10c)),(0x0,common_1[a142_0x45b2db(0x125)])(jwt_guard_1[a142_0x45b2db(0x147)],roles_guard_1[a142_0x45b2db(0x11f)]),(0x0,roles_decorator_1[a142_0x45b2db(0x124)])(role_enum_1[a142_0x45b2db(0x143)][a142_0x45b2db(0x106)],role_enum_1[a142_0x45b2db(0x143)]['User']),__param(0x0,(0x0,common_1[a142_0x45b2db(0x151)])('id')),__metadata(a142_0x45b2db(0x142),Function),__metadata(a142_0x45b2db(0x138),[String]),__metadata(a142_0x45b2db(0x123),void 0x0)],TextToAudioController[a142_0x45b2db(0x136)],a142_0x45b2db(0x11a),null),__decorate([(0x0,common_1['Put'])(a142_0x45b2db(0x10c)),(0x0,common_1[a142_0x45b2db(0x125)])(jwt_guard_1[a142_0x45b2db(0x147)],roles_guard_1[a142_0x45b2db(0x11f)]),(0x0,roles_decorator_1[a142_0x45b2db(0x124)])(role_enum_1[a142_0x45b2db(0x143)]['Admin'],role_enum_1[a142_0x45b2db(0x143)]['User']),__param(0x0,(0x0,common_1[a142_0x45b2db(0x151)])('id')),__param(0x1,(0x0,common_1[a142_0x45b2db(0x12a)])()),__metadata(a142_0x45b2db(0x142),Function),__metadata('design:paramtypes',[String,text_dto_1['TextDTO']]),__metadata(a142_0x45b2db(0x123),void 0x0)],TextToAudioController[a142_0x45b2db(0x136)],a142_0x45b2db(0x152),null),TextToAudioController=TextToAudioController_1=__decorate([(0x0,common_1[a142_0x45b2db(0x10f)])(a142_0x45b2db(0x157)),__metadata(a142_0x45b2db(0x138),[text_to_audio_service_1[a142_0x45b2db(0x12d)],streaming_service_1[a142_0x45b2db(0x15b)]])],TextToAudioController),exports[a142_0x45b2db(0x120)]=TextToAudioController;