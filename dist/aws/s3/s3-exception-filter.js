'use strict';const a49_0x1804be=a49_0x40c9;function a49_0x2d1e(){const _0xc6a9d8=['PI_NAME','Exception\x20occurred\x20at\x20','s3Service','from','20552AWgZev','3KHxWPM','length','S3Service','5573080jeGeAx','metadata','3022312cbUqER','__decorate','function','2984XqmrqH','HttpException','catch','toISOString','__esModule','exception-','S3ExceptionFilter','object','Exception\x20logged\x20and\x20uploaded\x20to\x20S3:\x20','getStatus','uploadFile','396119qKqhRE','836962laAiKG','__metadata','defineProperty','3589548TxgGkO','getResponse','4236865sBkDaI','.log','json','switchToHttp','decorate','18nAZBjE','Failed\x20to\x20upload\x20exception\x20log\x20to\x20S3:\x20','stack','error'];a49_0x2d1e=function(){return _0xc6a9d8;};return a49_0x2d1e();}(function(_0x19125b,_0x36fbe4){const _0x2ebf39=a49_0x40c9,_0x35fafd=_0x19125b();while(!![]){try{const _0x42d74f=parseInt(_0x2ebf39(0x124))/0x1+-parseInt(_0x2ebf39(0x125))/0x2+-parseInt(_0x2ebf39(0x111))/0x3*(parseInt(_0x2ebf39(0x116))/0x4)+parseInt(_0x2ebf39(0x103))/0x5+parseInt(_0x2ebf39(0x128))/0x6+parseInt(_0x2ebf39(0x110))/0x7*(parseInt(_0x2ebf39(0x119))/0x8)+parseInt(_0x2ebf39(0x108))/0x9*(-parseInt(_0x2ebf39(0x114))/0xa);if(_0x42d74f===_0x36fbe4)break;else _0x35fafd['push'](_0x35fafd['shift']());}catch(_0x228834){_0x35fafd['push'](_0x35fafd['shift']());}}}(a49_0x2d1e,0x9e40b));function a49_0x40c9(_0x44a3b0,_0x480433){const _0x2d1e4c=a49_0x2d1e();return a49_0x40c9=function(_0x40c980,_0x4c2bfd){_0x40c980=_0x40c980-0x102;let _0x4e5887=_0x2d1e4c[_0x40c980];return _0x4e5887;},a49_0x40c9(_0x44a3b0,_0x480433);}var __decorate=this&&this[a49_0x1804be(0x117)]||function(_0xbcece7,_0x3a70c4,_0x58d50a,_0xc6eec0){const _0x13e52=a49_0x1804be;var _0x5635c0=arguments['length'],_0x583d41=_0x5635c0<0x3?_0x3a70c4:_0xc6eec0===null?_0xc6eec0=Object['getOwnPropertyDescriptor'](_0x3a70c4,_0x58d50a):_0xc6eec0,_0x14d89e;if(typeof Reflect===_0x13e52(0x120)&&typeof Reflect[_0x13e52(0x107)]===_0x13e52(0x118))_0x583d41=Reflect['decorate'](_0xbcece7,_0x3a70c4,_0x58d50a,_0xc6eec0);else{for(var _0x2629f0=_0xbcece7[_0x13e52(0x112)]-0x1;_0x2629f0>=0x0;_0x2629f0--)if(_0x14d89e=_0xbcece7[_0x2629f0])_0x583d41=(_0x5635c0<0x3?_0x14d89e(_0x583d41):_0x5635c0>0x3?_0x14d89e(_0x3a70c4,_0x58d50a,_0x583d41):_0x14d89e(_0x3a70c4,_0x58d50a))||_0x583d41;}return _0x5635c0>0x3&&_0x583d41&&Object[_0x13e52(0x127)](_0x3a70c4,_0x58d50a,_0x583d41),_0x583d41;},__metadata=this&&this[a49_0x1804be(0x126)]||function(_0x240ef3,_0xa4b6df){const _0x3fb6e4=a49_0x1804be;if(typeof Reflect==='object'&&typeof Reflect[_0x3fb6e4(0x115)]===_0x3fb6e4(0x118))return Reflect['metadata'](_0x240ef3,_0xa4b6df);};Object['defineProperty'](exports,a49_0x1804be(0x11d),{'value':!![]}),exports['S3ExceptionFilter']=void 0x0;const common_1=require('@nestjs/common'),s3_service_1=require('./s3.service');let S3ExceptionFilter=class S3ExceptionFilter{constructor(_0x55f373){this['s3Service']=_0x55f373;}async[a49_0x1804be(0x11b)](_0x20b8e2,_0x4c13a5){const _0x4769da=a49_0x1804be,_0x2f2550=_0x4c13a5[_0x4769da(0x106)](),_0x144318=_0x2f2550[_0x4769da(0x102)]();if(_0x20b8e2 instanceof common_1[_0x4769da(0x11a)])_0x144318['status'](_0x20b8e2[_0x4769da(0x122)]())[_0x4769da(0x105)](_0x20b8e2[_0x4769da(0x102)]());else{const _0xffa123=new Date()[_0x4769da(0x11c)](),_0x4ddc4b=_0x4769da(0x10d)+_0xffa123+':\x0a'+_0x20b8e2[_0x4769da(0x10a)],_0x1fe63c=process['env']['LOG_BUCKET_NAME'],_0x382286=process['env'][_0x4769da(0x10c)],_0x5c4894=_0x4769da(0x11e)+_0x382286+'-'+_0xffa123+_0x4769da(0x104);try{const _0xafca=await this[_0x4769da(0x10e)][_0x4769da(0x123)](Buffer[_0x4769da(0x10f)](_0x4ddc4b),_0x1fe63c,_0x5c4894);console[_0x4769da(0x10b)](_0x4769da(0x121)+_0xafca);}catch(_0x4a104e){console[_0x4769da(0x10b)](_0x4769da(0x109)+_0x4a104e['message']);}_0x144318['status'](0x1f4)[_0x4769da(0x105)]({'statusCode':0x1f4,'message':'Internal\x20Server\x20Error'});}}};S3ExceptionFilter=__decorate([(0x0,common_1['Catch'])(),__metadata('design:paramtypes',[s3_service_1[a49_0x1804be(0x113)]])],S3ExceptionFilter),exports[a49_0x1804be(0x11f)]=S3ExceptionFilter;