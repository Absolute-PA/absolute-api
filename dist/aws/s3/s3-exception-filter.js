'use strict';function a49_0x2087(){const _0x51b603=['function','S3ExceptionFilter','21iMDvcA','s3Service','LOG_BUCKET_NAME','HttpException','__esModule','Exception\x20occurred\x20at\x20','315003PjHRyK','env','9mkDYdL','./s3.service','1408504wmvOnK','status','exception-','.log','Catch','metadata','uploadFile','toISOString','PI_NAME','design:paramtypes','message','length','2580870Kyelir','48VwoYFT','getResponse','__decorate','2103126zWHAdW','__metadata','Internal\x20Server\x20Error','1229340TBuwVM','Failed\x20to\x20upload\x20exception\x20log\x20to\x20S3:\x20','from','error','json','9574856nvvKLd','4797824pMlNKa','object','getStatus','getOwnPropertyDescriptor','55qirujT','3HUobYD','decorate','defineProperty','switchToHttp','5RBNHMu','stack'];a49_0x2087=function(){return _0x51b603;};return a49_0x2087();}function a49_0x391c(_0x4c5f30,_0x397151){const _0x2087b7=a49_0x2087();return a49_0x391c=function(_0x391cc1,_0x33c3dd){_0x391cc1=_0x391cc1-0xd9;let _0x396e87=_0x2087b7[_0x391cc1];return _0x396e87;},a49_0x391c(_0x4c5f30,_0x397151);}const a49_0x1d4ed2=a49_0x391c;(function(_0x39f1fc,_0x4b68e8){const _0x4818ed=a49_0x391c,_0x4c0d54=_0x39f1fc();while(!![]){try{const _0x3c6f98=-parseInt(_0x4818ed(0x107))/0x1+-parseInt(_0x4818ed(0xf4))/0x2*(parseInt(_0x4818ed(0xe2))/0x3)+parseInt(_0x4818ed(0xdd))/0x4*(parseInt(_0x4818ed(0xe6))/0x5)+-parseInt(_0x4818ed(0x104))/0x6*(parseInt(_0x4818ed(0xea))/0x7)+-parseInt(_0x4818ed(0xdc))/0x8*(-parseInt(_0x4818ed(0xf2))/0x9)+-parseInt(_0x4818ed(0x100))/0xa*(-parseInt(_0x4818ed(0xe1))/0xb)+parseInt(_0x4818ed(0x101))/0xc*(parseInt(_0x4818ed(0xf0))/0xd);if(_0x3c6f98===_0x4b68e8)break;else _0x4c0d54['push'](_0x4c0d54['shift']());}catch(_0x3e05c6){_0x4c0d54['push'](_0x4c0d54['shift']());}}}(a49_0x2087,0xc2f35));var __decorate=this&&this[a49_0x1d4ed2(0x103)]||function(_0x1ad959,_0x3a6eff,_0x4402e8,_0x184922){const _0x5c4c60=a49_0x1d4ed2;var _0x3de3e2=arguments[_0x5c4c60(0xff)],_0x5af907=_0x3de3e2<0x3?_0x3a6eff:_0x184922===null?_0x184922=Object[_0x5c4c60(0xe0)](_0x3a6eff,_0x4402e8):_0x184922,_0x1d9a25;if(typeof Reflect===_0x5c4c60(0xde)&&typeof Reflect[_0x5c4c60(0xe3)]===_0x5c4c60(0xe8))_0x5af907=Reflect[_0x5c4c60(0xe3)](_0x1ad959,_0x3a6eff,_0x4402e8,_0x184922);else{for(var _0x40e450=_0x1ad959[_0x5c4c60(0xff)]-0x1;_0x40e450>=0x0;_0x40e450--)if(_0x1d9a25=_0x1ad959[_0x40e450])_0x5af907=(_0x3de3e2<0x3?_0x1d9a25(_0x5af907):_0x3de3e2>0x3?_0x1d9a25(_0x3a6eff,_0x4402e8,_0x5af907):_0x1d9a25(_0x3a6eff,_0x4402e8))||_0x5af907;}return _0x3de3e2>0x3&&_0x5af907&&Object[_0x5c4c60(0xe4)](_0x3a6eff,_0x4402e8,_0x5af907),_0x5af907;},__metadata=this&&this[a49_0x1d4ed2(0x105)]||function(_0x1c626a,_0x33f1ca){const _0x18fe6c=a49_0x1d4ed2;if(typeof Reflect==='object'&&typeof Reflect['metadata']==='function')return Reflect[_0x18fe6c(0xf9)](_0x1c626a,_0x33f1ca);};Object['defineProperty'](exports,a49_0x1d4ed2(0xee),{'value':!![]}),exports[a49_0x1d4ed2(0xe9)]=void 0x0;const common_1=require('@nestjs/common'),s3_service_1=require(a49_0x1d4ed2(0xf3));let S3ExceptionFilter=class S3ExceptionFilter{constructor(_0xff738d){const _0x1c0453=a49_0x1d4ed2;this[_0x1c0453(0xeb)]=_0xff738d;}async['catch'](_0x249f48,_0x263630){const _0x547c60=a49_0x1d4ed2,_0x51be4e=_0x263630[_0x547c60(0xe5)](),_0x182b7e=_0x51be4e[_0x547c60(0x102)]();if(_0x249f48 instanceof common_1[_0x547c60(0xed)])_0x182b7e[_0x547c60(0xf5)](_0x249f48[_0x547c60(0xdf)]())[_0x547c60(0xdb)](_0x249f48[_0x547c60(0x102)]());else{const _0x2611ac=new Date()[_0x547c60(0xfb)](),_0x4105b1=_0x547c60(0xef)+_0x2611ac+':\x0a'+_0x249f48[_0x547c60(0xe7)],_0x17003c=process[_0x547c60(0xf1)][_0x547c60(0xec)],_0x3ff96d=process[_0x547c60(0xf1)][_0x547c60(0xfc)],_0x4691b4=_0x547c60(0xf6)+_0x3ff96d+'-'+_0x2611ac+_0x547c60(0xf7);try{const _0x9f44ba=await this['s3Service'][_0x547c60(0xfa)](Buffer[_0x547c60(0xd9)](_0x4105b1),_0x17003c,_0x4691b4);console[_0x547c60(0xda)]('Exception\x20logged\x20and\x20uploaded\x20to\x20S3:\x20'+_0x9f44ba);}catch(_0x31f4e1){console[_0x547c60(0xda)](_0x547c60(0x108)+_0x31f4e1[_0x547c60(0xfe)]);}_0x182b7e[_0x547c60(0xf5)](0x1f4)[_0x547c60(0xdb)]({'statusCode':0x1f4,'message':_0x547c60(0x106)});}}};S3ExceptionFilter=__decorate([(0x0,common_1[a49_0x1d4ed2(0xf8)])(),__metadata(a49_0x1d4ed2(0xfd),[s3_service_1['S3Service']])],S3ExceptionFilter),exports[a49_0x1d4ed2(0xe9)]=S3ExceptionFilter;