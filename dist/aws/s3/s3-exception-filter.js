'use strict';function a49_0x2458(){const _0x20da0e=['Exception\x20occurred\x20at\x20','.log','__esModule','__decorate','error','327mndcCW','from','exception-','10yFEtty','5dKaYHN','decorate','defineProperty','__metadata','2833104WlMbbG','env','s3Service','getStatus','length','683766cFPvhp','./s3.service','Failed\x20to\x20upload\x20exception\x20log\x20to\x20S3:\x20','11093472maiSTU','catch','getResponse','function','json','metadata','Internal\x20Server\x20Error','340ncUzkz','S3Service','getOwnPropertyDescriptor','2mdopGW','design:paramtypes','8zEACmp','S3ExceptionFilter','switchToHttp','403474tgcKZr','LOG_BUCKET_NAME','32252dWvwtA','894803uRQtkW','PI_NAME','object','Exception\x20logged\x20and\x20uploaded\x20to\x20S3:\x20','stack'];a49_0x2458=function(){return _0x20da0e;};return a49_0x2458();}const a49_0x3bb1ec=a49_0x2fcd;function a49_0x2fcd(_0x2f3270,_0x187825){const _0x245884=a49_0x2458();return a49_0x2fcd=function(_0x2fcd83,_0x27c0d6){_0x2fcd83=_0x2fcd83-0x1d4;let _0x3a706e=_0x245884[_0x2fcd83];return _0x3a706e;},a49_0x2fcd(_0x2f3270,_0x187825);}(function(_0x48f739,_0x2c7ba7){const _0x323dbf=a49_0x2fcd,_0x572d0d=_0x48f739();while(!![]){try{const _0x34360c=parseInt(_0x323dbf(0x1eb))/0x1*(-parseInt(_0x323dbf(0x1e6))/0x2)+-parseInt(_0x323dbf(0x1f8))/0x3*(parseInt(_0x323dbf(0x1e3))/0x4)+-parseInt(_0x323dbf(0x1fc))/0x5*(parseInt(_0x323dbf(0x1d4))/0x6)+-parseInt(_0x323dbf(0x1ee))/0x7*(-parseInt(_0x323dbf(0x1e8))/0x8)+parseInt(_0x323dbf(0x1d9))/0x9+-parseInt(_0x323dbf(0x1fb))/0xa*(parseInt(_0x323dbf(0x1ed))/0xb)+parseInt(_0x323dbf(0x1dc))/0xc;if(_0x34360c===_0x2c7ba7)break;else _0x572d0d['push'](_0x572d0d['shift']());}catch(_0xcc925c){_0x572d0d['push'](_0x572d0d['shift']());}}}(a49_0x2458,0x3ab14));var __decorate=this&&this[a49_0x3bb1ec(0x1f6)]||function(_0x177017,_0x25fef0,_0x4873d7,_0x2bd6c8){const _0x280ed8=a49_0x3bb1ec;var _0x296930=arguments[_0x280ed8(0x1d8)],_0x1ff7ce=_0x296930<0x3?_0x25fef0:_0x2bd6c8===null?_0x2bd6c8=Object[_0x280ed8(0x1e5)](_0x25fef0,_0x4873d7):_0x2bd6c8,_0x4fe21e;if(typeof Reflect===_0x280ed8(0x1f0)&&typeof Reflect[_0x280ed8(0x1fd)]===_0x280ed8(0x1df))_0x1ff7ce=Reflect[_0x280ed8(0x1fd)](_0x177017,_0x25fef0,_0x4873d7,_0x2bd6c8);else{for(var _0x87ce6f=_0x177017[_0x280ed8(0x1d8)]-0x1;_0x87ce6f>=0x0;_0x87ce6f--)if(_0x4fe21e=_0x177017[_0x87ce6f])_0x1ff7ce=(_0x296930<0x3?_0x4fe21e(_0x1ff7ce):_0x296930>0x3?_0x4fe21e(_0x25fef0,_0x4873d7,_0x1ff7ce):_0x4fe21e(_0x25fef0,_0x4873d7))||_0x1ff7ce;}return _0x296930>0x3&&_0x1ff7ce&&Object[_0x280ed8(0x1fe)](_0x25fef0,_0x4873d7,_0x1ff7ce),_0x1ff7ce;},__metadata=this&&this[a49_0x3bb1ec(0x1ff)]||function(_0x5be5ee,_0x4059b6){const _0x5547ad=a49_0x3bb1ec;if(typeof Reflect===_0x5547ad(0x1f0)&&typeof Reflect[_0x5547ad(0x1e1)]===_0x5547ad(0x1df))return Reflect[_0x5547ad(0x1e1)](_0x5be5ee,_0x4059b6);};Object['defineProperty'](exports,a49_0x3bb1ec(0x1f5),{'value':!![]}),exports[a49_0x3bb1ec(0x1e9)]=void 0x0;const common_1=require('@nestjs/common'),s3_service_1=require(a49_0x3bb1ec(0x1da));let S3ExceptionFilter=class S3ExceptionFilter{constructor(_0x32b1fd){const _0x130e03=a49_0x3bb1ec;this[_0x130e03(0x1d6)]=_0x32b1fd;}async[a49_0x3bb1ec(0x1dd)](_0x2eeb1c,_0x2fa828){const _0x574937=a49_0x3bb1ec,_0x559e4b=_0x2fa828[_0x574937(0x1ea)](),_0x57e8fa=_0x559e4b[_0x574937(0x1de)]();if(_0x2eeb1c instanceof common_1['HttpException'])_0x57e8fa['status'](_0x2eeb1c[_0x574937(0x1d7)]())[_0x574937(0x1e0)](_0x2eeb1c['getResponse']());else{const _0x1a7c5e=new Date()['toISOString'](),_0x313003=_0x574937(0x1f3)+_0x1a7c5e+':\x0a'+_0x2eeb1c[_0x574937(0x1f2)],_0x1bcbf5=process['env'][_0x574937(0x1ec)],_0x387f28=process[_0x574937(0x1d5)][_0x574937(0x1ef)],_0x51686b=_0x574937(0x1fa)+_0x387f28+'-'+_0x1a7c5e+_0x574937(0x1f4);try{const _0x51c7eb=await this['s3Service']['uploadFile'](Buffer[_0x574937(0x1f9)](_0x313003),_0x1bcbf5,_0x51686b);console[_0x574937(0x1f7)](_0x574937(0x1f1)+_0x51c7eb);}catch(_0x253479){console[_0x574937(0x1f7)](_0x574937(0x1db)+_0x253479['message']);}_0x57e8fa['status'](0x1f4)[_0x574937(0x1e0)]({'statusCode':0x1f4,'message':_0x574937(0x1e2)});}}};S3ExceptionFilter=__decorate([(0x0,common_1['Catch'])(),__metadata(a49_0x3bb1ec(0x1e7),[s3_service_1[a49_0x3bb1ec(0x1e4)]])],S3ExceptionFilter),exports[a49_0x3bb1ec(0x1e9)]=S3ExceptionFilter;