'use strict';const a49_0x2f420a=a49_0x10c6;(function(_0xa2af2e,_0x39f2d8){const _0x3eb6ec=a49_0x10c6,_0x3cd941=_0xa2af2e();while(!![]){try{const _0x231dda=parseInt(_0x3eb6ec(0x99))/0x1*(-parseInt(_0x3eb6ec(0xb5))/0x2)+-parseInt(_0x3eb6ec(0xaa))/0x3*(parseInt(_0x3eb6ec(0xa2))/0x4)+-parseInt(_0x3eb6ec(0xac))/0x5*(-parseInt(_0x3eb6ec(0x9e))/0x6)+-parseInt(_0x3eb6ec(0xb0))/0x7+parseInt(_0x3eb6ec(0x95))/0x8+parseInt(_0x3eb6ec(0xa8))/0x9*(parseInt(_0x3eb6ec(0xa6))/0xa)+parseInt(_0x3eb6ec(0x93))/0xb;if(_0x231dda===_0x39f2d8)break;else _0x3cd941['push'](_0x3cd941['shift']());}catch(_0x1bf2cb){_0x3cd941['push'](_0x3cd941['shift']());}}}(a49_0x5cf7,0xe303e));var __decorate=this&&this[a49_0x2f420a(0x96)]||function(_0x277382,_0x5f2830,_0x5369cc,_0x45d9af){const _0x4eaed5=a49_0x2f420a;var _0x749675=arguments[_0x4eaed5(0xa3)],_0x1d9098=_0x749675<0x3?_0x5f2830:_0x45d9af===null?_0x45d9af=Object[_0x4eaed5(0xbb)](_0x5f2830,_0x5369cc):_0x45d9af,_0x4e4565;if(typeof Reflect===_0x4eaed5(0xb7)&&typeof Reflect['decorate']===_0x4eaed5(0x94))_0x1d9098=Reflect[_0x4eaed5(0xa1)](_0x277382,_0x5f2830,_0x5369cc,_0x45d9af);else{for(var _0x2e4b89=_0x277382[_0x4eaed5(0xa3)]-0x1;_0x2e4b89>=0x0;_0x2e4b89--)if(_0x4e4565=_0x277382[_0x2e4b89])_0x1d9098=(_0x749675<0x3?_0x4e4565(_0x1d9098):_0x749675>0x3?_0x4e4565(_0x5f2830,_0x5369cc,_0x1d9098):_0x4e4565(_0x5f2830,_0x5369cc))||_0x1d9098;}return _0x749675>0x3&&_0x1d9098&&Object[_0x4eaed5(0x92)](_0x5f2830,_0x5369cc,_0x1d9098),_0x1d9098;},__metadata=this&&this['__metadata']||function(_0x1cab54,_0x45c8d4){const _0x2e407e=a49_0x2f420a;if(typeof Reflect==='object'&&typeof Reflect[_0x2e407e(0xa5)]===_0x2e407e(0x94))return Reflect['metadata'](_0x1cab54,_0x45c8d4);};Object[a49_0x2f420a(0x92)](exports,a49_0x2f420a(0xab),{'value':!![]}),exports['S3ExceptionFilter']=void 0x0;const common_1=require(a49_0x2f420a(0xa9)),s3_service_1=require(a49_0x2f420a(0xa0));function a49_0x5cf7(){const _0x4103fe=['S3ExceptionFilter','./s3.service','decorate','32woMwWs','length','getStatus','metadata','5642650VzUiju','design:paramtypes','18cIfUPj','@nestjs/common','426291tUtteB','__esModule','5nCEHPH','from','LOG_BUCKET_NAME','stack','11108461wZpdsj','.log','Exception\x20occurred\x20at\x20','status','uploadFile','18528uTVYDw','json','object','getResponse','PI_NAME','catch','getOwnPropertyDescriptor','toISOString','defineProperty','30156709Wzonje','function','3599008FCZwdp','__decorate','error','env','89Aacrhi','Failed\x20to\x20upload\x20exception\x20log\x20to\x20S3:\x20','Internal\x20Server\x20Error','s3Service','switchToHttp','948744oclCWG'];a49_0x5cf7=function(){return _0x4103fe;};return a49_0x5cf7();}function a49_0x10c6(_0x390249,_0x44bea5){const _0x5cf71d=a49_0x5cf7();return a49_0x10c6=function(_0x10c696,_0x3cd9cb){_0x10c696=_0x10c696-0x92;let _0x11cd09=_0x5cf71d[_0x10c696];return _0x11cd09;},a49_0x10c6(_0x390249,_0x44bea5);}let S3ExceptionFilter=class S3ExceptionFilter{constructor(_0x3503a9){const _0x3010f3=a49_0x2f420a;this[_0x3010f3(0x9c)]=_0x3503a9;}async[a49_0x2f420a(0xba)](_0x5c7555,_0x45999a){const _0x1c80fd=a49_0x2f420a,_0x346e09=_0x45999a[_0x1c80fd(0x9d)](),_0x4e85ee=_0x346e09[_0x1c80fd(0xb8)]();if(_0x5c7555 instanceof common_1['HttpException'])_0x4e85ee[_0x1c80fd(0xb3)](_0x5c7555[_0x1c80fd(0xa4)]())['json'](_0x5c7555[_0x1c80fd(0xb8)]());else{const _0xc8bb2b=new Date()[_0x1c80fd(0xbc)](),_0x294ad5=_0x1c80fd(0xb2)+_0xc8bb2b+':\x0a'+_0x5c7555[_0x1c80fd(0xaf)],_0x262673=process[_0x1c80fd(0x98)][_0x1c80fd(0xae)],_0x48ad61=process[_0x1c80fd(0x98)][_0x1c80fd(0xb9)],_0x31d793='exception-'+_0x48ad61+'-'+_0xc8bb2b+_0x1c80fd(0xb1);try{const _0x1ce7a6=await this['s3Service'][_0x1c80fd(0xb4)](Buffer[_0x1c80fd(0xad)](_0x294ad5),_0x262673,_0x31d793);console[_0x1c80fd(0x97)]('Exception\x20logged\x20and\x20uploaded\x20to\x20S3:\x20'+_0x1ce7a6);}catch(_0x10b623){console['error'](_0x1c80fd(0x9a)+_0x10b623['message']);}_0x4e85ee[_0x1c80fd(0xb3)](0x1f4)[_0x1c80fd(0xb6)]({'statusCode':0x1f4,'message':_0x1c80fd(0x9b)});}}};S3ExceptionFilter=__decorate([(0x0,common_1['Catch'])(),__metadata(a49_0x2f420a(0xa7),[s3_service_1['S3Service']])],S3ExceptionFilter),exports[a49_0x2f420a(0x9f)]=S3ExceptionFilter;