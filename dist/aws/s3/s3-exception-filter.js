'use strict';function a49_0x3e3f(){const _0x49bd1e=['__metadata','defineProperty','error','getResponse','Catch','Failed\x20to\x20upload\x20exception\x20log\x20to\x20S3:\x20','metadata','304928ktPioj','S3ExceptionFilter','2098mPVvIo','365386uBaxXI','./s3.service','decorate','1037440CMZGsR','exception-','catch','.log','HttpException','json','Exception\x20occurred\x20at\x20','LOG_BUCKET_NAME','696RcbEPL','function','env','@nestjs/common','304604hNVaeh','__esModule','5dWPMDi','s3Service','design:paramtypes','723fOHKTo','toISOString','switchToHttp','uploadFile','7876561oIuoaa','status','length','object','S3Service','14607LMtIUh','6acWVcv'];a49_0x3e3f=function(){return _0x49bd1e;};return a49_0x3e3f();}const a49_0xc3e698=a49_0x517b;(function(_0x1bb3d1,_0x29caa5){const _0x15fe60=a49_0x517b,_0x3dea3a=_0x1bb3d1();while(!![]){try{const _0x2ad7b0=parseInt(_0x15fe60(0xb2))/0x1+parseInt(_0x15fe60(0xb4))/0x2*(parseInt(_0x15fe60(0xa0))/0x3)+-parseInt(_0x15fe60(0xc4))/0x4*(-parseInt(_0x15fe60(0x9d))/0x5)+-parseInt(_0x15fe60(0xaa))/0x6*(-parseInt(_0x15fe60(0xb5))/0x7)+-parseInt(_0x15fe60(0xc0))/0x8*(-parseInt(_0x15fe60(0xa9))/0x9)+parseInt(_0x15fe60(0xb8))/0xa+-parseInt(_0x15fe60(0xa4))/0xb;if(_0x2ad7b0===_0x29caa5)break;else _0x3dea3a['push'](_0x3dea3a['shift']());}catch(_0x3fb08c){_0x3dea3a['push'](_0x3dea3a['shift']());}}}(a49_0x3e3f,0x347c4));function a49_0x517b(_0x3b8a7f,_0x1f4244){const _0x3e3f33=a49_0x3e3f();return a49_0x517b=function(_0x517beb,_0x44315b){_0x517beb=_0x517beb-0x9c;let _0x374c78=_0x3e3f33[_0x517beb];return _0x374c78;},a49_0x517b(_0x3b8a7f,_0x1f4244);}var __decorate=this&&this['__decorate']||function(_0x218092,_0x33e073,_0x1320c1,_0x246f2b){const _0x477153=a49_0x517b;var _0x51b9e3=arguments[_0x477153(0xa6)],_0x4437d4=_0x51b9e3<0x3?_0x33e073:_0x246f2b===null?_0x246f2b=Object['getOwnPropertyDescriptor'](_0x33e073,_0x1320c1):_0x246f2b,_0x40b526;if(typeof Reflect==='object'&&typeof Reflect[_0x477153(0xb7)]===_0x477153(0xc1))_0x4437d4=Reflect[_0x477153(0xb7)](_0x218092,_0x33e073,_0x1320c1,_0x246f2b);else{for(var _0x4d9045=_0x218092[_0x477153(0xa6)]-0x1;_0x4d9045>=0x0;_0x4d9045--)if(_0x40b526=_0x218092[_0x4d9045])_0x4437d4=(_0x51b9e3<0x3?_0x40b526(_0x4437d4):_0x51b9e3>0x3?_0x40b526(_0x33e073,_0x1320c1,_0x4437d4):_0x40b526(_0x33e073,_0x1320c1))||_0x4437d4;}return _0x51b9e3>0x3&&_0x4437d4&&Object[_0x477153(0xac)](_0x33e073,_0x1320c1,_0x4437d4),_0x4437d4;},__metadata=this&&this[a49_0xc3e698(0xab)]||function(_0x1b829d,_0x500fad){const _0x4f2dd8=a49_0xc3e698;if(typeof Reflect===_0x4f2dd8(0xa7)&&typeof Reflect[_0x4f2dd8(0xb1)]===_0x4f2dd8(0xc1))return Reflect[_0x4f2dd8(0xb1)](_0x1b829d,_0x500fad);};Object['defineProperty'](exports,a49_0xc3e698(0x9c),{'value':!![]}),exports[a49_0xc3e698(0xb3)]=void 0x0;const common_1=require(a49_0xc3e698(0xc3)),s3_service_1=require(a49_0xc3e698(0xb6));let S3ExceptionFilter=class S3ExceptionFilter{constructor(_0x5ed451){const _0x42e3f1=a49_0xc3e698;this[_0x42e3f1(0x9e)]=_0x5ed451;}async[a49_0xc3e698(0xba)](_0x1cc42a,_0x4f6004){const _0x4e1eb4=a49_0xc3e698,_0xc6324f=_0x4f6004[_0x4e1eb4(0xa2)](),_0x1368b0=_0xc6324f[_0x4e1eb4(0xae)]();if(_0x1cc42a instanceof common_1[_0x4e1eb4(0xbc)])_0x1368b0[_0x4e1eb4(0xa5)](_0x1cc42a['getStatus']())[_0x4e1eb4(0xbd)](_0x1cc42a[_0x4e1eb4(0xae)]());else{const _0x82ba49=new Date()[_0x4e1eb4(0xa1)](),_0xa81a6e=_0x4e1eb4(0xbe)+_0x82ba49+':\x0a'+_0x1cc42a['stack'],_0x12aaa6=process[_0x4e1eb4(0xc2)][_0x4e1eb4(0xbf)],_0x36cd32=process[_0x4e1eb4(0xc2)]['PI_NAME'],_0x3b38b5=_0x4e1eb4(0xb9)+_0x36cd32+'-'+_0x82ba49+_0x4e1eb4(0xbb);try{const _0x3fd528=await this['s3Service'][_0x4e1eb4(0xa3)](Buffer['from'](_0xa81a6e),_0x12aaa6,_0x3b38b5);console[_0x4e1eb4(0xad)]('Exception\x20logged\x20and\x20uploaded\x20to\x20S3:\x20'+_0x3fd528);}catch(_0x2f3a19){console[_0x4e1eb4(0xad)](_0x4e1eb4(0xb0)+_0x2f3a19['message']);}_0x1368b0['status'](0x1f4)[_0x4e1eb4(0xbd)]({'statusCode':0x1f4,'message':'Internal\x20Server\x20Error'});}}};S3ExceptionFilter=__decorate([(0x0,common_1[a49_0xc3e698(0xaf)])(),__metadata(a49_0xc3e698(0x9f),[s3_service_1[a49_0xc3e698(0xa8)]])],S3ExceptionFilter),exports[a49_0xc3e698(0xb3)]=S3ExceptionFilter;