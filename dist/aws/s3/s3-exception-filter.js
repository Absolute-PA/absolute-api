'use strict';const a49_0x5477b7=a49_0x312d;(function(_0x1356d6,_0xc42bb5){const _0xe7dcf5=a49_0x312d,_0x46286d=_0x1356d6();while(!![]){try{const _0x1b8086=parseInt(_0xe7dcf5(0x8f))/0x1+parseInt(_0xe7dcf5(0x9f))/0x2*(-parseInt(_0xe7dcf5(0x99))/0x3)+parseInt(_0xe7dcf5(0x8e))/0x4+parseInt(_0xe7dcf5(0xa2))/0x5+parseInt(_0xe7dcf5(0xad))/0x6*(-parseInt(_0xe7dcf5(0xa4))/0x7)+parseInt(_0xe7dcf5(0xab))/0x8+parseInt(_0xe7dcf5(0xaa))/0x9;if(_0x1b8086===_0xc42bb5)break;else _0x46286d['push'](_0x46286d['shift']());}catch(_0x3d590b){_0x46286d['push'](_0x46286d['shift']());}}}(a49_0x39f1,0x45529));function a49_0x39f1(){const _0x486087=['1312724GUBIEb','81013TppGQO','s3Service','getStatus','getOwnPropertyDescriptor','object','__decorate','S3Service','PI_NAME','decorate','HttpException','218460BJKAgW','__esModule','Failed\x20to\x20upload\x20exception\x20log\x20to\x20S3:\x20','metadata','toISOString','defineProperty','10uRrqyZ','Exception\x20occurred\x20at\x20','exception-','326700QpeTGa','length','119tIaHfm','message','LOG_BUCKET_NAME','uploadFile','Internal\x20Server\x20Error','S3ExceptionFilter','865818fEPsJW','4426608AlMWfQ','json','168006DQZvVm','catch','env','error','status','function','Catch','from','@nestjs/common','design:paramtypes'];a49_0x39f1=function(){return _0x486087;};return a49_0x39f1();}var __decorate=this&&this[a49_0x5477b7(0x94)]||function(_0x34bb6b,_0x1e197e,_0x311a7c,_0x490113){const _0x1ebbe0=a49_0x5477b7;var _0x4494c2=arguments[_0x1ebbe0(0xa3)],_0x465a5b=_0x4494c2<0x3?_0x1e197e:_0x490113===null?_0x490113=Object[_0x1ebbe0(0x92)](_0x1e197e,_0x311a7c):_0x490113,_0x3b7d03;if(typeof Reflect==='object'&&typeof Reflect[_0x1ebbe0(0x97)]===_0x1ebbe0(0x89))_0x465a5b=Reflect['decorate'](_0x34bb6b,_0x1e197e,_0x311a7c,_0x490113);else{for(var _0x2736ad=_0x34bb6b['length']-0x1;_0x2736ad>=0x0;_0x2736ad--)if(_0x3b7d03=_0x34bb6b[_0x2736ad])_0x465a5b=(_0x4494c2<0x3?_0x3b7d03(_0x465a5b):_0x4494c2>0x3?_0x3b7d03(_0x1e197e,_0x311a7c,_0x465a5b):_0x3b7d03(_0x1e197e,_0x311a7c))||_0x465a5b;}return _0x4494c2>0x3&&_0x465a5b&&Object[_0x1ebbe0(0x9e)](_0x1e197e,_0x311a7c,_0x465a5b),_0x465a5b;},__metadata=this&&this['__metadata']||function(_0x552fae,_0x1b8aee){const _0x1f9621=a49_0x5477b7;if(typeof Reflect===_0x1f9621(0x93)&&typeof Reflect[_0x1f9621(0x9c)]===_0x1f9621(0x89))return Reflect['metadata'](_0x552fae,_0x1b8aee);};Object[a49_0x5477b7(0x9e)](exports,a49_0x5477b7(0x9a),{'value':!![]}),exports[a49_0x5477b7(0xa9)]=void 0x0;const common_1=require(a49_0x5477b7(0x8c)),s3_service_1=require('./s3.service');function a49_0x312d(_0x404d8c,_0x3702a1){const _0x39f1cb=a49_0x39f1();return a49_0x312d=function(_0x312d48,_0x3ed33e){_0x312d48=_0x312d48-0x86;let _0x10ef49=_0x39f1cb[_0x312d48];return _0x10ef49;},a49_0x312d(_0x404d8c,_0x3702a1);}let S3ExceptionFilter=class S3ExceptionFilter{constructor(_0x162319){const _0x4a570b=a49_0x5477b7;this[_0x4a570b(0x90)]=_0x162319;}async[a49_0x5477b7(0xae)](_0x44bd89,_0x2f4259){const _0x58c2b0=a49_0x5477b7,_0x43011e=_0x2f4259['switchToHttp'](),_0x5f42ff=_0x43011e['getResponse']();if(_0x44bd89 instanceof common_1[_0x58c2b0(0x98)])_0x5f42ff[_0x58c2b0(0x88)](_0x44bd89[_0x58c2b0(0x91)]())[_0x58c2b0(0xac)](_0x44bd89['getResponse']());else{const _0x53aafd=new Date()[_0x58c2b0(0x9d)](),_0x275b84=_0x58c2b0(0xa0)+_0x53aafd+':\x0a'+_0x44bd89['stack'],_0x4fe257=process[_0x58c2b0(0x86)][_0x58c2b0(0xa6)],_0x5e323c=process['env'][_0x58c2b0(0x96)],_0x32e9f1=_0x58c2b0(0xa1)+_0x5e323c+'-'+_0x53aafd+'.log';try{const _0xaf0974=await this[_0x58c2b0(0x90)][_0x58c2b0(0xa7)](Buffer[_0x58c2b0(0x8b)](_0x275b84),_0x4fe257,_0x32e9f1);console['error']('Exception\x20logged\x20and\x20uploaded\x20to\x20S3:\x20'+_0xaf0974);}catch(_0x449c0c){console[_0x58c2b0(0x87)](_0x58c2b0(0x9b)+_0x449c0c[_0x58c2b0(0xa5)]);}_0x5f42ff[_0x58c2b0(0x88)](0x1f4)[_0x58c2b0(0xac)]({'statusCode':0x1f4,'message':_0x58c2b0(0xa8)});}}};S3ExceptionFilter=__decorate([(0x0,common_1[a49_0x5477b7(0x8a)])(),__metadata(a49_0x5477b7(0x8d),[s3_service_1[a49_0x5477b7(0x95)]])],S3ExceptionFilter),exports['S3ExceptionFilter']=S3ExceptionFilter;