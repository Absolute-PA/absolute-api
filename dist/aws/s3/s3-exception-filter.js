'use strict';const a49_0x241584=a49_0x692e;function a49_0x906b(){const _0x13eb93=['LOG_BUCKET_NAME','catch','6368gxrcTM','Exception\x20occurred\x20at\x20','object','1689507GxLrFx','length','./s3.service','75Hbtdnh','.log','Failed\x20to\x20upload\x20exception\x20log\x20to\x20S3:\x20','31644qQxsyd','PI_NAME','error','S3Service','function','__metadata','436836fwtizl','@nestjs/common','1408DrOUHG','stack','status','8173NCXaXm','defineProperty','42880sPghcB','uploadFile','2625XcabzZ','exception-','json','metadata','S3ExceptionFilter','12pZfpJF','message','toISOString','env','Catch','__esModule','s3Service','89445KgTgeZ','getOwnPropertyDescriptor','HttpException','from'];a49_0x906b=function(){return _0x13eb93;};return a49_0x906b();}(function(_0x502d95,_0x3b595e){const _0x2b4155=a49_0x692e,_0x27671d=_0x502d95();while(!![]){try{const _0x5a8f3c=parseInt(_0x2b4155(0x1bc))/0x1+parseInt(_0x2b4155(0x1b7))/0x2+parseInt(_0x2b4155(0x1a2))/0x3*(-parseInt(_0x2b4155(0x19b))/0x4)+-parseInt(_0x2b4155(0x1ae))/0x5*(-parseInt(_0x2b4155(0x1b1))/0x6)+parseInt(_0x2b4155(0x196))/0x7*(parseInt(_0x2b4155(0x1a8))/0x8)+parseInt(_0x2b4155(0x1ab))/0x9+-parseInt(_0x2b4155(0x1be))/0xa*(parseInt(_0x2b4155(0x1b9))/0xb);if(_0x5a8f3c===_0x3b595e)break;else _0x27671d['push'](_0x27671d['shift']());}catch(_0x1cab4c){_0x27671d['push'](_0x27671d['shift']());}}}(a49_0x906b,0x2580f));function a49_0x692e(_0xd17920,_0x1ddb7d){const _0x906b33=a49_0x906b();return a49_0x692e=function(_0x692e34,_0x498885){_0x692e34=_0x692e34-0x196;let _0x3c1bb3=_0x906b33[_0x692e34];return _0x3c1bb3;},a49_0x692e(_0xd17920,_0x1ddb7d);}var __decorate=this&&this['__decorate']||function(_0x300514,_0x1d2629,_0x1f74a5,_0xe254d7){const _0x1cedec=a49_0x692e;var _0x14f283=arguments[_0x1cedec(0x1ac)],_0x3ae7f7=_0x14f283<0x3?_0x1d2629:_0xe254d7===null?_0xe254d7=Object[_0x1cedec(0x1a3)](_0x1d2629,_0x1f74a5):_0xe254d7,_0x4d9e38;if(typeof Reflect===_0x1cedec(0x1aa)&&typeof Reflect['decorate']===_0x1cedec(0x1b5))_0x3ae7f7=Reflect['decorate'](_0x300514,_0x1d2629,_0x1f74a5,_0xe254d7);else{for(var _0x420f97=_0x300514[_0x1cedec(0x1ac)]-0x1;_0x420f97>=0x0;_0x420f97--)if(_0x4d9e38=_0x300514[_0x420f97])_0x3ae7f7=(_0x14f283<0x3?_0x4d9e38(_0x3ae7f7):_0x14f283>0x3?_0x4d9e38(_0x1d2629,_0x1f74a5,_0x3ae7f7):_0x4d9e38(_0x1d2629,_0x1f74a5))||_0x3ae7f7;}return _0x14f283>0x3&&_0x3ae7f7&&Object[_0x1cedec(0x1bd)](_0x1d2629,_0x1f74a5,_0x3ae7f7),_0x3ae7f7;},__metadata=this&&this[a49_0x241584(0x1b6)]||function(_0xfbe71,_0x1293d8){const _0x398f16=a49_0x241584;if(typeof Reflect==='object'&&typeof Reflect[_0x398f16(0x199)]===_0x398f16(0x1b5))return Reflect[_0x398f16(0x199)](_0xfbe71,_0x1293d8);};Object[a49_0x241584(0x1bd)](exports,a49_0x241584(0x1a0),{'value':!![]}),exports[a49_0x241584(0x19a)]=void 0x0;const common_1=require(a49_0x241584(0x1b8)),s3_service_1=require(a49_0x241584(0x1ad));let S3ExceptionFilter=class S3ExceptionFilter{constructor(_0x123997){this['s3Service']=_0x123997;}async[a49_0x241584(0x1a7)](_0x4d66c3,_0x4e91b1){const _0x19450d=a49_0x241584,_0x1bb3ef=_0x4e91b1['switchToHttp'](),_0x5891c9=_0x1bb3ef['getResponse']();if(_0x4d66c3 instanceof common_1[_0x19450d(0x1a4)])_0x5891c9['status'](_0x4d66c3['getStatus']())[_0x19450d(0x198)](_0x4d66c3['getResponse']());else{const _0x570dbc=new Date()[_0x19450d(0x19d)](),_0x5c815c=_0x19450d(0x1a9)+_0x570dbc+':\x0a'+_0x4d66c3[_0x19450d(0x1ba)],_0x1c3f80=process[_0x19450d(0x19e)][_0x19450d(0x1a6)],_0x2120f2=process[_0x19450d(0x19e)][_0x19450d(0x1b2)],_0x2f5674=_0x19450d(0x197)+_0x2120f2+'-'+_0x570dbc+_0x19450d(0x1af);try{const _0xf504a4=await this[_0x19450d(0x1a1)][_0x19450d(0x1bf)](Buffer[_0x19450d(0x1a5)](_0x5c815c),_0x1c3f80,_0x2f5674);console[_0x19450d(0x1b3)]('Exception\x20logged\x20and\x20uploaded\x20to\x20S3:\x20'+_0xf504a4);}catch(_0xdde6f2){console[_0x19450d(0x1b3)](_0x19450d(0x1b0)+_0xdde6f2[_0x19450d(0x19c)]);}_0x5891c9[_0x19450d(0x1bb)](0x1f4)[_0x19450d(0x198)]({'statusCode':0x1f4,'message':'Internal\x20Server\x20Error'});}}};S3ExceptionFilter=__decorate([(0x0,common_1[a49_0x241584(0x19f)])(),__metadata('design:paramtypes',[s3_service_1[a49_0x241584(0x1b4)]])],S3ExceptionFilter),exports[a49_0x241584(0x19a)]=S3ExceptionFilter;