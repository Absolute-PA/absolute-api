'use strict';const a9_0x56fcef=a9_0x4979;(function(_0x3dddb2,_0x59ef64){const _0x383460=a9_0x4979,_0x221362=_0x3dddb2();while(!![]){try{const _0x596186=-parseInt(_0x383460(0xd0))/0x1+-parseInt(_0x383460(0xe1))/0x2*(parseInt(_0x383460(0xa8))/0x3)+parseInt(_0x383460(0xaf))/0x4*(-parseInt(_0x383460(0x92))/0x5)+-parseInt(_0x383460(0xc1))/0x6+-parseInt(_0x383460(0xb8))/0x7+parseInt(_0x383460(0xb2))/0x8*(parseInt(_0x383460(0x9d))/0x9)+parseInt(_0x383460(0xca))/0xa;if(_0x596186===_0x59ef64)break;else _0x221362['push'](_0x221362['shift']());}catch(_0x174eae){_0x221362['push'](_0x221362['shift']());}}}(a9_0x3742,0x5659a));var __decorate=this&&this[a9_0x56fcef(0xa0)]||function(_0x3d11cb,_0x2a1fdf,_0x5f5c8e,_0x5a7793){const _0x3ea8be=a9_0x56fcef;var _0x5f2483=arguments[_0x3ea8be(0x96)],_0x221e06=_0x5f2483<0x3?_0x2a1fdf:_0x5a7793===null?_0x5a7793=Object[_0x3ea8be(0xb7)](_0x2a1fdf,_0x5f5c8e):_0x5a7793,_0x34fc93;if(typeof Reflect===_0x3ea8be(0x9e)&&typeof Reflect[_0x3ea8be(0xba)]==='function')_0x221e06=Reflect[_0x3ea8be(0xba)](_0x3d11cb,_0x2a1fdf,_0x5f5c8e,_0x5a7793);else{for(var _0x3d7143=_0x3d11cb['length']-0x1;_0x3d7143>=0x0;_0x3d7143--)if(_0x34fc93=_0x3d11cb[_0x3d7143])_0x221e06=(_0x5f2483<0x3?_0x34fc93(_0x221e06):_0x5f2483>0x3?_0x34fc93(_0x2a1fdf,_0x5f5c8e,_0x221e06):_0x34fc93(_0x2a1fdf,_0x5f5c8e))||_0x221e06;}return _0x5f2483>0x3&&_0x221e06&&Object['defineProperty'](_0x2a1fdf,_0x5f5c8e,_0x221e06),_0x221e06;},__metadata=this&&this[a9_0x56fcef(0x97)]||function(_0x3ca522,_0x183c98){const _0x2a9644=a9_0x56fcef;if(typeof Reflect===_0x2a9644(0x9e)&&typeof Reflect[_0x2a9644(0xcd)]===_0x2a9644(0xa2))return Reflect[_0x2a9644(0xcd)](_0x3ca522,_0x183c98);},JobProccessor_1;Object[a9_0x56fcef(0xbe)](exports,a9_0x56fcef(0xb3),{'value':!![]}),exports['JobProccessor']=void 0x0;const common_1=require(a9_0x56fcef(0xa9)),agenda_1=require(a9_0x56fcef(0xd8)),nestjs_agenda_1=require('@agent-ly/nestjs-agenda'),enums_1=require(a9_0x56fcef(0xcf)),schedule_service_1=require(a9_0x56fcef(0xc6)),setting_service_1=require(a9_0x56fcef(0xdf)),file_1=require(a9_0x56fcef(0xdc)),constants_1=require(a9_0x56fcef(0xc3));function a9_0x4979(_0x534b89,_0x8c74dc){const _0x374240=a9_0x3742();return a9_0x4979=function(_0x49799c,_0x4e0850){_0x49799c=_0x49799c-0x91;let _0x151623=_0x374240[_0x49799c];return _0x151623;},a9_0x4979(_0x534b89,_0x8c74dc);}let JobProccessor=JobProccessor_1=class JobProccessor{constructor(_0x4ca019,_0xb6b2b7,_0x54ef5d){const _0x5d95d0=a9_0x56fcef;this['agendaService']=_0x4ca019,this[_0x5d95d0(0xe5)]=_0xb6b2b7,this[_0x5d95d0(0xad)]=_0x54ef5d,this[_0x5d95d0(0xdb)]=new common_1[(_0x5d95d0(0xa5))](JobProccessor_1['name']);}async[a9_0x56fcef(0xc0)](_0x1ac78d){const _0xecd20b=a9_0x56fcef;this['logger'][_0xecd20b(0xdd)](_0xecd20b(0xab)+new Date()+_0xecd20b(0xe7)+_0x1ac78d[_0xecd20b(0xb0)][_0xecd20b(0xb9)]);const _0x48f771=await this[_0xecd20b(0xad)][_0xecd20b(0x9f)]();if(_0x48f771[_0xecd20b(0xac)]){this[_0xecd20b(0xdb)]['log'](_0xecd20b(0xcb));if(process['env']['NODE_ENV']!==_0xecd20b(0xc8))return;}this['logger'][_0xecd20b(0xdd)](_0xecd20b(0xd1)),await this[_0xecd20b(0xe8)][_0xecd20b(0xd2)]({'name':{'$nin':[enums_1[_0xecd20b(0xe4)][_0xecd20b(0xd3)],enums_1[_0xecd20b(0xe4)]['PurgeTempUploadedFiles']]},'type':_0xecd20b(0xcc)}),this[_0xecd20b(0xdb)][_0xecd20b(0xdd)](_0xecd20b(0xe2));const _0x8ec90=await this[_0xecd20b(0xe5)][_0xecd20b(0xbb)](new Date());this[_0xecd20b(0xdb)][_0xecd20b(0xdd)](_0xecd20b(0xc9)+(_0x8ec90===null||_0x8ec90===void 0x0?void 0x0:_0x8ec90[_0xecd20b(0xb9)]));if(!_0x8ec90||!_0x8ec90[_0xecd20b(0xd7)]||_0x8ec90[_0xecd20b(0xd7)]['length']===0x0)return;_0x8ec90[_0xecd20b(0xd7)][_0xecd20b(0xd5)](_0x4a6c2b=>{const _0x8a6b23=_0xecd20b;this[_0x8a6b23(0xdb)]['log'](_0x8a6b23(0xde)+_0x4a6c2b[_0x8a6b23(0xc4)]+_0x8a6b23(0xa1)+_0x4a6c2b[_0x8a6b23(0x98)]+_0x8a6b23(0xa1)+_0x4a6c2b[_0x8a6b23(0xb9)]);const _0x3b4605=new Date(),_0x4ee6d9=_0x3b4605[_0x8a6b23(0xe0)](),_0x3fdbb8=_0x3b4605[_0x8a6b23(0xd4)](),_0x1ff94e=_0x3b4605['getSeconds'](),[_0x1b9c8d,_0xb4d150,_0x52c6b2]=_0x4a6c2b['time'][_0x8a6b23(0x93)](':');if(+_0x1b9c8d<_0x4ee6d9||+_0x1b9c8d===_0x4ee6d9&&+_0xb4d150<_0x3fdbb8||+_0x1b9c8d===_0x4ee6d9&&+_0xb4d150===_0x3fdbb8&&+_0x52c6b2<_0x1ff94e)return;_0x3b4605[_0x8a6b23(0x95)](+_0x1b9c8d),_0x3b4605[_0x8a6b23(0xa7)](+_0xb4d150),_0x3b4605['setSeconds'](+_0x52c6b2);switch(_0x4a6c2b[_0x8a6b23(0x98)]){case enums_1[_0x8a6b23(0xc7)][_0x8a6b23(0xd9)]:{const {soundId:_0xed7af6,durationInSecond:_0x7ef0ab}=_0x4a6c2b[_0x8a6b23(0xd6)];if(!_0xed7af6)return;const _0x300760={'soundId':_0xed7af6,'durationInSecond':_0x7ef0ab,'audit':{'actor':enums_1[_0x8a6b23(0xb1)][_0x8a6b23(0xb5)],'name':enums_1[_0x8a6b23(0xc7)]['PlaySound'],'message':_0x8a6b23(0xce)+_0x4a6c2b[_0x8a6b23(0xb9)]+_0x8a6b23(0x91)+_0x8ec90[_0x8a6b23(0xb9)]}};this[_0x8a6b23(0xe8)][_0x8a6b23(0xb4)](_0x3b4605,enums_1[_0x8a6b23(0xc7)]['PlaySound'],_0x300760);break;}case enums_1[_0x8a6b23(0xc7)][_0x8a6b23(0xc2)]:{const {playlistId:_0x237bec,durationInSecond:_0x439d37}=_0x4a6c2b[_0x8a6b23(0xd6)];if(!_0x237bec)return;const _0x536daf={'playlistId':_0x237bec,'durationInSecond':_0x439d37,'audit':{'actor':enums_1[_0x8a6b23(0xb1)][_0x8a6b23(0xb5)],'name':enums_1[_0x8a6b23(0xc7)][_0x8a6b23(0xc2)],'message':_0x8a6b23(0xce)+_0x4a6c2b[_0x8a6b23(0xb9)]+_0x8a6b23(0x91)+_0x8ec90['name']}};this['agendaService']['schedule'](_0x3b4605,enums_1[_0x8a6b23(0xc7)][_0x8a6b23(0xc2)],_0x536daf);break;}case enums_1['JobType'][_0x8a6b23(0xc5)]:{const {voiceId:_0x4830d0,durationInSecond:_0x40c45d}=_0x4a6c2b[_0x8a6b23(0xd6)];if(!_0x4830d0)return;const _0x4594cb={'voiceId':_0x4830d0,'durationInSecond':_0x40c45d,'audit':{'actor':enums_1[_0x8a6b23(0xb1)]['Job'],'name':enums_1[_0x8a6b23(0xc7)]['PlayVoiceRecorded'],'message':_0x8a6b23(0xce)+_0x4a6c2b[_0x8a6b23(0xb9)]+_0x8a6b23(0x91)+_0x8ec90[_0x8a6b23(0xb9)]}};this[_0x8a6b23(0xe8)][_0x8a6b23(0xb4)](_0x3b4605,enums_1[_0x8a6b23(0xc7)]['PlayVoiceRecorded'],_0x4594cb);break;}case enums_1[_0x8a6b23(0xc7)][_0x8a6b23(0xe3)]:{const {textToAudioId:_0x1057b2,durationInSecond:_0x54455d}=_0x4a6c2b['data'];if(!_0x1057b2)return;const _0x35d941={'textToAudioId':_0x1057b2,'durationInSecond':_0x54455d,'audit':{'actor':enums_1[_0x8a6b23(0xb1)]['Job'],'name':enums_1[_0x8a6b23(0xc7)][_0x8a6b23(0xe3)],'message':_0x8a6b23(0xce)+_0x4a6c2b[_0x8a6b23(0xb9)]+'\x20-\x20Schedule:\x20'+_0x8ec90['name']}};this['agendaService']['schedule'](_0x3b4605,enums_1[_0x8a6b23(0xc7)][_0x8a6b23(0xe3)],_0x35d941);break;}default:return;}}),this['logger'][_0xecd20b(0xdd)](_0xecd20b(0xae));}async[a9_0x56fcef(0xaa)](_0x580738){const _0x1504cc=a9_0x56fcef;this[_0x1504cc(0xdb)][_0x1504cc(0xdd)](_0x1504cc(0xb6));const {success:_0x20e26c,message:_0x59287a}=await(0x0,file_1[_0x1504cc(0x9b)])(constants_1['TMP_UPLOAD_DIR']);!_0x20e26c&&this[_0x1504cc(0xdb)]['error'](_0x1504cc(0xe6)+_0x59287a);}};function a9_0x3742(){const _0x5af3f3=['purgeTempUploadedFiles','Server\x20time:\x20','isExpired','settingService','Events\x20scheduled!','68ciWddj','attrs','AuditActor','69800bpBIeM','__esModule','schedule','Job','Purging\x20temp\x20uploaded\x20files...','getOwnPropertyDescriptor','3872442VkfEBB','name','decorate','findEligibleSchedule','Define','design:returntype','defineProperty','AgendaService','checkEvent','3315612YeTkpu','PlayMusic','../common/constants','time','PlayVoiceRecorded','../schedule/schedule.service','JobType','development','Eligible\x20schedule:\x20','19154780YAsxni','Invalid\x20or\x20expired\x20license\x20key!','single','metadata','Event:\x20','../common/enums','194830JmLCSj','Canceling\x20all\x20old\x20background\x20checks...','cancel','CheckEvent','getMinutes','forEach','data','events','agenda','PlaySound','design:type','logger','../common/file','log','Scheduling\x20event:\x20','../setting/setting.service','getHours','884794ilRQyp','Fetching\x20today\x20schedule...','PlayTextToAudio','BackgroundJobType','scheduleService','Failed\x20to\x20purge\x20temp\x20uploaded\x20files:\x20','.\x20Job:\x20','agendaService','\x20-\x20Schedule:\x20','18545UFkNHe','split','SettingService','setHours','length','__metadata','jobType','PurgeTempUploadedFiles','prototype','deleteFilesInFolder','ScheduleService','252KwVWOE','object','updateExpiryStatus','__decorate','\x20-\x20','function','JobProccessor','design:paramtypes','Logger','Processor','setMinutes','3UxIiiZ','@nestjs/common'];a9_0x3742=function(){return _0x5af3f3;};return a9_0x3742();}__decorate([(0x0,nestjs_agenda_1['Define'])(enums_1[a9_0x56fcef(0xe4)][a9_0x56fcef(0xd3)]),__metadata(a9_0x56fcef(0xda),Function),__metadata(a9_0x56fcef(0xa4),[agenda_1[a9_0x56fcef(0xb5)]]),__metadata(a9_0x56fcef(0xbd),Promise)],JobProccessor[a9_0x56fcef(0x9a)],a9_0x56fcef(0xc0),null),__decorate([(0x0,nestjs_agenda_1[a9_0x56fcef(0xbc)])(enums_1[a9_0x56fcef(0xe4)][a9_0x56fcef(0x99)]),__metadata(a9_0x56fcef(0xda),Function),__metadata('design:paramtypes',[agenda_1[a9_0x56fcef(0xb5)]]),__metadata('design:returntype',Promise)],JobProccessor[a9_0x56fcef(0x9a)],a9_0x56fcef(0xaa),null),JobProccessor=JobProccessor_1=__decorate([(0x0,nestjs_agenda_1[a9_0x56fcef(0xa6)])(),__metadata(a9_0x56fcef(0xa4),[nestjs_agenda_1[a9_0x56fcef(0xbf)],schedule_service_1[a9_0x56fcef(0x9c)],setting_service_1[a9_0x56fcef(0x94)]])],JobProccessor),exports[a9_0x56fcef(0xa3)]=JobProccessor;