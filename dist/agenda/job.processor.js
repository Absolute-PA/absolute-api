'use strict';const a9_0x3c9554=a9_0xa380;(function(_0x208b35,_0x33354b){const _0x17fc16=a9_0xa380,_0x3f8edb=_0x208b35();while(!![]){try{const _0x31ccf5=-parseInt(_0x17fc16(0x139))/0x1*(-parseInt(_0x17fc16(0x112))/0x2)+parseInt(_0x17fc16(0x134))/0x3+parseInt(_0x17fc16(0x122))/0x4*(parseInt(_0x17fc16(0x127))/0x5)+parseInt(_0x17fc16(0x11c))/0x6*(parseInt(_0x17fc16(0x105))/0x7)+parseInt(_0x17fc16(0x101))/0x8*(-parseInt(_0x17fc16(0x114))/0x9)+-parseInt(_0x17fc16(0x125))/0xa+-parseInt(_0x17fc16(0x13d))/0xb;if(_0x31ccf5===_0x33354b)break;else _0x3f8edb['push'](_0x3f8edb['shift']());}catch(_0x531530){_0x3f8edb['push'](_0x3f8edb['shift']());}}}(a9_0x5635,0x8b1ea));var __decorate=this&&this['__decorate']||function(_0x533e97,_0x36d877,_0x80b0b,_0x11460c){const _0x2f6668=a9_0xa380;var _0x448c96=arguments[_0x2f6668(0x129)],_0x2990e8=_0x448c96<0x3?_0x36d877:_0x11460c===null?_0x11460c=Object[_0x2f6668(0x12e)](_0x36d877,_0x80b0b):_0x11460c,_0xfe7ec6;if(typeof Reflect===_0x2f6668(0xf2)&&typeof Reflect['decorate']===_0x2f6668(0x107))_0x2990e8=Reflect['decorate'](_0x533e97,_0x36d877,_0x80b0b,_0x11460c);else{for(var _0x2b59a3=_0x533e97[_0x2f6668(0x129)]-0x1;_0x2b59a3>=0x0;_0x2b59a3--)if(_0xfe7ec6=_0x533e97[_0x2b59a3])_0x2990e8=(_0x448c96<0x3?_0xfe7ec6(_0x2990e8):_0x448c96>0x3?_0xfe7ec6(_0x36d877,_0x80b0b,_0x2990e8):_0xfe7ec6(_0x36d877,_0x80b0b))||_0x2990e8;}return _0x448c96>0x3&&_0x2990e8&&Object[_0x2f6668(0x117)](_0x36d877,_0x80b0b,_0x2990e8),_0x2990e8;},__metadata=this&&this[a9_0x3c9554(0xf7)]||function(_0x2c5b80,_0xf046a9){const _0x2a13ad=a9_0x3c9554;if(typeof Reflect==='object'&&typeof Reflect[_0x2a13ad(0x11a)]==='function')return Reflect[_0x2a13ad(0x11a)](_0x2c5b80,_0xf046a9);},JobProccessor_1;Object[a9_0x3c9554(0x117)](exports,a9_0x3c9554(0xf4),{'value':!![]}),exports[a9_0x3c9554(0x130)]=void 0x0;function a9_0xa380(_0x139ec5,_0x25e8c6){const _0x5635a0=a9_0x5635();return a9_0xa380=function(_0xa380b6,_0x1a8d97){_0xa380b6=_0xa380b6-0xef;let _0x1f7113=_0x5635a0[_0xa380b6];return _0x1f7113;},a9_0xa380(_0x139ec5,_0x25e8c6);}const common_1=require(a9_0x3c9554(0x140)),agenda_1=require(a9_0x3c9554(0x136)),nestjs_agenda_1=require(a9_0x3c9554(0xfd)),enums_1=require(a9_0x3c9554(0x12b)),schedule_service_1=require(a9_0x3c9554(0x11d)),setting_service_1=require(a9_0x3c9554(0xf8)),file_1=require(a9_0x3c9554(0x124)),constants_1=require(a9_0x3c9554(0x109));let JobProccessor=JobProccessor_1=class JobProccessor{constructor(_0x4fdc01,_0x39d491,_0x43f2b8){const _0x4999b1=a9_0x3c9554;this[_0x4999b1(0x111)]=_0x4fdc01,this[_0x4999b1(0xef)]=_0x39d491,this[_0x4999b1(0x104)]=_0x43f2b8,this['logger']=new common_1['Logger'](JobProccessor_1[_0x4999b1(0x13b)]);}async[a9_0x3c9554(0xfe)](_0x5d45bc){const _0x5407ad=a9_0x3c9554;this[_0x5407ad(0x103)][_0x5407ad(0x13e)]('Server\x20time:\x20'+new Date()+'.\x20Job:\x20'+_0x5d45bc[_0x5407ad(0x10a)][_0x5407ad(0x13b)]);const _0x406169=await this['settingService'][_0x5407ad(0x10d)]();if(_0x406169[_0x5407ad(0x10f)]){this[_0x5407ad(0x103)][_0x5407ad(0x13e)]('Invalid\x20or\x20expired\x20license\x20key!');if(process[_0x5407ad(0x11f)][_0x5407ad(0x12f)]!=='development')return;}this[_0x5407ad(0x103)][_0x5407ad(0x13e)](_0x5407ad(0x131)),await this[_0x5407ad(0x111)]['cancel']({'name':{'$nin':[enums_1[_0x5407ad(0xfc)][_0x5407ad(0x132)],enums_1['BackgroundJobType'][_0x5407ad(0xfb)]]},'type':_0x5407ad(0x116)}),this[_0x5407ad(0x103)][_0x5407ad(0x13e)](_0x5407ad(0x113));const _0x5e8be9=await this[_0x5407ad(0xef)][_0x5407ad(0x11b)](new Date());this[_0x5407ad(0x103)][_0x5407ad(0x13e)](_0x5407ad(0x100)+(_0x5e8be9===null||_0x5e8be9===void 0x0?void 0x0:_0x5e8be9[_0x5407ad(0x13b)]));if(!_0x5e8be9||!_0x5e8be9[_0x5407ad(0x102)]||_0x5e8be9[_0x5407ad(0x102)][_0x5407ad(0x129)]===0x0)return;_0x5e8be9[_0x5407ad(0x102)]['forEach'](_0xea4ce2=>{const _0x4051bf=_0x5407ad;this['logger'][_0x4051bf(0x13e)](_0x4051bf(0xff)+_0xea4ce2[_0x4051bf(0x10b)]+_0x4051bf(0x13a)+_0xea4ce2[_0x4051bf(0xf6)]+'\x20-\x20'+_0xea4ce2['name']);const _0x4bfc7a=new Date(),_0x10c54d=_0x4bfc7a['getHours'](),_0x240edc=_0x4bfc7a[_0x4051bf(0x12d)](),_0x8af171=_0x4bfc7a[_0x4051bf(0x141)](),[_0x3aa961,_0x22c959,_0xee7ae2]=_0xea4ce2[_0x4051bf(0x10b)]['split'](':');if(+_0x3aa961<_0x10c54d||+_0x3aa961===_0x10c54d&&+_0x22c959<_0x240edc||+_0x3aa961===_0x10c54d&&+_0x22c959===_0x240edc&&+_0xee7ae2<_0x8af171)return;_0x4bfc7a[_0x4051bf(0xf3)](+_0x3aa961),_0x4bfc7a[_0x4051bf(0x119)](+_0x22c959),_0x4bfc7a[_0x4051bf(0x137)](+_0xee7ae2);switch(_0xea4ce2[_0x4051bf(0xf6)]){case enums_1[_0x4051bf(0xf9)]['PlaySound']:{const {soundId:_0x14e4af,durationInSecond:_0x3fb975}=_0xea4ce2[_0x4051bf(0x108)];if(!_0x14e4af)return;const _0x2d0aac={'soundId':_0x14e4af,'durationInSecond':_0x3fb975,'audit':{'actor':enums_1[_0x4051bf(0x118)][_0x4051bf(0x135)],'name':enums_1['JobType']['PlaySound'],'message':_0x4051bf(0x123)+_0xea4ce2[_0x4051bf(0x13b)]+_0x4051bf(0x138)+_0x5e8be9[_0x4051bf(0x13b)]}};this[_0x4051bf(0x111)][_0x4051bf(0x13c)](_0x4bfc7a,enums_1['JobType'][_0x4051bf(0xf0)],_0x2d0aac);break;}case enums_1[_0x4051bf(0xf9)][_0x4051bf(0xf5)]:{const {playlistId:_0x2eb802,durationInSecond:_0x25bfd7}=_0xea4ce2[_0x4051bf(0x108)];if(!_0x2eb802)return;const _0x59f0af={'playlistId':_0x2eb802,'durationInSecond':_0x25bfd7,'audit':{'actor':enums_1['AuditActor'][_0x4051bf(0x135)],'name':enums_1[_0x4051bf(0xf9)]['PlayMusic'],'message':_0x4051bf(0x123)+_0xea4ce2[_0x4051bf(0x13b)]+'\x20-\x20Schedule:\x20'+_0x5e8be9[_0x4051bf(0x13b)]}};this[_0x4051bf(0x111)][_0x4051bf(0x13c)](_0x4bfc7a,enums_1[_0x4051bf(0xf9)][_0x4051bf(0xf5)],_0x59f0af);break;}case enums_1['JobType'][_0x4051bf(0xf1)]:{const {voiceId:_0xabd5e3,durationInSecond:_0x5612bf}=_0xea4ce2['data'];if(!_0xabd5e3)return;const _0x40e887={'voiceId':_0xabd5e3,'durationInSecond':_0x5612bf,'audit':{'actor':enums_1[_0x4051bf(0x118)][_0x4051bf(0x135)],'name':enums_1[_0x4051bf(0xf9)]['PlayVoiceRecorded'],'message':'Event:\x20'+_0xea4ce2[_0x4051bf(0x13b)]+_0x4051bf(0x138)+_0x5e8be9[_0x4051bf(0x13b)]}};this['agendaService']['schedule'](_0x4bfc7a,enums_1[_0x4051bf(0xf9)]['PlayVoiceRecorded'],_0x40e887);break;}case enums_1[_0x4051bf(0xf9)][_0x4051bf(0x10e)]:{const {textToAudioId:_0x1ef9e6,durationInSecond:_0x4f3738}=_0xea4ce2[_0x4051bf(0x108)];if(!_0x1ef9e6)return;const _0x5d50a9={'textToAudioId':_0x1ef9e6,'durationInSecond':_0x4f3738,'audit':{'actor':enums_1['AuditActor'][_0x4051bf(0x135)],'name':enums_1['JobType'][_0x4051bf(0x10e)],'message':_0x4051bf(0x123)+_0xea4ce2[_0x4051bf(0x13b)]+_0x4051bf(0x138)+_0x5e8be9[_0x4051bf(0x13b)]}};this['agendaService']['schedule'](_0x4bfc7a,enums_1['JobType'][_0x4051bf(0x10e)],_0x5d50a9);break;}default:return;}}),this[_0x5407ad(0x103)][_0x5407ad(0x13e)](_0x5407ad(0x110));}async[a9_0x3c9554(0x128)](_0x127172){const _0x3811a2=a9_0x3c9554;this[_0x3811a2(0x103)]['log'](_0x3811a2(0x11e));const {success:_0x2e6d15,message:_0x53571b}=await(0x0,file_1[_0x3811a2(0x121)])(constants_1['TMP_UPLOAD_DIR']);!_0x2e6d15&&this[_0x3811a2(0x103)][_0x3811a2(0x106)](_0x3811a2(0x120)+_0x53571b);}};__decorate([(0x0,nestjs_agenda_1[a9_0x3c9554(0xfa)])(enums_1['BackgroundJobType'][a9_0x3c9554(0x132)]),__metadata(a9_0x3c9554(0x12a),Function),__metadata(a9_0x3c9554(0x115),[agenda_1[a9_0x3c9554(0x135)]]),__metadata('design:returntype',Promise)],JobProccessor[a9_0x3c9554(0x13f)],a9_0x3c9554(0xfe),null),__decorate([(0x0,nestjs_agenda_1['Define'])(enums_1[a9_0x3c9554(0xfc)][a9_0x3c9554(0xfb)]),__metadata(a9_0x3c9554(0x12a),Function),__metadata(a9_0x3c9554(0x115),[agenda_1[a9_0x3c9554(0x135)]]),__metadata(a9_0x3c9554(0x133),Promise)],JobProccessor[a9_0x3c9554(0x13f)],a9_0x3c9554(0x128),null),JobProccessor=JobProccessor_1=__decorate([(0x0,nestjs_agenda_1[a9_0x3c9554(0x10c)])(),__metadata(a9_0x3c9554(0x115),[nestjs_agenda_1['AgendaService'],schedule_service_1[a9_0x3c9554(0x126)],setting_service_1[a9_0x3c9554(0x12c)]])],JobProccessor),exports[a9_0x3c9554(0x130)]=JobProccessor;function a9_0x5635(){const _0x10c007=['design:paramtypes','single','defineProperty','AuditActor','setMinutes','metadata','findEligibleSchedule','12EQKxjD','../schedule/schedule.service','Purging\x20temp\x20uploaded\x20files...','env','Failed\x20to\x20purge\x20temp\x20uploaded\x20files:\x20','deleteFilesInFolder','16176wxIkXW','Event:\x20','../common/file','9286250uCZgfg','ScheduleService','785vLHDWI','purgeTempUploadedFiles','length','design:type','../common/enums','SettingService','getMinutes','getOwnPropertyDescriptor','NODE_ENV','JobProccessor','Canceling\x20all\x20old\x20background\x20checks...','CheckEvent','design:returntype','1648281UwhgKx','Job','agenda','setSeconds','\x20-\x20Schedule:\x20','80056BJbrQi','\x20-\x20','name','schedule','2732917husNXo','log','prototype','@nestjs/common','getSeconds','scheduleService','PlaySound','PlayVoiceRecorded','object','setHours','__esModule','PlayMusic','jobType','__metadata','../setting/setting.service','JobType','Define','PurgeTempUploadedFiles','BackgroundJobType','@agent-ly/nestjs-agenda','checkEvent','Scheduling\x20event:\x20','Eligible\x20schedule:\x20','8ZNnRGz','events','logger','settingService','1544536vUHrAB','error','function','data','../common/constants','attrs','time','Processor','updateExpiryStatus','PlayTextToAudio','isExpired','Events\x20scheduled!','agendaService','14LToPZL','Fetching\x20today\x20schedule...','3952053XWGlQF'];a9_0x5635=function(){return _0x10c007;};return a9_0x5635();}