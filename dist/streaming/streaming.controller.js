'use strict';const a137_0x221971=a137_0x42f4;function a137_0x1e31(){const _0xad4961=['26JDMQcf','prototype','1629592ungIJw','Success\x20play\x20sound:\x20','audioService','stopStreamAudio','decorate','../auth/guards/roles.guard','2280985eSVZSP','5621gnFZBG','Role','2209548AIUzbl','../auth/guards/jwt.guard','design:type','StreamingController','Admin','/stop','object','createStreamFromFile','1243242MFLlZm','filePath','send','design:returntype','User','playAudioFile','__esModule','./streaming.service','logger','RolesGuard','length','Roles','6IcGWce','../auth/decorators/roles.decorator','audio','playStreamAudio','cwd','metadata','getOwnPropertyDescriptor','Query','13086570NxQgCn','defineProperty','log','1637352gdmrzD','UseGuards','design:paramtypes','16DiDSaV','__decorate','__metadata','JwtAuthGuard','function','StreamingService','Res','Viewer','/play/','startStreaming'];a137_0x1e31=function(){return _0xad4961;};return a137_0x1e31();}(function(_0x4f2b9e,_0x2c0c1a){const _0x33774b=a137_0x42f4,_0x4eb10e=_0x4f2b9e();while(!![]){try{const _0x31bbbf=-parseInt(_0x33774b(0x161))/0x1*(parseInt(_0x33774b(0x158))/0x2)+parseInt(_0x33774b(0x163))/0x3+parseInt(_0x33774b(0x15a))/0x4+parseInt(_0x33774b(0x160))/0x5*(parseInt(_0x33774b(0x140))/0x6)+-parseInt(_0x33774b(0x134))/0x7+parseInt(_0x33774b(0x14e))/0x8*(parseInt(_0x33774b(0x14b))/0x9)+-parseInt(_0x33774b(0x148))/0xa;if(_0x31bbbf===_0x2c0c1a)break;else _0x4eb10e['push'](_0x4eb10e['shift']());}catch(_0x460286){_0x4eb10e['push'](_0x4eb10e['shift']());}}}(a137_0x1e31,0x62c97));var __decorate=this&&this[a137_0x221971(0x14f)]||function(_0x5af633,_0x542d57,_0x79ebc0,_0xdcf73e){const _0x1371e9=a137_0x221971;var _0x4c1257=arguments['length'],_0x2c69d6=_0x4c1257<0x3?_0x542d57:_0xdcf73e===null?_0xdcf73e=Object[_0x1371e9(0x146)](_0x542d57,_0x79ebc0):_0xdcf73e,_0x500b4d;if(typeof Reflect===_0x1371e9(0x132)&&typeof Reflect['decorate']===_0x1371e9(0x152))_0x2c69d6=Reflect[_0x1371e9(0x15e)](_0x5af633,_0x542d57,_0x79ebc0,_0xdcf73e);else{for(var _0x3a40a3=_0x5af633[_0x1371e9(0x13e)]-0x1;_0x3a40a3>=0x0;_0x3a40a3--)if(_0x500b4d=_0x5af633[_0x3a40a3])_0x2c69d6=(_0x4c1257<0x3?_0x500b4d(_0x2c69d6):_0x4c1257>0x3?_0x500b4d(_0x542d57,_0x79ebc0,_0x2c69d6):_0x500b4d(_0x542d57,_0x79ebc0))||_0x2c69d6;}return _0x4c1257>0x3&&_0x2c69d6&&Object[_0x1371e9(0x149)](_0x542d57,_0x79ebc0,_0x2c69d6),_0x2c69d6;},__metadata=this&&this[a137_0x221971(0x150)]||function(_0x3d9911,_0x6d979d){const _0x2578f1=a137_0x221971;if(typeof Reflect==='object'&&typeof Reflect[_0x2578f1(0x145)]===_0x2578f1(0x152))return Reflect[_0x2578f1(0x145)](_0x3d9911,_0x6d979d);},__param=this&&this['__param']||function(_0x25f141,_0x54a255){return function(_0x2bd91d,_0x50c94a){_0x54a255(_0x2bd91d,_0x50c94a,_0x25f141);};},StreamingController_1;function a137_0x42f4(_0x3f963a,_0x28095e){const _0x1e316a=a137_0x1e31();return a137_0x42f4=function(_0x42f422,_0x37acb3){_0x42f422=_0x42f422-0x132;let _0x5c785c=_0x1e316a[_0x42f422];return _0x5c785c;},a137_0x42f4(_0x3f963a,_0x28095e);}Object[a137_0x221971(0x149)](exports,a137_0x221971(0x13a),{'value':!![]}),exports[a137_0x221971(0x166)]=void 0x0;const common_1=require('@nestjs/common'),path_1=require('path'),streaming_service_1=require(a137_0x221971(0x13b)),roles_decorator_1=require(a137_0x221971(0x141)),role_enum_1=require('../auth/enums/role.enum'),jwt_guard_1=require(a137_0x221971(0x164)),roles_guard_1=require(a137_0x221971(0x15f));let StreamingController=StreamingController_1=class StreamingController{constructor(_0x4acc6f){const _0x76cd44=a137_0x221971;this[_0x76cd44(0x15c)]=_0x4acc6f,this['logger']=new common_1['Logger'](StreamingController_1['name']);}async[a137_0x221971(0x139)](_0x5d83e4,_0x21c2df){const _0x52014c=a137_0x221971;try{const _0x361b8b=(0x0,path_1['join'])(process[_0x52014c(0x144)](),_0x5d83e4),_0x34cf02=this['audioService'][_0x52014c(0x133)](_0x361b8b);this[_0x52014c(0x15c)][_0x52014c(0x143)](_0x34cf02),_0x21c2df[_0x52014c(0x136)](_0x52014c(0x15b)+_0x361b8b);}catch(_0x3f58c8){return this[_0x52014c(0x13c)]['log'](_0x3f58c8,'error'),'';}}async[a137_0x221971(0x157)](){const _0x11d84c=a137_0x221971;try{this[_0x11d84c(0x15c)]['openServerUIStream']();}catch(_0xc0eeb8){this['logger'][_0x11d84c(0x14a)](_0xc0eeb8);}}async['stopStreamAudio'](_0x11cc76){const _0x3e4df1=a137_0x221971;this['audioService'][_0x3e4df1(0x15d)]();}};__decorate([(0x0,common_1['Post'])(a137_0x221971(0x156)),(0x0,common_1[a137_0x221971(0x14c)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a137_0x221971(0x13d)]),(0x0,roles_decorator_1[a137_0x221971(0x13f)])(role_enum_1['Role'][a137_0x221971(0x167)],role_enum_1['Role']['User'],role_enum_1['Role'][a137_0x221971(0x155)]),__param(0x0,(0x0,common_1[a137_0x221971(0x147)])(a137_0x221971(0x135))),__param(0x1,(0x0,common_1[a137_0x221971(0x154)])({'passthrough':!![]})),__metadata(a137_0x221971(0x165),Function),__metadata(a137_0x221971(0x14d),[String,Object]),__metadata('design:returntype',Promise)],StreamingController[a137_0x221971(0x159)],'playAudioFile',null),__decorate([(0x0,common_1['Get'])('stream/start'),(0x0,common_1['UseGuards'])(jwt_guard_1[a137_0x221971(0x151)],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1[a137_0x221971(0x13f)])(role_enum_1[a137_0x221971(0x162)][a137_0x221971(0x167)],role_enum_1[a137_0x221971(0x162)][a137_0x221971(0x138)],role_enum_1[a137_0x221971(0x162)][a137_0x221971(0x155)]),__metadata(a137_0x221971(0x165),Function),__metadata(a137_0x221971(0x14d),[]),__metadata(a137_0x221971(0x137),Promise)],StreamingController[a137_0x221971(0x159)],a137_0x221971(0x157),null),__decorate([(0x0,common_1['Get'])(a137_0x221971(0x168)),(0x0,common_1[a137_0x221971(0x14c)])(jwt_guard_1[a137_0x221971(0x151)],roles_guard_1[a137_0x221971(0x13d)]),(0x0,roles_decorator_1[a137_0x221971(0x13f)])(role_enum_1[a137_0x221971(0x162)][a137_0x221971(0x167)],role_enum_1[a137_0x221971(0x162)][a137_0x221971(0x138)],role_enum_1[a137_0x221971(0x162)]['Viewer']),__param(0x0,(0x0,common_1[a137_0x221971(0x154)])({'passthrough':!![]})),__metadata(a137_0x221971(0x165),Function),__metadata(a137_0x221971(0x14d),[Object]),__metadata(a137_0x221971(0x137),Promise)],StreamingController[a137_0x221971(0x159)],a137_0x221971(0x15d),null),StreamingController=StreamingController_1=__decorate([(0x0,common_1['Controller'])(a137_0x221971(0x142)),__metadata(a137_0x221971(0x14d),[streaming_service_1[a137_0x221971(0x153)]])],StreamingController),exports['StreamingController']=StreamingController;