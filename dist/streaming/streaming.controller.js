'use strict';const a137_0x5ef0cf=a137_0x5b8f;(function(_0x56d9e1,_0x278415){const _0x20c188=a137_0x5b8f,_0x2a2433=_0x56d9e1();while(!![]){try{const _0x179abc=parseInt(_0x20c188(0x19a))/0x1+-parseInt(_0x20c188(0x1c0))/0x2+parseInt(_0x20c188(0x1b8))/0x3*(parseInt(_0x20c188(0x198))/0x4)+parseInt(_0x20c188(0x1a7))/0x5*(parseInt(_0x20c188(0x19e))/0x6)+parseInt(_0x20c188(0x1c9))/0x7+parseInt(_0x20c188(0x1b0))/0x8+-parseInt(_0x20c188(0x1b2))/0x9;if(_0x179abc===_0x278415)break;else _0x2a2433['push'](_0x2a2433['shift']());}catch(_0x3c88e2){_0x2a2433['push'](_0x2a2433['shift']());}}}(a137_0x5951,0x4b274));function a137_0x5951(){const _0x29ca9d=['Post','function','startStreaming','Viewer','playStreamAudio','1135064HkCTqP','audio','/stop','cwd','design:returntype','prototype','Get','design:paramtypes','../auth/decorators/roles.decorator','251797CHnvyB','send','Success\x20play\x20sound:\x20','../auth/guards/jwt.guard','join','log','Logger','Res','logger','JwtAuthGuard','StreamingController','227124IDGzZQ','@nestjs/common','370621RQiIbR','metadata','Admin','__param','654828WSqfVy','playAudioFile','audioService','filePath','__decorate','length','UseGuards','getOwnPropertyDescriptor','RolesGuard','5TUDWVr','stopStreamAudio','../auth/enums/role.enum','Roles','design:type','__esModule','__metadata','decorate','defineProperty','1906400JymDUc','Query','3507291WYNqDz','name','object','User','createStreamFromFile','Role','27zZFBNB','error','path'];a137_0x5951=function(){return _0x29ca9d;};return a137_0x5951();}var __decorate=this&&this[a137_0x5ef0cf(0x1a2)]||function(_0x1c5ccf,_0x3aa089,_0x2ec6e1,_0x112640){const _0x59083f=a137_0x5ef0cf;var _0x4c8c5d=arguments[_0x59083f(0x1a3)],_0x19049a=_0x4c8c5d<0x3?_0x3aa089:_0x112640===null?_0x112640=Object[_0x59083f(0x1a5)](_0x3aa089,_0x2ec6e1):_0x112640,_0xfb77f8;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x59083f(0x1bc))_0x19049a=Reflect[_0x59083f(0x1ae)](_0x1c5ccf,_0x3aa089,_0x2ec6e1,_0x112640);else{for(var _0x14e64b=_0x1c5ccf[_0x59083f(0x1a3)]-0x1;_0x14e64b>=0x0;_0x14e64b--)if(_0xfb77f8=_0x1c5ccf[_0x14e64b])_0x19049a=(_0x4c8c5d<0x3?_0xfb77f8(_0x19049a):_0x4c8c5d>0x3?_0xfb77f8(_0x3aa089,_0x2ec6e1,_0x19049a):_0xfb77f8(_0x3aa089,_0x2ec6e1))||_0x19049a;}return _0x4c8c5d>0x3&&_0x19049a&&Object[_0x59083f(0x1af)](_0x3aa089,_0x2ec6e1,_0x19049a),_0x19049a;},__metadata=this&&this[a137_0x5ef0cf(0x1ad)]||function(_0x3c465e,_0x3a6077){const _0x3e3f01=a137_0x5ef0cf;if(typeof Reflect===_0x3e3f01(0x1b4)&&typeof Reflect['metadata']===_0x3e3f01(0x1bc))return Reflect[_0x3e3f01(0x19b)](_0x3c465e,_0x3a6077);},__param=this&&this[a137_0x5ef0cf(0x19d)]||function(_0x3d7f1b,_0x1e3cc5){return function(_0xf03dce,_0x5cfdd8){_0x1e3cc5(_0xf03dce,_0x5cfdd8,_0x3d7f1b);};},StreamingController_1;Object[a137_0x5ef0cf(0x1af)](exports,a137_0x5ef0cf(0x1ac),{'value':!![]}),exports[a137_0x5ef0cf(0x197)]=void 0x0;function a137_0x5b8f(_0x329093,_0x1383a2){const _0x595160=a137_0x5951();return a137_0x5b8f=function(_0x5b8fc9,_0xa559ea){_0x5b8fc9=_0x5b8fc9-0x196;let _0x396c74=_0x595160[_0x5b8fc9];return _0x396c74;},a137_0x5b8f(_0x329093,_0x1383a2);}const common_1=require(a137_0x5ef0cf(0x199)),path_1=require(a137_0x5ef0cf(0x1ba)),streaming_service_1=require('./streaming.service'),roles_decorator_1=require(a137_0x5ef0cf(0x1c8)),role_enum_1=require(a137_0x5ef0cf(0x1a9)),jwt_guard_1=require(a137_0x5ef0cf(0x1cc)),roles_guard_1=require('../auth/guards/roles.guard');let StreamingController=StreamingController_1=class StreamingController{constructor(_0x24394b){const _0x45f9ae=a137_0x5ef0cf;this[_0x45f9ae(0x1a0)]=_0x24394b,this[_0x45f9ae(0x1d1)]=new common_1[(_0x45f9ae(0x1cf))](StreamingController_1[_0x45f9ae(0x1b3)]);}async['playAudioFile'](_0x269187,_0x11c969){const _0x18766d=a137_0x5ef0cf;try{const _0x5fb3bd=(0x0,path_1[_0x18766d(0x1cd)])(process[_0x18766d(0x1c3)](),_0x269187),_0x369351=this[_0x18766d(0x1a0)][_0x18766d(0x1b6)](_0x5fb3bd);this[_0x18766d(0x1a0)][_0x18766d(0x1bf)](_0x369351),_0x11c969[_0x18766d(0x1ca)](_0x18766d(0x1cb)+_0x5fb3bd);}catch(_0x5eefb1){return this[_0x18766d(0x1d1)][_0x18766d(0x1ce)](_0x5eefb1,_0x18766d(0x1b9)),'';}}async[a137_0x5ef0cf(0x1bd)](){const _0x3c0fc7=a137_0x5ef0cf;try{this[_0x3c0fc7(0x1a0)]['openServerUIStream']();}catch(_0x1217d3){this[_0x3c0fc7(0x1d1)][_0x3c0fc7(0x1ce)](_0x1217d3);}}async[a137_0x5ef0cf(0x1a8)](_0x2bdd50){const _0x36d7bc=a137_0x5ef0cf;this['audioService'][_0x36d7bc(0x1a8)]();}};__decorate([(0x0,common_1[a137_0x5ef0cf(0x1bb)])('/play/'),(0x0,common_1[a137_0x5ef0cf(0x1a4)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a137_0x5ef0cf(0x1a6)]),(0x0,roles_decorator_1['Roles'])(role_enum_1[a137_0x5ef0cf(0x1b7)]['Admin'],role_enum_1[a137_0x5ef0cf(0x1b7)][a137_0x5ef0cf(0x1b5)],role_enum_1[a137_0x5ef0cf(0x1b7)][a137_0x5ef0cf(0x1be)]),__param(0x0,(0x0,common_1[a137_0x5ef0cf(0x1b1)])(a137_0x5ef0cf(0x1a1))),__param(0x1,(0x0,common_1[a137_0x5ef0cf(0x1d0)])({'passthrough':!![]})),__metadata(a137_0x5ef0cf(0x1ab),Function),__metadata('design:paramtypes',[String,Object]),__metadata('design:returntype',Promise)],StreamingController[a137_0x5ef0cf(0x1c5)],a137_0x5ef0cf(0x19f),null),__decorate([(0x0,common_1[a137_0x5ef0cf(0x1c6)])('stream/start'),(0x0,common_1[a137_0x5ef0cf(0x1a4)])(jwt_guard_1[a137_0x5ef0cf(0x196)],roles_guard_1[a137_0x5ef0cf(0x1a6)]),(0x0,roles_decorator_1[a137_0x5ef0cf(0x1aa)])(role_enum_1[a137_0x5ef0cf(0x1b7)][a137_0x5ef0cf(0x19c)],role_enum_1[a137_0x5ef0cf(0x1b7)][a137_0x5ef0cf(0x1b5)],role_enum_1[a137_0x5ef0cf(0x1b7)][a137_0x5ef0cf(0x1be)]),__metadata(a137_0x5ef0cf(0x1ab),Function),__metadata(a137_0x5ef0cf(0x1c7),[]),__metadata(a137_0x5ef0cf(0x1c4),Promise)],StreamingController[a137_0x5ef0cf(0x1c5)],a137_0x5ef0cf(0x1bd),null),__decorate([(0x0,common_1[a137_0x5ef0cf(0x1c6)])(a137_0x5ef0cf(0x1c2)),(0x0,common_1[a137_0x5ef0cf(0x1a4)])(jwt_guard_1[a137_0x5ef0cf(0x196)],roles_guard_1[a137_0x5ef0cf(0x1a6)]),(0x0,roles_decorator_1['Roles'])(role_enum_1[a137_0x5ef0cf(0x1b7)][a137_0x5ef0cf(0x19c)],role_enum_1[a137_0x5ef0cf(0x1b7)]['User'],role_enum_1[a137_0x5ef0cf(0x1b7)][a137_0x5ef0cf(0x1be)]),__param(0x0,(0x0,common_1['Res'])({'passthrough':!![]})),__metadata(a137_0x5ef0cf(0x1ab),Function),__metadata(a137_0x5ef0cf(0x1c7),[Object]),__metadata('design:returntype',Promise)],StreamingController[a137_0x5ef0cf(0x1c5)],a137_0x5ef0cf(0x1a8),null),StreamingController=StreamingController_1=__decorate([(0x0,common_1['Controller'])(a137_0x5ef0cf(0x1c1)),__metadata('design:paramtypes',[streaming_service_1['StreamingService']])],StreamingController),exports[a137_0x5ef0cf(0x197)]=StreamingController;