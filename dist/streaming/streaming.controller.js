'use strict';const a134_0x226fdf=a134_0x2834;(function(_0xff8002,_0x49158b){const _0x14ab87=a134_0x2834,_0x52bab9=_0xff8002();while(!![]){try{const _0x1005d6=-parseInt(_0x14ab87(0x147))/0x1+-parseInt(_0x14ab87(0x14b))/0x2+-parseInt(_0x14ab87(0x170))/0x3*(-parseInt(_0x14ab87(0x171))/0x4)+-parseInt(_0x14ab87(0x166))/0x5+parseInt(_0x14ab87(0x14f))/0x6+parseInt(_0x14ab87(0x15d))/0x7+-parseInt(_0x14ab87(0x142))/0x8*(-parseInt(_0x14ab87(0x161))/0x9);if(_0x1005d6===_0x49158b)break;else _0x52bab9['push'](_0x52bab9['shift']());}catch(_0x54d5ed){_0x52bab9['push'](_0x52bab9['shift']());}}}(a134_0x5316,0x7ef6a));function a134_0x5316(){const _0x317e9a=['337794hRQLdS','__decorate','__esModule','StreamingController','Viewer','decorate','object','JwtAuthGuard','prototype','Get','@nestjs/common','/stop','metadata','Logger','3915814xlSflp','User','__metadata','Admin','5121TsTXmB','../auth/decorators/roles.decorator','Query','__param','design:returntype','4798535BTXNzX','Res','playAudioFile','StreamingService','getOwnPropertyDescriptor','Role','Controller','RolesGuard','../auth/guards/jwt.guard','../auth/guards/roles.guard','534IdzHvr','5564vTjltU','UseGuards','Success\x20play\x20sound:\x20','design:paramtypes','logger','defineProperty','name','join','/play/','23648aphExR','audioService','openServerUIStream','length','function','737882iUJnbC','createStreamFromFile','filePath','stream/start','655264LNSujC','stopStreamAudio','Roles','design:type'];a134_0x5316=function(){return _0x317e9a;};return a134_0x5316();}var __decorate=this&&this[a134_0x226fdf(0x150)]||function(_0x4453c0,_0x544e57,_0x18b147,_0x2cdc5c){const _0x592b73=a134_0x226fdf;var _0x279d66=arguments[_0x592b73(0x145)],_0x364ffc=_0x279d66<0x3?_0x544e57:_0x2cdc5c===null?_0x2cdc5c=Object[_0x592b73(0x16a)](_0x544e57,_0x18b147):_0x2cdc5c,_0x49cf06;if(typeof Reflect===_0x592b73(0x155)&&typeof Reflect[_0x592b73(0x154)]===_0x592b73(0x146))_0x364ffc=Reflect[_0x592b73(0x154)](_0x4453c0,_0x544e57,_0x18b147,_0x2cdc5c);else{for(var _0x25dfd9=_0x4453c0[_0x592b73(0x145)]-0x1;_0x25dfd9>=0x0;_0x25dfd9--)if(_0x49cf06=_0x4453c0[_0x25dfd9])_0x364ffc=(_0x279d66<0x3?_0x49cf06(_0x364ffc):_0x279d66>0x3?_0x49cf06(_0x544e57,_0x18b147,_0x364ffc):_0x49cf06(_0x544e57,_0x18b147))||_0x364ffc;}return _0x279d66>0x3&&_0x364ffc&&Object[_0x592b73(0x176)](_0x544e57,_0x18b147,_0x364ffc),_0x364ffc;},__metadata=this&&this[a134_0x226fdf(0x15f)]||function(_0x1e38a7,_0x1c0253){const _0x36c3c8=a134_0x226fdf;if(typeof Reflect===_0x36c3c8(0x155)&&typeof Reflect['metadata']==='function')return Reflect[_0x36c3c8(0x15b)](_0x1e38a7,_0x1c0253);},__param=this&&this[a134_0x226fdf(0x164)]||function(_0x48667a,_0x38ab9d){return function(_0x127e21,_0x1eb1f3){_0x38ab9d(_0x127e21,_0x1eb1f3,_0x48667a);};},StreamingController_1;Object[a134_0x226fdf(0x176)](exports,a134_0x226fdf(0x151),{'value':!![]}),exports[a134_0x226fdf(0x152)]=void 0x0;const common_1=require(a134_0x226fdf(0x159)),path_1=require('path'),streaming_service_1=require('./streaming.service'),roles_decorator_1=require(a134_0x226fdf(0x162)),role_enum_1=require('../auth/enums/role.enum'),jwt_guard_1=require(a134_0x226fdf(0x16e)),roles_guard_1=require(a134_0x226fdf(0x16f));function a134_0x2834(_0x3b549f,_0x2593d0){const _0x5316ee=a134_0x5316();return a134_0x2834=function(_0x283463,_0x3d2a7e){_0x283463=_0x283463-0x141;let _0x5d9705=_0x5316ee[_0x283463];return _0x5d9705;},a134_0x2834(_0x3b549f,_0x2593d0);}let StreamingController=StreamingController_1=class StreamingController{constructor(_0x26b627){const _0x36430c=a134_0x226fdf;this[_0x36430c(0x143)]=_0x26b627,this[_0x36430c(0x175)]=new common_1[(_0x36430c(0x15c))](StreamingController_1[_0x36430c(0x177)]);}async[a134_0x226fdf(0x168)](_0x8919c7,_0x2dad5b){const _0x26c5d5=a134_0x226fdf;try{const _0x2ff4d0=(0x0,path_1[_0x26c5d5(0x178)])(process['cwd'](),_0x8919c7),_0x1378a0=this[_0x26c5d5(0x143)][_0x26c5d5(0x148)](_0x2ff4d0);this['audioService']['playStreamAudio'](_0x1378a0),_0x2dad5b['send'](_0x26c5d5(0x173)+_0x2ff4d0);}catch(_0x5c278d){return this[_0x26c5d5(0x175)]['log'](_0x5c278d,'error'),'';}}async['startStreaming'](){const _0x53ed6d=a134_0x226fdf;try{this[_0x53ed6d(0x143)][_0x53ed6d(0x144)]();}catch(_0x366dcf){this[_0x53ed6d(0x175)]['log'](_0x366dcf);}}async[a134_0x226fdf(0x14c)](_0x4d37c2){const _0x7a5f5c=a134_0x226fdf;this[_0x7a5f5c(0x143)]['stopStreamAudio']();}};__decorate([(0x0,common_1['Post'])(a134_0x226fdf(0x141)),(0x0,common_1['UseGuards'])(jwt_guard_1[a134_0x226fdf(0x156)],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1['Roles'])(role_enum_1[a134_0x226fdf(0x16b)]['Admin'],role_enum_1[a134_0x226fdf(0x16b)]['User'],role_enum_1['Role']['Viewer']),__param(0x0,(0x0,common_1[a134_0x226fdf(0x163)])(a134_0x226fdf(0x149))),__param(0x1,(0x0,common_1[a134_0x226fdf(0x167)])({'passthrough':!![]})),__metadata(a134_0x226fdf(0x14e),Function),__metadata(a134_0x226fdf(0x174),[String,Object]),__metadata(a134_0x226fdf(0x165),Promise)],StreamingController[a134_0x226fdf(0x157)],a134_0x226fdf(0x168),null),__decorate([(0x0,common_1[a134_0x226fdf(0x158)])(a134_0x226fdf(0x14a)),(0x0,common_1[a134_0x226fdf(0x172)])(jwt_guard_1[a134_0x226fdf(0x156)],roles_guard_1[a134_0x226fdf(0x16d)]),(0x0,roles_decorator_1[a134_0x226fdf(0x14d)])(role_enum_1[a134_0x226fdf(0x16b)][a134_0x226fdf(0x160)],role_enum_1[a134_0x226fdf(0x16b)]['User'],role_enum_1['Role']['Viewer']),__metadata(a134_0x226fdf(0x14e),Function),__metadata(a134_0x226fdf(0x174),[]),__metadata(a134_0x226fdf(0x165),Promise)],StreamingController[a134_0x226fdf(0x157)],'startStreaming',null),__decorate([(0x0,common_1[a134_0x226fdf(0x158)])(a134_0x226fdf(0x15a)),(0x0,common_1[a134_0x226fdf(0x172)])(jwt_guard_1[a134_0x226fdf(0x156)],roles_guard_1[a134_0x226fdf(0x16d)]),(0x0,roles_decorator_1[a134_0x226fdf(0x14d)])(role_enum_1[a134_0x226fdf(0x16b)]['Admin'],role_enum_1[a134_0x226fdf(0x16b)][a134_0x226fdf(0x15e)],role_enum_1[a134_0x226fdf(0x16b)][a134_0x226fdf(0x153)]),__param(0x0,(0x0,common_1[a134_0x226fdf(0x167)])({'passthrough':!![]})),__metadata(a134_0x226fdf(0x14e),Function),__metadata(a134_0x226fdf(0x174),[Object]),__metadata(a134_0x226fdf(0x165),Promise)],StreamingController[a134_0x226fdf(0x157)],a134_0x226fdf(0x14c),null),StreamingController=StreamingController_1=__decorate([(0x0,common_1[a134_0x226fdf(0x16c)])('audio'),__metadata(a134_0x226fdf(0x174),[streaming_service_1[a134_0x226fdf(0x169)]])],StreamingController),exports[a134_0x226fdf(0x152)]=StreamingController;