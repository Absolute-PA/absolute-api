'use strict';const a134_0x5a629b=a134_0x5b13;function a134_0x5b13(_0xae3dbf,_0xc2e6b6){const _0x2b47ab=a134_0x2b47();return a134_0x5b13=function(_0x5b1396,_0x1c7c92){_0x5b1396=_0x5b1396-0xa0;let _0xaab6bd=_0x2b47ab[_0x5b1396];return _0xaab6bd;},a134_0x5b13(_0xae3dbf,_0xc2e6b6);}(function(_0x225a2b,_0x6e4860){const _0x1fa8d6=a134_0x5b13,_0x19ee32=_0x225a2b();while(!![]){try{const _0x23f9e3=-parseInt(_0x1fa8d6(0xa3))/0x1*(parseInt(_0x1fa8d6(0xdd))/0x2)+parseInt(_0x1fa8d6(0xb2))/0x3*(parseInt(_0x1fa8d6(0xaf))/0x4)+-parseInt(_0x1fa8d6(0xbf))/0x5+-parseInt(_0x1fa8d6(0xd2))/0x6+parseInt(_0x1fa8d6(0xaa))/0x7*(parseInt(_0x1fa8d6(0xd4))/0x8)+parseInt(_0x1fa8d6(0xb4))/0x9*(parseInt(_0x1fa8d6(0xcd))/0xa)+-parseInt(_0x1fa8d6(0xb5))/0xb*(-parseInt(_0x1fa8d6(0xb0))/0xc);if(_0x23f9e3===_0x6e4860)break;else _0x19ee32['push'](_0x19ee32['shift']());}catch(_0x5713a9){_0x19ee32['push'](_0x19ee32['shift']());}}}(a134_0x2b47,0xacc7c));var __decorate=this&&this['__decorate']||function(_0x2735e5,_0x1da131,_0x5ca503,_0x5ecd5d){const _0x4512f9=a134_0x5b13;var _0x4a8390=arguments[_0x4512f9(0xae)],_0x476161=_0x4a8390<0x3?_0x1da131:_0x5ecd5d===null?_0x5ecd5d=Object['getOwnPropertyDescriptor'](_0x1da131,_0x5ca503):_0x5ecd5d,_0x16615b;if(typeof Reflect===_0x4512f9(0xd8)&&typeof Reflect[_0x4512f9(0xc5)]===_0x4512f9(0xac))_0x476161=Reflect[_0x4512f9(0xc5)](_0x2735e5,_0x1da131,_0x5ca503,_0x5ecd5d);else{for(var _0x3b4b4c=_0x2735e5[_0x4512f9(0xae)]-0x1;_0x3b4b4c>=0x0;_0x3b4b4c--)if(_0x16615b=_0x2735e5[_0x3b4b4c])_0x476161=(_0x4a8390<0x3?_0x16615b(_0x476161):_0x4a8390>0x3?_0x16615b(_0x1da131,_0x5ca503,_0x476161):_0x16615b(_0x1da131,_0x5ca503))||_0x476161;}return _0x4a8390>0x3&&_0x476161&&Object['defineProperty'](_0x1da131,_0x5ca503,_0x476161),_0x476161;},__metadata=this&&this['__metadata']||function(_0x3a2911,_0x431e96){const _0x7ef381=a134_0x5b13;if(typeof Reflect===_0x7ef381(0xd8)&&typeof Reflect[_0x7ef381(0xc3)]===_0x7ef381(0xac))return Reflect[_0x7ef381(0xc3)](_0x3a2911,_0x431e96);},__param=this&&this[a134_0x5a629b(0xc4)]||function(_0x5d5e06,_0x17cb5b){return function(_0x4bed0e,_0x4872a7){_0x17cb5b(_0x4bed0e,_0x4872a7,_0x5d5e06);};},StreamingController_1;Object[a134_0x5a629b(0xd7)](exports,a134_0x5a629b(0xc9),{'value':!![]}),exports[a134_0x5a629b(0xa5)]=void 0x0;function a134_0x2b47(){const _0x4b629d=['557919QgnJAm','send','StreamingController','Res','JwtAuthGuard','prototype','startStreaming','4424TFpUES','Admin','function','../auth/guards/jwt.guard','length','8AuOAsK','528636ytEjpY','filePath','739839phFetP','@nestjs/common','2491947KwPtvV','242AipDqG','stopStreamAudio','/play/','name','Get','Role','Controller','Success\x20play\x20sound:\x20','User','Logger','3910835tnfjzg','Roles','./streaming.service','design:returntype','metadata','__param','decorate','StreamingService','UseGuards','RolesGuard','__esModule','log','design:paramtypes','openServerUIStream','20OtVYWz','stream/start','audioService','Viewer','logger','849192auwBWz','design:type','2192AxQApn','playStreamAudio','Query','defineProperty','object','audio','Post','cwd','../auth/guards/roles.guard','2LatWEP','join','playAudioFile','path','createStreamFromFile'];a134_0x2b47=function(){return _0x4b629d;};return a134_0x2b47();}const common_1=require(a134_0x5a629b(0xb3)),path_1=require(a134_0x5a629b(0xa1)),streaming_service_1=require(a134_0x5a629b(0xc1)),roles_decorator_1=require('../auth/decorators/roles.decorator'),role_enum_1=require('../auth/enums/role.enum'),jwt_guard_1=require(a134_0x5a629b(0xad)),roles_guard_1=require(a134_0x5a629b(0xdc));let StreamingController=StreamingController_1=class StreamingController{constructor(_0x5a0e4a){const _0x4ecc94=a134_0x5a629b;this[_0x4ecc94(0xcf)]=_0x5a0e4a,this[_0x4ecc94(0xd1)]=new common_1[(_0x4ecc94(0xbe))](StreamingController_1[_0x4ecc94(0xb8)]);}async[a134_0x5a629b(0xa0)](_0x374cae,_0x441aa0){const _0x304597=a134_0x5a629b;try{const _0x2a2a43=(0x0,path_1[_0x304597(0xde)])(process[_0x304597(0xdb)](),_0x374cae),_0x457a7e=this[_0x304597(0xcf)][_0x304597(0xa2)](_0x2a2a43);this['audioService'][_0x304597(0xd5)](_0x457a7e),_0x441aa0[_0x304597(0xa4)](_0x304597(0xbc)+_0x2a2a43);}catch(_0x1ca1a5){return this[_0x304597(0xd1)][_0x304597(0xca)](_0x1ca1a5,'error'),'';}}async['startStreaming'](){const _0x47e5fa=a134_0x5a629b;try{this[_0x47e5fa(0xcf)][_0x47e5fa(0xcc)]();}catch(_0x4e0ef5){this[_0x47e5fa(0xd1)][_0x47e5fa(0xca)](_0x4e0ef5);}}async[a134_0x5a629b(0xb6)](_0x304364){const _0x100e75=a134_0x5a629b;this[_0x100e75(0xcf)]['stopStreamAudio']();}};__decorate([(0x0,common_1[a134_0x5a629b(0xda)])(a134_0x5a629b(0xb7)),(0x0,common_1[a134_0x5a629b(0xc7)])(jwt_guard_1[a134_0x5a629b(0xa7)],roles_guard_1[a134_0x5a629b(0xc8)]),(0x0,roles_decorator_1[a134_0x5a629b(0xc0)])(role_enum_1['Role'][a134_0x5a629b(0xab)],role_enum_1[a134_0x5a629b(0xba)][a134_0x5a629b(0xbd)],role_enum_1['Role'][a134_0x5a629b(0xd0)]),__param(0x0,(0x0,common_1[a134_0x5a629b(0xd6)])(a134_0x5a629b(0xb1))),__param(0x1,(0x0,common_1['Res'])({'passthrough':!![]})),__metadata(a134_0x5a629b(0xd3),Function),__metadata(a134_0x5a629b(0xcb),[String,Object]),__metadata(a134_0x5a629b(0xc2),Promise)],StreamingController[a134_0x5a629b(0xa8)],'playAudioFile',null),__decorate([(0x0,common_1[a134_0x5a629b(0xb9)])(a134_0x5a629b(0xce)),(0x0,common_1[a134_0x5a629b(0xc7)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a134_0x5a629b(0xc8)]),(0x0,roles_decorator_1[a134_0x5a629b(0xc0)])(role_enum_1[a134_0x5a629b(0xba)][a134_0x5a629b(0xab)],role_enum_1[a134_0x5a629b(0xba)][a134_0x5a629b(0xbd)],role_enum_1[a134_0x5a629b(0xba)][a134_0x5a629b(0xd0)]),__metadata(a134_0x5a629b(0xd3),Function),__metadata(a134_0x5a629b(0xcb),[]),__metadata(a134_0x5a629b(0xc2),Promise)],StreamingController[a134_0x5a629b(0xa8)],a134_0x5a629b(0xa9),null),__decorate([(0x0,common_1[a134_0x5a629b(0xb9)])('/stop'),(0x0,common_1[a134_0x5a629b(0xc7)])(jwt_guard_1[a134_0x5a629b(0xa7)],roles_guard_1[a134_0x5a629b(0xc8)]),(0x0,roles_decorator_1[a134_0x5a629b(0xc0)])(role_enum_1['Role']['Admin'],role_enum_1[a134_0x5a629b(0xba)][a134_0x5a629b(0xbd)],role_enum_1[a134_0x5a629b(0xba)][a134_0x5a629b(0xd0)]),__param(0x0,(0x0,common_1[a134_0x5a629b(0xa6)])({'passthrough':!![]})),__metadata(a134_0x5a629b(0xd3),Function),__metadata(a134_0x5a629b(0xcb),[Object]),__metadata(a134_0x5a629b(0xc2),Promise)],StreamingController[a134_0x5a629b(0xa8)],a134_0x5a629b(0xb6),null),StreamingController=StreamingController_1=__decorate([(0x0,common_1[a134_0x5a629b(0xbb)])(a134_0x5a629b(0xd9)),__metadata(a134_0x5a629b(0xcb),[streaming_service_1[a134_0x5a629b(0xc6)]])],StreamingController),exports[a134_0x5a629b(0xa5)]=StreamingController;