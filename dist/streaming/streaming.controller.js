'use strict';const a134_0x124705=a134_0x42e0;(function(_0x45b46c,_0xba3a26){const _0x4432e6=a134_0x42e0,_0x7d1943=_0x45b46c();while(!![]){try{const _0x8dd35e=-parseInt(_0x4432e6(0x8e))/0x1+-parseInt(_0x4432e6(0x7f))/0x2+-parseInt(_0x4432e6(0x90))/0x3*(-parseInt(_0x4432e6(0x7e))/0x4)+parseInt(_0x4432e6(0x78))/0x5*(-parseInt(_0x4432e6(0x87))/0x6)+-parseInt(_0x4432e6(0x9d))/0x7+parseInt(_0x4432e6(0xaf))/0x8+parseInt(_0x4432e6(0x84))/0x9*(parseInt(_0x4432e6(0xa2))/0xa);if(_0x8dd35e===_0xba3a26)break;else _0x7d1943['push'](_0x7d1943['shift']());}catch(_0x467785){_0x7d1943['push'](_0x7d1943['shift']());}}}(a134_0x32e1,0x3a116));function a134_0x42e0(_0x3b16a1,_0x6391ee){const _0x32e1a1=a134_0x32e1();return a134_0x42e0=function(_0x42e065,_0x36cee3){_0x42e065=_0x42e065-0x74;let _0x565b19=_0x32e1a1[_0x42e065];return _0x565b19;},a134_0x42e0(_0x3b16a1,_0x6391ee);}var __decorate=this&&this['__decorate']||function(_0x1460bf,_0x16fb1a,_0x222dc8,_0xf9d252){const _0x2e7c65=a134_0x42e0;var _0x4a7f2e=arguments[_0x2e7c65(0x89)],_0xb9c3a0=_0x4a7f2e<0x3?_0x16fb1a:_0xf9d252===null?_0xf9d252=Object[_0x2e7c65(0x79)](_0x16fb1a,_0x222dc8):_0xf9d252,_0x14f406;if(typeof Reflect===_0x2e7c65(0x80)&&typeof Reflect[_0x2e7c65(0x96)]===_0x2e7c65(0x88))_0xb9c3a0=Reflect[_0x2e7c65(0x96)](_0x1460bf,_0x16fb1a,_0x222dc8,_0xf9d252);else{for(var _0x2d1bb3=_0x1460bf[_0x2e7c65(0x89)]-0x1;_0x2d1bb3>=0x0;_0x2d1bb3--)if(_0x14f406=_0x1460bf[_0x2d1bb3])_0xb9c3a0=(_0x4a7f2e<0x3?_0x14f406(_0xb9c3a0):_0x4a7f2e>0x3?_0x14f406(_0x16fb1a,_0x222dc8,_0xb9c3a0):_0x14f406(_0x16fb1a,_0x222dc8))||_0xb9c3a0;}return _0x4a7f2e>0x3&&_0xb9c3a0&&Object[_0x2e7c65(0x97)](_0x16fb1a,_0x222dc8,_0xb9c3a0),_0xb9c3a0;},__metadata=this&&this[a134_0x124705(0x81)]||function(_0x3128ea,_0x315917){const _0x271e97=a134_0x124705;if(typeof Reflect===_0x271e97(0x80)&&typeof Reflect['metadata']===_0x271e97(0x88))return Reflect[_0x271e97(0xa3)](_0x3128ea,_0x315917);},__param=this&&this[a134_0x124705(0x75)]||function(_0x12be38,_0x54af6b){return function(_0x5b2300,_0xee6c34){_0x54af6b(_0x5b2300,_0xee6c34,_0x12be38);};},StreamingController_1;function a134_0x32e1(){const _0x3b8dce=['Admin','__param','@nestjs/common','Controller','45AjkgBT','getOwnPropertyDescriptor','send','Logger','./streaming.service','UseGuards','2372hZwaDx','840156BbjOJf','object','__metadata','/stop','Viewer','86229FsoUVF','audio','StreamingController','119898sxJjSB','function','length','design:returntype','filePath','stopStreamAudio','User','62961dDYvzv','JwtAuthGuard','1071tuNBCo','logger','Role','/play/','path','stream/start','decorate','defineProperty','RolesGuard','../auth/guards/roles.guard','Get','cwd','Roles','1972425RnyUiX','audioService','log','openServerUIStream','prototype','640xNglBz','metadata','Success\x20play\x20sound:\x20','Query','name','playAudioFile','../auth/enums/role.enum','design:paramtypes','Post','Res','../auth/guards/jwt.guard','design:type','startStreaming','2860976hpAaWV','StreamingService'];a134_0x32e1=function(){return _0x3b8dce;};return a134_0x32e1();}Object[a134_0x124705(0x97)](exports,'__esModule',{'value':!![]}),exports[a134_0x124705(0x86)]=void 0x0;const common_1=require(a134_0x124705(0x76)),path_1=require(a134_0x124705(0x94)),streaming_service_1=require(a134_0x124705(0x7c)),roles_decorator_1=require('../auth/decorators/roles.decorator'),role_enum_1=require(a134_0x124705(0xa8)),jwt_guard_1=require(a134_0x124705(0xac)),roles_guard_1=require(a134_0x124705(0x99));let StreamingController=StreamingController_1=class StreamingController{constructor(_0x4c28e1){const _0x3af24a=a134_0x124705;this[_0x3af24a(0x9e)]=_0x4c28e1,this[_0x3af24a(0x91)]=new common_1[(_0x3af24a(0x7b))](StreamingController_1[_0x3af24a(0xa6)]);}async[a134_0x124705(0xa7)](_0x15cf03,_0x542f7d){const _0x404d70=a134_0x124705;try{const _0x77297e=(0x0,path_1['join'])(process[_0x404d70(0x9b)](),_0x15cf03),_0x179c06=this[_0x404d70(0x9e)]['createStreamFromFile'](_0x77297e);this['audioService']['playStreamAudio'](_0x179c06),_0x542f7d[_0x404d70(0x7a)](_0x404d70(0xa4)+_0x77297e);}catch(_0x27c5ea){return this[_0x404d70(0x91)][_0x404d70(0x9f)](_0x27c5ea,'error'),'';}}async[a134_0x124705(0xae)](){const _0x5ca8e8=a134_0x124705;try{this[_0x5ca8e8(0x9e)][_0x5ca8e8(0xa0)]();}catch(_0xea187b){this[_0x5ca8e8(0x91)][_0x5ca8e8(0x9f)](_0xea187b);}}async[a134_0x124705(0x8c)](_0x215d42){const _0xbf8204=a134_0x124705;this[_0xbf8204(0x9e)]['stopStreamAudio']();}};__decorate([(0x0,common_1[a134_0x124705(0xaa)])(a134_0x124705(0x93)),(0x0,common_1[a134_0x124705(0x7d)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a134_0x124705(0x98)]),(0x0,roles_decorator_1[a134_0x124705(0x9c)])(role_enum_1[a134_0x124705(0x92)]['Admin'],role_enum_1[a134_0x124705(0x92)][a134_0x124705(0x8d)],role_enum_1[a134_0x124705(0x92)][a134_0x124705(0x83)]),__param(0x0,(0x0,common_1[a134_0x124705(0xa5)])(a134_0x124705(0x8b))),__param(0x1,(0x0,common_1[a134_0x124705(0xab)])({'passthrough':!![]})),__metadata(a134_0x124705(0xad),Function),__metadata(a134_0x124705(0xa9),[String,Object]),__metadata(a134_0x124705(0x8a),Promise)],StreamingController[a134_0x124705(0xa1)],'playAudioFile',null),__decorate([(0x0,common_1[a134_0x124705(0x9a)])(a134_0x124705(0x95)),(0x0,common_1[a134_0x124705(0x7d)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a134_0x124705(0x98)]),(0x0,roles_decorator_1['Roles'])(role_enum_1['Role'][a134_0x124705(0x74)],role_enum_1['Role'][a134_0x124705(0x8d)],role_enum_1[a134_0x124705(0x92)][a134_0x124705(0x83)]),__metadata(a134_0x124705(0xad),Function),__metadata(a134_0x124705(0xa9),[]),__metadata('design:returntype',Promise)],StreamingController['prototype'],a134_0x124705(0xae),null),__decorate([(0x0,common_1['Get'])(a134_0x124705(0x82)),(0x0,common_1[a134_0x124705(0x7d)])(jwt_guard_1[a134_0x124705(0x8f)],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1[a134_0x124705(0x9c)])(role_enum_1[a134_0x124705(0x92)][a134_0x124705(0x74)],role_enum_1[a134_0x124705(0x92)][a134_0x124705(0x8d)],role_enum_1[a134_0x124705(0x92)]['Viewer']),__param(0x0,(0x0,common_1['Res'])({'passthrough':!![]})),__metadata('design:type',Function),__metadata('design:paramtypes',[Object]),__metadata('design:returntype',Promise)],StreamingController[a134_0x124705(0xa1)],'stopStreamAudio',null),StreamingController=StreamingController_1=__decorate([(0x0,common_1[a134_0x124705(0x77)])(a134_0x124705(0x85)),__metadata(a134_0x124705(0xa9),[streaming_service_1[a134_0x124705(0xb0)]])],StreamingController),exports[a134_0x124705(0x86)]=StreamingController;