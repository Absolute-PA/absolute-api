'use strict';const a137_0x23a7f7=a137_0x57f5;(function(_0xe1a575,_0x153b22){const _0x298937=a137_0x57f5,_0x491efa=_0xe1a575();while(!![]){try{const _0x422298=-parseInt(_0x298937(0x19b))/0x1+parseInt(_0x298937(0x1a2))/0x2*(parseInt(_0x298937(0x1a8))/0x3)+parseInt(_0x298937(0x1ae))/0x4*(parseInt(_0x298937(0x1b0))/0x5)+-parseInt(_0x298937(0x17e))/0x6+-parseInt(_0x298937(0x181))/0x7*(parseInt(_0x298937(0x191))/0x8)+-parseInt(_0x298937(0x18a))/0x9+parseInt(_0x298937(0x1b3))/0xa;if(_0x422298===_0x153b22)break;else _0x491efa['push'](_0x491efa['shift']());}catch(_0x2fbc40){_0x491efa['push'](_0x491efa['shift']());}}}(a137_0x30c1,0x9551f));function a137_0x57f5(_0x45f9f0,_0x27bd16){const _0x30c110=a137_0x30c1();return a137_0x57f5=function(_0x57f59e,_0x5014fb){_0x57f59e=_0x57f59e-0x17c;let _0x110df9=_0x30c110[_0x57f59e];return _0x110df9;},a137_0x57f5(_0x45f9f0,_0x27bd16);}function a137_0x30c1(){const _0x14a600=['Res','Admin','logger','defineProperty','../auth/enums/role.enum','8915616oBOpFI','length','function','send','error','stopStreamAudio','Viewer','16PuAWFC','design:type','__metadata','StreamingService','__decorate','object','decorate','../auth/guards/jwt.guard','/play/','playAudioFile','604191VnAoBE','Success\x20play\x20sound:\x20','log','createStreamFromFile','prototype','Post','design:paramtypes','8CPRBVn','stream/start','Role','Roles','../auth/decorators/roles.decorator','JwtAuthGuard','210111QeRxjA','cwd','startStreaming','__esModule','User','Logger','3816IaYEoU','UseGuards','4010eCWmih','audioService','getOwnPropertyDescriptor','16480610NJDJyo','./streaming.service','Get','Query','metadata','openServerUIStream','StreamingController','740970VWdYfQ','design:returntype','@nestjs/common','1271872XKTgeS','audio','../auth/guards/roles.guard','RolesGuard'];a137_0x30c1=function(){return _0x14a600;};return a137_0x30c1();}var __decorate=this&&this[a137_0x23a7f7(0x195)]||function(_0x150b6a,_0x2c9e4f,_0xc0c700,_0x19c186){const _0x5ed152=a137_0x23a7f7;var _0x565047=arguments[_0x5ed152(0x18b)],_0x2b93ee=_0x565047<0x3?_0x2c9e4f:_0x19c186===null?_0x19c186=Object[_0x5ed152(0x1b2)](_0x2c9e4f,_0xc0c700):_0x19c186,_0x4cba08;if(typeof Reflect===_0x5ed152(0x196)&&typeof Reflect[_0x5ed152(0x197)]===_0x5ed152(0x18c))_0x2b93ee=Reflect[_0x5ed152(0x197)](_0x150b6a,_0x2c9e4f,_0xc0c700,_0x19c186);else{for(var _0x56c253=_0x150b6a[_0x5ed152(0x18b)]-0x1;_0x56c253>=0x0;_0x56c253--)if(_0x4cba08=_0x150b6a[_0x56c253])_0x2b93ee=(_0x565047<0x3?_0x4cba08(_0x2b93ee):_0x565047>0x3?_0x4cba08(_0x2c9e4f,_0xc0c700,_0x2b93ee):_0x4cba08(_0x2c9e4f,_0xc0c700))||_0x2b93ee;}return _0x565047>0x3&&_0x2b93ee&&Object[_0x5ed152(0x188)](_0x2c9e4f,_0xc0c700,_0x2b93ee),_0x2b93ee;},__metadata=this&&this[a137_0x23a7f7(0x193)]||function(_0x4732e8,_0x2c1432){const _0x3eb291=a137_0x23a7f7;if(typeof Reflect===_0x3eb291(0x196)&&typeof Reflect[_0x3eb291(0x1b7)]===_0x3eb291(0x18c))return Reflect[_0x3eb291(0x1b7)](_0x4732e8,_0x2c1432);},__param=this&&this['__param']||function(_0x3db92f,_0x3c90c1){return function(_0x9154f3,_0x20d6f8){_0x3c90c1(_0x9154f3,_0x20d6f8,_0x3db92f);};},StreamingController_1;Object[a137_0x23a7f7(0x188)](exports,a137_0x23a7f7(0x1ab),{'value':!![]}),exports[a137_0x23a7f7(0x17d)]=void 0x0;const common_1=require(a137_0x23a7f7(0x180)),path_1=require('path'),streaming_service_1=require(a137_0x23a7f7(0x1b4)),roles_decorator_1=require(a137_0x23a7f7(0x1a6)),role_enum_1=require(a137_0x23a7f7(0x189)),jwt_guard_1=require(a137_0x23a7f7(0x198)),roles_guard_1=require(a137_0x23a7f7(0x183));let StreamingController=StreamingController_1=class StreamingController{constructor(_0x1c782a){const _0x45374a=a137_0x23a7f7;this['audioService']=_0x1c782a,this[_0x45374a(0x187)]=new common_1[(_0x45374a(0x1ad))](StreamingController_1['name']);}async[a137_0x23a7f7(0x19a)](_0x52a1fc,_0x11942f){const _0x15d921=a137_0x23a7f7;try{const _0x3b7a58=(0x0,path_1['join'])(process[_0x15d921(0x1a9)](),_0x52a1fc),_0x620a97=this[_0x15d921(0x1b1)][_0x15d921(0x19e)](_0x3b7a58);this['audioService']['playStreamAudio'](_0x620a97),_0x11942f[_0x15d921(0x18d)](_0x15d921(0x19c)+_0x3b7a58);}catch(_0x1bdbf4){return this['logger'][_0x15d921(0x19d)](_0x1bdbf4,_0x15d921(0x18e)),'';}}async[a137_0x23a7f7(0x1aa)](){const _0x355e53=a137_0x23a7f7;try{this[_0x355e53(0x1b1)][_0x355e53(0x17c)]();}catch(_0x51a6b5){this[_0x355e53(0x187)][_0x355e53(0x19d)](_0x51a6b5);}}async[a137_0x23a7f7(0x18f)](_0x29ccec){const _0x3dc7d3=a137_0x23a7f7;this[_0x3dc7d3(0x1b1)][_0x3dc7d3(0x18f)]();}};__decorate([(0x0,common_1[a137_0x23a7f7(0x1a0)])(a137_0x23a7f7(0x199)),(0x0,common_1[a137_0x23a7f7(0x1af)])(jwt_guard_1[a137_0x23a7f7(0x1a7)],roles_guard_1[a137_0x23a7f7(0x184)]),(0x0,roles_decorator_1[a137_0x23a7f7(0x1a5)])(role_enum_1['Role'][a137_0x23a7f7(0x186)],role_enum_1['Role'][a137_0x23a7f7(0x1ac)],role_enum_1[a137_0x23a7f7(0x1a4)]['Viewer']),__param(0x0,(0x0,common_1[a137_0x23a7f7(0x1b6)])('filePath')),__param(0x1,(0x0,common_1[a137_0x23a7f7(0x185)])({'passthrough':!![]})),__metadata('design:type',Function),__metadata(a137_0x23a7f7(0x1a1),[String,Object]),__metadata(a137_0x23a7f7(0x17f),Promise)],StreamingController['prototype'],a137_0x23a7f7(0x19a),null),__decorate([(0x0,common_1[a137_0x23a7f7(0x1b5)])(a137_0x23a7f7(0x1a3)),(0x0,common_1[a137_0x23a7f7(0x1af)])(jwt_guard_1[a137_0x23a7f7(0x1a7)],roles_guard_1[a137_0x23a7f7(0x184)]),(0x0,roles_decorator_1[a137_0x23a7f7(0x1a5)])(role_enum_1[a137_0x23a7f7(0x1a4)][a137_0x23a7f7(0x186)],role_enum_1[a137_0x23a7f7(0x1a4)]['User'],role_enum_1[a137_0x23a7f7(0x1a4)][a137_0x23a7f7(0x190)]),__metadata(a137_0x23a7f7(0x192),Function),__metadata(a137_0x23a7f7(0x1a1),[]),__metadata('design:returntype',Promise)],StreamingController['prototype'],'startStreaming',null),__decorate([(0x0,common_1['Get'])('/stop'),(0x0,common_1[a137_0x23a7f7(0x1af)])(jwt_guard_1[a137_0x23a7f7(0x1a7)],roles_guard_1[a137_0x23a7f7(0x184)]),(0x0,roles_decorator_1[a137_0x23a7f7(0x1a5)])(role_enum_1[a137_0x23a7f7(0x1a4)][a137_0x23a7f7(0x186)],role_enum_1[a137_0x23a7f7(0x1a4)][a137_0x23a7f7(0x1ac)],role_enum_1['Role'][a137_0x23a7f7(0x190)]),__param(0x0,(0x0,common_1['Res'])({'passthrough':!![]})),__metadata(a137_0x23a7f7(0x192),Function),__metadata(a137_0x23a7f7(0x1a1),[Object]),__metadata(a137_0x23a7f7(0x17f),Promise)],StreamingController[a137_0x23a7f7(0x19f)],'stopStreamAudio',null),StreamingController=StreamingController_1=__decorate([(0x0,common_1['Controller'])(a137_0x23a7f7(0x182)),__metadata(a137_0x23a7f7(0x1a1),[streaming_service_1[a137_0x23a7f7(0x194)]])],StreamingController),exports[a137_0x23a7f7(0x17d)]=StreamingController;