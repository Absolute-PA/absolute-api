'use strict';const a137_0xb83cbe=a137_0x2f41;(function(_0x1c1986,_0xdf2de1){const _0x22bd73=a137_0x2f41,_0x4b5042=_0x1c1986();while(!![]){try{const _0xe3642a=-parseInt(_0x22bd73(0x225))/0x1*(-parseInt(_0x22bd73(0x222))/0x2)+-parseInt(_0x22bd73(0x20b))/0x3+parseInt(_0x22bd73(0x1f3))/0x4+parseInt(_0x22bd73(0x1fe))/0x5*(parseInt(_0x22bd73(0x227))/0x6)+-parseInt(_0x22bd73(0x22e))/0x7*(-parseInt(_0x22bd73(0x229))/0x8)+parseInt(_0x22bd73(0x20d))/0x9+-parseInt(_0x22bd73(0x1ff))/0xa*(parseInt(_0x22bd73(0x20c))/0xb);if(_0xe3642a===_0xdf2de1)break;else _0x4b5042['push'](_0x4b5042['shift']());}catch(_0x50ef68){_0x4b5042['push'](_0x4b5042['shift']());}}}(a137_0x4ce2,0x66e03));function a137_0x2f41(_0x51e19c,_0x32ddc6){const _0x4ce2a3=a137_0x4ce2();return a137_0x2f41=function(_0x2f41e9,_0x56d13b){_0x2f41e9=_0x2f41e9-0x1f2;let _0x2d411d=_0x4ce2a3[_0x2f41e9];return _0x2d411d;},a137_0x2f41(_0x51e19c,_0x32ddc6);}var __decorate=this&&this[a137_0xb83cbe(0x21f)]||function(_0x5d289f,_0x184c8a,_0x5f103c,_0x44067b){const _0x4a6d5b=a137_0xb83cbe;var _0x1847f1=arguments[_0x4a6d5b(0x1fb)],_0x5d926f=_0x1847f1<0x3?_0x184c8a:_0x44067b===null?_0x44067b=Object[_0x4a6d5b(0x228)](_0x184c8a,_0x5f103c):_0x44067b,_0xd076ff;if(typeof Reflect===_0x4a6d5b(0x200)&&typeof Reflect['decorate']===_0x4a6d5b(0x1f4))_0x5d926f=Reflect['decorate'](_0x5d289f,_0x184c8a,_0x5f103c,_0x44067b);else{for(var _0x3f7186=_0x5d289f['length']-0x1;_0x3f7186>=0x0;_0x3f7186--)if(_0xd076ff=_0x5d289f[_0x3f7186])_0x5d926f=(_0x1847f1<0x3?_0xd076ff(_0x5d926f):_0x1847f1>0x3?_0xd076ff(_0x184c8a,_0x5f103c,_0x5d926f):_0xd076ff(_0x184c8a,_0x5f103c))||_0x5d926f;}return _0x1847f1>0x3&&_0x5d926f&&Object[_0x4a6d5b(0x1f6)](_0x184c8a,_0x5f103c,_0x5d926f),_0x5d926f;},__metadata=this&&this['__metadata']||function(_0x408a2f,_0x3931e3){const _0x5de71a=a137_0xb83cbe;if(typeof Reflect===_0x5de71a(0x200)&&typeof Reflect[_0x5de71a(0x202)]===_0x5de71a(0x1f4))return Reflect[_0x5de71a(0x202)](_0x408a2f,_0x3931e3);},__param=this&&this[a137_0xb83cbe(0x1f5)]||function(_0x476d70,_0x2357e6){return function(_0x2247df,_0x6b69fe){_0x2357e6(_0x2247df,_0x6b69fe,_0x476d70);};},StreamingController_1;Object[a137_0xb83cbe(0x1f6)](exports,'__esModule',{'value':!![]}),exports[a137_0xb83cbe(0x210)]=void 0x0;const common_1=require(a137_0xb83cbe(0x21a)),path_1=require(a137_0xb83cbe(0x220)),streaming_service_1=require(a137_0xb83cbe(0x230)),roles_decorator_1=require(a137_0xb83cbe(0x22c)),role_enum_1=require(a137_0xb83cbe(0x221)),jwt_guard_1=require(a137_0xb83cbe(0x211)),roles_guard_1=require(a137_0xb83cbe(0x224));function a137_0x4ce2(){const _0x187d86=['log','StreamingService','4152745ZFJhqD','190kraJcO','object','audio','metadata','Admin','stopStreamAudio','cwd','playStreamAudio','stream/start','Get','send','design:type','391005MRGQGf','1368807WRBjBE','6042906oABjlD','openServerUIStream','Viewer','StreamingController','../auth/guards/jwt.guard','Controller','UseGuards','join','logger','Roles','design:paramtypes','Res','/stop','@nestjs/common','startStreaming','design:returntype','createStreamFromFile','Post','__decorate','path','../auth/enums/role.enum','2VMeZaQ','error','../auth/guards/roles.guard','1631kcOtnX','User','6HUzFzO','getOwnPropertyDescriptor','72tEGQRU','prototype','Success\x20play\x20sound:\x20','../auth/decorators/roles.decorator','name','626437pdujpn','RolesGuard','./streaming.service','Role','2427936hzcHKj','function','__param','defineProperty','JwtAuthGuard','playAudioFile','filePath','audioService','length'];a137_0x4ce2=function(){return _0x187d86;};return a137_0x4ce2();}let StreamingController=StreamingController_1=class StreamingController{constructor(_0x5dc00f){const _0x3107ba=a137_0xb83cbe;this[_0x3107ba(0x1fa)]=_0x5dc00f,this[_0x3107ba(0x215)]=new common_1['Logger'](StreamingController_1[_0x3107ba(0x22d)]);}async[a137_0xb83cbe(0x1f8)](_0x365dee,_0x275cb2){const _0xa02c20=a137_0xb83cbe;try{const _0x5b49f1=(0x0,path_1[_0xa02c20(0x214)])(process[_0xa02c20(0x205)](),_0x365dee),_0x4bea3e=this[_0xa02c20(0x1fa)][_0xa02c20(0x21d)](_0x5b49f1);this['audioService'][_0xa02c20(0x206)](_0x4bea3e),_0x275cb2[_0xa02c20(0x209)](_0xa02c20(0x22b)+_0x5b49f1);}catch(_0x3641a5){return this[_0xa02c20(0x215)]['log'](_0x3641a5,_0xa02c20(0x223)),'';}}async[a137_0xb83cbe(0x21b)](){const _0xa899f6=a137_0xb83cbe;try{this[_0xa899f6(0x1fa)][_0xa899f6(0x20e)]();}catch(_0x3920ea){this[_0xa899f6(0x215)][_0xa899f6(0x1fc)](_0x3920ea);}}async['stopStreamAudio'](_0x40c3da){const _0xcfeca=a137_0xb83cbe;this[_0xcfeca(0x1fa)][_0xcfeca(0x204)]();}};__decorate([(0x0,common_1[a137_0xb83cbe(0x21e)])('/play/'),(0x0,common_1[a137_0xb83cbe(0x213)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1['Roles'])(role_enum_1[a137_0xb83cbe(0x1f2)][a137_0xb83cbe(0x203)],role_enum_1[a137_0xb83cbe(0x1f2)][a137_0xb83cbe(0x226)],role_enum_1[a137_0xb83cbe(0x1f2)][a137_0xb83cbe(0x20f)]),__param(0x0,(0x0,common_1['Query'])(a137_0xb83cbe(0x1f9))),__param(0x1,(0x0,common_1[a137_0xb83cbe(0x218)])({'passthrough':!![]})),__metadata('design:type',Function),__metadata('design:paramtypes',[String,Object]),__metadata(a137_0xb83cbe(0x21c),Promise)],StreamingController[a137_0xb83cbe(0x22a)],a137_0xb83cbe(0x1f8),null),__decorate([(0x0,common_1[a137_0xb83cbe(0x208)])(a137_0xb83cbe(0x207)),(0x0,common_1[a137_0xb83cbe(0x213)])(jwt_guard_1[a137_0xb83cbe(0x1f7)],roles_guard_1[a137_0xb83cbe(0x22f)]),(0x0,roles_decorator_1[a137_0xb83cbe(0x216)])(role_enum_1['Role']['Admin'],role_enum_1[a137_0xb83cbe(0x1f2)][a137_0xb83cbe(0x226)],role_enum_1[a137_0xb83cbe(0x1f2)][a137_0xb83cbe(0x20f)]),__metadata(a137_0xb83cbe(0x20a),Function),__metadata(a137_0xb83cbe(0x217),[]),__metadata(a137_0xb83cbe(0x21c),Promise)],StreamingController[a137_0xb83cbe(0x22a)],a137_0xb83cbe(0x21b),null),__decorate([(0x0,common_1[a137_0xb83cbe(0x208)])(a137_0xb83cbe(0x219)),(0x0,common_1[a137_0xb83cbe(0x213)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a137_0xb83cbe(0x22f)]),(0x0,roles_decorator_1[a137_0xb83cbe(0x216)])(role_enum_1[a137_0xb83cbe(0x1f2)][a137_0xb83cbe(0x203)],role_enum_1['Role'][a137_0xb83cbe(0x226)],role_enum_1[a137_0xb83cbe(0x1f2)][a137_0xb83cbe(0x20f)]),__param(0x0,(0x0,common_1[a137_0xb83cbe(0x218)])({'passthrough':!![]})),__metadata(a137_0xb83cbe(0x20a),Function),__metadata(a137_0xb83cbe(0x217),[Object]),__metadata('design:returntype',Promise)],StreamingController[a137_0xb83cbe(0x22a)],a137_0xb83cbe(0x204),null),StreamingController=StreamingController_1=__decorate([(0x0,common_1[a137_0xb83cbe(0x212)])(a137_0xb83cbe(0x201)),__metadata(a137_0xb83cbe(0x217),[streaming_service_1[a137_0xb83cbe(0x1fd)]])],StreamingController),exports[a137_0xb83cbe(0x210)]=StreamingController;