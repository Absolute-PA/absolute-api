'use strict';const a137_0x170c53=a137_0x2897;(function(_0x4ff789,_0x164338){const _0x32d03e=a137_0x2897,_0x4f3469=_0x4ff789();while(!![]){try{const _0x488508=-parseInt(_0x32d03e(0x10c))/0x1*(parseInt(_0x32d03e(0xe5))/0x2)+parseInt(_0x32d03e(0xf1))/0x3+parseInt(_0x32d03e(0xdb))/0x4+-parseInt(_0x32d03e(0x104))/0x5*(parseInt(_0x32d03e(0xf5))/0x6)+parseInt(_0x32d03e(0xf4))/0x7+-parseInt(_0x32d03e(0xe0))/0x8*(-parseInt(_0x32d03e(0xeb))/0x9)+parseInt(_0x32d03e(0xee))/0xa;if(_0x488508===_0x164338)break;else _0x4f3469['push'](_0x4f3469['shift']());}catch(_0x47b383){_0x4f3469['push'](_0x4f3469['shift']());}}}(a137_0x1f81,0x51014));function a137_0x1f81(){const _0x307677=['Res','Admin','__metadata','Roles','send','JwtAuthGuard','Success\x20play\x20sound:\x20','cwd','2507575MfGImN','design:returntype','RolesGuard','openServerUIStream','startStreaming','__param','filePath','playStreamAudio','61322qGhyGY','StreamingController','defineProperty','audio','decorate','object','__decorate','User','1807008FQrGOO','StreamingService','Get','stream/start','Logger','5392mNTZCX','path','Query','function','./streaming.service','18BArHKm','design:type','design:paramtypes','name','stopStreamAudio','error','6021TsAcAF','prototype','log','1384740VpjTaf','audioService','Role','121002kbXVAy','metadata','Controller','2126201sxltVp','6nOyyWZ','UseGuards','getOwnPropertyDescriptor','Viewer','logger','../auth/decorators/roles.decorator','@nestjs/common'];a137_0x1f81=function(){return _0x307677;};return a137_0x1f81();}var __decorate=this&&this[a137_0x170c53(0xd9)]||function(_0x4ac60d,_0x421c61,_0x59389a,_0x43f3b7){const _0x477ce2=a137_0x170c53;var _0x567280=arguments['length'],_0x26c206=_0x567280<0x3?_0x421c61:_0x43f3b7===null?_0x43f3b7=Object[_0x477ce2(0xf7)](_0x421c61,_0x59389a):_0x43f3b7,_0x2e52c9;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x477ce2(0xe3))_0x26c206=Reflect[_0x477ce2(0x110)](_0x4ac60d,_0x421c61,_0x59389a,_0x43f3b7);else{for(var _0x394050=_0x4ac60d['length']-0x1;_0x394050>=0x0;_0x394050--)if(_0x2e52c9=_0x4ac60d[_0x394050])_0x26c206=(_0x567280<0x3?_0x2e52c9(_0x26c206):_0x567280>0x3?_0x2e52c9(_0x421c61,_0x59389a,_0x26c206):_0x2e52c9(_0x421c61,_0x59389a))||_0x26c206;}return _0x567280>0x3&&_0x26c206&&Object[_0x477ce2(0x10e)](_0x421c61,_0x59389a,_0x26c206),_0x26c206;},__metadata=this&&this[a137_0x170c53(0xfe)]||function(_0x39831f,_0xb11c51){const _0x59fb2c=a137_0x170c53;if(typeof Reflect===_0x59fb2c(0xd8)&&typeof Reflect[_0x59fb2c(0xf2)]===_0x59fb2c(0xe3))return Reflect[_0x59fb2c(0xf2)](_0x39831f,_0xb11c51);},__param=this&&this[a137_0x170c53(0x109)]||function(_0x479877,_0x446c45){return function(_0x11fb8c,_0x4abdc6){_0x446c45(_0x11fb8c,_0x4abdc6,_0x479877);};},StreamingController_1;function a137_0x2897(_0x56ee81,_0x38bc7d){const _0x1f810a=a137_0x1f81();return a137_0x2897=function(_0x28970,_0x39a281){_0x28970=_0x28970-0xd8;let _0x27d7cf=_0x1f810a[_0x28970];return _0x27d7cf;},a137_0x2897(_0x56ee81,_0x38bc7d);}Object[a137_0x170c53(0x10e)](exports,'__esModule',{'value':!![]}),exports[a137_0x170c53(0x10d)]=void 0x0;const common_1=require(a137_0x170c53(0xfb)),path_1=require(a137_0x170c53(0xe1)),streaming_service_1=require(a137_0x170c53(0xe4)),roles_decorator_1=require(a137_0x170c53(0xfa)),role_enum_1=require('../auth/enums/role.enum'),jwt_guard_1=require('../auth/guards/jwt.guard'),roles_guard_1=require('../auth/guards/roles.guard');let StreamingController=StreamingController_1=class StreamingController{constructor(_0x7de4a1){const _0x25854a=a137_0x170c53;this[_0x25854a(0xef)]=_0x7de4a1,this[_0x25854a(0xf9)]=new common_1[(_0x25854a(0xdf))](StreamingController_1[_0x25854a(0xe8)]);}async['playAudioFile'](_0x65d31b,_0x12c0fb){const _0xb3242c=a137_0x170c53;try{const _0x46049f=(0x0,path_1['join'])(process[_0xb3242c(0x103)](),_0x65d31b),_0x29cc49=this['audioService']['createStreamFromFile'](_0x46049f);this[_0xb3242c(0xef)][_0xb3242c(0x10b)](_0x29cc49),_0x12c0fb[_0xb3242c(0x100)](_0xb3242c(0x102)+_0x46049f);}catch(_0x37e6eb){return this[_0xb3242c(0xf9)]['log'](_0x37e6eb,_0xb3242c(0xea)),'';}}async['startStreaming'](){const _0x38a658=a137_0x170c53;try{this[_0x38a658(0xef)][_0x38a658(0x107)]();}catch(_0x333c25){this[_0x38a658(0xf9)][_0x38a658(0xed)](_0x333c25);}}async[a137_0x170c53(0xe9)](_0x1b5f6a){const _0x2b1c15=a137_0x170c53;this['audioService'][_0x2b1c15(0xe9)]();}};__decorate([(0x0,common_1['Post'])('/play/'),(0x0,common_1[a137_0x170c53(0xf6)])(jwt_guard_1[a137_0x170c53(0x101)],roles_guard_1[a137_0x170c53(0x106)]),(0x0,roles_decorator_1[a137_0x170c53(0xff)])(role_enum_1[a137_0x170c53(0xf0)][a137_0x170c53(0xfd)],role_enum_1[a137_0x170c53(0xf0)][a137_0x170c53(0xda)],role_enum_1[a137_0x170c53(0xf0)][a137_0x170c53(0xf8)]),__param(0x0,(0x0,common_1[a137_0x170c53(0xe2)])(a137_0x170c53(0x10a))),__param(0x1,(0x0,common_1[a137_0x170c53(0xfc)])({'passthrough':!![]})),__metadata(a137_0x170c53(0xe6),Function),__metadata('design:paramtypes',[String,Object]),__metadata(a137_0x170c53(0x105),Promise)],StreamingController['prototype'],'playAudioFile',null),__decorate([(0x0,common_1[a137_0x170c53(0xdd)])(a137_0x170c53(0xde)),(0x0,common_1[a137_0x170c53(0xf6)])(jwt_guard_1[a137_0x170c53(0x101)],roles_guard_1[a137_0x170c53(0x106)]),(0x0,roles_decorator_1['Roles'])(role_enum_1[a137_0x170c53(0xf0)]['Admin'],role_enum_1[a137_0x170c53(0xf0)]['User'],role_enum_1['Role']['Viewer']),__metadata(a137_0x170c53(0xe6),Function),__metadata(a137_0x170c53(0xe7),[]),__metadata('design:returntype',Promise)],StreamingController[a137_0x170c53(0xec)],a137_0x170c53(0x108),null),__decorate([(0x0,common_1[a137_0x170c53(0xdd)])('/stop'),(0x0,common_1['UseGuards'])(jwt_guard_1[a137_0x170c53(0x101)],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1[a137_0x170c53(0xff)])(role_enum_1['Role'][a137_0x170c53(0xfd)],role_enum_1[a137_0x170c53(0xf0)][a137_0x170c53(0xda)],role_enum_1[a137_0x170c53(0xf0)][a137_0x170c53(0xf8)]),__param(0x0,(0x0,common_1[a137_0x170c53(0xfc)])({'passthrough':!![]})),__metadata(a137_0x170c53(0xe6),Function),__metadata('design:paramtypes',[Object]),__metadata('design:returntype',Promise)],StreamingController['prototype'],'stopStreamAudio',null),StreamingController=StreamingController_1=__decorate([(0x0,common_1[a137_0x170c53(0xf3)])(a137_0x170c53(0x10f)),__metadata(a137_0x170c53(0xe7),[streaming_service_1[a137_0x170c53(0xdc)]])],StreamingController),exports[a137_0x170c53(0x10d)]=StreamingController;