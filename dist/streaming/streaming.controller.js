'use strict';const a134_0x2e0770=a134_0x3e5a;(function(_0x2930a9,_0x570e59){const _0x236579=a134_0x3e5a,_0x4af0b8=_0x2930a9();while(!![]){try{const _0x52e0e0=-parseInt(_0x236579(0x228))/0x1+parseInt(_0x236579(0x20b))/0x2+-parseInt(_0x236579(0x1fa))/0x3+-parseInt(_0x236579(0x21a))/0x4*(-parseInt(_0x236579(0x22f))/0x5)+parseInt(_0x236579(0x1f7))/0x6*(parseInt(_0x236579(0x20d))/0x7)+-parseInt(_0x236579(0x222))/0x8+-parseInt(_0x236579(0x202))/0x9*(-parseInt(_0x236579(0x218))/0xa);if(_0x52e0e0===_0x570e59)break;else _0x4af0b8['push'](_0x4af0b8['shift']());}catch(_0x471dbe){_0x4af0b8['push'](_0x4af0b8['shift']());}}}(a134_0x54e6,0x4c4a4));function a134_0x54e6(){const _0x2bc52b=['888vvExBQ','design:paramtypes','Viewer','295182IrjoCj','stopStreamAudio','__metadata','defineProperty','log','../auth/decorators/roles.decorator','design:returntype','name','4136157FOXuQu','Query','startStreaming','__param','playStreamAudio','metadata','../auth/guards/jwt.guard','../auth/guards/roles.guard','prototype','688754OIeFPw','send','23870SvcvwE','Controller','getOwnPropertyDescriptor','Get','UseGuards','Post','JwtAuthGuard','__esModule','logger','cwd','join','10JWHElr','function','4suKOUX','playAudioFile','Logger','/play/','Res','openServerUIStream','../auth/enums/role.enum','Role','2552192epGICg','StreamingController','RolesGuard','@nestjs/common','object','/stop','598065VYBeNB','length','createStreamFromFile','User','Roles','StreamingService','audio','96685EXrUTQ','decorate','design:type','audioService','Admin','filePath'];a134_0x54e6=function(){return _0x2bc52b;};return a134_0x54e6();}function a134_0x3e5a(_0x3fc4a0,_0x1d3c36){const _0x54e6cc=a134_0x54e6();return a134_0x3e5a=function(_0x3e5a1e,_0x41feca){_0x3e5a1e=_0x3e5a1e-0x1f2;let _0x5643e0=_0x54e6cc[_0x3e5a1e];return _0x5643e0;},a134_0x3e5a(_0x3fc4a0,_0x1d3c36);}var __decorate=this&&this['__decorate']||function(_0x5f5a36,_0x271b9d,_0x1a9eab,_0x23013f){const _0x509da1=a134_0x3e5a;var _0x4fc109=arguments['length'],_0x203542=_0x4fc109<0x3?_0x271b9d:_0x23013f===null?_0x23013f=Object[_0x509da1(0x20f)](_0x271b9d,_0x1a9eab):_0x23013f,_0x4ec6dc;if(typeof Reflect===_0x509da1(0x226)&&typeof Reflect[_0x509da1(0x1f2)]===_0x509da1(0x219))_0x203542=Reflect['decorate'](_0x5f5a36,_0x271b9d,_0x1a9eab,_0x23013f);else{for(var _0x48984f=_0x5f5a36[_0x509da1(0x229)]-0x1;_0x48984f>=0x0;_0x48984f--)if(_0x4ec6dc=_0x5f5a36[_0x48984f])_0x203542=(_0x4fc109<0x3?_0x4ec6dc(_0x203542):_0x4fc109>0x3?_0x4ec6dc(_0x271b9d,_0x1a9eab,_0x203542):_0x4ec6dc(_0x271b9d,_0x1a9eab))||_0x203542;}return _0x4fc109>0x3&&_0x203542&&Object[_0x509da1(0x1fd)](_0x271b9d,_0x1a9eab,_0x203542),_0x203542;},__metadata=this&&this[a134_0x2e0770(0x1fc)]||function(_0x28a206,_0x215783){const _0x1231c7=a134_0x2e0770;if(typeof Reflect===_0x1231c7(0x226)&&typeof Reflect[_0x1231c7(0x207)]===_0x1231c7(0x219))return Reflect[_0x1231c7(0x207)](_0x28a206,_0x215783);},__param=this&&this[a134_0x2e0770(0x205)]||function(_0x431ac4,_0x36b118){return function(_0x21e465,_0x149b1e){_0x36b118(_0x21e465,_0x149b1e,_0x431ac4);};},StreamingController_1;Object[a134_0x2e0770(0x1fd)](exports,a134_0x2e0770(0x214),{'value':!![]}),exports[a134_0x2e0770(0x223)]=void 0x0;const common_1=require(a134_0x2e0770(0x225)),path_1=require('path'),streaming_service_1=require('./streaming.service'),roles_decorator_1=require(a134_0x2e0770(0x1ff)),role_enum_1=require(a134_0x2e0770(0x220)),jwt_guard_1=require(a134_0x2e0770(0x208)),roles_guard_1=require(a134_0x2e0770(0x209));let StreamingController=StreamingController_1=class StreamingController{constructor(_0x57fd1c){const _0x32be6f=a134_0x2e0770;this['audioService']=_0x57fd1c,this[_0x32be6f(0x215)]=new common_1[(_0x32be6f(0x21c))](StreamingController_1[_0x32be6f(0x201)]);}async[a134_0x2e0770(0x21b)](_0x1ef3a0,_0x8cfd95){const _0x2a0973=a134_0x2e0770;try{const _0x581321=(0x0,path_1[_0x2a0973(0x217)])(process[_0x2a0973(0x216)](),_0x1ef3a0),_0x5b40a2=this[_0x2a0973(0x1f4)][_0x2a0973(0x22a)](_0x581321);this['audioService'][_0x2a0973(0x206)](_0x5b40a2),_0x8cfd95[_0x2a0973(0x20c)]('Success\x20play\x20sound:\x20'+_0x581321);}catch(_0x44235e){return this['logger'][_0x2a0973(0x1fe)](_0x44235e,'error'),'';}}async[a134_0x2e0770(0x204)](){const _0x456a5a=a134_0x2e0770;try{this[_0x456a5a(0x1f4)][_0x456a5a(0x21f)]();}catch(_0x1cca69){this[_0x456a5a(0x215)][_0x456a5a(0x1fe)](_0x1cca69);}}async[a134_0x2e0770(0x1fb)](_0x118785){const _0x5d27c1=a134_0x2e0770;this[_0x5d27c1(0x1f4)][_0x5d27c1(0x1fb)]();}};__decorate([(0x0,common_1[a134_0x2e0770(0x212)])(a134_0x2e0770(0x21d)),(0x0,common_1[a134_0x2e0770(0x211)])(jwt_guard_1[a134_0x2e0770(0x213)],roles_guard_1[a134_0x2e0770(0x224)]),(0x0,roles_decorator_1[a134_0x2e0770(0x22c)])(role_enum_1[a134_0x2e0770(0x221)]['Admin'],role_enum_1[a134_0x2e0770(0x221)][a134_0x2e0770(0x22b)],role_enum_1['Role']['Viewer']),__param(0x0,(0x0,common_1[a134_0x2e0770(0x203)])(a134_0x2e0770(0x1f6))),__param(0x1,(0x0,common_1[a134_0x2e0770(0x21e)])({'passthrough':!![]})),__metadata(a134_0x2e0770(0x1f3),Function),__metadata('design:paramtypes',[String,Object]),__metadata('design:returntype',Promise)],StreamingController['prototype'],a134_0x2e0770(0x21b),null),__decorate([(0x0,common_1[a134_0x2e0770(0x210)])('stream/start'),(0x0,common_1[a134_0x2e0770(0x211)])(jwt_guard_1[a134_0x2e0770(0x213)],roles_guard_1[a134_0x2e0770(0x224)]),(0x0,roles_decorator_1[a134_0x2e0770(0x22c)])(role_enum_1[a134_0x2e0770(0x221)][a134_0x2e0770(0x1f5)],role_enum_1[a134_0x2e0770(0x221)][a134_0x2e0770(0x22b)],role_enum_1[a134_0x2e0770(0x221)][a134_0x2e0770(0x1f9)]),__metadata(a134_0x2e0770(0x1f3),Function),__metadata(a134_0x2e0770(0x1f8),[]),__metadata(a134_0x2e0770(0x200),Promise)],StreamingController[a134_0x2e0770(0x20a)],a134_0x2e0770(0x204),null),__decorate([(0x0,common_1[a134_0x2e0770(0x210)])(a134_0x2e0770(0x227)),(0x0,common_1[a134_0x2e0770(0x211)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a134_0x2e0770(0x224)]),(0x0,roles_decorator_1['Roles'])(role_enum_1[a134_0x2e0770(0x221)][a134_0x2e0770(0x1f5)],role_enum_1[a134_0x2e0770(0x221)][a134_0x2e0770(0x22b)],role_enum_1[a134_0x2e0770(0x221)][a134_0x2e0770(0x1f9)]),__param(0x0,(0x0,common_1[a134_0x2e0770(0x21e)])({'passthrough':!![]})),__metadata('design:type',Function),__metadata(a134_0x2e0770(0x1f8),[Object]),__metadata(a134_0x2e0770(0x200),Promise)],StreamingController['prototype'],'stopStreamAudio',null),StreamingController=StreamingController_1=__decorate([(0x0,common_1[a134_0x2e0770(0x20e)])(a134_0x2e0770(0x22e)),__metadata(a134_0x2e0770(0x1f8),[streaming_service_1[a134_0x2e0770(0x22d)]])],StreamingController),exports[a134_0x2e0770(0x223)]=StreamingController;