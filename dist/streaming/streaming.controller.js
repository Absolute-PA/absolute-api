'use strict';const a134_0xded8e0=a134_0x2e82;function a134_0x2e82(_0x28ed82,_0xc161bd){const _0x1af9b0=a134_0x1af9();return a134_0x2e82=function(_0x2e8288,_0x178c08){_0x2e8288=_0x2e8288-0x1be;let _0xbd2f20=_0x1af9b0[_0x2e8288];return _0xbd2f20;},a134_0x2e82(_0x28ed82,_0xc161bd);}(function(_0x36e2a4,_0x554fd7){const _0x7d3af3=a134_0x2e82,_0x57587c=_0x36e2a4();while(!![]){try{const _0x2e5139=-parseInt(_0x7d3af3(0x1e6))/0x1+-parseInt(_0x7d3af3(0x1c3))/0x2+parseInt(_0x7d3af3(0x1d7))/0x3*(parseInt(_0x7d3af3(0x1c8))/0x4)+-parseInt(_0x7d3af3(0x1ee))/0x5*(-parseInt(_0x7d3af3(0x1ea))/0x6)+-parseInt(_0x7d3af3(0x1eb))/0x7+parseInt(_0x7d3af3(0x1dd))/0x8+parseInt(_0x7d3af3(0x1cb))/0x9;if(_0x2e5139===_0x554fd7)break;else _0x57587c['push'](_0x57587c['shift']());}catch(_0x19e2c5){_0x57587c['push'](_0x57587c['shift']());}}}(a134_0x1af9,0x7dc7c));var __decorate=this&&this[a134_0xded8e0(0x1d8)]||function(_0x1fa955,_0x3b5541,_0x1e9d06,_0x286b5c){const _0x245dba=a134_0xded8e0;var _0x361e2b=arguments[_0x245dba(0x1e9)],_0x4a9462=_0x361e2b<0x3?_0x3b5541:_0x286b5c===null?_0x286b5c=Object['getOwnPropertyDescriptor'](_0x3b5541,_0x1e9d06):_0x286b5c,_0x2d6f3d;if(typeof Reflect===_0x245dba(0x1c2)&&typeof Reflect[_0x245dba(0x1d6)]===_0x245dba(0x1d0))_0x4a9462=Reflect[_0x245dba(0x1d6)](_0x1fa955,_0x3b5541,_0x1e9d06,_0x286b5c);else{for(var _0x4fb007=_0x1fa955[_0x245dba(0x1e9)]-0x1;_0x4fb007>=0x0;_0x4fb007--)if(_0x2d6f3d=_0x1fa955[_0x4fb007])_0x4a9462=(_0x361e2b<0x3?_0x2d6f3d(_0x4a9462):_0x361e2b>0x3?_0x2d6f3d(_0x3b5541,_0x1e9d06,_0x4a9462):_0x2d6f3d(_0x3b5541,_0x1e9d06))||_0x4a9462;}return _0x361e2b>0x3&&_0x4a9462&&Object[_0x245dba(0x1e8)](_0x3b5541,_0x1e9d06,_0x4a9462),_0x4a9462;},__metadata=this&&this[a134_0xded8e0(0x1f4)]||function(_0x1d0920,_0x3950f4){const _0x117e2f=a134_0xded8e0;if(typeof Reflect===_0x117e2f(0x1c2)&&typeof Reflect[_0x117e2f(0x1ec)]===_0x117e2f(0x1d0))return Reflect[_0x117e2f(0x1ec)](_0x1d0920,_0x3950f4);},__param=this&&this['__param']||function(_0x4fb0ce,_0x1bfe1a){return function(_0xb3e555,_0x4369c8){_0x1bfe1a(_0xb3e555,_0x4369c8,_0x4fb0ce);};},StreamingController_1;Object[a134_0xded8e0(0x1e8)](exports,a134_0xded8e0(0x1ca),{'value':!![]}),exports[a134_0xded8e0(0x1c7)]=void 0x0;const common_1=require(a134_0xded8e0(0x1f3)),path_1=require(a134_0xded8e0(0x1dc)),streaming_service_1=require(a134_0xded8e0(0x1d3)),roles_decorator_1=require('../auth/decorators/roles.decorator'),role_enum_1=require('../auth/enums/role.enum'),jwt_guard_1=require(a134_0xded8e0(0x1d4)),roles_guard_1=require(a134_0xded8e0(0x1ce));function a134_0x1af9(){const _0x47d4ea=['send','/play/','startStreaming','@nestjs/common','__metadata','playAudioFile','Controller','StreamingService','RolesGuard','object','1160206KqbcSJ','Success\x20play\x20sound:\x20','logger','stream/start','StreamingController','4rZFGRh','design:paramtypes','__esModule','11323926jNDhNw','name','design:returntype','../auth/guards/roles.guard','Roles','function','Query','Get','./streaming.service','../auth/guards/jwt.guard','UseGuards','decorate','291045TtltGz','__decorate','User','JwtAuthGuard','Logger','path','5897392vwnHeu','openServerUIStream','Role','audioService','prototype','log','stopStreamAudio','error','audio','872184jqDnBi','Viewer','defineProperty','length','84uyjnzj','6747482UIdFBR','metadata','Admin','299645EQbUIO','playStreamAudio'];a134_0x1af9=function(){return _0x47d4ea;};return a134_0x1af9();}let StreamingController=StreamingController_1=class StreamingController{constructor(_0x135b37){const _0x33a021=a134_0xded8e0;this['audioService']=_0x135b37,this[_0x33a021(0x1c5)]=new common_1[(_0x33a021(0x1db))](StreamingController_1[_0x33a021(0x1cc)]);}async[a134_0xded8e0(0x1be)](_0x159cd8,_0x41b6e3){const _0x16634b=a134_0xded8e0;try{const _0x4548e7=(0x0,path_1['join'])(process['cwd'](),_0x159cd8),_0x4efc3f=this['audioService']['createStreamFromFile'](_0x4548e7);this['audioService'][_0x16634b(0x1ef)](_0x4efc3f),_0x41b6e3[_0x16634b(0x1f0)](_0x16634b(0x1c4)+_0x4548e7);}catch(_0x6051df){return this[_0x16634b(0x1c5)]['log'](_0x6051df,_0x16634b(0x1e4)),'';}}async['startStreaming'](){const _0x4eff7e=a134_0xded8e0;try{this[_0x4eff7e(0x1e0)][_0x4eff7e(0x1de)]();}catch(_0xc0d113){this[_0x4eff7e(0x1c5)][_0x4eff7e(0x1e2)](_0xc0d113);}}async['stopStreamAudio'](_0x290bd5){const _0x2559f0=a134_0xded8e0;this[_0x2559f0(0x1e0)][_0x2559f0(0x1e3)]();}};__decorate([(0x0,common_1['Post'])(a134_0xded8e0(0x1f1)),(0x0,common_1['UseGuards'])(jwt_guard_1[a134_0xded8e0(0x1da)],roles_guard_1[a134_0xded8e0(0x1c1)]),(0x0,roles_decorator_1[a134_0xded8e0(0x1cf)])(role_enum_1['Role'][a134_0xded8e0(0x1ed)],role_enum_1['Role'][a134_0xded8e0(0x1d9)],role_enum_1[a134_0xded8e0(0x1df)][a134_0xded8e0(0x1e7)]),__param(0x0,(0x0,common_1[a134_0xded8e0(0x1d1)])('filePath')),__param(0x1,(0x0,common_1['Res'])({'passthrough':!![]})),__metadata('design:type',Function),__metadata(a134_0xded8e0(0x1c9),[String,Object]),__metadata(a134_0xded8e0(0x1cd),Promise)],StreamingController[a134_0xded8e0(0x1e1)],a134_0xded8e0(0x1be),null),__decorate([(0x0,common_1['Get'])(a134_0xded8e0(0x1c6)),(0x0,common_1[a134_0xded8e0(0x1d5)])(jwt_guard_1[a134_0xded8e0(0x1da)],roles_guard_1[a134_0xded8e0(0x1c1)]),(0x0,roles_decorator_1['Roles'])(role_enum_1[a134_0xded8e0(0x1df)][a134_0xded8e0(0x1ed)],role_enum_1['Role']['User'],role_enum_1[a134_0xded8e0(0x1df)]['Viewer']),__metadata('design:type',Function),__metadata(a134_0xded8e0(0x1c9),[]),__metadata('design:returntype',Promise)],StreamingController[a134_0xded8e0(0x1e1)],a134_0xded8e0(0x1f2),null),__decorate([(0x0,common_1[a134_0xded8e0(0x1d2)])('/stop'),(0x0,common_1['UseGuards'])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a134_0xded8e0(0x1c1)]),(0x0,roles_decorator_1[a134_0xded8e0(0x1cf)])(role_enum_1[a134_0xded8e0(0x1df)][a134_0xded8e0(0x1ed)],role_enum_1[a134_0xded8e0(0x1df)][a134_0xded8e0(0x1d9)],role_enum_1[a134_0xded8e0(0x1df)][a134_0xded8e0(0x1e7)]),__param(0x0,(0x0,common_1['Res'])({'passthrough':!![]})),__metadata('design:type',Function),__metadata('design:paramtypes',[Object]),__metadata(a134_0xded8e0(0x1cd),Promise)],StreamingController[a134_0xded8e0(0x1e1)],a134_0xded8e0(0x1e3),null),StreamingController=StreamingController_1=__decorate([(0x0,common_1[a134_0xded8e0(0x1bf)])(a134_0xded8e0(0x1e5)),__metadata('design:paramtypes',[streaming_service_1[a134_0xded8e0(0x1c0)]])],StreamingController),exports[a134_0xded8e0(0x1c7)]=StreamingController;