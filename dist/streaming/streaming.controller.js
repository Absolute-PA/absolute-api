'use strict';const a134_0x4e2efe=a134_0x7d88;function a134_0x4bfc(){const _0x39d286=['907072OWJyxq','__metadata','__decorate','275880VIlHII','Get','decorate','/stop','audioService','getOwnPropertyDescriptor','UseGuards','design:type','send','Role','log','defineProperty','Post','User','18tNuBWb','Query','../auth/guards/roles.guard','Admin','1235pQZaMw','30yVNLqa','prototype','function','startStreaming','filePath','join','../auth/decorators/roles.decorator','330730dTnxEY','/play/','Viewer','1312asKUkg','path','../auth/enums/role.enum','__param','Logger','stream/start','length','metadata','cwd','Res','stopStreamAudio','audio','55951nUSMqz','4iGZIde','playAudioFile','createStreamFromFile','design:paramtypes','openServerUIStream','playStreamAudio','object','name','design:returntype','RolesGuard','StreamingController','52968FvIBrm','JwtAuthGuard','Roles','40229BGPFNZ'];a134_0x4bfc=function(){return _0x39d286;};return a134_0x4bfc();}(function(_0x57022b,_0x5ec8c4){const _0x3330fa=a134_0x7d88,_0x37f495=_0x57022b();while(!![]){try{const _0x14e5da=parseInt(_0x3330fa(0xfd))/0x1+parseInt(_0x3330fa(0xfe))/0x2*(parseInt(_0x3330fa(0x109))/0x3)+parseInt(_0x3330fa(0xf1))/0x4*(-parseInt(_0x3330fa(0xe6))/0x5)+parseInt(_0x3330fa(0xe7))/0x6*(parseInt(_0x3330fa(0x10c))/0x7)+parseInt(_0x3330fa(0xd1))/0x8+parseInt(_0x3330fa(0xe2))/0x9*(-parseInt(_0x3330fa(0xee))/0xa)+parseInt(_0x3330fa(0xd4))/0xb;if(_0x14e5da===_0x5ec8c4)break;else _0x37f495['push'](_0x37f495['shift']());}catch(_0x5c5d90){_0x37f495['push'](_0x37f495['shift']());}}}(a134_0x4bfc,0x1b2c4));var __decorate=this&&this[a134_0x4e2efe(0xd3)]||function(_0x7b6f8b,_0x591493,_0x13f409,_0x19156a){const _0x30c8ed=a134_0x4e2efe;var _0x413848=arguments[_0x30c8ed(0xf7)],_0x507efb=_0x413848<0x3?_0x591493:_0x19156a===null?_0x19156a=Object[_0x30c8ed(0xd9)](_0x591493,_0x13f409):_0x19156a,_0x32d39a;if(typeof Reflect===_0x30c8ed(0x104)&&typeof Reflect[_0x30c8ed(0xd6)]===_0x30c8ed(0xe9))_0x507efb=Reflect['decorate'](_0x7b6f8b,_0x591493,_0x13f409,_0x19156a);else{for(var _0x4a5aec=_0x7b6f8b[_0x30c8ed(0xf7)]-0x1;_0x4a5aec>=0x0;_0x4a5aec--)if(_0x32d39a=_0x7b6f8b[_0x4a5aec])_0x507efb=(_0x413848<0x3?_0x32d39a(_0x507efb):_0x413848>0x3?_0x32d39a(_0x591493,_0x13f409,_0x507efb):_0x32d39a(_0x591493,_0x13f409))||_0x507efb;}return _0x413848>0x3&&_0x507efb&&Object[_0x30c8ed(0xdf)](_0x591493,_0x13f409,_0x507efb),_0x507efb;},__metadata=this&&this[a134_0x4e2efe(0xd2)]||function(_0x2447c9,_0x30e8f4){const _0x3a2bd7=a134_0x4e2efe;if(typeof Reflect===_0x3a2bd7(0x104)&&typeof Reflect[_0x3a2bd7(0xf8)]==='function')return Reflect['metadata'](_0x2447c9,_0x30e8f4);},__param=this&&this[a134_0x4e2efe(0xf4)]||function(_0x9ac0e4,_0x346315){return function(_0x2d2dcc,_0xc06242){_0x346315(_0x2d2dcc,_0xc06242,_0x9ac0e4);};},StreamingController_1;function a134_0x7d88(_0x300ade,_0x3e2801){const _0x4bfc32=a134_0x4bfc();return a134_0x7d88=function(_0x7d88eb,_0x2aec9e){_0x7d88eb=_0x7d88eb-0xd1;let _0x1fa2fa=_0x4bfc32[_0x7d88eb];return _0x1fa2fa;},a134_0x7d88(_0x300ade,_0x3e2801);}Object[a134_0x4e2efe(0xdf)](exports,'__esModule',{'value':!![]}),exports[a134_0x4e2efe(0x108)]=void 0x0;const common_1=require('@nestjs/common'),path_1=require(a134_0x4e2efe(0xf2)),streaming_service_1=require('./streaming.service'),roles_decorator_1=require(a134_0x4e2efe(0xed)),role_enum_1=require(a134_0x4e2efe(0xf3)),jwt_guard_1=require('../auth/guards/jwt.guard'),roles_guard_1=require(a134_0x4e2efe(0xe4));let StreamingController=StreamingController_1=class StreamingController{constructor(_0x43528f){const _0xd1fab8=a134_0x4e2efe;this[_0xd1fab8(0xd8)]=_0x43528f,this['logger']=new common_1[(_0xd1fab8(0xf5))](StreamingController_1[_0xd1fab8(0x105)]);}async[a134_0x4e2efe(0xff)](_0x5a8d7e,_0x2dbce4){const _0x4ea46d=a134_0x4e2efe;try{const _0x168213=(0x0,path_1[_0x4ea46d(0xec)])(process[_0x4ea46d(0xf9)](),_0x5a8d7e),_0x594691=this['audioService'][_0x4ea46d(0x100)](_0x168213);this[_0x4ea46d(0xd8)][_0x4ea46d(0x103)](_0x594691),_0x2dbce4[_0x4ea46d(0xdc)]('Success\x20play\x20sound:\x20'+_0x168213);}catch(_0x32e0f9){return this['logger'][_0x4ea46d(0xde)](_0x32e0f9,'error'),'';}}async[a134_0x4e2efe(0xea)](){const _0x32800a=a134_0x4e2efe;try{this[_0x32800a(0xd8)][_0x32800a(0x102)]();}catch(_0x70771a){this['logger'][_0x32800a(0xde)](_0x70771a);}}async[a134_0x4e2efe(0xfb)](_0x89421c){const _0xcee6b3=a134_0x4e2efe;this[_0xcee6b3(0xd8)]['stopStreamAudio']();}};__decorate([(0x0,common_1[a134_0x4e2efe(0xe0)])(a134_0x4e2efe(0xef)),(0x0,common_1['UseGuards'])(jwt_guard_1[a134_0x4e2efe(0x10a)],roles_guard_1[a134_0x4e2efe(0x107)]),(0x0,roles_decorator_1[a134_0x4e2efe(0x10b)])(role_enum_1['Role'][a134_0x4e2efe(0xe5)],role_enum_1['Role'][a134_0x4e2efe(0xe1)],role_enum_1[a134_0x4e2efe(0xdd)][a134_0x4e2efe(0xf0)]),__param(0x0,(0x0,common_1[a134_0x4e2efe(0xe3)])(a134_0x4e2efe(0xeb))),__param(0x1,(0x0,common_1['Res'])({'passthrough':!![]})),__metadata(a134_0x4e2efe(0xdb),Function),__metadata(a134_0x4e2efe(0x101),[String,Object]),__metadata('design:returntype',Promise)],StreamingController[a134_0x4e2efe(0xe8)],a134_0x4e2efe(0xff),null),__decorate([(0x0,common_1[a134_0x4e2efe(0xd5)])(a134_0x4e2efe(0xf6)),(0x0,common_1[a134_0x4e2efe(0xda)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1[a134_0x4e2efe(0x10b)])(role_enum_1[a134_0x4e2efe(0xdd)][a134_0x4e2efe(0xe5)],role_enum_1[a134_0x4e2efe(0xdd)]['User'],role_enum_1[a134_0x4e2efe(0xdd)]['Viewer']),__metadata('design:type',Function),__metadata(a134_0x4e2efe(0x101),[]),__metadata(a134_0x4e2efe(0x106),Promise)],StreamingController[a134_0x4e2efe(0xe8)],a134_0x4e2efe(0xea),null),__decorate([(0x0,common_1[a134_0x4e2efe(0xd5)])(a134_0x4e2efe(0xd7)),(0x0,common_1['UseGuards'])(jwt_guard_1[a134_0x4e2efe(0x10a)],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1[a134_0x4e2efe(0x10b)])(role_enum_1[a134_0x4e2efe(0xdd)][a134_0x4e2efe(0xe5)],role_enum_1[a134_0x4e2efe(0xdd)][a134_0x4e2efe(0xe1)],role_enum_1[a134_0x4e2efe(0xdd)][a134_0x4e2efe(0xf0)]),__param(0x0,(0x0,common_1[a134_0x4e2efe(0xfa)])({'passthrough':!![]})),__metadata(a134_0x4e2efe(0xdb),Function),__metadata('design:paramtypes',[Object]),__metadata(a134_0x4e2efe(0x106),Promise)],StreamingController[a134_0x4e2efe(0xe8)],a134_0x4e2efe(0xfb),null),StreamingController=StreamingController_1=__decorate([(0x0,common_1['Controller'])(a134_0x4e2efe(0xfc)),__metadata(a134_0x4e2efe(0x101),[streaming_service_1['StreamingService']])],StreamingController),exports[a134_0x4e2efe(0x108)]=StreamingController;