'use strict';const a137_0x239532=a137_0x1a29;function a137_0x47c6(){const _0x5918be=['430VEIXZg','JwtAuthGuard','Get','object','3526EuxwDo','../auth/decorators/roles.decorator','../auth/enums/role.enum','prototype','2385188EMWxRB','createStreamFromFile','Viewer','Roles','104bPdwfe','Controller','@nestjs/common','Logger','playAudioFile','Query','log','__metadata','Post','design:paramtypes','length','design:type','stopStreamAudio','Role','metadata','cwd','__decorate','6YFkAWs','189780jujEgL','audioService','startStreaming','error','Success\x20play\x20sound:\x20','3812152yEdYaH','286fojSfW','RolesGuard','7rfbvOG','send','Admin','36792UlkCZr','defineProperty','logger','join','function','__param','22436NNIaJK','design:returntype','UseGuards','User','9fELLKa','Res','93159SkdBxM','getOwnPropertyDescriptor','StreamingController','../auth/guards/jwt.guard'];a137_0x47c6=function(){return _0x5918be;};return a137_0x47c6();}function a137_0x1a29(_0x2e09f4,_0x56cff6){const _0x47c6cb=a137_0x47c6();return a137_0x1a29=function(_0x1a29a4,_0x5b97f1){_0x1a29a4=_0x1a29a4-0xe1;let _0x3d6153=_0x47c6cb[_0x1a29a4];return _0x3d6153;},a137_0x1a29(_0x2e09f4,_0x56cff6);}(function(_0x2c758d,_0x1737db){const _0x30210c=a137_0x1a29,_0x25104c=_0x2c758d();while(!![]){try{const _0x3b4558=-parseInt(_0x30210c(0x10d))/0x1*(-parseInt(_0x30210c(0x105))/0x2)+parseInt(_0x30210c(0xfb))/0x3*(parseInt(_0x30210c(0xf7))/0x4)+-parseInt(_0x30210c(0xe6))/0x5*(parseInt(_0x30210c(0xe5))/0x6)+-parseInt(_0x30210c(0xee))/0x7*(-parseInt(_0x30210c(0xeb))/0x8)+parseInt(_0x30210c(0xfd))/0x9*(-parseInt(_0x30210c(0x101))/0xa)+parseInt(_0x30210c(0xec))/0xb*(-parseInt(_0x30210c(0xf1))/0xc)+parseInt(_0x30210c(0x109))/0xd;if(_0x3b4558===_0x1737db)break;else _0x25104c['push'](_0x25104c['shift']());}catch(_0x2e073e){_0x25104c['push'](_0x25104c['shift']());}}}(a137_0x47c6,0x489c1));var __decorate=this&&this[a137_0x239532(0xe4)]||function(_0x17a102,_0x40909c,_0xd44d48,_0x5834ee){const _0x1f1221=a137_0x239532;var _0x49ba66=arguments[_0x1f1221(0x117)],_0x5255f0=_0x49ba66<0x3?_0x40909c:_0x5834ee===null?_0x5834ee=Object[_0x1f1221(0xfe)](_0x40909c,_0xd44d48):_0x5834ee,_0x1442ba;if(typeof Reflect===_0x1f1221(0x104)&&typeof Reflect['decorate']===_0x1f1221(0xf5))_0x5255f0=Reflect['decorate'](_0x17a102,_0x40909c,_0xd44d48,_0x5834ee);else{for(var _0x2e3a60=_0x17a102[_0x1f1221(0x117)]-0x1;_0x2e3a60>=0x0;_0x2e3a60--)if(_0x1442ba=_0x17a102[_0x2e3a60])_0x5255f0=(_0x49ba66<0x3?_0x1442ba(_0x5255f0):_0x49ba66>0x3?_0x1442ba(_0x40909c,_0xd44d48,_0x5255f0):_0x1442ba(_0x40909c,_0xd44d48))||_0x5255f0;}return _0x49ba66>0x3&&_0x5255f0&&Object[_0x1f1221(0xf2)](_0x40909c,_0xd44d48,_0x5255f0),_0x5255f0;},__metadata=this&&this[a137_0x239532(0x114)]||function(_0x53e887,_0x185901){const _0x16a059=a137_0x239532;if(typeof Reflect===_0x16a059(0x104)&&typeof Reflect[_0x16a059(0xe2)]==='function')return Reflect[_0x16a059(0xe2)](_0x53e887,_0x185901);},__param=this&&this[a137_0x239532(0xf6)]||function(_0x42ff2f,_0x528120){return function(_0x3d4796,_0x1ad490){_0x528120(_0x3d4796,_0x1ad490,_0x42ff2f);};},StreamingController_1;Object[a137_0x239532(0xf2)](exports,'__esModule',{'value':!![]}),exports[a137_0x239532(0xff)]=void 0x0;const common_1=require(a137_0x239532(0x10f)),path_1=require('path'),streaming_service_1=require('./streaming.service'),roles_decorator_1=require(a137_0x239532(0x106)),role_enum_1=require(a137_0x239532(0x107)),jwt_guard_1=require(a137_0x239532(0x100)),roles_guard_1=require('../auth/guards/roles.guard');let StreamingController=StreamingController_1=class StreamingController{constructor(_0x35eef8){const _0x68a59=a137_0x239532;this[_0x68a59(0xe7)]=_0x35eef8,this[_0x68a59(0xf3)]=new common_1[(_0x68a59(0x110))](StreamingController_1['name']);}async['playAudioFile'](_0x3f732b,_0x3745c3){const _0x418b2c=a137_0x239532;try{const _0x5ead36=(0x0,path_1[_0x418b2c(0xf4)])(process[_0x418b2c(0xe3)](),_0x3f732b),_0x309db1=this[_0x418b2c(0xe7)][_0x418b2c(0x10a)](_0x5ead36);this[_0x418b2c(0xe7)]['playStreamAudio'](_0x309db1),_0x3745c3[_0x418b2c(0xef)](_0x418b2c(0xea)+_0x5ead36);}catch(_0x17f533){return this['logger'][_0x418b2c(0x113)](_0x17f533,_0x418b2c(0xe9)),'';}}async[a137_0x239532(0xe8)](){const _0x27d9fe=a137_0x239532;try{this[_0x27d9fe(0xe7)]['openServerUIStream']();}catch(_0x25421b){this[_0x27d9fe(0xf3)][_0x27d9fe(0x113)](_0x25421b);}}async[a137_0x239532(0x119)](_0x13c55f){const _0x70a629=a137_0x239532;this[_0x70a629(0xe7)][_0x70a629(0x119)]();}};__decorate([(0x0,common_1[a137_0x239532(0x115)])('/play/'),(0x0,common_1[a137_0x239532(0xf9)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a137_0x239532(0xed)]),(0x0,roles_decorator_1[a137_0x239532(0x10c)])(role_enum_1[a137_0x239532(0xe1)][a137_0x239532(0xf0)],role_enum_1['Role'][a137_0x239532(0xfa)],role_enum_1['Role'][a137_0x239532(0x10b)]),__param(0x0,(0x0,common_1[a137_0x239532(0x112)])('filePath')),__param(0x1,(0x0,common_1[a137_0x239532(0xfc)])({'passthrough':!![]})),__metadata(a137_0x239532(0x118),Function),__metadata(a137_0x239532(0x116),[String,Object]),__metadata(a137_0x239532(0xf8),Promise)],StreamingController['prototype'],a137_0x239532(0x111),null),__decorate([(0x0,common_1[a137_0x239532(0x103)])('stream/start'),(0x0,common_1[a137_0x239532(0xf9)])(jwt_guard_1[a137_0x239532(0x102)],roles_guard_1[a137_0x239532(0xed)]),(0x0,roles_decorator_1[a137_0x239532(0x10c)])(role_enum_1['Role'][a137_0x239532(0xf0)],role_enum_1[a137_0x239532(0xe1)][a137_0x239532(0xfa)],role_enum_1[a137_0x239532(0xe1)][a137_0x239532(0x10b)]),__metadata(a137_0x239532(0x118),Function),__metadata(a137_0x239532(0x116),[]),__metadata(a137_0x239532(0xf8),Promise)],StreamingController[a137_0x239532(0x108)],a137_0x239532(0xe8),null),__decorate([(0x0,common_1['Get'])('/stop'),(0x0,common_1[a137_0x239532(0xf9)])(jwt_guard_1[a137_0x239532(0x102)],roles_guard_1[a137_0x239532(0xed)]),(0x0,roles_decorator_1['Roles'])(role_enum_1[a137_0x239532(0xe1)][a137_0x239532(0xf0)],role_enum_1[a137_0x239532(0xe1)][a137_0x239532(0xfa)],role_enum_1[a137_0x239532(0xe1)]['Viewer']),__param(0x0,(0x0,common_1[a137_0x239532(0xfc)])({'passthrough':!![]})),__metadata(a137_0x239532(0x118),Function),__metadata('design:paramtypes',[Object]),__metadata('design:returntype',Promise)],StreamingController[a137_0x239532(0x108)],a137_0x239532(0x119),null),StreamingController=StreamingController_1=__decorate([(0x0,common_1[a137_0x239532(0x10e)])('audio'),__metadata(a137_0x239532(0x116),[streaming_service_1['StreamingService']])],StreamingController),exports[a137_0x239532(0xff)]=StreamingController;