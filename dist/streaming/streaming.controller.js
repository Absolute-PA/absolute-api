'use strict';const a134_0x596a67=a134_0x4091;(function(_0x23c974,_0x60794d){const _0xcd633=a134_0x4091,_0x117a0e=_0x23c974();while(!![]){try{const _0x31fb30=-parseInt(_0xcd633(0x13e))/0x1+parseInt(_0xcd633(0x146))/0x2*(parseInt(_0xcd633(0x142))/0x3)+-parseInt(_0xcd633(0x149))/0x4*(parseInt(_0xcd633(0x156))/0x5)+-parseInt(_0xcd633(0x141))/0x6*(-parseInt(_0xcd633(0x150))/0x7)+parseInt(_0xcd633(0x15d))/0x8+parseInt(_0xcd633(0x143))/0x9*(parseInt(_0xcd633(0x167))/0xa)+-parseInt(_0xcd633(0x12f))/0xb*(parseInt(_0xcd633(0x132))/0xc);if(_0x31fb30===_0x60794d)break;else _0x117a0e['push'](_0x117a0e['shift']());}catch(_0x409f9d){_0x117a0e['push'](_0x117a0e['shift']());}}}(a134_0x1cb1,0x9eb00));function a134_0x1cb1(){const _0x29e784=['name','logger','Success\x20play\x20sound:\x20','../auth/guards/jwt.guard','prototype','Roles','playAudioFile','__esModule','22680cMHqpT','decorate','defineProperty','__metadata','../auth/decorators/roles.decorator','23677478dNYJZC','metadata','Query','12SDcPZa','path','function','../auth/guards/roles.guard','log','design:type','getOwnPropertyDescriptor','stream/start','playStreamAudio','Role','createStreamFromFile','Admin','837016EzOCNk','length','audioService','20166EqqwPd','1941834FchihB','4383fMzOMC','__param','cwd','4ndwNbd','Controller','Logger','4295092Avwxly','Res','filePath','object','Viewer','/stop','__decorate','2569AJgRmK','design:returntype','./streaming.service','User','startStreaming','design:paramtypes','5HWDZKs','error','stopStreamAudio','JwtAuthGuard','audio','StreamingController','UseGuards','8645696misKBt','../auth/enums/role.enum'];a134_0x1cb1=function(){return _0x29e784;};return a134_0x1cb1();}var __decorate=this&&this[a134_0x596a67(0x14f)]||function(_0x3d93a1,_0x2b13fd,_0x31f8af,_0x3d9126){const _0x3ac31b=a134_0x596a67;var _0x3eda43=arguments['length'],_0x3b6084=_0x3eda43<0x3?_0x2b13fd:_0x3d9126===null?_0x3d9126=Object[_0x3ac31b(0x138)](_0x2b13fd,_0x31f8af):_0x3d9126,_0x197243;if(typeof Reflect===_0x3ac31b(0x14c)&&typeof Reflect['decorate']===_0x3ac31b(0x134))_0x3b6084=Reflect[_0x3ac31b(0x168)](_0x3d93a1,_0x2b13fd,_0x31f8af,_0x3d9126);else{for(var _0x3c857c=_0x3d93a1[_0x3ac31b(0x13f)]-0x1;_0x3c857c>=0x0;_0x3c857c--)if(_0x197243=_0x3d93a1[_0x3c857c])_0x3b6084=(_0x3eda43<0x3?_0x197243(_0x3b6084):_0x3eda43>0x3?_0x197243(_0x2b13fd,_0x31f8af,_0x3b6084):_0x197243(_0x2b13fd,_0x31f8af))||_0x3b6084;}return _0x3eda43>0x3&&_0x3b6084&&Object[_0x3ac31b(0x12c)](_0x2b13fd,_0x31f8af,_0x3b6084),_0x3b6084;},__metadata=this&&this[a134_0x596a67(0x12d)]||function(_0x14c5e9,_0x48b5b6){const _0x396ca4=a134_0x596a67;if(typeof Reflect===_0x396ca4(0x14c)&&typeof Reflect[_0x396ca4(0x130)]===_0x396ca4(0x134))return Reflect[_0x396ca4(0x130)](_0x14c5e9,_0x48b5b6);},__param=this&&this[a134_0x596a67(0x144)]||function(_0x1c25b9,_0xdbdd9b){return function(_0x57aca7,_0x546148){_0xdbdd9b(_0x57aca7,_0x546148,_0x1c25b9);};},StreamingController_1;Object[a134_0x596a67(0x12c)](exports,a134_0x596a67(0x166),{'value':!![]}),exports[a134_0x596a67(0x15b)]=void 0x0;const common_1=require('@nestjs/common'),path_1=require(a134_0x596a67(0x133)),streaming_service_1=require(a134_0x596a67(0x152)),roles_decorator_1=require(a134_0x596a67(0x12e)),role_enum_1=require(a134_0x596a67(0x15e)),jwt_guard_1=require(a134_0x596a67(0x162)),roles_guard_1=require(a134_0x596a67(0x135));function a134_0x4091(_0x4d88b,_0x3d8e1c){const _0x1cb1f0=a134_0x1cb1();return a134_0x4091=function(_0x409106,_0x1513f2){_0x409106=_0x409106-0x12c;let _0xa41d7d=_0x1cb1f0[_0x409106];return _0xa41d7d;},a134_0x4091(_0x4d88b,_0x3d8e1c);}let StreamingController=StreamingController_1=class StreamingController{constructor(_0x28f881){const _0x21190b=a134_0x596a67;this[_0x21190b(0x140)]=_0x28f881,this['logger']=new common_1[(_0x21190b(0x148))](StreamingController_1[_0x21190b(0x15f)]);}async[a134_0x596a67(0x165)](_0x4a6b62,_0x5dec56){const _0xbfcfbf=a134_0x596a67;try{const _0x568aeb=(0x0,path_1['join'])(process[_0xbfcfbf(0x145)](),_0x4a6b62),_0x4eded1=this['audioService'][_0xbfcfbf(0x13c)](_0x568aeb);this['audioService'][_0xbfcfbf(0x13a)](_0x4eded1),_0x5dec56['send'](_0xbfcfbf(0x161)+_0x568aeb);}catch(_0x487d5b){return this[_0xbfcfbf(0x160)][_0xbfcfbf(0x136)](_0x487d5b,_0xbfcfbf(0x157)),'';}}async[a134_0x596a67(0x154)](){const _0x1b9242=a134_0x596a67;try{this[_0x1b9242(0x140)]['openServerUIStream']();}catch(_0x58a0c8){this[_0x1b9242(0x160)]['log'](_0x58a0c8);}}async[a134_0x596a67(0x158)](_0x3de005){const _0x378054=a134_0x596a67;this[_0x378054(0x140)][_0x378054(0x158)]();}};__decorate([(0x0,common_1['Post'])('/play/'),(0x0,common_1['UseGuards'])(jwt_guard_1['JwtAuthGuard'],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1[a134_0x596a67(0x164)])(role_enum_1[a134_0x596a67(0x13b)][a134_0x596a67(0x13d)],role_enum_1['Role'][a134_0x596a67(0x153)],role_enum_1['Role']['Viewer']),__param(0x0,(0x0,common_1[a134_0x596a67(0x131)])(a134_0x596a67(0x14b))),__param(0x1,(0x0,common_1['Res'])({'passthrough':!![]})),__metadata(a134_0x596a67(0x137),Function),__metadata(a134_0x596a67(0x155),[String,Object]),__metadata(a134_0x596a67(0x151),Promise)],StreamingController[a134_0x596a67(0x163)],a134_0x596a67(0x165),null),__decorate([(0x0,common_1['Get'])(a134_0x596a67(0x139)),(0x0,common_1[a134_0x596a67(0x15c)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1['Roles'])(role_enum_1[a134_0x596a67(0x13b)][a134_0x596a67(0x13d)],role_enum_1[a134_0x596a67(0x13b)][a134_0x596a67(0x153)],role_enum_1[a134_0x596a67(0x13b)]['Viewer']),__metadata(a134_0x596a67(0x137),Function),__metadata('design:paramtypes',[]),__metadata(a134_0x596a67(0x151),Promise)],StreamingController[a134_0x596a67(0x163)],a134_0x596a67(0x154),null),__decorate([(0x0,common_1['Get'])(a134_0x596a67(0x14e)),(0x0,common_1[a134_0x596a67(0x15c)])(jwt_guard_1[a134_0x596a67(0x159)],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1[a134_0x596a67(0x164)])(role_enum_1[a134_0x596a67(0x13b)][a134_0x596a67(0x13d)],role_enum_1['Role'][a134_0x596a67(0x153)],role_enum_1[a134_0x596a67(0x13b)][a134_0x596a67(0x14d)]),__param(0x0,(0x0,common_1[a134_0x596a67(0x14a)])({'passthrough':!![]})),__metadata(a134_0x596a67(0x137),Function),__metadata(a134_0x596a67(0x155),[Object]),__metadata(a134_0x596a67(0x151),Promise)],StreamingController[a134_0x596a67(0x163)],a134_0x596a67(0x158),null),StreamingController=StreamingController_1=__decorate([(0x0,common_1[a134_0x596a67(0x147)])(a134_0x596a67(0x15a)),__metadata(a134_0x596a67(0x155),[streaming_service_1['StreamingService']])],StreamingController),exports[a134_0x596a67(0x15b)]=StreamingController;