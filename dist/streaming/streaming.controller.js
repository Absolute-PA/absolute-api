'use strict';const a134_0x42b54b=a134_0x4978;(function(_0x94def2,_0x2a5f31){const _0x106d26=a134_0x4978,_0x390a06=_0x94def2();while(!![]){try{const _0x3f549a=-parseInt(_0x106d26(0x199))/0x1*(parseInt(_0x106d26(0x194))/0x2)+-parseInt(_0x106d26(0x17b))/0x3*(parseInt(_0x106d26(0x191))/0x4)+parseInt(_0x106d26(0x17d))/0x5*(-parseInt(_0x106d26(0x1ac))/0x6)+-parseInt(_0x106d26(0x1b3))/0x7*(parseInt(_0x106d26(0x189))/0x8)+-parseInt(_0x106d26(0x1ae))/0x9*(parseInt(_0x106d26(0x1ad))/0xa)+parseInt(_0x106d26(0x1aa))/0xb*(-parseInt(_0x106d26(0x1b1))/0xc)+parseInt(_0x106d26(0x17c))/0xd;if(_0x3f549a===_0x2a5f31)break;else _0x390a06['push'](_0x390a06['shift']());}catch(_0x132482){_0x390a06['push'](_0x390a06['shift']());}}}(a134_0x5367,0x1d5ae));var __decorate=this&&this[a134_0x42b54b(0x1b0)]||function(_0x337749,_0x2dbf0a,_0x1d51cc,_0x2e392f){const _0x2a98d0=a134_0x42b54b;var _0x4b8605=arguments['length'],_0x2fe887=_0x4b8605<0x3?_0x2dbf0a:_0x2e392f===null?_0x2e392f=Object[_0x2a98d0(0x197)](_0x2dbf0a,_0x1d51cc):_0x2e392f,_0x14bc61;if(typeof Reflect===_0x2a98d0(0x185)&&typeof Reflect[_0x2a98d0(0x183)]===_0x2a98d0(0x188))_0x2fe887=Reflect['decorate'](_0x337749,_0x2dbf0a,_0x1d51cc,_0x2e392f);else{for(var _0x2af5b2=_0x337749['length']-0x1;_0x2af5b2>=0x0;_0x2af5b2--)if(_0x14bc61=_0x337749[_0x2af5b2])_0x2fe887=(_0x4b8605<0x3?_0x14bc61(_0x2fe887):_0x4b8605>0x3?_0x14bc61(_0x2dbf0a,_0x1d51cc,_0x2fe887):_0x14bc61(_0x2dbf0a,_0x1d51cc))||_0x2fe887;}return _0x4b8605>0x3&&_0x2fe887&&Object[_0x2a98d0(0x196)](_0x2dbf0a,_0x1d51cc,_0x2fe887),_0x2fe887;},__metadata=this&&this[a134_0x42b54b(0x18c)]||function(_0x2f9346,_0x1fcb3a){const _0xe072b=a134_0x42b54b;if(typeof Reflect===_0xe072b(0x185)&&typeof Reflect[_0xe072b(0x187)]==='function')return Reflect[_0xe072b(0x187)](_0x2f9346,_0x1fcb3a);},__param=this&&this[a134_0x42b54b(0x17f)]||function(_0x9fb009,_0x36d775){return function(_0x1ef6ea,_0x163ccf){_0x36d775(_0x1ef6ea,_0x163ccf,_0x9fb009);};},StreamingController_1;Object[a134_0x42b54b(0x196)](exports,a134_0x42b54b(0x184),{'value':!![]}),exports['StreamingController']=void 0x0;function a134_0x4978(_0x5d6f2d,_0x39eba9){const _0x53679c=a134_0x5367();return a134_0x4978=function(_0x497889,_0x5c01f0){_0x497889=_0x497889-0x179;let _0x26f02c=_0x53679c[_0x497889];return _0x26f02c;},a134_0x4978(_0x5d6f2d,_0x39eba9);}const common_1=require(a134_0x42b54b(0x193)),path_1=require(a134_0x42b54b(0x192)),streaming_service_1=require('./streaming.service'),roles_decorator_1=require(a134_0x42b54b(0x19a)),role_enum_1=require(a134_0x42b54b(0x1ab)),jwt_guard_1=require(a134_0x42b54b(0x1a4)),roles_guard_1=require(a134_0x42b54b(0x1a2));let StreamingController=StreamingController_1=class StreamingController{constructor(_0x1e54d1){const _0x1cc0d4=a134_0x42b54b;this[_0x1cc0d4(0x1b6)]=_0x1e54d1,this['logger']=new common_1['Logger'](StreamingController_1[_0x1cc0d4(0x18b)]);}async['playAudioFile'](_0x128d63,_0x2fb961){const _0x4fe2ee=a134_0x42b54b;try{const _0x1bd058=(0x0,path_1[_0x4fe2ee(0x186)])(process['cwd'](),_0x128d63),_0x58e8be=this[_0x4fe2ee(0x1b6)]['createStreamFromFile'](_0x1bd058);this[_0x4fe2ee(0x1b6)][_0x4fe2ee(0x1a8)](_0x58e8be),_0x2fb961[_0x4fe2ee(0x1b5)](_0x4fe2ee(0x180)+_0x1bd058);}catch(_0x3f5d11){return this['logger'][_0x4fe2ee(0x1a9)](_0x3f5d11,_0x4fe2ee(0x1a1)),'';}}async[a134_0x42b54b(0x1b2)](){const _0x29935b=a134_0x42b54b;try{this[_0x29935b(0x1b6)][_0x29935b(0x19f)]();}catch(_0x595a36){this[_0x29935b(0x17e)]['log'](_0x595a36);}}async[a134_0x42b54b(0x1a0)](_0x2f0e88){const _0x363be5=a134_0x42b54b;this[_0x363be5(0x1b6)][_0x363be5(0x1a0)]();}};__decorate([(0x0,common_1[a134_0x42b54b(0x19b)])(a134_0x42b54b(0x19c)),(0x0,common_1[a134_0x42b54b(0x179)])(jwt_guard_1[a134_0x42b54b(0x1a6)],roles_guard_1[a134_0x42b54b(0x190)]),(0x0,roles_decorator_1[a134_0x42b54b(0x19d)])(role_enum_1[a134_0x42b54b(0x18e)][a134_0x42b54b(0x1a7)],role_enum_1[a134_0x42b54b(0x18e)][a134_0x42b54b(0x1b4)],role_enum_1[a134_0x42b54b(0x18e)]['Viewer']),__param(0x0,(0x0,common_1['Query'])('filePath')),__param(0x1,(0x0,common_1[a134_0x42b54b(0x18a)])({'passthrough':!![]})),__metadata(a134_0x42b54b(0x1a5),Function),__metadata(a134_0x42b54b(0x181),[String,Object]),__metadata(a134_0x42b54b(0x17a),Promise)],StreamingController[a134_0x42b54b(0x195)],a134_0x42b54b(0x1af),null),__decorate([(0x0,common_1[a134_0x42b54b(0x18d)])(a134_0x42b54b(0x1a3)),(0x0,common_1[a134_0x42b54b(0x179)])(jwt_guard_1[a134_0x42b54b(0x1a6)],roles_guard_1[a134_0x42b54b(0x190)]),(0x0,roles_decorator_1[a134_0x42b54b(0x19d)])(role_enum_1[a134_0x42b54b(0x18e)][a134_0x42b54b(0x1a7)],role_enum_1['Role'][a134_0x42b54b(0x1b4)],role_enum_1[a134_0x42b54b(0x18e)][a134_0x42b54b(0x198)]),__metadata('design:type',Function),__metadata(a134_0x42b54b(0x181),[]),__metadata(a134_0x42b54b(0x17a),Promise)],StreamingController[a134_0x42b54b(0x195)],a134_0x42b54b(0x1b2),null),__decorate([(0x0,common_1['Get'])('/stop'),(0x0,common_1['UseGuards'])(jwt_guard_1[a134_0x42b54b(0x1a6)],roles_guard_1[a134_0x42b54b(0x190)]),(0x0,roles_decorator_1[a134_0x42b54b(0x19d)])(role_enum_1[a134_0x42b54b(0x18e)][a134_0x42b54b(0x1a7)],role_enum_1['Role'][a134_0x42b54b(0x1b4)],role_enum_1[a134_0x42b54b(0x18e)][a134_0x42b54b(0x198)]),__param(0x0,(0x0,common_1[a134_0x42b54b(0x18a)])({'passthrough':!![]})),__metadata('design:type',Function),__metadata('design:paramtypes',[Object]),__metadata(a134_0x42b54b(0x17a),Promise)],StreamingController[a134_0x42b54b(0x195)],'stopStreamAudio',null),StreamingController=StreamingController_1=__decorate([(0x0,common_1[a134_0x42b54b(0x19e)])(a134_0x42b54b(0x182)),__metadata(a134_0x42b54b(0x181),[streaming_service_1['StreamingService']])],StreamingController),exports[a134_0x42b54b(0x18f)]=StreamingController;function a134_0x5367(){const _0xdc11=['18735vHuHsx','7680036xBdDdC','3580LiHNpS','logger','__param','Success\x20play\x20sound:\x20','design:paramtypes','audio','decorate','__esModule','object','join','metadata','function','56skjdRD','Res','name','__metadata','Get','Role','StreamingController','RolesGuard','84RYgtcR','path','@nestjs/common','2TNMzOK','prototype','defineProperty','getOwnPropertyDescriptor','Viewer','36194zMJjRv','../auth/decorators/roles.decorator','Post','/play/','Roles','Controller','openServerUIStream','stopStreamAudio','error','../auth/guards/roles.guard','stream/start','../auth/guards/jwt.guard','design:type','JwtAuthGuard','Admin','playStreamAudio','log','462DarGdG','../auth/enums/role.enum','78LIbpru','10bbBaYN','1452834FRhPEs','playAudioFile','__decorate','30444UnzOvq','startStreaming','25907jrrWiF','User','send','audioService','UseGuards','design:returntype'];a134_0x5367=function(){return _0xdc11;};return a134_0x5367();}