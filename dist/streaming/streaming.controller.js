'use strict';const a134_0x156fe4=a134_0x3891;(function(_0x3a9ee3,_0x106aa9){const _0x2de66=a134_0x3891,_0x2b8daf=_0x3a9ee3();while(!![]){try{const _0x27b398=parseInt(_0x2de66(0x10d))/0x1+parseInt(_0x2de66(0x127))/0x2*(-parseInt(_0x2de66(0x122))/0x3)+-parseInt(_0x2de66(0x11e))/0x4+-parseInt(_0x2de66(0x113))/0x5*(-parseInt(_0x2de66(0x11c))/0x6)+-parseInt(_0x2de66(0xff))/0x7*(parseInt(_0x2de66(0x114))/0x8)+-parseInt(_0x2de66(0x102))/0x9+-parseInt(_0x2de66(0xfc))/0xa*(-parseInt(_0x2de66(0x119))/0xb);if(_0x27b398===_0x106aa9)break;else _0x2b8daf['push'](_0x2b8daf['shift']());}catch(_0x1d44df){_0x2b8daf['push'](_0x2b8daf['shift']());}}}(a134_0x1df6,0x620b2));function a134_0x3891(_0x1feaf9,_0xe1e814){const _0x1df644=a134_0x1df6();return a134_0x3891=function(_0x3891ed,_0x4de06d){_0x3891ed=_0x3891ed-0xfb;let _0x1d6cf8=_0x1df644[_0x3891ed];return _0x1d6cf8;},a134_0x3891(_0x1feaf9,_0xe1e814);}var __decorate=this&&this['__decorate']||function(_0x3cb717,_0x1ce082,_0x31490b,_0x58f7f2){const _0x16eb7d=a134_0x3891;var _0x59451f=arguments[_0x16eb7d(0x105)],_0x5119be=_0x59451f<0x3?_0x1ce082:_0x58f7f2===null?_0x58f7f2=Object['getOwnPropertyDescriptor'](_0x1ce082,_0x31490b):_0x58f7f2,_0x1e68d5;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x16eb7d(0x116))_0x5119be=Reflect[_0x16eb7d(0x125)](_0x3cb717,_0x1ce082,_0x31490b,_0x58f7f2);else{for(var _0x15630d=_0x3cb717[_0x16eb7d(0x105)]-0x1;_0x15630d>=0x0;_0x15630d--)if(_0x1e68d5=_0x3cb717[_0x15630d])_0x5119be=(_0x59451f<0x3?_0x1e68d5(_0x5119be):_0x59451f>0x3?_0x1e68d5(_0x1ce082,_0x31490b,_0x5119be):_0x1e68d5(_0x1ce082,_0x31490b))||_0x5119be;}return _0x59451f>0x3&&_0x5119be&&Object[_0x16eb7d(0x10f)](_0x1ce082,_0x31490b,_0x5119be),_0x5119be;},__metadata=this&&this[a134_0x156fe4(0x11f)]||function(_0x16732d,_0x472e94){const _0x568126=a134_0x156fe4;if(typeof Reflect===_0x568126(0x104)&&typeof Reflect[_0x568126(0x103)]===_0x568126(0x116))return Reflect['metadata'](_0x16732d,_0x472e94);},__param=this&&this[a134_0x156fe4(0x132)]||function(_0x59a62e,_0x3fc923){return function(_0xff95af,_0x59f712){_0x3fc923(_0xff95af,_0x59f712,_0x59a62e);};},StreamingController_1;Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a134_0x156fe4(0xfe)]=void 0x0;function a134_0x1df6(){const _0x52156d=['length','audioService','cwd','audio','Success\x20play\x20sound:\x20','Role','playAudioFile','design:type','793670cCZmCK','../auth/guards/roles.guard','defineProperty','./streaming.service','@nestjs/common','Roles','389275lBjYGn','4290952HsBSPF','error','function','/play/','design:paramtypes','33UrTzdz','../auth/enums/role.enum','stream/start','6uMpKjG','logger','44776QFNrHp','__metadata','Query','createStreamFromFile','6978IDvqff','log','UseGuards','decorate','RolesGuard','614SgnQIM','send','openServerUIStream','stopStreamAudio','design:returntype','Admin','Res','Post','Viewer','../auth/guards/jwt.guard','User','__param','startStreaming','4897070sxJmyq','prototype','StreamingController','7WTyvct','JwtAuthGuard','Get','6096735XRsLjg','metadata','object'];a134_0x1df6=function(){return _0x52156d;};return a134_0x1df6();}const common_1=require(a134_0x156fe4(0x111)),path_1=require('path'),streaming_service_1=require(a134_0x156fe4(0x110)),roles_decorator_1=require('../auth/decorators/roles.decorator'),role_enum_1=require(a134_0x156fe4(0x11a)),jwt_guard_1=require(a134_0x156fe4(0x130)),roles_guard_1=require(a134_0x156fe4(0x10e));let StreamingController=StreamingController_1=class StreamingController{constructor(_0x3b5e8b){const _0x2fc4eb=a134_0x156fe4;this[_0x2fc4eb(0x106)]=_0x3b5e8b,this[_0x2fc4eb(0x11d)]=new common_1['Logger'](StreamingController_1['name']);}async['playAudioFile'](_0x17c985,_0x510beb){const _0x2e66ab=a134_0x156fe4;try{const _0x12b6a6=(0x0,path_1['join'])(process[_0x2e66ab(0x107)](),_0x17c985),_0x5e876f=this[_0x2e66ab(0x106)][_0x2e66ab(0x121)](_0x12b6a6);this[_0x2e66ab(0x106)]['playStreamAudio'](_0x5e876f),_0x510beb[_0x2e66ab(0x128)](_0x2e66ab(0x109)+_0x12b6a6);}catch(_0x459c06){return this[_0x2e66ab(0x11d)][_0x2e66ab(0x123)](_0x459c06,_0x2e66ab(0x115)),'';}}async['startStreaming'](){const _0x393595=a134_0x156fe4;try{this[_0x393595(0x106)][_0x393595(0x129)]();}catch(_0xa27d63){this['logger'][_0x393595(0x123)](_0xa27d63);}}async[a134_0x156fe4(0x12a)](_0x57059a){const _0x311173=a134_0x156fe4;this[_0x311173(0x106)]['stopStreamAudio']();}};__decorate([(0x0,common_1[a134_0x156fe4(0x12e)])(a134_0x156fe4(0x117)),(0x0,common_1[a134_0x156fe4(0x124)])(jwt_guard_1[a134_0x156fe4(0x100)],roles_guard_1[a134_0x156fe4(0x126)]),(0x0,roles_decorator_1[a134_0x156fe4(0x112)])(role_enum_1['Role'][a134_0x156fe4(0x12c)],role_enum_1['Role']['User'],role_enum_1[a134_0x156fe4(0x10a)][a134_0x156fe4(0x12f)]),__param(0x0,(0x0,common_1[a134_0x156fe4(0x120)])('filePath')),__param(0x1,(0x0,common_1[a134_0x156fe4(0x12d)])({'passthrough':!![]})),__metadata('design:type',Function),__metadata('design:paramtypes',[String,Object]),__metadata('design:returntype',Promise)],StreamingController[a134_0x156fe4(0xfd)],a134_0x156fe4(0x10b),null),__decorate([(0x0,common_1[a134_0x156fe4(0x101)])(a134_0x156fe4(0x11b)),(0x0,common_1[a134_0x156fe4(0x124)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a134_0x156fe4(0x126)]),(0x0,roles_decorator_1[a134_0x156fe4(0x112)])(role_enum_1[a134_0x156fe4(0x10a)][a134_0x156fe4(0x12c)],role_enum_1[a134_0x156fe4(0x10a)][a134_0x156fe4(0x131)],role_enum_1[a134_0x156fe4(0x10a)]['Viewer']),__metadata(a134_0x156fe4(0x10c),Function),__metadata('design:paramtypes',[]),__metadata(a134_0x156fe4(0x12b),Promise)],StreamingController['prototype'],a134_0x156fe4(0xfb),null),__decorate([(0x0,common_1[a134_0x156fe4(0x101)])('/stop'),(0x0,common_1['UseGuards'])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a134_0x156fe4(0x126)]),(0x0,roles_decorator_1[a134_0x156fe4(0x112)])(role_enum_1[a134_0x156fe4(0x10a)][a134_0x156fe4(0x12c)],role_enum_1[a134_0x156fe4(0x10a)][a134_0x156fe4(0x131)],role_enum_1[a134_0x156fe4(0x10a)][a134_0x156fe4(0x12f)]),__param(0x0,(0x0,common_1[a134_0x156fe4(0x12d)])({'passthrough':!![]})),__metadata(a134_0x156fe4(0x10c),Function),__metadata(a134_0x156fe4(0x118),[Object]),__metadata('design:returntype',Promise)],StreamingController[a134_0x156fe4(0xfd)],a134_0x156fe4(0x12a),null),StreamingController=StreamingController_1=__decorate([(0x0,common_1['Controller'])(a134_0x156fe4(0x108)),__metadata(a134_0x156fe4(0x118),[streaming_service_1['StreamingService']])],StreamingController),exports[a134_0x156fe4(0xfe)]=StreamingController;