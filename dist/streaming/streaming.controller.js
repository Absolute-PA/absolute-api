'use strict';const a137_0x14d17f=a137_0x413b;(function(_0xc7b3e6,_0x42ce33){const _0x162b24=a137_0x413b,_0xdf1ca6=_0xc7b3e6();while(!![]){try{const _0x4395c1=parseInt(_0x162b24(0x171))/0x1*(parseInt(_0x162b24(0x17f))/0x2)+-parseInt(_0x162b24(0x185))/0x3+parseInt(_0x162b24(0x173))/0x4+parseInt(_0x162b24(0x182))/0x5+parseInt(_0x162b24(0x15c))/0x6*(parseInt(_0x162b24(0x15e))/0x7)+parseInt(_0x162b24(0x180))/0x8+-parseInt(_0x162b24(0x16d))/0x9;if(_0x4395c1===_0x42ce33)break;else _0xdf1ca6['push'](_0xdf1ca6['shift']());}catch(_0x8dafd){_0xdf1ca6['push'](_0xdf1ca6['shift']());}}}(a137_0x2ca3,0x7ad3e));var __decorate=this&&this['__decorate']||function(_0x8388,_0x533e5b,_0x3ba5ad,_0x5548ae){const _0x34d7f6=a137_0x413b;var _0x404f12=arguments[_0x34d7f6(0x186)],_0x19b8d3=_0x404f12<0x3?_0x533e5b:_0x5548ae===null?_0x5548ae=Object[_0x34d7f6(0x15f)](_0x533e5b,_0x3ba5ad):_0x5548ae,_0x5cf3e5;if(typeof Reflect===_0x34d7f6(0x189)&&typeof Reflect['decorate']===_0x34d7f6(0x174))_0x19b8d3=Reflect[_0x34d7f6(0x183)](_0x8388,_0x533e5b,_0x3ba5ad,_0x5548ae);else{for(var _0x1971bd=_0x8388['length']-0x1;_0x1971bd>=0x0;_0x1971bd--)if(_0x5cf3e5=_0x8388[_0x1971bd])_0x19b8d3=(_0x404f12<0x3?_0x5cf3e5(_0x19b8d3):_0x404f12>0x3?_0x5cf3e5(_0x533e5b,_0x3ba5ad,_0x19b8d3):_0x5cf3e5(_0x533e5b,_0x3ba5ad))||_0x19b8d3;}return _0x404f12>0x3&&_0x19b8d3&&Object[_0x34d7f6(0x158)](_0x533e5b,_0x3ba5ad,_0x19b8d3),_0x19b8d3;},__metadata=this&&this[a137_0x14d17f(0x18d)]||function(_0x568576,_0x4310fb){const _0x232319=a137_0x14d17f;if(typeof Reflect===_0x232319(0x189)&&typeof Reflect['metadata']===_0x232319(0x174))return Reflect['metadata'](_0x568576,_0x4310fb);},__param=this&&this[a137_0x14d17f(0x162)]||function(_0x363a59,_0x114d26){return function(_0x37c8fc,_0x104f6d){_0x114d26(_0x37c8fc,_0x104f6d,_0x363a59);};},StreamingController_1;Object[a137_0x14d17f(0x158)](exports,'__esModule',{'value':!![]}),exports[a137_0x14d17f(0x163)]=void 0x0;const common_1=require(a137_0x14d17f(0x17a)),path_1=require(a137_0x14d17f(0x17d)),streaming_service_1=require(a137_0x14d17f(0x15d)),roles_decorator_1=require(a137_0x14d17f(0x18c)),role_enum_1=require('../auth/enums/role.enum'),jwt_guard_1=require('../auth/guards/jwt.guard'),roles_guard_1=require(a137_0x14d17f(0x18b));function a137_0x413b(_0x4558f9,_0x12ac5d){const _0x2ca3d5=a137_0x2ca3();return a137_0x413b=function(_0x413b0d,_0x42a54a){_0x413b0d=_0x413b0d-0x158;let _0x2211ca=_0x2ca3d5[_0x413b0d];return _0x2211ca;},a137_0x413b(_0x4558f9,_0x12ac5d);}let StreamingController=StreamingController_1=class StreamingController{constructor(_0x59acc0){const _0xb9ef59=a137_0x14d17f;this[_0xb9ef59(0x176)]=_0x59acc0,this[_0xb9ef59(0x165)]=new common_1[(_0xb9ef59(0x160))](StreamingController_1[_0xb9ef59(0x181)]);}async[a137_0x14d17f(0x16b)](_0x796c82,_0x4ee7a8){const _0x4ba137=a137_0x14d17f;try{const _0x38352a=(0x0,path_1[_0x4ba137(0x187)])(process['cwd'](),_0x796c82),_0xfab0b3=this[_0x4ba137(0x176)]['createStreamFromFile'](_0x38352a);this[_0x4ba137(0x176)][_0x4ba137(0x16c)](_0xfab0b3),_0x4ee7a8['send'](_0x4ba137(0x161)+_0x38352a);}catch(_0x3b33db){return this['logger']['log'](_0x3b33db,_0x4ba137(0x17e)),'';}}async[a137_0x14d17f(0x188)](){const _0x3260cc=a137_0x14d17f;try{this[_0x3260cc(0x176)]['openServerUIStream']();}catch(_0x2fd2f4){this['logger'][_0x3260cc(0x17b)](_0x2fd2f4);}}async[a137_0x14d17f(0x167)](_0x42f312){const _0x4d9a7f=a137_0x14d17f;this[_0x4d9a7f(0x176)]['stopStreamAudio']();}};function a137_0x2ca3(){const _0x1a9297=['12880638UawLNA','/play/','prototype','Res','1mPdSbF','Admin','2460024QrXeBe','function','Get','audioService','Roles','Controller','design:type','@nestjs/common','log','/stop','path','error','1095732SLopeS','2025192PBWBPj','name','3281485lLCWho','decorate','StreamingService','2352708amoCfY','length','join','startStreaming','object','Viewer','../auth/guards/roles.guard','../auth/decorators/roles.decorator','__metadata','defineProperty','audio','design:paramtypes','UseGuards','12XTUqYy','./streaming.service','2261707fixBgp','getOwnPropertyDescriptor','Logger','Success\x20play\x20sound:\x20','__param','StreamingController','Role','logger','design:returntype','stopStreamAudio','User','JwtAuthGuard','RolesGuard','playAudioFile','playStreamAudio'];a137_0x2ca3=function(){return _0x1a9297;};return a137_0x2ca3();}__decorate([(0x0,common_1['Post'])(a137_0x14d17f(0x16e)),(0x0,common_1['UseGuards'])(jwt_guard_1[a137_0x14d17f(0x169)],roles_guard_1[a137_0x14d17f(0x16a)]),(0x0,roles_decorator_1[a137_0x14d17f(0x177)])(role_enum_1[a137_0x14d17f(0x164)][a137_0x14d17f(0x172)],role_enum_1[a137_0x14d17f(0x164)][a137_0x14d17f(0x168)],role_enum_1[a137_0x14d17f(0x164)][a137_0x14d17f(0x18a)]),__param(0x0,(0x0,common_1['Query'])('filePath')),__param(0x1,(0x0,common_1[a137_0x14d17f(0x170)])({'passthrough':!![]})),__metadata(a137_0x14d17f(0x179),Function),__metadata(a137_0x14d17f(0x15a),[String,Object]),__metadata(a137_0x14d17f(0x166),Promise)],StreamingController[a137_0x14d17f(0x16f)],'playAudioFile',null),__decorate([(0x0,common_1[a137_0x14d17f(0x175)])('stream/start'),(0x0,common_1[a137_0x14d17f(0x15b)])(jwt_guard_1[a137_0x14d17f(0x169)],roles_guard_1[a137_0x14d17f(0x16a)]),(0x0,roles_decorator_1[a137_0x14d17f(0x177)])(role_enum_1[a137_0x14d17f(0x164)][a137_0x14d17f(0x172)],role_enum_1[a137_0x14d17f(0x164)][a137_0x14d17f(0x168)],role_enum_1[a137_0x14d17f(0x164)][a137_0x14d17f(0x18a)]),__metadata('design:type',Function),__metadata(a137_0x14d17f(0x15a),[]),__metadata(a137_0x14d17f(0x166),Promise)],StreamingController['prototype'],'startStreaming',null),__decorate([(0x0,common_1[a137_0x14d17f(0x175)])(a137_0x14d17f(0x17c)),(0x0,common_1['UseGuards'])(jwt_guard_1[a137_0x14d17f(0x169)],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1[a137_0x14d17f(0x177)])(role_enum_1[a137_0x14d17f(0x164)]['Admin'],role_enum_1[a137_0x14d17f(0x164)][a137_0x14d17f(0x168)],role_enum_1[a137_0x14d17f(0x164)][a137_0x14d17f(0x18a)]),__param(0x0,(0x0,common_1[a137_0x14d17f(0x170)])({'passthrough':!![]})),__metadata(a137_0x14d17f(0x179),Function),__metadata(a137_0x14d17f(0x15a),[Object]),__metadata(a137_0x14d17f(0x166),Promise)],StreamingController[a137_0x14d17f(0x16f)],a137_0x14d17f(0x167),null),StreamingController=StreamingController_1=__decorate([(0x0,common_1[a137_0x14d17f(0x178)])(a137_0x14d17f(0x159)),__metadata('design:paramtypes',[streaming_service_1[a137_0x14d17f(0x184)]])],StreamingController),exports[a137_0x14d17f(0x163)]=StreamingController;