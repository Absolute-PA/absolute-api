'use strict';const a134_0x51232f=a134_0x5daa;(function(_0x35a9bc,_0x25ebf9){const _0x3520e7=a134_0x5daa,_0x2f185a=_0x35a9bc();while(!![]){try{const _0x3f71ad=-parseInt(_0x3520e7(0xa6))/0x1+parseInt(_0x3520e7(0xa5))/0x2+parseInt(_0x3520e7(0xb3))/0x3*(-parseInt(_0x3520e7(0xa7))/0x4)+parseInt(_0x3520e7(0x8f))/0x5*(parseInt(_0x3520e7(0xad))/0x6)+-parseInt(_0x3520e7(0x8c))/0x7+-parseInt(_0x3520e7(0xaa))/0x8*(parseInt(_0x3520e7(0x99))/0x9)+parseInt(_0x3520e7(0xb0))/0xa;if(_0x3f71ad===_0x25ebf9)break;else _0x2f185a['push'](_0x2f185a['shift']());}catch(_0x28a9ae){_0x2f185a['push'](_0x2f185a['shift']());}}}(a134_0x2089,0xa8c55));var __decorate=this&&this[a134_0x51232f(0x96)]||function(_0x2edaba,_0x3aa4e6,_0x4ece7c,_0x1d2238){const _0x6700e3=a134_0x51232f;var _0x1b36db=arguments['length'],_0x1ed124=_0x1b36db<0x3?_0x3aa4e6:_0x1d2238===null?_0x1d2238=Object[_0x6700e3(0x9c)](_0x3aa4e6,_0x4ece7c):_0x1d2238,_0x25ba98;if(typeof Reflect===_0x6700e3(0x87)&&typeof Reflect[_0x6700e3(0xb4)]===_0x6700e3(0x85))_0x1ed124=Reflect[_0x6700e3(0xb4)](_0x2edaba,_0x3aa4e6,_0x4ece7c,_0x1d2238);else{for(var _0x339948=_0x2edaba[_0x6700e3(0xa9)]-0x1;_0x339948>=0x0;_0x339948--)if(_0x25ba98=_0x2edaba[_0x339948])_0x1ed124=(_0x1b36db<0x3?_0x25ba98(_0x1ed124):_0x1b36db>0x3?_0x25ba98(_0x3aa4e6,_0x4ece7c,_0x1ed124):_0x25ba98(_0x3aa4e6,_0x4ece7c))||_0x1ed124;}return _0x1b36db>0x3&&_0x1ed124&&Object[_0x6700e3(0x92)](_0x3aa4e6,_0x4ece7c,_0x1ed124),_0x1ed124;},__metadata=this&&this[a134_0x51232f(0x93)]||function(_0x47368f,_0x577645){const _0x448c1a=a134_0x51232f;if(typeof Reflect===_0x448c1a(0x87)&&typeof Reflect[_0x448c1a(0xa3)]===_0x448c1a(0x85))return Reflect[_0x448c1a(0xa3)](_0x47368f,_0x577645);},__param=this&&this[a134_0x51232f(0x9d)]||function(_0x816019,_0x5bf054){return function(_0x4257d2,_0x5e42f5){_0x5bf054(_0x4257d2,_0x5e42f5,_0x816019);};},StreamingController_1;Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a134_0x51232f(0x81)]=void 0x0;function a134_0x2089(){const _0xb589cf=['design:type','openServerUIStream','__decorate','playAudioFile','User','2037762XxwMCR','audioService','audio','getOwnPropertyDescriptor','__param','/play/','Res','stream/start','filePath','design:returntype','metadata','Admin','1669662yDkOWm','1220501vIvWKt','1181052TwJDiC','../auth/enums/role.enum','length','32PhEcwi','Viewer','Role','1392ALttod','prototype','name','28085260zpAhPh','Get','../auth/guards/roles.guard','9VXBaOy','decorate','@nestjs/common','Logger','error','cwd','RolesGuard','startStreaming','../auth/decorators/roles.decorator','StreamingController','Controller','Roles','log','function','Success\x20play\x20sound:\x20','object','logger','./streaming.service','stopStreamAudio','Post','8951250KHyEFd','playStreamAudio','UseGuards','28850izgEOs','JwtAuthGuard','design:paramtypes','defineProperty','__metadata'];a134_0x2089=function(){return _0xb589cf;};return a134_0x2089();}const common_1=require(a134_0x51232f(0xb5)),path_1=require('path'),streaming_service_1=require(a134_0x51232f(0x89)),roles_decorator_1=require(a134_0x51232f(0x80)),role_enum_1=require(a134_0x51232f(0xa8)),jwt_guard_1=require('../auth/guards/jwt.guard'),roles_guard_1=require(a134_0x51232f(0xb2));function a134_0x5daa(_0x5d98d3,_0x3ef520){const _0x208943=a134_0x2089();return a134_0x5daa=function(_0x5daa5e,_0x115e76){_0x5daa5e=_0x5daa5e-0x7b;let _0x175017=_0x208943[_0x5daa5e];return _0x175017;},a134_0x5daa(_0x5d98d3,_0x3ef520);}let StreamingController=StreamingController_1=class StreamingController{constructor(_0x54328d){const _0x2692ae=a134_0x51232f;this[_0x2692ae(0x9a)]=_0x54328d,this[_0x2692ae(0x88)]=new common_1[(_0x2692ae(0x7b))](StreamingController_1[_0x2692ae(0xaf)]);}async[a134_0x51232f(0x97)](_0x3b15b2,_0x3b4b15){const _0x19f055=a134_0x51232f;try{const _0x2aa3ac=(0x0,path_1['join'])(process[_0x19f055(0x7d)](),_0x3b15b2),_0x323782=this[_0x19f055(0x9a)]['createStreamFromFile'](_0x2aa3ac);this[_0x19f055(0x9a)][_0x19f055(0x8d)](_0x323782),_0x3b4b15['send'](_0x19f055(0x86)+_0x2aa3ac);}catch(_0x24aa6b){return this[_0x19f055(0x88)]['log'](_0x24aa6b,_0x19f055(0x7c)),'';}}async[a134_0x51232f(0x7f)](){const _0x2c6120=a134_0x51232f;try{this['audioService'][_0x2c6120(0x95)]();}catch(_0x4cc94b){this[_0x2c6120(0x88)][_0x2c6120(0x84)](_0x4cc94b);}}async['stopStreamAudio'](_0x16bff9){const _0x2438f2=a134_0x51232f;this['audioService'][_0x2438f2(0x8a)]();}};__decorate([(0x0,common_1[a134_0x51232f(0x8b)])(a134_0x51232f(0x9e)),(0x0,common_1['UseGuards'])(jwt_guard_1[a134_0x51232f(0x90)],roles_guard_1[a134_0x51232f(0x7e)]),(0x0,roles_decorator_1[a134_0x51232f(0x83)])(role_enum_1[a134_0x51232f(0xac)][a134_0x51232f(0xa4)],role_enum_1[a134_0x51232f(0xac)]['User'],role_enum_1['Role']['Viewer']),__param(0x0,(0x0,common_1['Query'])(a134_0x51232f(0xa1))),__param(0x1,(0x0,common_1[a134_0x51232f(0x9f)])({'passthrough':!![]})),__metadata('design:type',Function),__metadata('design:paramtypes',[String,Object]),__metadata(a134_0x51232f(0xa2),Promise)],StreamingController[a134_0x51232f(0xae)],a134_0x51232f(0x97),null),__decorate([(0x0,common_1[a134_0x51232f(0xb1)])(a134_0x51232f(0xa0)),(0x0,common_1[a134_0x51232f(0x8e)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a134_0x51232f(0x7e)]),(0x0,roles_decorator_1['Roles'])(role_enum_1[a134_0x51232f(0xac)][a134_0x51232f(0xa4)],role_enum_1[a134_0x51232f(0xac)][a134_0x51232f(0x98)],role_enum_1['Role'][a134_0x51232f(0xab)]),__metadata(a134_0x51232f(0x94),Function),__metadata('design:paramtypes',[]),__metadata('design:returntype',Promise)],StreamingController[a134_0x51232f(0xae)],a134_0x51232f(0x7f),null),__decorate([(0x0,common_1['Get'])('/stop'),(0x0,common_1[a134_0x51232f(0x8e)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a134_0x51232f(0x7e)]),(0x0,roles_decorator_1[a134_0x51232f(0x83)])(role_enum_1['Role'][a134_0x51232f(0xa4)],role_enum_1['Role'][a134_0x51232f(0x98)],role_enum_1[a134_0x51232f(0xac)][a134_0x51232f(0xab)]),__param(0x0,(0x0,common_1['Res'])({'passthrough':!![]})),__metadata(a134_0x51232f(0x94),Function),__metadata(a134_0x51232f(0x91),[Object]),__metadata(a134_0x51232f(0xa2),Promise)],StreamingController[a134_0x51232f(0xae)],a134_0x51232f(0x8a),null),StreamingController=StreamingController_1=__decorate([(0x0,common_1[a134_0x51232f(0x82)])(a134_0x51232f(0x9b)),__metadata(a134_0x51232f(0x91),[streaming_service_1['StreamingService']])],StreamingController),exports[a134_0x51232f(0x81)]=StreamingController;