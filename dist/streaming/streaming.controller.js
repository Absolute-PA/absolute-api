'use strict';const a137_0xa90424=a137_0x4f61;function a137_0x3454(){const _0x3b4bee=['@nestjs/common','../auth/guards/jwt.guard','Logger','openServerUIStream','../auth/guards/roles.guard','StreamingController','path','4095621ngZSxr','1309MZYZsv','Controller','Roles','Get','12932880fXWnUD','defineProperty','Post','Admin','filePath','Res','321568RopGeX','getOwnPropertyDescriptor','join','error','function','stream/start','5TrxUiQ','JwtAuthGuard','../auth/decorators/roles.decorator','__param','/stop','378564wgWYwG','send','playStreamAudio','audioService','name','RolesGuard','audio','logger','Viewer','../auth/enums/role.enum','playAudioFile','prototype','8PhXphw','834lldyGC','design:returntype','__metadata','cwd','StreamingService','75498YrFlaX','length','createStreamFromFile','log','1278188YOoAsU','design:paramtypes','UseGuards','Role','metadata','design:type','Query','User','startStreaming','__esModule','stopStreamAudio'];a137_0x3454=function(){return _0x3b4bee;};return a137_0x3454();}(function(_0x124d95,_0x24c2d4){const _0x1a5399=a137_0x4f61,_0x26adb9=_0x124d95();while(!![]){try{const _0x195199=-parseInt(_0x1a5399(0x174))/0x1+-parseInt(_0x1a5399(0x180))/0x2*(-parseInt(_0x1a5399(0x186))/0x3)+-parseInt(_0x1a5399(0x18a))/0x4*(parseInt(_0x1a5399(0x16f))/0x5)+-parseInt(_0x1a5399(0x181))/0x6*(parseInt(_0x1a5399(0x19d))/0x7)+parseInt(_0x1a5399(0x169))/0x8+-parseInt(_0x1a5399(0x19c))/0x9+parseInt(_0x1a5399(0x163))/0xa;if(_0x195199===_0x24c2d4)break;else _0x26adb9['push'](_0x26adb9['shift']());}catch(_0x14be6f){_0x26adb9['push'](_0x26adb9['shift']());}}}(a137_0x3454,0x3e3ff));function a137_0x4f61(_0x3b2339,_0x38b2e3){const _0x3454f2=a137_0x3454();return a137_0x4f61=function(_0x4f6151,_0x72bc83){_0x4f6151=_0x4f6151-0x163;let _0x356830=_0x3454f2[_0x4f6151];return _0x356830;},a137_0x4f61(_0x3b2339,_0x38b2e3);}var __decorate=this&&this['__decorate']||function(_0x170138,_0x3119cf,_0x3b3b6a,_0x164033){const _0x24fbb8=a137_0x4f61;var _0x3a8051=arguments[_0x24fbb8(0x187)],_0x152085=_0x3a8051<0x3?_0x3119cf:_0x164033===null?_0x164033=Object[_0x24fbb8(0x16a)](_0x3119cf,_0x3b3b6a):_0x164033,_0x37f3a0;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x24fbb8(0x16d))_0x152085=Reflect['decorate'](_0x170138,_0x3119cf,_0x3b3b6a,_0x164033);else{for(var _0x36c969=_0x170138[_0x24fbb8(0x187)]-0x1;_0x36c969>=0x0;_0x36c969--)if(_0x37f3a0=_0x170138[_0x36c969])_0x152085=(_0x3a8051<0x3?_0x37f3a0(_0x152085):_0x3a8051>0x3?_0x37f3a0(_0x3119cf,_0x3b3b6a,_0x152085):_0x37f3a0(_0x3119cf,_0x3b3b6a))||_0x152085;}return _0x3a8051>0x3&&_0x152085&&Object[_0x24fbb8(0x164)](_0x3119cf,_0x3b3b6a,_0x152085),_0x152085;},__metadata=this&&this[a137_0xa90424(0x183)]||function(_0x50db79,_0x1a235f){const _0x2052d4=a137_0xa90424;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x2052d4(0x16d))return Reflect[_0x2052d4(0x18e)](_0x50db79,_0x1a235f);},__param=this&&this[a137_0xa90424(0x172)]||function(_0xc1d6f,_0x5d93b5){return function(_0x34bbcf,_0x34e769){_0x5d93b5(_0x34bbcf,_0x34e769,_0xc1d6f);};},StreamingController_1;Object[a137_0xa90424(0x164)](exports,a137_0xa90424(0x193),{'value':!![]}),exports[a137_0xa90424(0x19a)]=void 0x0;const common_1=require(a137_0xa90424(0x195)),path_1=require(a137_0xa90424(0x19b)),streaming_service_1=require('./streaming.service'),roles_decorator_1=require(a137_0xa90424(0x171)),role_enum_1=require(a137_0xa90424(0x17d)),jwt_guard_1=require(a137_0xa90424(0x196)),roles_guard_1=require(a137_0xa90424(0x199));let StreamingController=StreamingController_1=class StreamingController{constructor(_0x57453f){const _0x23efd4=a137_0xa90424;this[_0x23efd4(0x177)]=_0x57453f,this[_0x23efd4(0x17b)]=new common_1[(_0x23efd4(0x197))](StreamingController_1[_0x23efd4(0x178)]);}async[a137_0xa90424(0x17e)](_0xcefd29,_0x1ea436){const _0x5e5d99=a137_0xa90424;try{const _0x382bb9=(0x0,path_1[_0x5e5d99(0x16b)])(process[_0x5e5d99(0x184)](),_0xcefd29),_0x48be6b=this[_0x5e5d99(0x177)][_0x5e5d99(0x188)](_0x382bb9);this[_0x5e5d99(0x177)][_0x5e5d99(0x176)](_0x48be6b),_0x1ea436[_0x5e5d99(0x175)]('Success\x20play\x20sound:\x20'+_0x382bb9);}catch(_0xbdfed7){return this[_0x5e5d99(0x17b)][_0x5e5d99(0x189)](_0xbdfed7,_0x5e5d99(0x16c)),'';}}async[a137_0xa90424(0x192)](){const _0x57e09f=a137_0xa90424;try{this['audioService'][_0x57e09f(0x198)]();}catch(_0x52f846){this[_0x57e09f(0x17b)][_0x57e09f(0x189)](_0x52f846);}}async[a137_0xa90424(0x194)](_0x1b6770){const _0x2eea8d=a137_0xa90424;this[_0x2eea8d(0x177)][_0x2eea8d(0x194)]();}};__decorate([(0x0,common_1[a137_0xa90424(0x165)])('/play/'),(0x0,common_1[a137_0xa90424(0x18c)])(jwt_guard_1[a137_0xa90424(0x170)],roles_guard_1[a137_0xa90424(0x179)]),(0x0,roles_decorator_1[a137_0xa90424(0x19f)])(role_enum_1[a137_0xa90424(0x18d)][a137_0xa90424(0x166)],role_enum_1['Role'][a137_0xa90424(0x191)],role_enum_1[a137_0xa90424(0x18d)][a137_0xa90424(0x17c)]),__param(0x0,(0x0,common_1[a137_0xa90424(0x190)])(a137_0xa90424(0x167))),__param(0x1,(0x0,common_1[a137_0xa90424(0x168)])({'passthrough':!![]})),__metadata('design:type',Function),__metadata('design:paramtypes',[String,Object]),__metadata('design:returntype',Promise)],StreamingController['prototype'],a137_0xa90424(0x17e),null),__decorate([(0x0,common_1['Get'])(a137_0xa90424(0x16e)),(0x0,common_1[a137_0xa90424(0x18c)])(jwt_guard_1[a137_0xa90424(0x170)],roles_guard_1[a137_0xa90424(0x179)]),(0x0,roles_decorator_1['Roles'])(role_enum_1[a137_0xa90424(0x18d)][a137_0xa90424(0x166)],role_enum_1[a137_0xa90424(0x18d)]['User'],role_enum_1[a137_0xa90424(0x18d)][a137_0xa90424(0x17c)]),__metadata(a137_0xa90424(0x18f),Function),__metadata('design:paramtypes',[]),__metadata(a137_0xa90424(0x182),Promise)],StreamingController[a137_0xa90424(0x17f)],'startStreaming',null),__decorate([(0x0,common_1[a137_0xa90424(0x1a0)])(a137_0xa90424(0x173)),(0x0,common_1['UseGuards'])(jwt_guard_1[a137_0xa90424(0x170)],roles_guard_1[a137_0xa90424(0x179)]),(0x0,roles_decorator_1['Roles'])(role_enum_1['Role'][a137_0xa90424(0x166)],role_enum_1[a137_0xa90424(0x18d)]['User'],role_enum_1[a137_0xa90424(0x18d)][a137_0xa90424(0x17c)]),__param(0x0,(0x0,common_1['Res'])({'passthrough':!![]})),__metadata(a137_0xa90424(0x18f),Function),__metadata(a137_0xa90424(0x18b),[Object]),__metadata(a137_0xa90424(0x182),Promise)],StreamingController[a137_0xa90424(0x17f)],a137_0xa90424(0x194),null),StreamingController=StreamingController_1=__decorate([(0x0,common_1[a137_0xa90424(0x19e)])(a137_0xa90424(0x17a)),__metadata(a137_0xa90424(0x18b),[streaming_service_1[a137_0xa90424(0x185)]])],StreamingController),exports[a137_0xa90424(0x19a)]=StreamingController;