'use strict';const a137_0x16177b=a137_0x38b9;(function(_0x3e340d,_0x48a797){const _0x3673c9=a137_0x38b9,_0x4ad2ab=_0x3e340d();while(!![]){try{const _0x267fb6=parseInt(_0x3673c9(0x83))/0x1*(-parseInt(_0x3673c9(0x72))/0x2)+parseInt(_0x3673c9(0x94))/0x3+parseInt(_0x3673c9(0x7a))/0x4+-parseInt(_0x3673c9(0x70))/0x5*(parseInt(_0x3673c9(0x95))/0x6)+parseInt(_0x3673c9(0x9a))/0x7+parseInt(_0x3673c9(0x6a))/0x8+parseInt(_0x3673c9(0x82))/0x9*(-parseInt(_0x3673c9(0x92))/0xa);if(_0x267fb6===_0x48a797)break;else _0x4ad2ab['push'](_0x4ad2ab['shift']());}catch(_0x43c5b0){_0x4ad2ab['push'](_0x4ad2ab['shift']());}}}(a137_0x3512,0x4d766));function a137_0x38b9(_0x4fa3fa,_0x3ae0ef){const _0x351251=a137_0x3512();return a137_0x38b9=function(_0x38b9c0,_0x49b18f){_0x38b9c0=_0x38b9c0-0x65;let _0x54c3b9=_0x351251[_0x38b9c0];return _0x54c3b9;},a137_0x38b9(_0x4fa3fa,_0x3ae0ef);}var __decorate=this&&this[a137_0x16177b(0x80)]||function(_0x13e6c8,_0xb4d10,_0x17fe70,_0x3a7205){const _0x59e12a=a137_0x16177b;var _0x44ea11=arguments[_0x59e12a(0x7d)],_0x37d044=_0x44ea11<0x3?_0xb4d10:_0x3a7205===null?_0x3a7205=Object[_0x59e12a(0x7c)](_0xb4d10,_0x17fe70):_0x3a7205,_0x35251b;if(typeof Reflect===_0x59e12a(0x8d)&&typeof Reflect[_0x59e12a(0x86)]===_0x59e12a(0x8b))_0x37d044=Reflect[_0x59e12a(0x86)](_0x13e6c8,_0xb4d10,_0x17fe70,_0x3a7205);else{for(var _0x10bd10=_0x13e6c8[_0x59e12a(0x7d)]-0x1;_0x10bd10>=0x0;_0x10bd10--)if(_0x35251b=_0x13e6c8[_0x10bd10])_0x37d044=(_0x44ea11<0x3?_0x35251b(_0x37d044):_0x44ea11>0x3?_0x35251b(_0xb4d10,_0x17fe70,_0x37d044):_0x35251b(_0xb4d10,_0x17fe70))||_0x37d044;}return _0x44ea11>0x3&&_0x37d044&&Object[_0x59e12a(0x75)](_0xb4d10,_0x17fe70,_0x37d044),_0x37d044;},__metadata=this&&this[a137_0x16177b(0x9d)]||function(_0x5d36f7,_0x32f28f){const _0x1a6e86=a137_0x16177b;if(typeof Reflect==='object'&&typeof Reflect[_0x1a6e86(0x8e)]==='function')return Reflect[_0x1a6e86(0x8e)](_0x5d36f7,_0x32f28f);},__param=this&&this[a137_0x16177b(0x66)]||function(_0x4ef8c2,_0x232232){return function(_0x4c64a6,_0x42684a){_0x232232(_0x4c64a6,_0x42684a,_0x4ef8c2);};},StreamingController_1;Object[a137_0x16177b(0x75)](exports,a137_0x16177b(0x8a),{'value':!![]}),exports[a137_0x16177b(0x73)]=void 0x0;function a137_0x3512(){const _0xddf77a=['defineProperty','playStreamAudio','send','startStreaming','name','299364pcQfVf','log','getOwnPropertyDescriptor','length','User','cwd','__decorate','logger','26244DcEHLu','89603lKcjkK','path','design:returntype','decorate','Controller','@nestjs/common','RolesGuard','__esModule','function','playAudioFile','object','metadata','../auth/decorators/roles.decorator','Logger','Res','10keaGNg','Admin','735825zoRzTs','141402QDmBfu','./streaming.service','Viewer','Post','../auth/guards/roles.guard','2536513MjipGg','audio','design:paramtypes','__metadata','Role','design:type','/play/','__param','stopStreamAudio','../auth/enums/role.enum','/stop','3551296YpSJzj','prototype','audioService','UseGuards','Roles','join','95jfDcqu','JwtAuthGuard','8OIkRuj','StreamingController','stream/start'];a137_0x3512=function(){return _0xddf77a;};return a137_0x3512();}const common_1=require(a137_0x16177b(0x88)),path_1=require(a137_0x16177b(0x84)),streaming_service_1=require(a137_0x16177b(0x96)),roles_decorator_1=require(a137_0x16177b(0x8f)),role_enum_1=require(a137_0x16177b(0x68)),jwt_guard_1=require('../auth/guards/jwt.guard'),roles_guard_1=require(a137_0x16177b(0x99));let StreamingController=StreamingController_1=class StreamingController{constructor(_0x5abb4c){const _0x16369e=a137_0x16177b;this[_0x16369e(0x6c)]=_0x5abb4c,this[_0x16369e(0x81)]=new common_1[(_0x16369e(0x90))](StreamingController_1[_0x16369e(0x79)]);}async['playAudioFile'](_0x36dee4,_0x42aacf){const _0x3f6bb9=a137_0x16177b;try{const _0x1add6c=(0x0,path_1[_0x3f6bb9(0x6f)])(process[_0x3f6bb9(0x7f)](),_0x36dee4),_0x2a99b1=this[_0x3f6bb9(0x6c)]['createStreamFromFile'](_0x1add6c);this['audioService'][_0x3f6bb9(0x76)](_0x2a99b1),_0x42aacf[_0x3f6bb9(0x77)]('Success\x20play\x20sound:\x20'+_0x1add6c);}catch(_0x59a3a8){return this[_0x3f6bb9(0x81)][_0x3f6bb9(0x7b)](_0x59a3a8,'error'),'';}}async['startStreaming'](){const _0x27d7e3=a137_0x16177b;try{this[_0x27d7e3(0x6c)]['openServerUIStream']();}catch(_0x36a43f){this[_0x27d7e3(0x81)][_0x27d7e3(0x7b)](_0x36a43f);}}async['stopStreamAudio'](_0x248514){const _0x617f8d=a137_0x16177b;this[_0x617f8d(0x6c)][_0x617f8d(0x67)]();}};__decorate([(0x0,common_1[a137_0x16177b(0x98)])(a137_0x16177b(0x65)),(0x0,common_1[a137_0x16177b(0x6d)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a137_0x16177b(0x89)]),(0x0,roles_decorator_1[a137_0x16177b(0x6e)])(role_enum_1['Role']['Admin'],role_enum_1[a137_0x16177b(0x9e)][a137_0x16177b(0x7e)],role_enum_1[a137_0x16177b(0x9e)]['Viewer']),__param(0x0,(0x0,common_1['Query'])('filePath')),__param(0x1,(0x0,common_1[a137_0x16177b(0x91)])({'passthrough':!![]})),__metadata('design:type',Function),__metadata(a137_0x16177b(0x9c),[String,Object]),__metadata('design:returntype',Promise)],StreamingController['prototype'],a137_0x16177b(0x8c),null),__decorate([(0x0,common_1['Get'])(a137_0x16177b(0x74)),(0x0,common_1['UseGuards'])(jwt_guard_1[a137_0x16177b(0x71)],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1[a137_0x16177b(0x6e)])(role_enum_1[a137_0x16177b(0x9e)]['Admin'],role_enum_1['Role']['User'],role_enum_1[a137_0x16177b(0x9e)][a137_0x16177b(0x97)]),__metadata(a137_0x16177b(0x9f),Function),__metadata(a137_0x16177b(0x9c),[]),__metadata(a137_0x16177b(0x85),Promise)],StreamingController[a137_0x16177b(0x6b)],a137_0x16177b(0x78),null),__decorate([(0x0,common_1['Get'])(a137_0x16177b(0x69)),(0x0,common_1['UseGuards'])(jwt_guard_1['JwtAuthGuard'],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1[a137_0x16177b(0x6e)])(role_enum_1[a137_0x16177b(0x9e)][a137_0x16177b(0x93)],role_enum_1[a137_0x16177b(0x9e)][a137_0x16177b(0x7e)],role_enum_1['Role'][a137_0x16177b(0x97)]),__param(0x0,(0x0,common_1[a137_0x16177b(0x91)])({'passthrough':!![]})),__metadata(a137_0x16177b(0x9f),Function),__metadata(a137_0x16177b(0x9c),[Object]),__metadata('design:returntype',Promise)],StreamingController[a137_0x16177b(0x6b)],'stopStreamAudio',null),StreamingController=StreamingController_1=__decorate([(0x0,common_1[a137_0x16177b(0x87)])(a137_0x16177b(0x9b)),__metadata('design:paramtypes',[streaming_service_1['StreamingService']])],StreamingController),exports[a137_0x16177b(0x73)]=StreamingController;