'use strict';const a137_0x2af582=a137_0x547a;(function(_0x3a90d8,_0x3bd2de){const _0x4eb254=a137_0x547a,_0x583d4c=_0x3a90d8();while(!![]){try{const _0x45afe1=parseInt(_0x4eb254(0xf7))/0x1+parseInt(_0x4eb254(0x112))/0x2+parseInt(_0x4eb254(0x108))/0x3+parseInt(_0x4eb254(0x101))/0x4*(-parseInt(_0x4eb254(0xf9))/0x5)+-parseInt(_0x4eb254(0xfa))/0x6+parseInt(_0x4eb254(0x11b))/0x7+parseInt(_0x4eb254(0xf2))/0x8;if(_0x45afe1===_0x3bd2de)break;else _0x583d4c['push'](_0x583d4c['shift']());}catch(_0x48a057){_0x583d4c['push'](_0x583d4c['shift']());}}}(a137_0x237a,0xb40c8));var __decorate=this&&this[a137_0x2af582(0x106)]||function(_0x37efb1,_0x3fb761,_0x37d5fa,_0x4d3261){const _0x1bb86a=a137_0x2af582;var _0x480863=arguments[_0x1bb86a(0x118)],_0x510c96=_0x480863<0x3?_0x3fb761:_0x4d3261===null?_0x4d3261=Object['getOwnPropertyDescriptor'](_0x3fb761,_0x37d5fa):_0x4d3261,_0x4ed7af;if(typeof Reflect===_0x1bb86a(0x11d)&&typeof Reflect[_0x1bb86a(0x113)]===_0x1bb86a(0xf4))_0x510c96=Reflect[_0x1bb86a(0x113)](_0x37efb1,_0x3fb761,_0x37d5fa,_0x4d3261);else{for(var _0x1e2734=_0x37efb1['length']-0x1;_0x1e2734>=0x0;_0x1e2734--)if(_0x4ed7af=_0x37efb1[_0x1e2734])_0x510c96=(_0x480863<0x3?_0x4ed7af(_0x510c96):_0x480863>0x3?_0x4ed7af(_0x3fb761,_0x37d5fa,_0x510c96):_0x4ed7af(_0x3fb761,_0x37d5fa))||_0x510c96;}return _0x480863>0x3&&_0x510c96&&Object[_0x1bb86a(0x11e)](_0x3fb761,_0x37d5fa,_0x510c96),_0x510c96;},__metadata=this&&this[a137_0x2af582(0x10d)]||function(_0x283344,_0x34da79){const _0x152f59=a137_0x2af582;if(typeof Reflect===_0x152f59(0x11d)&&typeof Reflect[_0x152f59(0x10f)]===_0x152f59(0xf4))return Reflect['metadata'](_0x283344,_0x34da79);},__param=this&&this['__param']||function(_0xc1c3f5,_0x1e04a5){return function(_0x360459,_0x12ccb0){_0x1e04a5(_0x360459,_0x12ccb0,_0xc1c3f5);};},StreamingController_1;Object[a137_0x2af582(0x11e)](exports,a137_0x2af582(0x107),{'value':!![]}),exports['StreamingController']=void 0x0;function a137_0x547a(_0x26c55b,_0x2e16bf){const _0x237aa0=a137_0x237a();return a137_0x547a=function(_0x547aec,_0x3cc3f2){_0x547aec=_0x547aec-0xf2;let _0x305f1f=_0x237aa0[_0x547aec];return _0x305f1f;},a137_0x547a(_0x26c55b,_0x2e16bf);}const common_1=require('@nestjs/common'),path_1=require(a137_0x2af582(0x121)),streaming_service_1=require(a137_0x2af582(0x11c)),roles_decorator_1=require(a137_0x2af582(0xfb)),role_enum_1=require('../auth/enums/role.enum'),jwt_guard_1=require('../auth/guards/jwt.guard'),roles_guard_1=require(a137_0x2af582(0x109));let StreamingController=StreamingController_1=class StreamingController{constructor(_0x28860d){const _0x3d7b51=a137_0x2af582;this[_0x3d7b51(0x10a)]=_0x28860d,this[_0x3d7b51(0x10b)]=new common_1[(_0x3d7b51(0x124))](StreamingController_1['name']);}async[a137_0x2af582(0xfe)](_0x513c75,_0xafbcfd){const _0x3e92e4=a137_0x2af582;try{const _0x3561a0=(0x0,path_1[_0x3e92e4(0x11a)])(process['cwd'](),_0x513c75),_0x4f925b=this[_0x3e92e4(0x10a)][_0x3e92e4(0x122)](_0x3561a0);this['audioService'][_0x3e92e4(0x10c)](_0x4f925b),_0xafbcfd[_0x3e92e4(0xfc)](_0x3e92e4(0x102)+_0x3561a0);}catch(_0x10cd79){return this[_0x3e92e4(0x10b)][_0x3e92e4(0x103)](_0x10cd79,_0x3e92e4(0x10e)),'';}}async['startStreaming'](){const _0xf4ac58=a137_0x2af582;try{this['audioService'][_0xf4ac58(0x111)]();}catch(_0x280f5f){this[_0xf4ac58(0x10b)][_0xf4ac58(0x103)](_0x280f5f);}}async[a137_0x2af582(0xf3)](_0x33d595){const _0x22b243=a137_0x2af582;this[_0x22b243(0x10a)][_0x22b243(0xf3)]();}};__decorate([(0x0,common_1[a137_0x2af582(0x11f)])('/play/'),(0x0,common_1[a137_0x2af582(0xf5)])(jwt_guard_1[a137_0x2af582(0x114)],roles_guard_1[a137_0x2af582(0xfd)]),(0x0,roles_decorator_1[a137_0x2af582(0x126)])(role_enum_1['Role'][a137_0x2af582(0x110)],role_enum_1[a137_0x2af582(0x100)]['User'],role_enum_1[a137_0x2af582(0x100)][a137_0x2af582(0x119)]),__param(0x0,(0x0,common_1[a137_0x2af582(0xf8)])(a137_0x2af582(0x105))),__param(0x1,(0x0,common_1[a137_0x2af582(0x117)])({'passthrough':!![]})),__metadata(a137_0x2af582(0xf6),Function),__metadata('design:paramtypes',[String,Object]),__metadata('design:returntype',Promise)],StreamingController[a137_0x2af582(0x104)],a137_0x2af582(0xfe),null),__decorate([(0x0,common_1[a137_0x2af582(0x120)])('stream/start'),(0x0,common_1['UseGuards'])(jwt_guard_1[a137_0x2af582(0x114)],roles_guard_1[a137_0x2af582(0xfd)]),(0x0,roles_decorator_1[a137_0x2af582(0x126)])(role_enum_1['Role'][a137_0x2af582(0x110)],role_enum_1[a137_0x2af582(0x100)]['User'],role_enum_1[a137_0x2af582(0x100)]['Viewer']),__metadata(a137_0x2af582(0xf6),Function),__metadata(a137_0x2af582(0x116),[]),__metadata('design:returntype',Promise)],StreamingController[a137_0x2af582(0x104)],'startStreaming',null),__decorate([(0x0,common_1['Get'])('/stop'),(0x0,common_1[a137_0x2af582(0xf5)])(jwt_guard_1[a137_0x2af582(0x114)],roles_guard_1[a137_0x2af582(0xfd)]),(0x0,roles_decorator_1[a137_0x2af582(0x126)])(role_enum_1[a137_0x2af582(0x100)][a137_0x2af582(0x110)],role_enum_1[a137_0x2af582(0x100)][a137_0x2af582(0x115)],role_enum_1[a137_0x2af582(0x100)][a137_0x2af582(0x119)]),__param(0x0,(0x0,common_1['Res'])({'passthrough':!![]})),__metadata(a137_0x2af582(0xf6),Function),__metadata(a137_0x2af582(0x116),[Object]),__metadata(a137_0x2af582(0x123),Promise)],StreamingController[a137_0x2af582(0x104)],a137_0x2af582(0xf3),null),StreamingController=StreamingController_1=__decorate([(0x0,common_1[a137_0x2af582(0x125)])('audio'),__metadata(a137_0x2af582(0x116),[streaming_service_1['StreamingService']])],StreamingController),exports[a137_0x2af582(0xff)]=StreamingController;function a137_0x237a(){const _0x30d101=['Logger','Controller','Roles','4770192BlmqKO','stopStreamAudio','function','UseGuards','design:type','419044GjEDRH','Query','6321520peDCHp','1642140glHHnu','../auth/decorators/roles.decorator','send','RolesGuard','playAudioFile','StreamingController','Role','4eHxuIP','Success\x20play\x20sound:\x20','log','prototype','filePath','__decorate','__esModule','876342oqJiZI','../auth/guards/roles.guard','audioService','logger','playStreamAudio','__metadata','error','metadata','Admin','openServerUIStream','1158644ZnaNxG','decorate','JwtAuthGuard','User','design:paramtypes','Res','length','Viewer','join','2721040EuMlNt','./streaming.service','object','defineProperty','Post','Get','path','createStreamFromFile','design:returntype'];a137_0x237a=function(){return _0x30d101;};return a137_0x237a();}