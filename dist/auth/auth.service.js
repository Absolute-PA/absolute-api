'use strict';const a35_0x47046b=a35_0x4034;(function(_0x17b5f3,_0x4e33ac){const _0x4df2c0=a35_0x4034,_0xf67821=_0x17b5f3();while(!![]){try{const _0x274056=parseInt(_0x4df2c0(0x1b9))/0x1+parseInt(_0x4df2c0(0x1d6))/0x2*(-parseInt(_0x4df2c0(0x1c6))/0x3)+-parseInt(_0x4df2c0(0x1d3))/0x4*(parseInt(_0x4df2c0(0x1d7))/0x5)+-parseInt(_0x4df2c0(0x1c4))/0x6+-parseInt(_0x4df2c0(0x1bb))/0x7+parseInt(_0x4df2c0(0x1bf))/0x8*(parseInt(_0x4df2c0(0x1ba))/0x9)+-parseInt(_0x4df2c0(0x1bd))/0xa*(-parseInt(_0x4df2c0(0x1c8))/0xb);if(_0x274056===_0x4e33ac)break;else _0xf67821['push'](_0xf67821['shift']());}catch(_0x3a287b){_0xf67821['push'](_0xf67821['shift']());}}}(a35_0x57dc,0x9f03f));var __decorate=this&&this[a35_0x47046b(0x1db)]||function(_0xef9fb7,_0x182a41,_0x1840aa,_0x2d6f0f){const _0x5924da=a35_0x47046b;var _0x41f2e2=arguments[_0x5924da(0x1d4)],_0x3d99c9=_0x41f2e2<0x3?_0x182a41:_0x2d6f0f===null?_0x2d6f0f=Object[_0x5924da(0x1dc)](_0x182a41,_0x1840aa):_0x2d6f0f,_0x51c3d8;if(typeof Reflect===_0x5924da(0x1d9)&&typeof Reflect[_0x5924da(0x1bc)]===_0x5924da(0x1da))_0x3d99c9=Reflect[_0x5924da(0x1bc)](_0xef9fb7,_0x182a41,_0x1840aa,_0x2d6f0f);else{for(var _0x1449b8=_0xef9fb7[_0x5924da(0x1d4)]-0x1;_0x1449b8>=0x0;_0x1449b8--)if(_0x51c3d8=_0xef9fb7[_0x1449b8])_0x3d99c9=(_0x41f2e2<0x3?_0x51c3d8(_0x3d99c9):_0x41f2e2>0x3?_0x51c3d8(_0x182a41,_0x1840aa,_0x3d99c9):_0x51c3d8(_0x182a41,_0x1840aa))||_0x3d99c9;}return _0x41f2e2>0x3&&_0x3d99c9&&Object['defineProperty'](_0x182a41,_0x1840aa,_0x3d99c9),_0x3d99c9;},__metadata=this&&this[a35_0x47046b(0x1dd)]||function(_0xc3cd7b,_0x5aebe6){const _0x22ecbf=a35_0x47046b;if(typeof Reflect==='object'&&typeof Reflect[_0x22ecbf(0x1c1)]===_0x22ecbf(0x1da))return Reflect['metadata'](_0xc3cd7b,_0x5aebe6);};Object['defineProperty'](exports,a35_0x47046b(0x1de),{'value':!![]}),exports[a35_0x47046b(0x1d5)]=void 0x0;function a35_0x4034(_0x52b956,_0x1a23d5){const _0x57dc2d=a35_0x57dc();return a35_0x4034=function(_0x4034dc,_0x2fb0d3){_0x4034dc=_0x4034dc-0x1b9;let _0x5b1e55=_0x57dc2d[_0x4034dc];return _0x5b1e55;},a35_0x4034(_0x52b956,_0x1a23d5);}const common_1=require(a35_0x47046b(0x1df)),user_service_1=require('../user/user.service'),jwt_1=require('@nestjs/jwt'),verify_1=require('./verify');let AuthService=class AuthService{constructor(_0xeee607,_0x48933f){const _0x583d0b=a35_0x47046b;this[_0x583d0b(0x1d2)]=_0xeee607,this[_0x583d0b(0x1c5)]=_0x48933f;}async[a35_0x47046b(0x1ce)](_0x1be346,_0x522a55){const _0x415e73=a35_0x47046b,_0x359a6b=await this[_0x415e73(0x1d2)][_0x415e73(0x1c7)](_0x1be346);if(!_0x359a6b)return null;console[_0x415e73(0x1d1)](_0x359a6b[_0x415e73(0x1e0)],_0x522a55,'user.password,\x20password');const _0x181214=await(0x0,verify_1['verify'])(_0x522a55,_0x359a6b['password']);if(_0x359a6b&&_0x181214)return _0x359a6b;return null;}async['updatePassword'](_0x3a9304,{newPassword:_0x5be5a1}){const _0x2af522=a35_0x47046b,_0x27ffca=await(0x0,verify_1[_0x2af522(0x1c2)])(_0x5be5a1);return await this[_0x2af522(0x1d2)][_0x2af522(0x1c3)](_0x3a9304[_0x2af522(0x1d0)],Object[_0x2af522(0x1c9)](Object[_0x2af522(0x1c9)]({},_0x3a9304),{'password':_0x27ffca}));}async['login'](_0x2ce5dc){const _0x124c95=a35_0x47046b,_0x45fb73={'username':_0x2ce5dc[_0x124c95(0x1ca)],'sub':_0x2ce5dc[_0x124c95(0x1cc)],'roles':_0x2ce5dc[_0x124c95(0x1cb)],'email':_0x2ce5dc[_0x124c95(0x1d8)]};return{'access_token':this[_0x124c95(0x1c5)][_0x124c95(0x1cf)](_0x45fb73)};}};function a35_0x57dc(){const _0x1d3622=['__metadata','__esModule','@nestjs/common','password','648897lAzrEP','11556BnfGMe','6453818HFoYar','decorate','312350ykscmD','Injectable','1720CiIAtG','JwtService','metadata','hash','updateUser','630630UnqFpI','jwtService','1106739XcvrVq','findUser','451XlZqLL','assign','username','roles','_id','UserService','validateUser','sign','sub','log','userService','3884qkvNAZ','length','AuthService','2ntvCZb','815huhBIC','email','object','function','__decorate','getOwnPropertyDescriptor'];a35_0x57dc=function(){return _0x1d3622;};return a35_0x57dc();}AuthService=__decorate([(0x0,common_1[a35_0x47046b(0x1be)])(),__metadata('design:paramtypes',[user_service_1[a35_0x47046b(0x1cd)],jwt_1[a35_0x47046b(0x1c0)]])],AuthService),exports[a35_0x47046b(0x1d5)]=AuthService;