'use strict';const a35_0x344bde=a35_0x1c08;function a35_0x462a(){const _0x329db8=['852276pBwFiI','function','password','__decorate','username','__esModule','UserService','verify','184824IufhbA','85702OLJUHN','findUser','Injectable','object','defineProperty','assign','login','roles','design:paramtypes','jwtService','@nestjs/jwt','79150cznJQe','getOwnPropertyDescriptor','updateUser','1621160NWasMp','685602HLblRr','21ERmZNe','AuthService','metadata','length','validateUser','8luHkOS','user.password,\x20password','userService','171dLEGiS','1314768fGqcBA','sub','decorate','__metadata','_id'];a35_0x462a=function(){return _0x329db8;};return a35_0x462a();}function a35_0x1c08(_0x3c1b85,_0x942afa){const _0x462a17=a35_0x462a();return a35_0x1c08=function(_0x1c087e,_0x4967ac){_0x1c087e=_0x1c087e-0xb0;let _0x4bda88=_0x462a17[_0x1c087e];return _0x4bda88;},a35_0x1c08(_0x3c1b85,_0x942afa);}(function(_0x388ffc,_0x284f6c){const _0x52829b=a35_0x1c08,_0x4811cd=_0x388ffc();while(!![]){try{const _0x3b5e17=-parseInt(_0x52829b(0xca))/0x1*(-parseInt(_0x52829b(0xb5))/0x2)+-parseInt(_0x52829b(0xc4))/0x3+parseInt(_0x52829b(0xce))/0x4+-parseInt(_0x52829b(0xc3))/0x5+-parseInt(_0x52829b(0xd3))/0x6+parseInt(_0x52829b(0xc5))/0x7*(parseInt(_0x52829b(0xb4))/0x8)+parseInt(_0x52829b(0xcd))/0x9*(parseInt(_0x52829b(0xc0))/0xa);if(_0x3b5e17===_0x284f6c)break;else _0x4811cd['push'](_0x4811cd['shift']());}catch(_0xca44e2){_0x4811cd['push'](_0x4811cd['shift']());}}}(a35_0x462a,0x2ff1e));var __decorate=this&&this[a35_0x344bde(0xd6)]||function(_0x4b7f67,_0x353dc9,_0x5f5b3a,_0x5aaf56){const _0x4a8cbc=a35_0x344bde;var _0x3b0402=arguments[_0x4a8cbc(0xc8)],_0x11ced6=_0x3b0402<0x3?_0x353dc9:_0x5aaf56===null?_0x5aaf56=Object[_0x4a8cbc(0xc1)](_0x353dc9,_0x5f5b3a):_0x5aaf56,_0x3e0c12;if(typeof Reflect===_0x4a8cbc(0xb8)&&typeof Reflect[_0x4a8cbc(0xd0)]===_0x4a8cbc(0xd4))_0x11ced6=Reflect[_0x4a8cbc(0xd0)](_0x4b7f67,_0x353dc9,_0x5f5b3a,_0x5aaf56);else{for(var _0x532604=_0x4b7f67[_0x4a8cbc(0xc8)]-0x1;_0x532604>=0x0;_0x532604--)if(_0x3e0c12=_0x4b7f67[_0x532604])_0x11ced6=(_0x3b0402<0x3?_0x3e0c12(_0x11ced6):_0x3b0402>0x3?_0x3e0c12(_0x353dc9,_0x5f5b3a,_0x11ced6):_0x3e0c12(_0x353dc9,_0x5f5b3a))||_0x11ced6;}return _0x3b0402>0x3&&_0x11ced6&&Object[_0x4a8cbc(0xb9)](_0x353dc9,_0x5f5b3a,_0x11ced6),_0x11ced6;},__metadata=this&&this[a35_0x344bde(0xd1)]||function(_0x3ceab2,_0x59bc69){const _0x14e01b=a35_0x344bde;if(typeof Reflect===_0x14e01b(0xb8)&&typeof Reflect[_0x14e01b(0xc7)]==='function')return Reflect[_0x14e01b(0xc7)](_0x3ceab2,_0x59bc69);};Object[a35_0x344bde(0xb9)](exports,a35_0x344bde(0xb1),{'value':!![]}),exports['AuthService']=void 0x0;const common_1=require('@nestjs/common'),user_service_1=require('../user/user.service'),jwt_1=require(a35_0x344bde(0xbf)),verify_1=require('./verify');let AuthService=class AuthService{constructor(_0x18e525,_0x378af0){const _0x35268b=a35_0x344bde;this[_0x35268b(0xcc)]=_0x18e525,this[_0x35268b(0xbe)]=_0x378af0;}async[a35_0x344bde(0xc9)](_0x3da950,_0x44ca4a){const _0x5847b4=a35_0x344bde,_0x4ce166=await this[_0x5847b4(0xcc)][_0x5847b4(0xb6)](_0x3da950);if(!_0x4ce166)return null;console['log'](_0x4ce166[_0x5847b4(0xd5)],_0x44ca4a,_0x5847b4(0xcb));const _0x39e6a3=await(0x0,verify_1[_0x5847b4(0xb3)])(_0x44ca4a,_0x4ce166[_0x5847b4(0xd5)]);if(_0x4ce166&&_0x39e6a3)return _0x4ce166;return null;}async['updatePassword'](_0x712291,{newPassword:_0x3abe36}){const _0x351cb8=a35_0x344bde,_0x625405=await(0x0,verify_1['hash'])(_0x3abe36);return await this[_0x351cb8(0xcc)][_0x351cb8(0xc2)](_0x712291[_0x351cb8(0xcf)],Object[_0x351cb8(0xba)](Object[_0x351cb8(0xba)]({},_0x712291),{'password':_0x625405}));}async[a35_0x344bde(0xbb)](_0x1a8b4c){const _0x2fde5a=a35_0x344bde,_0x38c22b={'username':_0x1a8b4c[_0x2fde5a(0xb0)],'sub':_0x1a8b4c[_0x2fde5a(0xd2)],'roles':_0x1a8b4c[_0x2fde5a(0xbc)],'email':_0x1a8b4c['email']};return{'access_token':this[_0x2fde5a(0xbe)]['sign'](_0x38c22b)};}};AuthService=__decorate([(0x0,common_1[a35_0x344bde(0xb7)])(),__metadata(a35_0x344bde(0xbd),[user_service_1[a35_0x344bde(0xb2)],jwt_1['JwtService']])],AuthService),exports[a35_0x344bde(0xc6)]=AuthService;