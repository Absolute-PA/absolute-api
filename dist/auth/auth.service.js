'use strict';function a35_0x3c5c(_0x595e2f,_0x44c33d){const _0x353e67=a35_0x353e();return a35_0x3c5c=function(_0x3c5c08,_0x5a50aa){_0x3c5c08=_0x3c5c08-0xca;let _0x74d1cb=_0x353e67[_0x3c5c08];return _0x74d1cb;},a35_0x3c5c(_0x595e2f,_0x44c33d);}const a35_0x5f5cb9=a35_0x3c5c;(function(_0x471641,_0x16b0d4){const _0x15d14c=a35_0x3c5c,_0x4bb991=_0x471641();while(!![]){try{const _0x16c806=parseInt(_0x15d14c(0xec))/0x1+parseInt(_0x15d14c(0xd7))/0x2+parseInt(_0x15d14c(0xdd))/0x3*(parseInt(_0x15d14c(0xcd))/0x4)+parseInt(_0x15d14c(0xd2))/0x5*(parseInt(_0x15d14c(0xe5))/0x6)+-parseInt(_0x15d14c(0xdf))/0x7*(-parseInt(_0x15d14c(0xed))/0x8)+parseInt(_0x15d14c(0xdb))/0x9*(-parseInt(_0x15d14c(0xe2))/0xa)+-parseInt(_0x15d14c(0xf0))/0xb*(parseInt(_0x15d14c(0xf2))/0xc);if(_0x16c806===_0x16b0d4)break;else _0x4bb991['push'](_0x4bb991['shift']());}catch(_0x21bc89){_0x4bb991['push'](_0x4bb991['shift']());}}}(a35_0x353e,0x76736));var __decorate=this&&this[a35_0x5f5cb9(0xd6)]||function(_0x40eb9d,_0x4b5179,_0x8fe331,_0x3303a3){const _0x5dbdf4=a35_0x5f5cb9;var _0x711397=arguments[_0x5dbdf4(0xf1)],_0x52fe59=_0x711397<0x3?_0x4b5179:_0x3303a3===null?_0x3303a3=Object[_0x5dbdf4(0xcf)](_0x4b5179,_0x8fe331):_0x3303a3,_0x92b27b;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x5dbdf4(0xcc))_0x52fe59=Reflect['decorate'](_0x40eb9d,_0x4b5179,_0x8fe331,_0x3303a3);else{for(var _0x11e4d2=_0x40eb9d[_0x5dbdf4(0xf1)]-0x1;_0x11e4d2>=0x0;_0x11e4d2--)if(_0x92b27b=_0x40eb9d[_0x11e4d2])_0x52fe59=(_0x711397<0x3?_0x92b27b(_0x52fe59):_0x711397>0x3?_0x92b27b(_0x4b5179,_0x8fe331,_0x52fe59):_0x92b27b(_0x4b5179,_0x8fe331))||_0x52fe59;}return _0x711397>0x3&&_0x52fe59&&Object[_0x5dbdf4(0xee)](_0x4b5179,_0x8fe331,_0x52fe59),_0x52fe59;},__metadata=this&&this[a35_0x5f5cb9(0xeb)]||function(_0x5e55a2,_0x1798a8){const _0x2e320e=a35_0x5f5cb9;if(typeof Reflect===_0x2e320e(0xe0)&&typeof Reflect[_0x2e320e(0xe6)]===_0x2e320e(0xcc))return Reflect['metadata'](_0x5e55a2,_0x1798a8);};function a35_0x353e(){const _0x921341=['jwtService','function','8CKmFCC','userService','getOwnPropertyDescriptor','updatePassword','assign','35CMIdjj','sign','@nestjs/common','sub','__decorate','814222qXrQag','@nestjs/jwt','Injectable','../user/user.service','3469563JBSMNv','email','1309251YiGvNm','AuthService','1981KYrREr','object','./verify','10aSbUSA','password','roles','278502Exvrsn','metadata','design:paramtypes','_id','user.password,\x20password','verify','__metadata','803525ZKnUnA','4344wXPCgC','defineProperty','log','11TqKSBH','length','20296524IZklbB','username','hash'];a35_0x353e=function(){return _0x921341;};return a35_0x353e();}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a35_0x5f5cb9(0xde)]=void 0x0;const common_1=require(a35_0x5f5cb9(0xd4)),user_service_1=require(a35_0x5f5cb9(0xda)),jwt_1=require(a35_0x5f5cb9(0xd8)),verify_1=require(a35_0x5f5cb9(0xe1));let AuthService=class AuthService{constructor(_0x34c271,_0xcdbe95){const _0x46a838=a35_0x5f5cb9;this[_0x46a838(0xce)]=_0x34c271,this[_0x46a838(0xcb)]=_0xcdbe95;}async['validateUser'](_0x285451,_0x4b87f3){const _0x11ff37=a35_0x5f5cb9,_0x1c7c2a=await this['userService']['findUser'](_0x285451);if(!_0x1c7c2a)return null;console[_0x11ff37(0xef)](_0x1c7c2a[_0x11ff37(0xe3)],_0x4b87f3,_0x11ff37(0xe9));const _0x3b4b1f=await(0x0,verify_1[_0x11ff37(0xea)])(_0x4b87f3,_0x1c7c2a[_0x11ff37(0xe3)]);if(_0x1c7c2a&&_0x3b4b1f)return _0x1c7c2a;return null;}async[a35_0x5f5cb9(0xd0)](_0x55efe7,{newPassword:_0x292819}){const _0x1e6465=a35_0x5f5cb9,_0x20e531=await(0x0,verify_1[_0x1e6465(0xca)])(_0x292819);return await this[_0x1e6465(0xce)]['updateUser'](_0x55efe7[_0x1e6465(0xd5)],Object[_0x1e6465(0xd1)](Object[_0x1e6465(0xd1)]({},_0x55efe7),{'password':_0x20e531}));}async['login'](_0x178cf7){const _0x155d6c=a35_0x5f5cb9,_0x5baa9f={'username':_0x178cf7[_0x155d6c(0xf3)],'sub':_0x178cf7[_0x155d6c(0xe8)],'roles':_0x178cf7[_0x155d6c(0xe4)],'email':_0x178cf7[_0x155d6c(0xdc)]};return{'access_token':this['jwtService'][_0x155d6c(0xd3)](_0x5baa9f)};}};AuthService=__decorate([(0x0,common_1[a35_0x5f5cb9(0xd9)])(),__metadata(a35_0x5f5cb9(0xe7),[user_service_1['UserService'],jwt_1['JwtService']])],AuthService),exports[a35_0x5f5cb9(0xde)]=AuthService;