'use strict';const a35_0xbc8668=a35_0x527c;(function(_0x5936ff,_0x1878a4){const _0xdf5f97=a35_0x527c,_0x4cc66b=_0x5936ff();while(!![]){try{const _0x3396d9=-parseInt(_0xdf5f97(0xb1))/0x1*(parseInt(_0xdf5f97(0xba))/0x2)+parseInt(_0xdf5f97(0xb9))/0x3*(parseInt(_0xdf5f97(0xac))/0x4)+-parseInt(_0xdf5f97(0xb7))/0x5*(-parseInt(_0xdf5f97(0xbb))/0x6)+-parseInt(_0xdf5f97(0xc3))/0x7+-parseInt(_0xdf5f97(0xce))/0x8+-parseInt(_0xdf5f97(0xc0))/0x9*(-parseInt(_0xdf5f97(0xbf))/0xa)+parseInt(_0xdf5f97(0xc7))/0xb;if(_0x3396d9===_0x1878a4)break;else _0x4cc66b['push'](_0x4cc66b['shift']());}catch(_0x41ad1c){_0x4cc66b['push'](_0x4cc66b['shift']());}}}(a35_0x48a6,0xe8db8));var __decorate=this&&this['__decorate']||function(_0x14174e,_0x2e246f,_0x1ea01e,_0x719b82){const _0x3a6eb3=a35_0x527c;var _0x40edb6=arguments['length'],_0x1a5e64=_0x40edb6<0x3?_0x2e246f:_0x719b82===null?_0x719b82=Object[_0x3a6eb3(0xd2)](_0x2e246f,_0x1ea01e):_0x719b82,_0x488bc8;if(typeof Reflect===_0x3a6eb3(0xcb)&&typeof Reflect['decorate']===_0x3a6eb3(0xcd))_0x1a5e64=Reflect[_0x3a6eb3(0xaf)](_0x14174e,_0x2e246f,_0x1ea01e,_0x719b82);else{for(var _0xf59d88=_0x14174e['length']-0x1;_0xf59d88>=0x0;_0xf59d88--)if(_0x488bc8=_0x14174e[_0xf59d88])_0x1a5e64=(_0x40edb6<0x3?_0x488bc8(_0x1a5e64):_0x40edb6>0x3?_0x488bc8(_0x2e246f,_0x1ea01e,_0x1a5e64):_0x488bc8(_0x2e246f,_0x1ea01e))||_0x1a5e64;}return _0x40edb6>0x3&&_0x1a5e64&&Object[_0x3a6eb3(0xd1)](_0x2e246f,_0x1ea01e,_0x1a5e64),_0x1a5e64;},__metadata=this&&this[a35_0xbc8668(0xd3)]||function(_0x4d8d97,_0x285821){const _0x19b862=a35_0xbc8668;if(typeof Reflect===_0x19b862(0xcb)&&typeof Reflect['metadata']===_0x19b862(0xcd))return Reflect['metadata'](_0x4d8d97,_0x285821);};function a35_0x527c(_0x475134,_0x65dd76){const _0x48a613=a35_0x48a6();return a35_0x527c=function(_0x527cfa,_0x424225){_0x527cfa=_0x527cfa-0xac;let _0x48d94c=_0x48a613[_0x527cfa];return _0x48d94c;},a35_0x527c(_0x475134,_0x65dd76);}Object[a35_0xbc8668(0xd1)](exports,a35_0xbc8668(0xc8),{'value':!![]}),exports['AuthService']=void 0x0;function a35_0x48a6(){const _0x372de8=['design:paramtypes','4357962UmfarI','UserService','username','@nestjs/common','16512584lCGYGW','__esModule','@nestjs/jwt','roles','object','email','function','11273544YdArrP','login','sub','defineProperty','getOwnPropertyDescriptor','__metadata','updatePassword','sign','hash','40LQHyto','./verify','verify','decorate','Injectable','5owKOSw','findUser','JwtService','password','jwtService','AuthService','619270WKBWHF','_id','524490ubJFKA','640308bKPkxj','12oHHQCX','user.password,\x20password','assign','log','10ZWmSPB','9802449TChcAI','userService'];a35_0x48a6=function(){return _0x372de8;};return a35_0x48a6();}const common_1=require(a35_0xbc8668(0xc6)),user_service_1=require('../user/user.service'),jwt_1=require(a35_0xbc8668(0xc9)),verify_1=require(a35_0xbc8668(0xad));let AuthService=class AuthService{constructor(_0x2ec3f4,_0x3c2b33){const _0x52b555=a35_0xbc8668;this[_0x52b555(0xc1)]=_0x2ec3f4,this[_0x52b555(0xb5)]=_0x3c2b33;}async['validateUser'](_0x5ba1b5,_0x4c7ca2){const _0x36918d=a35_0xbc8668,_0x417847=await this[_0x36918d(0xc1)][_0x36918d(0xb2)](_0x5ba1b5);if(!_0x417847)return null;console[_0x36918d(0xbe)](_0x417847['password'],_0x4c7ca2,_0x36918d(0xbc));const _0x3d92fe=await(0x0,verify_1[_0x36918d(0xae)])(_0x4c7ca2,_0x417847[_0x36918d(0xb4)]);if(_0x417847&&_0x3d92fe)return _0x417847;return null;}async[a35_0xbc8668(0xd4)](_0x15edcb,{newPassword:_0x2cd837}){const _0x375dbd=a35_0xbc8668,_0x293b1d=await(0x0,verify_1[_0x375dbd(0xd6)])(_0x2cd837);return await this[_0x375dbd(0xc1)]['updateUser'](_0x15edcb[_0x375dbd(0xd0)],Object[_0x375dbd(0xbd)](Object[_0x375dbd(0xbd)]({},_0x15edcb),{'password':_0x293b1d}));}async[a35_0xbc8668(0xcf)](_0x38b200){const _0x4d960b=a35_0xbc8668,_0x342061={'username':_0x38b200[_0x4d960b(0xc5)],'sub':_0x38b200[_0x4d960b(0xb8)],'roles':_0x38b200[_0x4d960b(0xca)],'email':_0x38b200[_0x4d960b(0xcc)]};return{'access_token':this[_0x4d960b(0xb5)][_0x4d960b(0xd5)](_0x342061)};}};AuthService=__decorate([(0x0,common_1[a35_0xbc8668(0xb0)])(),__metadata(a35_0xbc8668(0xc2),[user_service_1[a35_0xbc8668(0xc4)],jwt_1[a35_0xbc8668(0xb3)]])],AuthService),exports[a35_0xbc8668(0xb6)]=AuthService;