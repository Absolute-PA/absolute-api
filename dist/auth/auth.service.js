'use strict';const a35_0x4ce980=a35_0x4077;(function(_0x14c559,_0x5c6b6c){const _0x4c58ce=a35_0x4077,_0x5451bb=_0x14c559();while(!![]){try{const _0x20a0e1=-parseInt(_0x4c58ce(0x140))/0x1+-parseInt(_0x4c58ce(0x157))/0x2+parseInt(_0x4c58ce(0x15f))/0x3+-parseInt(_0x4c58ce(0x141))/0x4*(-parseInt(_0x4c58ce(0x148))/0x5)+parseInt(_0x4c58ce(0x159))/0x6*(-parseInt(_0x4c58ce(0x160))/0x7)+-parseInt(_0x4c58ce(0x14a))/0x8+parseInt(_0x4c58ce(0x149))/0x9;if(_0x20a0e1===_0x5c6b6c)break;else _0x5451bb['push'](_0x5451bb['shift']());}catch(_0x50bb29){_0x5451bb['push'](_0x5451bb['shift']());}}}(a35_0x254f,0xa6eaa));function a35_0x4077(_0x28a8d1,_0x1518f3){const _0x254f61=a35_0x254f();return a35_0x4077=function(_0x4077d7,_0x32ecc){_0x4077d7=_0x4077d7-0x13f;let _0x332844=_0x254f61[_0x4077d7];return _0x332844;},a35_0x4077(_0x28a8d1,_0x1518f3);}var __decorate=this&&this['__decorate']||function(_0x505cfd,_0x1835af,_0xbddc92,_0x13bfae){const _0x10b2be=a35_0x4077;var _0x2677bd=arguments['length'],_0x46ab38=_0x2677bd<0x3?_0x1835af:_0x13bfae===null?_0x13bfae=Object[_0x10b2be(0x161)](_0x1835af,_0xbddc92):_0x13bfae,_0x2929c8;if(typeof Reflect===_0x10b2be(0x15c)&&typeof Reflect[_0x10b2be(0x145)]===_0x10b2be(0x164))_0x46ab38=Reflect[_0x10b2be(0x145)](_0x505cfd,_0x1835af,_0xbddc92,_0x13bfae);else{for(var _0x157fce=_0x505cfd[_0x10b2be(0x162)]-0x1;_0x157fce>=0x0;_0x157fce--)if(_0x2929c8=_0x505cfd[_0x157fce])_0x46ab38=(_0x2677bd<0x3?_0x2929c8(_0x46ab38):_0x2677bd>0x3?_0x2929c8(_0x1835af,_0xbddc92,_0x46ab38):_0x2929c8(_0x1835af,_0xbddc92))||_0x46ab38;}return _0x2677bd>0x3&&_0x46ab38&&Object[_0x10b2be(0x14d)](_0x1835af,_0xbddc92,_0x46ab38),_0x46ab38;},__metadata=this&&this[a35_0x4ce980(0x158)]||function(_0x3826eb,_0x37a2d6){const _0x1448d8=a35_0x4ce980;if(typeof Reflect==='object'&&typeof Reflect[_0x1448d8(0x150)]===_0x1448d8(0x164))return Reflect[_0x1448d8(0x150)](_0x3826eb,_0x37a2d6);};Object[a35_0x4ce980(0x14d)](exports,a35_0x4ce980(0x143),{'value':!![]}),exports[a35_0x4ce980(0x142)]=void 0x0;const common_1=require(a35_0x4ce980(0x14f)),user_service_1=require(a35_0x4ce980(0x15b)),jwt_1=require(a35_0x4ce980(0x13f)),verify_1=require('./verify');let AuthService=class AuthService{constructor(_0x38b1ad,_0xe10596){const _0xc5bb2e=a35_0x4ce980;this[_0xc5bb2e(0x151)]=_0x38b1ad,this['jwtService']=_0xe10596;}async[a35_0x4ce980(0x152)](_0x3e8697,_0x142808){const _0x14be8e=a35_0x4ce980,_0x43d81d=await this[_0x14be8e(0x151)]['findUser'](_0x3e8697);if(!_0x43d81d)return null;console['log'](_0x43d81d[_0x14be8e(0x14b)],_0x142808,'user.password,\x20password');const _0x282bc4=await(0x0,verify_1[_0x14be8e(0x156)])(_0x142808,_0x43d81d['password']);if(_0x43d81d&&_0x282bc4)return _0x43d81d;return null;}async[a35_0x4ce980(0x147)](_0x5d2b16,{newPassword:_0x540c9a}){const _0x169c73=a35_0x4ce980,_0x57d9b0=await(0x0,verify_1['hash'])(_0x540c9a);return await this['userService'][_0x169c73(0x155)](_0x5d2b16[_0x169c73(0x144)],Object[_0x169c73(0x154)](Object[_0x169c73(0x154)]({},_0x5d2b16),{'password':_0x57d9b0}));}async[a35_0x4ce980(0x14c)](_0x80ca87){const _0x3a1f34=a35_0x4ce980,_0x9782be={'username':_0x80ca87[_0x3a1f34(0x14e)],'sub':_0x80ca87[_0x3a1f34(0x15d)],'roles':_0x80ca87[_0x3a1f34(0x163)],'email':_0x80ca87[_0x3a1f34(0x153)]};return{'access_token':this['jwtService']['sign'](_0x9782be)};}};AuthService=__decorate([(0x0,common_1[a35_0x4ce980(0x15a)])(),__metadata(a35_0x4ce980(0x146),[user_service_1[a35_0x4ce980(0x15e)],jwt_1[a35_0x4ce980(0x165)]])],AuthService),exports[a35_0x4ce980(0x142)]=AuthService;function a35_0x254f(){const _0x5b5a9c=['812354mafovf','2125532oIaVxj','AuthService','__esModule','sub','decorate','design:paramtypes','updatePassword','10LJDQZb','15724593oTTlFV','5632456UVdyRm','password','login','defineProperty','username','@nestjs/common','metadata','userService','validateUser','email','assign','updateUser','verify','658926BBkamQ','__metadata','938166cWXlmc','Injectable','../user/user.service','object','_id','UserService','1973361wdTXzR','42GXamOm','getOwnPropertyDescriptor','length','roles','function','JwtService','@nestjs/jwt'];a35_0x254f=function(){return _0x5b5a9c;};return a35_0x254f();}