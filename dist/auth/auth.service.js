'use strict';function a35_0x374a(_0x3d8203,_0x4adbcb){const _0x1627c7=a35_0x1627();return a35_0x374a=function(_0x374a1f,_0x1e8da4){_0x374a1f=_0x374a1f-0xd7;let _0x223cf2=_0x1627c7[_0x374a1f];return _0x223cf2;},a35_0x374a(_0x3d8203,_0x4adbcb);}const a35_0xbb22b8=a35_0x374a;(function(_0x150251,_0x106e5a){const _0x960d40=a35_0x374a,_0x2f8894=_0x150251();while(!![]){try{const _0x539e28=-parseInt(_0x960d40(0xf4))/0x1*(parseInt(_0x960d40(0xe1))/0x2)+parseInt(_0x960d40(0xe7))/0x3+parseInt(_0x960d40(0xee))/0x4*(-parseInt(_0x960d40(0xed))/0x5)+-parseInt(_0x960d40(0xf3))/0x6+-parseInt(_0x960d40(0xe3))/0x7*(-parseInt(_0x960d40(0xf8))/0x8)+-parseInt(_0x960d40(0xf1))/0x9+parseInt(_0x960d40(0xec))/0xa*(parseInt(_0x960d40(0xd7))/0xb);if(_0x539e28===_0x106e5a)break;else _0x2f8894['push'](_0x2f8894['shift']());}catch(_0x46b1b0){_0x2f8894['push'](_0x2f8894['shift']());}}}(a35_0x1627,0xdddb1));var __decorate=this&&this[a35_0xbb22b8(0xdd)]||function(_0x3cb21a,_0x5e7f74,_0x22f57f,_0x4a47fd){const _0x47e28a=a35_0xbb22b8;var _0x40b446=arguments[_0x47e28a(0xf6)],_0x522d49=_0x40b446<0x3?_0x5e7f74:_0x4a47fd===null?_0x4a47fd=Object[_0x47e28a(0xf0)](_0x5e7f74,_0x22f57f):_0x4a47fd,_0x5805bc;if(typeof Reflect===_0x47e28a(0xfb)&&typeof Reflect[_0x47e28a(0xfe)]==='function')_0x522d49=Reflect[_0x47e28a(0xfe)](_0x3cb21a,_0x5e7f74,_0x22f57f,_0x4a47fd);else{for(var _0x135ad7=_0x3cb21a['length']-0x1;_0x135ad7>=0x0;_0x135ad7--)if(_0x5805bc=_0x3cb21a[_0x135ad7])_0x522d49=(_0x40b446<0x3?_0x5805bc(_0x522d49):_0x40b446>0x3?_0x5805bc(_0x5e7f74,_0x22f57f,_0x522d49):_0x5805bc(_0x5e7f74,_0x22f57f))||_0x522d49;}return _0x40b446>0x3&&_0x522d49&&Object['defineProperty'](_0x5e7f74,_0x22f57f,_0x522d49),_0x522d49;},__metadata=this&&this[a35_0xbb22b8(0xda)]||function(_0x14fc5f,_0x3a916b){const _0x245e15=a35_0xbb22b8;if(typeof Reflect===_0x245e15(0xfb)&&typeof Reflect[_0x245e15(0xe6)]===_0x245e15(0x100))return Reflect[_0x245e15(0xe6)](_0x14fc5f,_0x3a916b);};function a35_0x1627(){const _0x40535a=['jwtService','defineProperty','1111ciCySd','UserService','AuthService','__metadata','sign','@nestjs/common','__decorate','hash','findUser','userService','84aZkLMb','./verify','483gebRzM','email','Injectable','metadata','1852473bXAYwe','username','@nestjs/jwt','login','updatePassword','259290iExgsI','895cCNYWt','11908haabPI','validateUser','getOwnPropertyDescriptor','1321146uKPGIt','roles','8358954tEXWRm','41057WDDQvC','design:paramtypes','length','log','170392rHweVV','verify','../user/user.service','object','assign','updateUser','decorate','password','function'];a35_0x1627=function(){return _0x40535a;};return a35_0x1627();}Object[a35_0xbb22b8(0x102)](exports,'__esModule',{'value':!![]}),exports[a35_0xbb22b8(0xd9)]=void 0x0;const common_1=require(a35_0xbb22b8(0xdc)),user_service_1=require(a35_0xbb22b8(0xfa)),jwt_1=require(a35_0xbb22b8(0xe9)),verify_1=require(a35_0xbb22b8(0xe2));let AuthService=class AuthService{constructor(_0x4aa85d,_0x5f54f3){const _0x4a9594=a35_0xbb22b8;this[_0x4a9594(0xe0)]=_0x4aa85d,this[_0x4a9594(0x101)]=_0x5f54f3;}async[a35_0xbb22b8(0xef)](_0x321041,_0x180c2f){const _0x2a6588=a35_0xbb22b8,_0x2b0734=await this['userService'][_0x2a6588(0xdf)](_0x321041);if(!_0x2b0734)return null;console[_0x2a6588(0xf7)](_0x2b0734[_0x2a6588(0xff)],_0x180c2f,'user.password,\x20password');const _0x52abae=await(0x0,verify_1[_0x2a6588(0xf9)])(_0x180c2f,_0x2b0734[_0x2a6588(0xff)]);if(_0x2b0734&&_0x52abae)return _0x2b0734;return null;}async[a35_0xbb22b8(0xeb)](_0x5252cb,{newPassword:_0x43720a}){const _0x4bf17a=a35_0xbb22b8,_0xfcd72d=await(0x0,verify_1[_0x4bf17a(0xde)])(_0x43720a);return await this['userService'][_0x4bf17a(0xfd)](_0x5252cb['sub'],Object[_0x4bf17a(0xfc)](Object[_0x4bf17a(0xfc)]({},_0x5252cb),{'password':_0xfcd72d}));}async[a35_0xbb22b8(0xea)](_0xb6c1da){const _0x2d05b7=a35_0xbb22b8,_0xc3becf={'username':_0xb6c1da[_0x2d05b7(0xe8)],'sub':_0xb6c1da['_id'],'roles':_0xb6c1da[_0x2d05b7(0xf2)],'email':_0xb6c1da[_0x2d05b7(0xe4)]};return{'access_token':this['jwtService'][_0x2d05b7(0xdb)](_0xc3becf)};}};AuthService=__decorate([(0x0,common_1[a35_0xbb22b8(0xe5)])(),__metadata(a35_0xbb22b8(0xf5),[user_service_1[a35_0xbb22b8(0xd8)],jwt_1['JwtService']])],AuthService),exports[a35_0xbb22b8(0xd9)]=AuthService;