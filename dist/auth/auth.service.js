'use strict';const a35_0x2f5a44=a35_0x6699;function a35_0x6699(_0x283f62,_0x14f83d){const _0x490ee9=a35_0x490e();return a35_0x6699=function(_0x66990a,_0x311039){_0x66990a=_0x66990a-0x8c;let _0x142a27=_0x490ee9[_0x66990a];return _0x142a27;},a35_0x6699(_0x283f62,_0x14f83d);}function a35_0x490e(){const _0xccde4a=['userService','defineProperty','design:paramtypes','object','UserService','updatePassword','116DEmDAg','findUser','decorate','705UjxSfo','getOwnPropertyDescriptor','JwtService','sign','150yqzBmO','2888823ibovaK','4564424NfyXNo','username','3905SvulLm','length','27534AiBVub','__decorate','roles','email','20667CKKZUg','function','jwtService','sub','1700DTKuUv','password','50NOrWQR','hash','login','AuthService','@nestjs/jwt','1255131ZfKahO','./verify','__metadata','Injectable','12972TNTFkS','_id','assign'];a35_0x490e=function(){return _0xccde4a;};return a35_0x490e();}(function(_0x54dad3,_0x281924){const _0x176d1d=a35_0x6699,_0x24ace5=_0x54dad3();while(!![]){try{const _0x4dfb38=parseInt(_0x176d1d(0xaa))/0x1*(-parseInt(_0x176d1d(0x8f))/0x2)+-parseInt(_0x176d1d(0xb4))/0x3*(parseInt(_0x176d1d(0xa3))/0x4)+parseInt(_0x176d1d(0xa6))/0x5*(parseInt(_0x176d1d(0xb0))/0x6)+-parseInt(_0x176d1d(0xab))/0x7+-parseInt(_0x176d1d(0xac))/0x8+parseInt(_0x176d1d(0x96))/0x9*(parseInt(_0x176d1d(0x91))/0xa)+-parseInt(_0x176d1d(0xae))/0xb*(-parseInt(_0x176d1d(0x9a))/0xc);if(_0x4dfb38===_0x281924)break;else _0x24ace5['push'](_0x24ace5['shift']());}catch(_0x48ea3c){_0x24ace5['push'](_0x24ace5['shift']());}}}(a35_0x490e,0x65f28));var __decorate=this&&this[a35_0x2f5a44(0xb1)]||function(_0x294085,_0x54f743,_0x40ddb6,_0x4c47b9){const _0x5a1475=a35_0x2f5a44;var _0x280003=arguments[_0x5a1475(0xaf)],_0x12d8c3=_0x280003<0x3?_0x54f743:_0x4c47b9===null?_0x4c47b9=Object[_0x5a1475(0xa7)](_0x54f743,_0x40ddb6):_0x4c47b9,_0x201bf;if(typeof Reflect===_0x5a1475(0xa0)&&typeof Reflect[_0x5a1475(0xa5)]==='function')_0x12d8c3=Reflect['decorate'](_0x294085,_0x54f743,_0x40ddb6,_0x4c47b9);else{for(var _0x5f08f1=_0x294085[_0x5a1475(0xaf)]-0x1;_0x5f08f1>=0x0;_0x5f08f1--)if(_0x201bf=_0x294085[_0x5f08f1])_0x12d8c3=(_0x280003<0x3?_0x201bf(_0x12d8c3):_0x280003>0x3?_0x201bf(_0x54f743,_0x40ddb6,_0x12d8c3):_0x201bf(_0x54f743,_0x40ddb6))||_0x12d8c3;}return _0x280003>0x3&&_0x12d8c3&&Object['defineProperty'](_0x54f743,_0x40ddb6,_0x12d8c3),_0x12d8c3;},__metadata=this&&this[a35_0x2f5a44(0x98)]||function(_0x3f49c9,_0x4716c0){const _0x712fda=a35_0x2f5a44;if(typeof Reflect===_0x712fda(0xa0)&&typeof Reflect['metadata']===_0x712fda(0x8c))return Reflect['metadata'](_0x3f49c9,_0x4716c0);};Object[a35_0x2f5a44(0x9e)](exports,'__esModule',{'value':!![]}),exports[a35_0x2f5a44(0x94)]=void 0x0;const common_1=require('@nestjs/common'),user_service_1=require('../user/user.service'),jwt_1=require(a35_0x2f5a44(0x95)),verify_1=require(a35_0x2f5a44(0x97));let AuthService=class AuthService{constructor(_0x6a0d31,_0xc3db06){const _0x11b132=a35_0x2f5a44;this[_0x11b132(0x9d)]=_0x6a0d31,this[_0x11b132(0x8d)]=_0xc3db06;}async['validateUser'](_0x3820f9,_0x419cdf){const _0x430d6a=a35_0x2f5a44,_0x58f3e0=await this[_0x430d6a(0x9d)][_0x430d6a(0xa4)](_0x3820f9);if(!_0x58f3e0)return null;console['log'](_0x58f3e0[_0x430d6a(0x90)],_0x419cdf,'user.password,\x20password');const _0x5e5f52=await(0x0,verify_1['verify'])(_0x419cdf,_0x58f3e0[_0x430d6a(0x90)]);if(_0x58f3e0&&_0x5e5f52)return _0x58f3e0;return null;}async[a35_0x2f5a44(0xa2)](_0xebe17a,{newPassword:_0x10e8a8}){const _0x4fb2c5=a35_0x2f5a44,_0x5b7810=await(0x0,verify_1[_0x4fb2c5(0x92)])(_0x10e8a8);return await this[_0x4fb2c5(0x9d)]['updateUser'](_0xebe17a[_0x4fb2c5(0x8e)],Object[_0x4fb2c5(0x9c)](Object['assign']({},_0xebe17a),{'password':_0x5b7810}));}async[a35_0x2f5a44(0x93)](_0x244953){const _0x452706=a35_0x2f5a44,_0x1f1e40={'username':_0x244953[_0x452706(0xad)],'sub':_0x244953[_0x452706(0x9b)],'roles':_0x244953[_0x452706(0xb2)],'email':_0x244953[_0x452706(0xb3)]};return{'access_token':this[_0x452706(0x8d)][_0x452706(0xa9)](_0x1f1e40)};}};AuthService=__decorate([(0x0,common_1[a35_0x2f5a44(0x99)])(),__metadata(a35_0x2f5a44(0x9f),[user_service_1[a35_0x2f5a44(0xa1)],jwt_1[a35_0x2f5a44(0xa8)]])],AuthService),exports[a35_0x2f5a44(0x94)]=AuthService;