'use strict';const a35_0x14084a=a35_0x1299;function a35_0x1299(_0x1765e7,_0x1ae375){const _0x4ee91d=a35_0x4ee9();return a35_0x1299=function(_0x12994b,_0x2be34c){_0x12994b=_0x12994b-0x87;let _0x3934ed=_0x4ee91d[_0x12994b];return _0x3934ed;},a35_0x1299(_0x1765e7,_0x1ae375);}(function(_0x507f46,_0x1d510a){const _0x4cf998=a35_0x1299,_0x458126=_0x507f46();while(!![]){try{const _0x35c3e3=parseInt(_0x4cf998(0x9e))/0x1+-parseInt(_0x4cf998(0xa1))/0x2+parseInt(_0x4cf998(0x9a))/0x3+-parseInt(_0x4cf998(0x9d))/0x4*(-parseInt(_0x4cf998(0xa4))/0x5)+parseInt(_0x4cf998(0xa0))/0x6+-parseInt(_0x4cf998(0x8a))/0x7*(-parseInt(_0x4cf998(0x8d))/0x8)+parseInt(_0x4cf998(0xae))/0x9*(-parseInt(_0x4cf998(0x9b))/0xa);if(_0x35c3e3===_0x1d510a)break;else _0x458126['push'](_0x458126['shift']());}catch(_0x343e2b){_0x458126['push'](_0x458126['shift']());}}}(a35_0x4ee9,0x2350d));var __decorate=this&&this[a35_0x14084a(0x92)]||function(_0x35366c,_0x3f1c01,_0x48b143,_0x355272){const _0x2d4634=a35_0x14084a;var _0x3dd9fe=arguments['length'],_0x57a7b5=_0x3dd9fe<0x3?_0x3f1c01:_0x355272===null?_0x355272=Object[_0x2d4634(0xa2)](_0x3f1c01,_0x48b143):_0x355272,_0x4f6ed4;if(typeof Reflect===_0x2d4634(0x96)&&typeof Reflect[_0x2d4634(0xad)]==='function')_0x57a7b5=Reflect[_0x2d4634(0xad)](_0x35366c,_0x3f1c01,_0x48b143,_0x355272);else{for(var _0x44de3a=_0x35366c['length']-0x1;_0x44de3a>=0x0;_0x44de3a--)if(_0x4f6ed4=_0x35366c[_0x44de3a])_0x57a7b5=(_0x3dd9fe<0x3?_0x4f6ed4(_0x57a7b5):_0x3dd9fe>0x3?_0x4f6ed4(_0x3f1c01,_0x48b143,_0x57a7b5):_0x4f6ed4(_0x3f1c01,_0x48b143))||_0x57a7b5;}return _0x3dd9fe>0x3&&_0x57a7b5&&Object['defineProperty'](_0x3f1c01,_0x48b143,_0x57a7b5),_0x57a7b5;},__metadata=this&&this[a35_0x14084a(0x87)]||function(_0x1c5ff7,_0x3743ff){const _0x3157fe=a35_0x14084a;if(typeof Reflect===_0x3157fe(0x96)&&typeof Reflect['metadata']===_0x3157fe(0x8c))return Reflect[_0x3157fe(0x9f)](_0x1c5ff7,_0x3743ff);};function a35_0x4ee9(){const _0xa563e5=['570927LOFMtG','14630ZoPlta','@nestjs/jwt','200gWBlvL','52246RnGLSu','metadata','785196CUYVTy','69082ltFdau','getOwnPropertyDescriptor','findUser','11195UxfUyp','login','UserService','sign','verify','jwtService','log','AuthService','design:paramtypes','decorate','2646vRwgBi','sub','__metadata','hash','password','21lZPUeS','roles','function','330520JbtGtY','username','updatePassword','./verify','JwtService','__decorate','@nestjs/common','__esModule','userService','object','validateUser','defineProperty','user.password,\x20password'];a35_0x4ee9=function(){return _0xa563e5;};return a35_0x4ee9();}Object[a35_0x14084a(0x98)](exports,a35_0x14084a(0x94),{'value':!![]}),exports[a35_0x14084a(0xab)]=void 0x0;const common_1=require(a35_0x14084a(0x93)),user_service_1=require('../user/user.service'),jwt_1=require(a35_0x14084a(0x9c)),verify_1=require(a35_0x14084a(0x90));let AuthService=class AuthService{constructor(_0x1e1001,_0xb2d139){const _0x1f38db=a35_0x14084a;this['userService']=_0x1e1001,this[_0x1f38db(0xa9)]=_0xb2d139;}async[a35_0x14084a(0x97)](_0x5cc711,_0x26b0a6){const _0x317c26=a35_0x14084a,_0x270c82=await this[_0x317c26(0x95)][_0x317c26(0xa3)](_0x5cc711);if(!_0x270c82)return null;console[_0x317c26(0xaa)](_0x270c82[_0x317c26(0x89)],_0x26b0a6,_0x317c26(0x99));const _0xaf545e=await(0x0,verify_1[_0x317c26(0xa8)])(_0x26b0a6,_0x270c82[_0x317c26(0x89)]);if(_0x270c82&&_0xaf545e)return _0x270c82;return null;}async[a35_0x14084a(0x8f)](_0x55346d,{newPassword:_0x5e6e5e}){const _0x32f12f=a35_0x14084a,_0x48cc62=await(0x0,verify_1[_0x32f12f(0x88)])(_0x5e6e5e);return await this[_0x32f12f(0x95)]['updateUser'](_0x55346d[_0x32f12f(0xaf)],Object['assign'](Object['assign']({},_0x55346d),{'password':_0x48cc62}));}async[a35_0x14084a(0xa5)](_0x2439f8){const _0x4548e3=a35_0x14084a,_0x194d70={'username':_0x2439f8[_0x4548e3(0x8e)],'sub':_0x2439f8['_id'],'roles':_0x2439f8[_0x4548e3(0x8b)],'email':_0x2439f8['email']};return{'access_token':this[_0x4548e3(0xa9)][_0x4548e3(0xa7)](_0x194d70)};}};AuthService=__decorate([(0x0,common_1['Injectable'])(),__metadata(a35_0x14084a(0xac),[user_service_1[a35_0x14084a(0xa6)],jwt_1[a35_0x14084a(0x91)]])],AuthService),exports['AuthService']=AuthService;