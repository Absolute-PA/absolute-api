'use strict';const a35_0x491934=a35_0x5837;(function(_0x46dfaa,_0x3c7a92){const _0x2a050a=a35_0x5837,_0x19ef6a=_0x46dfaa();while(!![]){try{const _0x10dfdc=parseInt(_0x2a050a(0x105))/0x1*(-parseInt(_0x2a050a(0x104))/0x2)+-parseInt(_0x2a050a(0x10c))/0x3*(-parseInt(_0x2a050a(0xf7))/0x4)+parseInt(_0x2a050a(0x10f))/0x5*(-parseInt(_0x2a050a(0x10b))/0x6)+parseInt(_0x2a050a(0x118))/0x7+-parseInt(_0x2a050a(0x11b))/0x8+parseInt(_0x2a050a(0x103))/0x9*(parseInt(_0x2a050a(0x112))/0xa)+-parseInt(_0x2a050a(0xf6))/0xb*(-parseInt(_0x2a050a(0x106))/0xc);if(_0x10dfdc===_0x3c7a92)break;else _0x19ef6a['push'](_0x19ef6a['shift']());}catch(_0x31ef5c){_0x19ef6a['push'](_0x19ef6a['shift']());}}}(a35_0x4341,0x8d8b6));var __decorate=this&&this['__decorate']||function(_0x36cc8d,_0x11a243,_0x12a170,_0x5292e6){const _0x3908db=a35_0x5837;var _0x1062d0=arguments[_0x3908db(0x117)],_0x3f71c7=_0x1062d0<0x3?_0x11a243:_0x5292e6===null?_0x5292e6=Object[_0x3908db(0x109)](_0x11a243,_0x12a170):_0x5292e6,_0xc09c6d;if(typeof Reflect===_0x3908db(0x111)&&typeof Reflect[_0x3908db(0x102)]===_0x3908db(0xfc))_0x3f71c7=Reflect[_0x3908db(0x102)](_0x36cc8d,_0x11a243,_0x12a170,_0x5292e6);else{for(var _0xb1ebb0=_0x36cc8d['length']-0x1;_0xb1ebb0>=0x0;_0xb1ebb0--)if(_0xc09c6d=_0x36cc8d[_0xb1ebb0])_0x3f71c7=(_0x1062d0<0x3?_0xc09c6d(_0x3f71c7):_0x1062d0>0x3?_0xc09c6d(_0x11a243,_0x12a170,_0x3f71c7):_0xc09c6d(_0x11a243,_0x12a170))||_0x3f71c7;}return _0x1062d0>0x3&&_0x3f71c7&&Object[_0x3908db(0xfe)](_0x11a243,_0x12a170,_0x3f71c7),_0x3f71c7;},__metadata=this&&this[a35_0x491934(0x114)]||function(_0x204578,_0x1c680e){const _0x2736b8=a35_0x491934;if(typeof Reflect===_0x2736b8(0x111)&&typeof Reflect[_0x2736b8(0xfd)]===_0x2736b8(0xfc))return Reflect['metadata'](_0x204578,_0x1c680e);};Object[a35_0x491934(0xfe)](exports,'__esModule',{'value':!![]}),exports[a35_0x491934(0xf9)]=void 0x0;function a35_0x5837(_0x32c234,_0x5db918){const _0x4341b2=a35_0x4341();return a35_0x5837=function(_0x58374d,_0x28844e){_0x58374d=_0x58374d-0xf6;let _0x21143f=_0x4341b2[_0x58374d];return _0x21143f;},a35_0x5837(_0x32c234,_0x5db918);}function a35_0x4341(){const _0x5bf370=['../user/user.service','assign','hash','decorate','3698190zSNwMh','4obPNIQ','406395vPIyCl','25716KjEvwh','password','Injectable','getOwnPropertyDescriptor','design:paramtypes','282AuKdpq','29235JXkBIx','./verify','user.password,\x20password','57350TFQyaT','verify','object','20gAwQUv','@nestjs/jwt','__metadata','userService','validateUser','length','6088222uSLdgR','JwtService','updatePassword','6829656eWRFZY','4664xNawUg','76YWJtGE','jwtService','AuthService','@nestjs/common','email','function','metadata','defineProperty'];a35_0x4341=function(){return _0x5bf370;};return a35_0x4341();}const common_1=require(a35_0x491934(0xfa)),user_service_1=require(a35_0x491934(0xff)),jwt_1=require(a35_0x491934(0x113)),verify_1=require(a35_0x491934(0x10d));let AuthService=class AuthService{constructor(_0x4f7c54,_0x15b738){const _0x23fc12=a35_0x491934;this[_0x23fc12(0x115)]=_0x4f7c54,this[_0x23fc12(0xf8)]=_0x15b738;}async[a35_0x491934(0x116)](_0x1bbf7b,_0x2bb7e9){const _0x5c3eb1=a35_0x491934,_0x11306f=await this[_0x5c3eb1(0x115)]['findUser'](_0x1bbf7b);if(!_0x11306f)return null;console['log'](_0x11306f[_0x5c3eb1(0x107)],_0x2bb7e9,_0x5c3eb1(0x10e));const _0x32830d=await(0x0,verify_1[_0x5c3eb1(0x110)])(_0x2bb7e9,_0x11306f[_0x5c3eb1(0x107)]);if(_0x11306f&&_0x32830d)return _0x11306f;return null;}async[a35_0x491934(0x11a)](_0xc75a80,{newPassword:_0x49a691}){const _0x1c7ac7=a35_0x491934,_0x5636d5=await(0x0,verify_1[_0x1c7ac7(0x101)])(_0x49a691);return await this[_0x1c7ac7(0x115)]['updateUser'](_0xc75a80['sub'],Object[_0x1c7ac7(0x100)](Object[_0x1c7ac7(0x100)]({},_0xc75a80),{'password':_0x5636d5}));}async['login'](_0x205306){const _0x723c55=a35_0x491934,_0x947f6c={'username':_0x205306['username'],'sub':_0x205306['_id'],'roles':_0x205306['roles'],'email':_0x205306[_0x723c55(0xfb)]};return{'access_token':this[_0x723c55(0xf8)]['sign'](_0x947f6c)};}};AuthService=__decorate([(0x0,common_1[a35_0x491934(0x108)])(),__metadata(a35_0x491934(0x10a),[user_service_1['UserService'],jwt_1[a35_0x491934(0x119)]])],AuthService),exports['AuthService']=AuthService;