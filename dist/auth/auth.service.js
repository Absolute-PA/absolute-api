'use strict';function a35_0x53e0(_0x5ebf08,_0x2e507c){const _0x2dcb8e=a35_0x2dcb();return a35_0x53e0=function(_0x53e0fa,_0x2d846b){_0x53e0fa=_0x53e0fa-0xdd;let _0x24207c=_0x2dcb8e[_0x53e0fa];return _0x24207c;},a35_0x53e0(_0x5ebf08,_0x2e507c);}const a35_0x5beb0e=a35_0x53e0;(function(_0x1de7e2,_0x3a95ed){const _0xed0eb8=a35_0x53e0,_0x56f3f1=_0x1de7e2();while(!![]){try{const _0x5a4586=-parseInt(_0xed0eb8(0x10a))/0x1*(parseInt(_0xed0eb8(0xfe))/0x2)+-parseInt(_0xed0eb8(0xfc))/0x3*(-parseInt(_0xed0eb8(0xe3))/0x4)+-parseInt(_0xed0eb8(0xf2))/0x5+-parseInt(_0xed0eb8(0x103))/0x6+parseInt(_0xed0eb8(0x101))/0x7*(parseInt(_0xed0eb8(0xe1))/0x8)+-parseInt(_0xed0eb8(0xe9))/0x9+parseInt(_0xed0eb8(0xf8))/0xa*(parseInt(_0xed0eb8(0xf9))/0xb);if(_0x5a4586===_0x3a95ed)break;else _0x56f3f1['push'](_0x56f3f1['shift']());}catch(_0x49559b){_0x56f3f1['push'](_0x56f3f1['shift']());}}}(a35_0x2dcb,0xa2d16));function a35_0x2dcb(){const _0x370dc9=['__esModule','__metadata','findUser','../user/user.service','hash','311890dfQEOh','858saupUu','length','__decorate','302658FQQsVB','log','4LVcVtb','sub','@nestjs/jwt','121156gRgIKh','updateUser','7412928oCOSqR','jwtService','roles','_id','assign','./verify','sign','746aZPSPl','function','validateUser','Injectable','userService','metadata','104FNZcCx','login','32DigJYi','@nestjs/common','UserService','username','decorate','getOwnPropertyDescriptor','3885039jrMOMA','design:paramtypes','object','JwtService','user.password,\x20password','verify','updatePassword','password','defineProperty','5646405jikulV'];a35_0x2dcb=function(){return _0x370dc9;};return a35_0x2dcb();}var __decorate=this&&this[a35_0x5beb0e(0xfb)]||function(_0x197014,_0x2085dc,_0x264646,_0x485216){const _0x5aff50=a35_0x5beb0e;var _0x197091=arguments[_0x5aff50(0xfa)],_0x4b7f50=_0x197091<0x3?_0x2085dc:_0x485216===null?_0x485216=Object[_0x5aff50(0xe8)](_0x2085dc,_0x264646):_0x485216,_0x2d7055;if(typeof Reflect===_0x5aff50(0xeb)&&typeof Reflect[_0x5aff50(0xe7)]===_0x5aff50(0x10b))_0x4b7f50=Reflect[_0x5aff50(0xe7)](_0x197014,_0x2085dc,_0x264646,_0x485216);else{for(var _0x305236=_0x197014[_0x5aff50(0xfa)]-0x1;_0x305236>=0x0;_0x305236--)if(_0x2d7055=_0x197014[_0x305236])_0x4b7f50=(_0x197091<0x3?_0x2d7055(_0x4b7f50):_0x197091>0x3?_0x2d7055(_0x2085dc,_0x264646,_0x4b7f50):_0x2d7055(_0x2085dc,_0x264646))||_0x4b7f50;}return _0x197091>0x3&&_0x4b7f50&&Object[_0x5aff50(0xf1)](_0x2085dc,_0x264646,_0x4b7f50),_0x4b7f50;},__metadata=this&&this[a35_0x5beb0e(0xf4)]||function(_0x336fec,_0x27bb99){const _0x1f9bd2=a35_0x5beb0e;if(typeof Reflect===_0x1f9bd2(0xeb)&&typeof Reflect[_0x1f9bd2(0xe0)]===_0x1f9bd2(0x10b))return Reflect['metadata'](_0x336fec,_0x27bb99);};Object['defineProperty'](exports,a35_0x5beb0e(0xf3),{'value':!![]}),exports['AuthService']=void 0x0;const common_1=require(a35_0x5beb0e(0xe4)),user_service_1=require(a35_0x5beb0e(0xf6)),jwt_1=require(a35_0x5beb0e(0x100)),verify_1=require(a35_0x5beb0e(0x108));let AuthService=class AuthService{constructor(_0x209fc4,_0xa2c0cb){const _0xdb5812=a35_0x5beb0e;this[_0xdb5812(0xdf)]=_0x209fc4,this[_0xdb5812(0x104)]=_0xa2c0cb;}async[a35_0x5beb0e(0xdd)](_0xbc97c7,_0x5d4d2c){const _0x423459=a35_0x5beb0e,_0x1f70af=await this[_0x423459(0xdf)][_0x423459(0xf5)](_0xbc97c7);if(!_0x1f70af)return null;console[_0x423459(0xfd)](_0x1f70af[_0x423459(0xf0)],_0x5d4d2c,_0x423459(0xed));const _0x466df8=await(0x0,verify_1[_0x423459(0xee)])(_0x5d4d2c,_0x1f70af[_0x423459(0xf0)]);if(_0x1f70af&&_0x466df8)return _0x1f70af;return null;}async[a35_0x5beb0e(0xef)](_0x2c2f8f,{newPassword:_0x1afe10}){const _0x36f4fe=a35_0x5beb0e,_0x3b22d2=await(0x0,verify_1[_0x36f4fe(0xf7)])(_0x1afe10);return await this[_0x36f4fe(0xdf)][_0x36f4fe(0x102)](_0x2c2f8f[_0x36f4fe(0xff)],Object[_0x36f4fe(0x107)](Object[_0x36f4fe(0x107)]({},_0x2c2f8f),{'password':_0x3b22d2}));}async[a35_0x5beb0e(0xe2)](_0x530422){const _0x3793a8=a35_0x5beb0e,_0x1b0340={'username':_0x530422[_0x3793a8(0xe6)],'sub':_0x530422[_0x3793a8(0x106)],'roles':_0x530422[_0x3793a8(0x105)],'email':_0x530422['email']};return{'access_token':this['jwtService'][_0x3793a8(0x109)](_0x1b0340)};}};AuthService=__decorate([(0x0,common_1[a35_0x5beb0e(0xde)])(),__metadata(a35_0x5beb0e(0xea),[user_service_1[a35_0x5beb0e(0xe5)],jwt_1[a35_0x5beb0e(0xec)]])],AuthService),exports['AuthService']=AuthService;