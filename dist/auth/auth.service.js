'use strict';const a35_0x3fec8a=a35_0x2eac;function a35_0x2eac(_0x58e2b0,_0x4cc8ed){const _0x466196=a35_0x4661();return a35_0x2eac=function(_0x2eacc9,_0x39f8f1){_0x2eacc9=_0x2eacc9-0x1d5;let _0x48c80e=_0x466196[_0x2eacc9];return _0x48c80e;},a35_0x2eac(_0x58e2b0,_0x4cc8ed);}(function(_0x56445c,_0x4e3c68){const _0x25cc69=a35_0x2eac,_0x31dbd5=_0x56445c();while(!![]){try{const _0x1c5553=-parseInt(_0x25cc69(0x1db))/0x1*(parseInt(_0x25cc69(0x1d6))/0x2)+parseInt(_0x25cc69(0x1f5))/0x3*(-parseInt(_0x25cc69(0x1e4))/0x4)+-parseInt(_0x25cc69(0x1ed))/0x5+parseInt(_0x25cc69(0x1f2))/0x6+-parseInt(_0x25cc69(0x1f3))/0x7*(parseInt(_0x25cc69(0x1d7))/0x8)+parseInt(_0x25cc69(0x1ee))/0x9+parseInt(_0x25cc69(0x1e0))/0xa;if(_0x1c5553===_0x4e3c68)break;else _0x31dbd5['push'](_0x31dbd5['shift']());}catch(_0x4a2234){_0x31dbd5['push'](_0x31dbd5['shift']());}}}(a35_0x4661,0x24213));var __decorate=this&&this[a35_0x3fec8a(0x1dc)]||function(_0x450f0b,_0x4752d0,_0x431748,_0x56ab55){const _0x5cfed8=a35_0x3fec8a;var _0x1aa5ca=arguments[_0x5cfed8(0x1de)],_0x31bc7a=_0x1aa5ca<0x3?_0x4752d0:_0x56ab55===null?_0x56ab55=Object[_0x5cfed8(0x1f0)](_0x4752d0,_0x431748):_0x56ab55,_0xb94661;if(typeof Reflect===_0x5cfed8(0x1e7)&&typeof Reflect[_0x5cfed8(0x1f4)]===_0x5cfed8(0x1d8))_0x31bc7a=Reflect['decorate'](_0x450f0b,_0x4752d0,_0x431748,_0x56ab55);else{for(var _0x57e66d=_0x450f0b[_0x5cfed8(0x1de)]-0x1;_0x57e66d>=0x0;_0x57e66d--)if(_0xb94661=_0x450f0b[_0x57e66d])_0x31bc7a=(_0x1aa5ca<0x3?_0xb94661(_0x31bc7a):_0x1aa5ca>0x3?_0xb94661(_0x4752d0,_0x431748,_0x31bc7a):_0xb94661(_0x4752d0,_0x431748))||_0x31bc7a;}return _0x1aa5ca>0x3&&_0x31bc7a&&Object[_0x5cfed8(0x1fb)](_0x4752d0,_0x431748,_0x31bc7a),_0x31bc7a;},__metadata=this&&this[a35_0x3fec8a(0x1f1)]||function(_0x137f34,_0x110c09){const _0x4b17c5=a35_0x3fec8a;if(typeof Reflect==='object'&&typeof Reflect[_0x4b17c5(0x1f6)]===_0x4b17c5(0x1d8))return Reflect[_0x4b17c5(0x1f6)](_0x137f34,_0x110c09);};function a35_0x4661(){const _0x52af26=['3piAVHH','metadata','@nestjs/common','jwtService','hash','sub','defineProperty','findUser','__esModule','./verify','verify','userService','2pTmfye','1016zQLhvE','function','design:paramtypes','sign','276614uRGAor','__decorate','JwtService','length','roles','8016370fnKqwm','@nestjs/jwt','log','../user/user.service','614908srZuod','Injectable','updateUser','object','_id','login','password','assign','validateUser','1434385ZBqybL','912447wWGwwG','username','getOwnPropertyDescriptor','__metadata','922968NkXRmw','10563dFPjyn','decorate'];a35_0x4661=function(){return _0x52af26;};return a35_0x4661();}Object[a35_0x3fec8a(0x1fb)](exports,a35_0x3fec8a(0x1fd),{'value':!![]}),exports['AuthService']=void 0x0;const common_1=require(a35_0x3fec8a(0x1f7)),user_service_1=require(a35_0x3fec8a(0x1e3)),jwt_1=require(a35_0x3fec8a(0x1e1)),verify_1=require(a35_0x3fec8a(0x1fe));let AuthService=class AuthService{constructor(_0x2b404a,_0x4582f4){const _0x5e1cc9=a35_0x3fec8a;this[_0x5e1cc9(0x1d5)]=_0x2b404a,this[_0x5e1cc9(0x1f8)]=_0x4582f4;}async[a35_0x3fec8a(0x1ec)](_0x37f453,_0x1198e8){const _0x26cb9d=a35_0x3fec8a,_0x2510bc=await this[_0x26cb9d(0x1d5)][_0x26cb9d(0x1fc)](_0x37f453);if(!_0x2510bc)return null;console[_0x26cb9d(0x1e2)](_0x2510bc[_0x26cb9d(0x1ea)],_0x1198e8,'user.password,\x20password');const _0x1bb0c7=await(0x0,verify_1[_0x26cb9d(0x1ff)])(_0x1198e8,_0x2510bc[_0x26cb9d(0x1ea)]);if(_0x2510bc&&_0x1bb0c7)return _0x2510bc;return null;}async['updatePassword'](_0x2d3034,{newPassword:_0x7de557}){const _0x4c05a7=a35_0x3fec8a,_0x404e9a=await(0x0,verify_1[_0x4c05a7(0x1f9)])(_0x7de557);return await this[_0x4c05a7(0x1d5)][_0x4c05a7(0x1e6)](_0x2d3034[_0x4c05a7(0x1fa)],Object[_0x4c05a7(0x1eb)](Object['assign']({},_0x2d3034),{'password':_0x404e9a}));}async[a35_0x3fec8a(0x1e9)](_0x50d5a2){const _0x30a00b=a35_0x3fec8a,_0x5b9875={'username':_0x50d5a2[_0x30a00b(0x1ef)],'sub':_0x50d5a2[_0x30a00b(0x1e8)],'roles':_0x50d5a2[_0x30a00b(0x1df)],'email':_0x50d5a2['email']};return{'access_token':this[_0x30a00b(0x1f8)][_0x30a00b(0x1da)](_0x5b9875)};}};AuthService=__decorate([(0x0,common_1[a35_0x3fec8a(0x1e5)])(),__metadata(a35_0x3fec8a(0x1d9),[user_service_1['UserService'],jwt_1[a35_0x3fec8a(0x1dd)]])],AuthService),exports['AuthService']=AuthService;