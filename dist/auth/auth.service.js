'use strict';const a35_0xacb864=a35_0x24e4;(function(_0x5715c0,_0x3b3e42){const _0x58259=a35_0x24e4,_0x5b8075=_0x5715c0();while(!![]){try{const _0x38125a=parseInt(_0x58259(0xe9))/0x1+-parseInt(_0x58259(0xda))/0x2*(-parseInt(_0x58259(0xd8))/0x3)+-parseInt(_0x58259(0xed))/0x4+parseInt(_0x58259(0xd6))/0x5+parseInt(_0x58259(0xc7))/0x6+parseInt(_0x58259(0xca))/0x7*(parseInt(_0x58259(0xd2))/0x8)+-parseInt(_0x58259(0xea))/0x9*(parseInt(_0x58259(0xef))/0xa);if(_0x38125a===_0x3b3e42)break;else _0x5b8075['push'](_0x5b8075['shift']());}catch(_0x32cab8){_0x5b8075['push'](_0x5b8075['shift']());}}}(a35_0x4006,0xb1715));function a35_0x24e4(_0x26bae7,_0x301f37){const _0x4006aa=a35_0x4006();return a35_0x24e4=function(_0x24e4eb,_0x5f4b39){_0x24e4eb=_0x24e4eb-0xc7;let _0x2eaf97=_0x4006aa[_0x24e4eb];return _0x2eaf97;},a35_0x24e4(_0x26bae7,_0x301f37);}function a35_0x4006(){const _0x19e2d7=['decorate','verify','username','jwtService','__metadata','metadata','UserService','1108812EknyJx','27ISsiYs','validateUser','userService','5244868phYtZh','AuthService','5203740dvNgrr','password','__decorate','./verify','1844880WBInBj','roles','../user/user.service','2857127VdTszQ','updateUser','@nestjs/jwt','_id','assign','login','sub','defineProperty','16QQTcmo','JwtService','function','getOwnPropertyDescriptor','2343420VFbxNY','user.password,\x20password','3wyDgSw','design:paramtypes','1795692TVsYBG','@nestjs/common','object','Injectable','log','sign','email','hash'];a35_0x4006=function(){return _0x19e2d7;};return a35_0x4006();}var __decorate=this&&this[a35_0xacb864(0xf1)]||function(_0x19b6c0,_0x554f88,_0x2d7f1f,_0x3fa4f1){const _0x1b1a0c=a35_0xacb864;var _0x551181=arguments['length'],_0x138449=_0x551181<0x3?_0x554f88:_0x3fa4f1===null?_0x3fa4f1=Object[_0x1b1a0c(0xd5)](_0x554f88,_0x2d7f1f):_0x3fa4f1,_0x58d2db;if(typeof Reflect===_0x1b1a0c(0xdc)&&typeof Reflect['decorate']===_0x1b1a0c(0xd4))_0x138449=Reflect[_0x1b1a0c(0xe2)](_0x19b6c0,_0x554f88,_0x2d7f1f,_0x3fa4f1);else{for(var _0xdebe12=_0x19b6c0['length']-0x1;_0xdebe12>=0x0;_0xdebe12--)if(_0x58d2db=_0x19b6c0[_0xdebe12])_0x138449=(_0x551181<0x3?_0x58d2db(_0x138449):_0x551181>0x3?_0x58d2db(_0x554f88,_0x2d7f1f,_0x138449):_0x58d2db(_0x554f88,_0x2d7f1f))||_0x138449;}return _0x551181>0x3&&_0x138449&&Object[_0x1b1a0c(0xd1)](_0x554f88,_0x2d7f1f,_0x138449),_0x138449;},__metadata=this&&this[a35_0xacb864(0xe6)]||function(_0x438cac,_0x251483){const _0x4a43dd=a35_0xacb864;if(typeof Reflect===_0x4a43dd(0xdc)&&typeof Reflect[_0x4a43dd(0xe7)]===_0x4a43dd(0xd4))return Reflect[_0x4a43dd(0xe7)](_0x438cac,_0x251483);};Object[a35_0xacb864(0xd1)](exports,'__esModule',{'value':!![]}),exports[a35_0xacb864(0xee)]=void 0x0;const common_1=require(a35_0xacb864(0xdb)),user_service_1=require(a35_0xacb864(0xc9)),jwt_1=require(a35_0xacb864(0xcc)),verify_1=require(a35_0xacb864(0xf2));let AuthService=class AuthService{constructor(_0x55df1e,_0x2b225b){const _0x2ebf1b=a35_0xacb864;this[_0x2ebf1b(0xec)]=_0x55df1e,this[_0x2ebf1b(0xe5)]=_0x2b225b;}async[a35_0xacb864(0xeb)](_0xb78fcb,_0x323b93){const _0xfdfbe8=a35_0xacb864,_0x1bf0a0=await this[_0xfdfbe8(0xec)]['findUser'](_0xb78fcb);if(!_0x1bf0a0)return null;console[_0xfdfbe8(0xde)](_0x1bf0a0[_0xfdfbe8(0xf0)],_0x323b93,_0xfdfbe8(0xd7));const _0x10e6ad=await(0x0,verify_1[_0xfdfbe8(0xe3)])(_0x323b93,_0x1bf0a0[_0xfdfbe8(0xf0)]);if(_0x1bf0a0&&_0x10e6ad)return _0x1bf0a0;return null;}async['updatePassword'](_0x42eaa7,{newPassword:_0x30703b}){const _0xc90d87=a35_0xacb864,_0x10e1e7=await(0x0,verify_1[_0xc90d87(0xe1)])(_0x30703b);return await this[_0xc90d87(0xec)][_0xc90d87(0xcb)](_0x42eaa7[_0xc90d87(0xd0)],Object[_0xc90d87(0xce)](Object[_0xc90d87(0xce)]({},_0x42eaa7),{'password':_0x10e1e7}));}async[a35_0xacb864(0xcf)](_0x508260){const _0x9761ac=a35_0xacb864,_0x1967c7={'username':_0x508260[_0x9761ac(0xe4)],'sub':_0x508260[_0x9761ac(0xcd)],'roles':_0x508260[_0x9761ac(0xc8)],'email':_0x508260[_0x9761ac(0xe0)]};return{'access_token':this[_0x9761ac(0xe5)][_0x9761ac(0xdf)](_0x1967c7)};}};AuthService=__decorate([(0x0,common_1[a35_0xacb864(0xdd)])(),__metadata(a35_0xacb864(0xd9),[user_service_1[a35_0xacb864(0xe8)],jwt_1[a35_0xacb864(0xd3)]])],AuthService),exports[a35_0xacb864(0xee)]=AuthService;