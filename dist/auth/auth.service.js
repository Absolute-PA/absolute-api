'use strict';const a35_0x552eae=a35_0x4819;(function(_0x35c5c6,_0x3f2cfa){const _0x301c70=a35_0x4819,_0x33ab62=_0x35c5c6();while(!![]){try{const _0x408e09=parseInt(_0x301c70(0x1d8))/0x1*(-parseInt(_0x301c70(0x1e6))/0x2)+-parseInt(_0x301c70(0x1d4))/0x3*(parseInt(_0x301c70(0x1d5))/0x4)+-parseInt(_0x301c70(0x1ea))/0x5+-parseInt(_0x301c70(0x1ed))/0x6+parseInt(_0x301c70(0x1d9))/0x7+-parseInt(_0x301c70(0x1e4))/0x8+parseInt(_0x301c70(0x1e1))/0x9*(parseInt(_0x301c70(0x1e7))/0xa);if(_0x408e09===_0x3f2cfa)break;else _0x33ab62['push'](_0x33ab62['shift']());}catch(_0x22a4da){_0x33ab62['push'](_0x33ab62['shift']());}}}(a35_0x5426,0xd99e7));var __decorate=this&&this[a35_0x552eae(0x1ce)]||function(_0xf02d7,_0x327f04,_0x4bbcc3,_0xf3f9a9){const _0x5e9e6b=a35_0x552eae;var _0x14d1ab=arguments[_0x5e9e6b(0x1f2)],_0x528847=_0x14d1ab<0x3?_0x327f04:_0xf3f9a9===null?_0xf3f9a9=Object[_0x5e9e6b(0x1d6)](_0x327f04,_0x4bbcc3):_0xf3f9a9,_0xe80a15;if(typeof Reflect===_0x5e9e6b(0x1d1)&&typeof Reflect[_0x5e9e6b(0x1e5)]===_0x5e9e6b(0x1cf))_0x528847=Reflect[_0x5e9e6b(0x1e5)](_0xf02d7,_0x327f04,_0x4bbcc3,_0xf3f9a9);else{for(var _0x3c739c=_0xf02d7[_0x5e9e6b(0x1f2)]-0x1;_0x3c739c>=0x0;_0x3c739c--)if(_0xe80a15=_0xf02d7[_0x3c739c])_0x528847=(_0x14d1ab<0x3?_0xe80a15(_0x528847):_0x14d1ab>0x3?_0xe80a15(_0x327f04,_0x4bbcc3,_0x528847):_0xe80a15(_0x327f04,_0x4bbcc3))||_0x528847;}return _0x14d1ab>0x3&&_0x528847&&Object[_0x5e9e6b(0x1d3)](_0x327f04,_0x4bbcc3,_0x528847),_0x528847;},__metadata=this&&this[a35_0x552eae(0x1e8)]||function(_0x569da0,_0x33e37f){const _0x1c6039=a35_0x552eae;if(typeof Reflect===_0x1c6039(0x1d1)&&typeof Reflect['metadata']===_0x1c6039(0x1cf))return Reflect['metadata'](_0x569da0,_0x33e37f);};function a35_0x4819(_0x3b4947,_0x33a0a7){const _0x542613=a35_0x5426();return a35_0x4819=function(_0x48198c,_0x4e1cc7){_0x48198c=_0x48198c-0x1cd;let _0x3604aa=_0x542613[_0x48198c];return _0x3604aa;},a35_0x4819(_0x3b4947,_0x33a0a7);}Object[a35_0x552eae(0x1d3)](exports,a35_0x552eae(0x1e2),{'value':!![]}),exports[a35_0x552eae(0x1eb)]=void 0x0;const common_1=require(a35_0x552eae(0x1dd)),user_service_1=require('../user/user.service'),jwt_1=require('@nestjs/jwt'),verify_1=require(a35_0x552eae(0x1ee));function a35_0x5426(){const _0x4077b0=['Injectable','length','sub','updatePassword','__decorate','function','sign','object','UserService','defineProperty','1086JhlfUF','12800jtiUGd','getOwnPropertyDescriptor','email','1228793trGKRx','2653602MbDINC','hash','assign','username','@nestjs/common','design:paramtypes','verify','_id','38454795lMKleM','__esModule','log','1982104uVNVmK','decorate','2RazfPZ','10uaSgcm','__metadata','password','1777290jSYcuq','AuthService','JwtService','4620360MbcZni','./verify','user.password,\x20password','userService'];a35_0x5426=function(){return _0x4077b0;};return a35_0x5426();}let AuthService=class AuthService{constructor(_0x30876a,_0x52872a){const _0x2cf852=a35_0x552eae;this[_0x2cf852(0x1f0)]=_0x30876a,this['jwtService']=_0x52872a;}async['validateUser'](_0x15c050,_0x184392){const _0x258b95=a35_0x552eae,_0x5a9458=await this[_0x258b95(0x1f0)]['findUser'](_0x15c050);if(!_0x5a9458)return null;console[_0x258b95(0x1e3)](_0x5a9458[_0x258b95(0x1e9)],_0x184392,_0x258b95(0x1ef));const _0x3c0066=await(0x0,verify_1[_0x258b95(0x1df)])(_0x184392,_0x5a9458[_0x258b95(0x1e9)]);if(_0x5a9458&&_0x3c0066)return _0x5a9458;return null;}async[a35_0x552eae(0x1cd)](_0x5c1c33,{newPassword:_0x39407f}){const _0x4694da=a35_0x552eae,_0x1378d3=await(0x0,verify_1[_0x4694da(0x1da)])(_0x39407f);return await this['userService']['updateUser'](_0x5c1c33[_0x4694da(0x1f3)],Object[_0x4694da(0x1db)](Object['assign']({},_0x5c1c33),{'password':_0x1378d3}));}async['login'](_0x35412a){const _0x2cfd89=a35_0x552eae,_0x473a26={'username':_0x35412a[_0x2cfd89(0x1dc)],'sub':_0x35412a[_0x2cfd89(0x1e0)],'roles':_0x35412a['roles'],'email':_0x35412a[_0x2cfd89(0x1d7)]};return{'access_token':this['jwtService'][_0x2cfd89(0x1d0)](_0x473a26)};}};AuthService=__decorate([(0x0,common_1[a35_0x552eae(0x1f1)])(),__metadata(a35_0x552eae(0x1de),[user_service_1[a35_0x552eae(0x1d2)],jwt_1[a35_0x552eae(0x1ec)]])],AuthService),exports[a35_0x552eae(0x1eb)]=AuthService;