'use strict';const a35_0x5c7bd1=a35_0xe5c1;(function(_0x129976,_0x5c8424){const _0x153c1c=a35_0xe5c1,_0x6398cf=_0x129976();while(!![]){try{const _0x488ce5=-parseInt(_0x153c1c(0xd7))/0x1*(parseInt(_0x153c1c(0xcb))/0x2)+parseInt(_0x153c1c(0xca))/0x3+-parseInt(_0x153c1c(0xc8))/0x4*(parseInt(_0x153c1c(0xed))/0x5)+parseInt(_0x153c1c(0xeb))/0x6*(-parseInt(_0x153c1c(0xc6))/0x7)+-parseInt(_0x153c1c(0xe0))/0x8+parseInt(_0x153c1c(0xd9))/0x9+parseInt(_0x153c1c(0xda))/0xa;if(_0x488ce5===_0x5c8424)break;else _0x6398cf['push'](_0x6398cf['shift']());}catch(_0x227d43){_0x6398cf['push'](_0x6398cf['shift']());}}}(a35_0x31a9,0x3ff7a));var __decorate=this&&this['__decorate']||function(_0x184e49,_0x5e51ca,_0x5a5fac,_0x457cda){const _0x3606e2=a35_0xe5c1;var _0x5e9519=arguments[_0x3606e2(0xe5)],_0x232b89=_0x5e9519<0x3?_0x5e51ca:_0x457cda===null?_0x457cda=Object[_0x3606e2(0xe1)](_0x5e51ca,_0x5a5fac):_0x457cda,_0x4cc932;if(typeof Reflect===_0x3606e2(0xdc)&&typeof Reflect['decorate']===_0x3606e2(0xe2))_0x232b89=Reflect[_0x3606e2(0xcc)](_0x184e49,_0x5e51ca,_0x5a5fac,_0x457cda);else{for(var _0x44c1e9=_0x184e49['length']-0x1;_0x44c1e9>=0x0;_0x44c1e9--)if(_0x4cc932=_0x184e49[_0x44c1e9])_0x232b89=(_0x5e9519<0x3?_0x4cc932(_0x232b89):_0x5e9519>0x3?_0x4cc932(_0x5e51ca,_0x5a5fac,_0x232b89):_0x4cc932(_0x5e51ca,_0x5a5fac))||_0x232b89;}return _0x5e9519>0x3&&_0x232b89&&Object[_0x3606e2(0xe6)](_0x5e51ca,_0x5a5fac,_0x232b89),_0x232b89;},__metadata=this&&this['__metadata']||function(_0x1cfd05,_0x23533f){const _0x267b23=a35_0xe5c1;if(typeof Reflect===_0x267b23(0xdc)&&typeof Reflect[_0x267b23(0xe7)]===_0x267b23(0xe2))return Reflect[_0x267b23(0xe7)](_0x1cfd05,_0x23533f);};function a35_0x31a9(){const _0x1da3b3=['assign','AuthService','userService','../user/user.service','@nestjs/jwt','sign','6473SeKejW','design:paramtypes','3360978FbQBfY','4101170eOUFOX','findUser','object','verify','sub','user.password,\x20password','83376ztFRmQ','getOwnPropertyDescriptor','function','Injectable','roles','length','defineProperty','metadata','hash','./verify','UserService','15654jBdxUb','__esModule','25GiijYM','jwtService','log','1134UGqcLn','validateUser','85232WjyesQ','_id','500850tsnexz','46HamNiZ','decorate','password','@nestjs/common','JwtService','username'];a35_0x31a9=function(){return _0x1da3b3;};return a35_0x31a9();}Object[a35_0x5c7bd1(0xe6)](exports,a35_0x5c7bd1(0xec),{'value':!![]}),exports[a35_0x5c7bd1(0xd2)]=void 0x0;function a35_0xe5c1(_0x271c9e,_0x5c794b){const _0x31a9cc=a35_0x31a9();return a35_0xe5c1=function(_0xe5c19e,_0x99bc87){_0xe5c19e=_0xe5c19e-0xc4;let _0x3b7831=_0x31a9cc[_0xe5c19e];return _0x3b7831;},a35_0xe5c1(_0x271c9e,_0x5c794b);}const common_1=require(a35_0x5c7bd1(0xce)),user_service_1=require(a35_0x5c7bd1(0xd4)),jwt_1=require(a35_0x5c7bd1(0xd5)),verify_1=require(a35_0x5c7bd1(0xe9));let AuthService=class AuthService{constructor(_0x189d97,_0x3238ec){const _0x4bb1ae=a35_0x5c7bd1;this['userService']=_0x189d97,this[_0x4bb1ae(0xc4)]=_0x3238ec;}async[a35_0x5c7bd1(0xc7)](_0x2ea743,_0x43bf21){const _0x5d46aa=a35_0x5c7bd1,_0x2bed77=await this[_0x5d46aa(0xd3)][_0x5d46aa(0xdb)](_0x2ea743);if(!_0x2bed77)return null;console[_0x5d46aa(0xc5)](_0x2bed77[_0x5d46aa(0xcd)],_0x43bf21,_0x5d46aa(0xdf));const _0x45514b=await(0x0,verify_1[_0x5d46aa(0xdd)])(_0x43bf21,_0x2bed77['password']);if(_0x2bed77&&_0x45514b)return _0x2bed77;return null;}async['updatePassword'](_0x462f68,{newPassword:_0x796d23}){const _0x254641=a35_0x5c7bd1,_0x36b192=await(0x0,verify_1[_0x254641(0xe8)])(_0x796d23);return await this['userService']['updateUser'](_0x462f68[_0x254641(0xde)],Object[_0x254641(0xd1)](Object['assign']({},_0x462f68),{'password':_0x36b192}));}async['login'](_0x33bdb7){const _0x3dd5fd=a35_0x5c7bd1,_0x293fd1={'username':_0x33bdb7[_0x3dd5fd(0xd0)],'sub':_0x33bdb7[_0x3dd5fd(0xc9)],'roles':_0x33bdb7[_0x3dd5fd(0xe4)],'email':_0x33bdb7['email']};return{'access_token':this[_0x3dd5fd(0xc4)][_0x3dd5fd(0xd6)](_0x293fd1)};}};AuthService=__decorate([(0x0,common_1[a35_0x5c7bd1(0xe3)])(),__metadata(a35_0x5c7bd1(0xd8),[user_service_1[a35_0x5c7bd1(0xea)],jwt_1[a35_0x5c7bd1(0xcf)]])],AuthService),exports[a35_0x5c7bd1(0xd2)]=AuthService;