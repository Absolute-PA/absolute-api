'use strict';const a35_0x1aa74b=a35_0x2138;(function(_0x3fdfd1,_0x1d13c0){const _0x128059=a35_0x2138,_0x558ad5=_0x3fdfd1();while(!![]){try{const _0x190e63=-parseInt(_0x128059(0xee))/0x1+-parseInt(_0x128059(0x100))/0x2+-parseInt(_0x128059(0xe8))/0x3+parseInt(_0x128059(0xef))/0x4*(-parseInt(_0x128059(0xe7))/0x5)+parseInt(_0x128059(0x101))/0x6+-parseInt(_0x128059(0x108))/0x7*(-parseInt(_0x128059(0xed))/0x8)+parseInt(_0x128059(0xea))/0x9;if(_0x190e63===_0x1d13c0)break;else _0x558ad5['push'](_0x558ad5['shift']());}catch(_0x18c9ac){_0x558ad5['push'](_0x558ad5['shift']());}}}(a35_0x5148,0x666bc));var __decorate=this&&this[a35_0x1aa74b(0xe9)]||function(_0x2cef22,_0x323dd5,_0x426eb8,_0x4822d1){const _0x56bef2=a35_0x1aa74b;var _0x4015ef=arguments[_0x56bef2(0xe0)],_0x1cc31b=_0x4015ef<0x3?_0x323dd5:_0x4822d1===null?_0x4822d1=Object['getOwnPropertyDescriptor'](_0x323dd5,_0x426eb8):_0x4822d1,_0x55d25c;if(typeof Reflect===_0x56bef2(0x104)&&typeof Reflect[_0x56bef2(0xeb)]===_0x56bef2(0xdf))_0x1cc31b=Reflect[_0x56bef2(0xeb)](_0x2cef22,_0x323dd5,_0x426eb8,_0x4822d1);else{for(var _0x11b611=_0x2cef22[_0x56bef2(0xe0)]-0x1;_0x11b611>=0x0;_0x11b611--)if(_0x55d25c=_0x2cef22[_0x11b611])_0x1cc31b=(_0x4015ef<0x3?_0x55d25c(_0x1cc31b):_0x4015ef>0x3?_0x55d25c(_0x323dd5,_0x426eb8,_0x1cc31b):_0x55d25c(_0x323dd5,_0x426eb8))||_0x1cc31b;}return _0x4015ef>0x3&&_0x1cc31b&&Object[_0x56bef2(0xe6)](_0x323dd5,_0x426eb8,_0x1cc31b),_0x1cc31b;},__metadata=this&&this[a35_0x1aa74b(0xfe)]||function(_0x55bbdd,_0x4d87d6){const _0x5b103a=a35_0x1aa74b;if(typeof Reflect===_0x5b103a(0x104)&&typeof Reflect[_0x5b103a(0xf4)]===_0x5b103a(0xdf))return Reflect['metadata'](_0x55bbdd,_0x4d87d6);};Object[a35_0x1aa74b(0xe6)](exports,'__esModule',{'value':!![]}),exports[a35_0x1aa74b(0xe5)]=void 0x0;function a35_0x2138(_0x1a1705,_0x509e79){const _0x514849=a35_0x5148();return a35_0x2138=function(_0x21384d,_0x101cd5){_0x21384d=_0x21384d-0xde;let _0x553c68=_0x514849[_0x21384d];return _0x553c68;},a35_0x2138(_0x1a1705,_0x509e79);}function a35_0x5148(){const _0x39cfc1=['627868tTlhEm','2496126GdLKbZ','sign','userService','object','@nestjs/common','roles','validateUser','182srILyR','../user/user.service','function','length','findUser','design:paramtypes','sub','verify','AuthService','defineProperty','5bXaSWM','1265832iigGHj','__decorate','4933107jmZGKf','decorate','password','218064vcmygN','479036FcFZPX','153688DwfwMg','UserService','updatePassword','login','hash','metadata','jwtService','user.password,\x20password','Injectable','./verify','_id','log','@nestjs/jwt','updateUser','JwtService','__metadata','assign'];a35_0x5148=function(){return _0x39cfc1;};return a35_0x5148();}const common_1=require(a35_0x1aa74b(0x105)),user_service_1=require(a35_0x1aa74b(0xde)),jwt_1=require(a35_0x1aa74b(0xfb)),verify_1=require(a35_0x1aa74b(0xf8));let AuthService=class AuthService{constructor(_0x66bbdf,_0x37c22a){this['userService']=_0x66bbdf,this['jwtService']=_0x37c22a;}async[a35_0x1aa74b(0x107)](_0x9b5cf,_0xfdabc){const _0x472277=a35_0x1aa74b,_0x1c8173=await this[_0x472277(0x103)][_0x472277(0xe1)](_0x9b5cf);if(!_0x1c8173)return null;console[_0x472277(0xfa)](_0x1c8173['password'],_0xfdabc,_0x472277(0xf6));const _0xa8e806=await(0x0,verify_1[_0x472277(0xe4)])(_0xfdabc,_0x1c8173[_0x472277(0xec)]);if(_0x1c8173&&_0xa8e806)return _0x1c8173;return null;}async[a35_0x1aa74b(0xf1)](_0x51a561,{newPassword:_0x118856}){const _0x23793e=a35_0x1aa74b,_0x5e0c35=await(0x0,verify_1[_0x23793e(0xf3)])(_0x118856);return await this['userService'][_0x23793e(0xfc)](_0x51a561[_0x23793e(0xe3)],Object[_0x23793e(0xff)](Object[_0x23793e(0xff)]({},_0x51a561),{'password':_0x5e0c35}));}async[a35_0x1aa74b(0xf2)](_0x197a3e){const _0x574c16=a35_0x1aa74b,_0x16aa3c={'username':_0x197a3e['username'],'sub':_0x197a3e[_0x574c16(0xf9)],'roles':_0x197a3e[_0x574c16(0x106)],'email':_0x197a3e['email']};return{'access_token':this[_0x574c16(0xf5)][_0x574c16(0x102)](_0x16aa3c)};}};AuthService=__decorate([(0x0,common_1[a35_0x1aa74b(0xf7)])(),__metadata(a35_0x1aa74b(0xe2),[user_service_1[a35_0x1aa74b(0xf0)],jwt_1[a35_0x1aa74b(0xfd)]])],AuthService),exports['AuthService']=AuthService;