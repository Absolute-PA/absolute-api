'use strict';function a35_0x1d8c(_0x526660,_0x5e78c1){const _0x11c60a=a35_0x11c6();return a35_0x1d8c=function(_0x1d8c07,_0x451551){_0x1d8c07=_0x1d8c07-0x15b;let _0x2ab4c2=_0x11c60a[_0x1d8c07];return _0x2ab4c2;},a35_0x1d8c(_0x526660,_0x5e78c1);}const a35_0x4d3568=a35_0x1d8c;(function(_0x554669,_0xe79f81){const _0x4a788f=a35_0x1d8c,_0x2f8f34=_0x554669();while(!![]){try{const _0x3849a4=-parseInt(_0x4a788f(0x174))/0x1*(parseInt(_0x4a788f(0x17b))/0x2)+-parseInt(_0x4a788f(0x161))/0x3+parseInt(_0x4a788f(0x171))/0x4+parseInt(_0x4a788f(0x163))/0x5+parseInt(_0x4a788f(0x15f))/0x6+parseInt(_0x4a788f(0x17a))/0x7+parseInt(_0x4a788f(0x173))/0x8*(parseInt(_0x4a788f(0x17c))/0x9);if(_0x3849a4===_0xe79f81)break;else _0x2f8f34['push'](_0x2f8f34['shift']());}catch(_0x4ab003){_0x2f8f34['push'](_0x2f8f34['shift']());}}}(a35_0x11c6,0xa1034));var __decorate=this&&this['__decorate']||function(_0x2e1b20,_0x58a147,_0x4efbec,_0x28fac3){const _0x1de45d=a35_0x1d8c;var _0x496f18=arguments['length'],_0x133bb1=_0x496f18<0x3?_0x58a147:_0x28fac3===null?_0x28fac3=Object[_0x1de45d(0x15b)](_0x58a147,_0x4efbec):_0x28fac3,_0x537e75;if(typeof Reflect===_0x1de45d(0x178)&&typeof Reflect[_0x1de45d(0x176)]===_0x1de45d(0x15c))_0x133bb1=Reflect[_0x1de45d(0x176)](_0x2e1b20,_0x58a147,_0x4efbec,_0x28fac3);else{for(var _0x3c95f2=_0x2e1b20[_0x1de45d(0x160)]-0x1;_0x3c95f2>=0x0;_0x3c95f2--)if(_0x537e75=_0x2e1b20[_0x3c95f2])_0x133bb1=(_0x496f18<0x3?_0x537e75(_0x133bb1):_0x496f18>0x3?_0x537e75(_0x58a147,_0x4efbec,_0x133bb1):_0x537e75(_0x58a147,_0x4efbec))||_0x133bb1;}return _0x496f18>0x3&&_0x133bb1&&Object[_0x1de45d(0x164)](_0x58a147,_0x4efbec,_0x133bb1),_0x133bb1;},__metadata=this&&this[a35_0x4d3568(0x170)]||function(_0x314f0a,_0x2bc6a8){const _0xfc7ecb=a35_0x4d3568;if(typeof Reflect==='object'&&typeof Reflect[_0xfc7ecb(0x16e)]===_0xfc7ecb(0x15c))return Reflect[_0xfc7ecb(0x16e)](_0x314f0a,_0x2bc6a8);};Object[a35_0x4d3568(0x164)](exports,'__esModule',{'value':!![]}),exports[a35_0x4d3568(0x16b)]=void 0x0;const common_1=require('@nestjs/common'),user_service_1=require('../user/user.service'),jwt_1=require(a35_0x4d3568(0x16f)),verify_1=require(a35_0x4d3568(0x162));function a35_0x11c6(){const _0x2bc070=['UserService','metadata','@nestjs/jwt','__metadata','490360NkBHGR','sub','27736rkBPlB','75286DkVMbH','login','decorate','updateUser','object','validateUser','3482066nrWAla','8gLKUNx','1287IRTNmG','hash','JwtService','jwtService','getOwnPropertyDescriptor','function','sign','roles','5394300fmaxLl','length','3367551JCCYNW','./verify','341550hoowst','defineProperty','user.password,\x20password','Injectable','userService','username','log','assign','AuthService','_id'];a35_0x11c6=function(){return _0x2bc070;};return a35_0x11c6();}let AuthService=class AuthService{constructor(_0x2bc502,_0x463445){const _0x1e212b=a35_0x4d3568;this[_0x1e212b(0x167)]=_0x2bc502,this[_0x1e212b(0x17f)]=_0x463445;}async[a35_0x4d3568(0x179)](_0x4b1291,_0x3f640e){const _0x40c64b=a35_0x4d3568,_0x5e5d94=await this[_0x40c64b(0x167)]['findUser'](_0x4b1291);if(!_0x5e5d94)return null;console[_0x40c64b(0x169)](_0x5e5d94['password'],_0x3f640e,_0x40c64b(0x165));const _0x3c48b9=await(0x0,verify_1['verify'])(_0x3f640e,_0x5e5d94['password']);if(_0x5e5d94&&_0x3c48b9)return _0x5e5d94;return null;}async['updatePassword'](_0x45d548,{newPassword:_0x15ec22}){const _0x1ce5bc=a35_0x4d3568,_0x55ea8b=await(0x0,verify_1[_0x1ce5bc(0x17d)])(_0x15ec22);return await this[_0x1ce5bc(0x167)][_0x1ce5bc(0x177)](_0x45d548[_0x1ce5bc(0x172)],Object[_0x1ce5bc(0x16a)](Object[_0x1ce5bc(0x16a)]({},_0x45d548),{'password':_0x55ea8b}));}async[a35_0x4d3568(0x175)](_0x4f7116){const _0x2dca9a=a35_0x4d3568,_0x5dc326={'username':_0x4f7116[_0x2dca9a(0x168)],'sub':_0x4f7116[_0x2dca9a(0x16c)],'roles':_0x4f7116[_0x2dca9a(0x15e)],'email':_0x4f7116['email']};return{'access_token':this[_0x2dca9a(0x17f)][_0x2dca9a(0x15d)](_0x5dc326)};}};AuthService=__decorate([(0x0,common_1[a35_0x4d3568(0x166)])(),__metadata('design:paramtypes',[user_service_1[a35_0x4d3568(0x16d)],jwt_1[a35_0x4d3568(0x17e)]])],AuthService),exports[a35_0x4d3568(0x16b)]=AuthService;