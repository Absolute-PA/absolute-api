'use strict';const a35_0x2d78f2=a35_0x1e45;function a35_0x1e45(_0x5d647f,_0x3deace){const _0x52875c=a35_0x5287();return a35_0x1e45=function(_0x1e45f4,_0x2922c4){_0x1e45f4=_0x1e45f4-0xd0;let _0xa418eb=_0x52875c[_0x1e45f4];return _0xa418eb;},a35_0x1e45(_0x5d647f,_0x3deace);}(function(_0x3df5af,_0x2a0059){const _0x20b77c=a35_0x1e45,_0x56e8e2=_0x3df5af();while(!![]){try{const _0x232fa9=parseInt(_0x20b77c(0xe0))/0x1+parseInt(_0x20b77c(0xe3))/0x2*(parseInt(_0x20b77c(0xdd))/0x3)+-parseInt(_0x20b77c(0xed))/0x4*(-parseInt(_0x20b77c(0xf0))/0x5)+-parseInt(_0x20b77c(0xef))/0x6+-parseInt(_0x20b77c(0xd5))/0x7+parseInt(_0x20b77c(0xd4))/0x8+-parseInt(_0x20b77c(0xe4))/0x9;if(_0x232fa9===_0x2a0059)break;else _0x56e8e2['push'](_0x56e8e2['shift']());}catch(_0x6405e7){_0x56e8e2['push'](_0x56e8e2['shift']());}}}(a35_0x5287,0x19149));var __decorate=this&&this[a35_0x2d78f2(0xd2)]||function(_0x128381,_0x25213f,_0x583979,_0x37851f){const _0x39294b=a35_0x2d78f2;var _0x37653c=arguments[_0x39294b(0xee)],_0x53d50b=_0x37653c<0x3?_0x25213f:_0x37851f===null?_0x37851f=Object[_0x39294b(0xd8)](_0x25213f,_0x583979):_0x37851f,_0x440d80;if(typeof Reflect===_0x39294b(0xec)&&typeof Reflect[_0x39294b(0xd0)]==='function')_0x53d50b=Reflect[_0x39294b(0xd0)](_0x128381,_0x25213f,_0x583979,_0x37851f);else{for(var _0x4e4bd5=_0x128381[_0x39294b(0xee)]-0x1;_0x4e4bd5>=0x0;_0x4e4bd5--)if(_0x440d80=_0x128381[_0x4e4bd5])_0x53d50b=(_0x37653c<0x3?_0x440d80(_0x53d50b):_0x37653c>0x3?_0x440d80(_0x25213f,_0x583979,_0x53d50b):_0x440d80(_0x25213f,_0x583979))||_0x53d50b;}return _0x37653c>0x3&&_0x53d50b&&Object[_0x39294b(0xf9)](_0x25213f,_0x583979,_0x53d50b),_0x53d50b;},__metadata=this&&this[a35_0x2d78f2(0xf3)]||function(_0x4c987b,_0x497644){const _0x1e8a6b=a35_0x2d78f2;if(typeof Reflect===_0x1e8a6b(0xec)&&typeof Reflect[_0x1e8a6b(0xf7)]===_0x1e8a6b(0xf4))return Reflect[_0x1e8a6b(0xf7)](_0x4c987b,_0x497644);};function a35_0x5287(){const _0x35a0d8=['login','__metadata','function','verify','assign','metadata','roles','defineProperty','Injectable','./verify','decorate','userService','__decorate','@nestjs/common','1429496BiDGKg','1338414ckowmX','sign','validateUser','getOwnPropertyDescriptor','design:paramtypes','../user/user.service','AuthService','hash','480057TUhfrD','__esModule','UserService','81182uUbuDI','_id','JwtService','2UJbkoN','838692CmqUfR','user.password,\x20password','updatePassword','email','username','sub','findUser','log','object','125288DGWZfH','length','760410dHlDPi','15JsexUW','jwtService'];a35_0x5287=function(){return _0x35a0d8;};return a35_0x5287();}Object['defineProperty'](exports,a35_0x2d78f2(0xde),{'value':!![]}),exports['AuthService']=void 0x0;const common_1=require(a35_0x2d78f2(0xd3)),user_service_1=require(a35_0x2d78f2(0xda)),jwt_1=require('@nestjs/jwt'),verify_1=require(a35_0x2d78f2(0xfb));let AuthService=class AuthService{constructor(_0x2d605b,_0x514d06){const _0x466ce3=a35_0x2d78f2;this[_0x466ce3(0xd1)]=_0x2d605b,this[_0x466ce3(0xf1)]=_0x514d06;}async[a35_0x2d78f2(0xd7)](_0x344adc,_0x1749a9){const _0x1df058=a35_0x2d78f2,_0x29c200=await this[_0x1df058(0xd1)][_0x1df058(0xea)](_0x344adc);if(!_0x29c200)return null;console[_0x1df058(0xeb)](_0x29c200['password'],_0x1749a9,_0x1df058(0xe5));const _0x4b3bc6=await(0x0,verify_1[_0x1df058(0xf5)])(_0x1749a9,_0x29c200['password']);if(_0x29c200&&_0x4b3bc6)return _0x29c200;return null;}async[a35_0x2d78f2(0xe6)](_0x355ba2,{newPassword:_0x5e43e6}){const _0x55f44d=a35_0x2d78f2,_0x129928=await(0x0,verify_1[_0x55f44d(0xdc)])(_0x5e43e6);return await this[_0x55f44d(0xd1)]['updateUser'](_0x355ba2[_0x55f44d(0xe9)],Object[_0x55f44d(0xf6)](Object[_0x55f44d(0xf6)]({},_0x355ba2),{'password':_0x129928}));}async[a35_0x2d78f2(0xf2)](_0x48ba31){const _0x331974=a35_0x2d78f2,_0x61cb96={'username':_0x48ba31[_0x331974(0xe8)],'sub':_0x48ba31[_0x331974(0xe1)],'roles':_0x48ba31[_0x331974(0xf8)],'email':_0x48ba31[_0x331974(0xe7)]};return{'access_token':this[_0x331974(0xf1)][_0x331974(0xd6)](_0x61cb96)};}};AuthService=__decorate([(0x0,common_1[a35_0x2d78f2(0xfa)])(),__metadata(a35_0x2d78f2(0xd9),[user_service_1[a35_0x2d78f2(0xdf)],jwt_1[a35_0x2d78f2(0xe2)]])],AuthService),exports[a35_0x2d78f2(0xdb)]=AuthService;