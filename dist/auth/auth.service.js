'use strict';function a35_0x55f6(){const _0x25d678=['Injectable','1245123JDdbdZ','904CtUBvX','../user/user.service','userService','metadata','roles','AuthService','390qOsYMG','__metadata','log','1101980gebexM','function','defineProperty','findUser','jwtService','login','382bEYNbV','2207716PIlFri','sub','sign','assign','username','__esModule','@nestjs/common','validateUser','4347712NnBSQI','updateUser','length','object','@nestjs/jwt','10451TKYUXk','160287KqRiKe','password','UserService','decorate','10iHVBRg','JwtService','updatePassword','user.password,\x20password'];a35_0x55f6=function(){return _0x25d678;};return a35_0x55f6();}const a35_0x1504b4=a35_0x2796;(function(_0x16cf3d,_0x24c34b){const _0x1bf60b=a35_0x2796,_0x21c9a5=_0x16cf3d();while(!![]){try{const _0x2a880a=parseInt(_0x1bf60b(0xd3))/0x1*(parseInt(_0x1bf60b(0xba))/0x2)+-parseInt(_0x1bf60b(0xc9))/0x3+-parseInt(_0x1bf60b(0xbb))/0x4+parseInt(_0x1bf60b(0xdc))/0x5+-parseInt(_0x1bf60b(0xd9))/0x6*(parseInt(_0x1bf60b(0xc8))/0x7)+parseInt(_0x1bf60b(0xc3))/0x8+-parseInt(_0x1bf60b(0xd2))/0x9*(-parseInt(_0x1bf60b(0xcd))/0xa);if(_0x2a880a===_0x24c34b)break;else _0x21c9a5['push'](_0x21c9a5['shift']());}catch(_0x3df8ce){_0x21c9a5['push'](_0x21c9a5['shift']());}}}(a35_0x55f6,0x5aef4));var __decorate=this&&this['__decorate']||function(_0x491b84,_0x248ca0,_0x40d2b6,_0x1cacb7){const _0x1ef215=a35_0x2796;var _0x292676=arguments[_0x1ef215(0xc5)],_0x2c320e=_0x292676<0x3?_0x248ca0:_0x1cacb7===null?_0x1cacb7=Object['getOwnPropertyDescriptor'](_0x248ca0,_0x40d2b6):_0x1cacb7,_0x9f3acd;if(typeof Reflect==='object'&&typeof Reflect[_0x1ef215(0xcc)]==='function')_0x2c320e=Reflect[_0x1ef215(0xcc)](_0x491b84,_0x248ca0,_0x40d2b6,_0x1cacb7);else{for(var _0x209c8a=_0x491b84[_0x1ef215(0xc5)]-0x1;_0x209c8a>=0x0;_0x209c8a--)if(_0x9f3acd=_0x491b84[_0x209c8a])_0x2c320e=(_0x292676<0x3?_0x9f3acd(_0x2c320e):_0x292676>0x3?_0x9f3acd(_0x248ca0,_0x40d2b6,_0x2c320e):_0x9f3acd(_0x248ca0,_0x40d2b6))||_0x2c320e;}return _0x292676>0x3&&_0x2c320e&&Object[_0x1ef215(0xde)](_0x248ca0,_0x40d2b6,_0x2c320e),_0x2c320e;},__metadata=this&&this[a35_0x1504b4(0xda)]||function(_0x1b7d94,_0x39143f){const _0x2b8bfc=a35_0x1504b4;if(typeof Reflect===_0x2b8bfc(0xc6)&&typeof Reflect[_0x2b8bfc(0xd6)]===_0x2b8bfc(0xdd))return Reflect[_0x2b8bfc(0xd6)](_0x1b7d94,_0x39143f);};function a35_0x2796(_0x3b770c,_0x21330c){const _0x55f6fa=a35_0x55f6();return a35_0x2796=function(_0x2796f6,_0x1e0a03){_0x2796f6=_0x2796f6-0xba;let _0x133140=_0x55f6fa[_0x2796f6];return _0x133140;},a35_0x2796(_0x3b770c,_0x21330c);}Object['defineProperty'](exports,a35_0x1504b4(0xc0),{'value':!![]}),exports[a35_0x1504b4(0xd8)]=void 0x0;const common_1=require(a35_0x1504b4(0xc1)),user_service_1=require(a35_0x1504b4(0xd4)),jwt_1=require(a35_0x1504b4(0xc7)),verify_1=require('./verify');let AuthService=class AuthService{constructor(_0xc901a5,_0x2200e0){this['userService']=_0xc901a5,this['jwtService']=_0x2200e0;}async[a35_0x1504b4(0xc2)](_0x58560f,_0x1092e1){const _0x2409fa=a35_0x1504b4,_0x2e1bbf=await this[_0x2409fa(0xd5)][_0x2409fa(0xdf)](_0x58560f);if(!_0x2e1bbf)return null;console[_0x2409fa(0xdb)](_0x2e1bbf[_0x2409fa(0xca)],_0x1092e1,_0x2409fa(0xd0));const _0x58daff=await(0x0,verify_1['verify'])(_0x1092e1,_0x2e1bbf[_0x2409fa(0xca)]);if(_0x2e1bbf&&_0x58daff)return _0x2e1bbf;return null;}async[a35_0x1504b4(0xcf)](_0x10a5f2,{newPassword:_0x1d8e36}){const _0x5ceb12=a35_0x1504b4,_0x32fb07=await(0x0,verify_1['hash'])(_0x1d8e36);return await this[_0x5ceb12(0xd5)][_0x5ceb12(0xc4)](_0x10a5f2[_0x5ceb12(0xbc)],Object[_0x5ceb12(0xbe)](Object[_0x5ceb12(0xbe)]({},_0x10a5f2),{'password':_0x32fb07}));}async[a35_0x1504b4(0xe1)](_0x277007){const _0xf50001=a35_0x1504b4,_0x20cf4d={'username':_0x277007[_0xf50001(0xbf)],'sub':_0x277007['_id'],'roles':_0x277007[_0xf50001(0xd7)],'email':_0x277007['email']};return{'access_token':this[_0xf50001(0xe0)][_0xf50001(0xbd)](_0x20cf4d)};}};AuthService=__decorate([(0x0,common_1[a35_0x1504b4(0xd1)])(),__metadata('design:paramtypes',[user_service_1[a35_0x1504b4(0xcb)],jwt_1[a35_0x1504b4(0xce)]])],AuthService),exports[a35_0x1504b4(0xd8)]=AuthService;