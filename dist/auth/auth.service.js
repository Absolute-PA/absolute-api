'use strict';const a35_0x1dedec=a35_0x3a9f;(function(_0x5b836a,_0x3f8d05){const _0x3cb865=a35_0x3a9f,_0x324191=_0x5b836a();while(!![]){try{const _0x42da8b=parseInt(_0x3cb865(0x16f))/0x1+parseInt(_0x3cb865(0x162))/0x2+-parseInt(_0x3cb865(0x167))/0x3+-parseInt(_0x3cb865(0x164))/0x4+-parseInt(_0x3cb865(0x15c))/0x5+parseInt(_0x3cb865(0x161))/0x6+-parseInt(_0x3cb865(0x16c))/0x7*(-parseInt(_0x3cb865(0x16e))/0x8);if(_0x42da8b===_0x3f8d05)break;else _0x324191['push'](_0x324191['shift']());}catch(_0x571506){_0x324191['push'](_0x324191['shift']());}}}(a35_0x38a0,0x426a4));var __decorate=this&&this[a35_0x1dedec(0x163)]||function(_0x423bce,_0x4e2cfa,_0x36337e,_0x655cfa){const _0x2ded9d=a35_0x1dedec;var _0x3d9810=arguments['length'],_0x3be4ef=_0x3d9810<0x3?_0x4e2cfa:_0x655cfa===null?_0x655cfa=Object[_0x2ded9d(0x14e)](_0x4e2cfa,_0x36337e):_0x655cfa,_0x16fe64;if(typeof Reflect==='object'&&typeof Reflect[_0x2ded9d(0x159)]===_0x2ded9d(0x169))_0x3be4ef=Reflect[_0x2ded9d(0x159)](_0x423bce,_0x4e2cfa,_0x36337e,_0x655cfa);else{for(var _0x56fd79=_0x423bce[_0x2ded9d(0x150)]-0x1;_0x56fd79>=0x0;_0x56fd79--)if(_0x16fe64=_0x423bce[_0x56fd79])_0x3be4ef=(_0x3d9810<0x3?_0x16fe64(_0x3be4ef):_0x3d9810>0x3?_0x16fe64(_0x4e2cfa,_0x36337e,_0x3be4ef):_0x16fe64(_0x4e2cfa,_0x36337e))||_0x3be4ef;}return _0x3d9810>0x3&&_0x3be4ef&&Object['defineProperty'](_0x4e2cfa,_0x36337e,_0x3be4ef),_0x3be4ef;},__metadata=this&&this['__metadata']||function(_0x3c2b3c,_0x66b916){const _0x3eeb72=a35_0x1dedec;if(typeof Reflect===_0x3eeb72(0x156)&&typeof Reflect[_0x3eeb72(0x15a)]===_0x3eeb72(0x169))return Reflect[_0x3eeb72(0x15a)](_0x3c2b3c,_0x66b916);};function a35_0x38a0(){const _0x372aac=['userService','sub','updateUser','object','hash','assign','decorate','metadata','../user/user.service','1062210KUwpgc','defineProperty','_id','email','login','1185990DszTMo','906612ifSVWt','__decorate','1452028VpGOsL','sign','username','172152Jmyjvd','./verify','function','design:paramtypes','log','63xNlvbe','validateUser','111464uydqrC','128501rlXZrW','findUser','jwtService','@nestjs/jwt','__esModule','getOwnPropertyDescriptor','roles','length','verify','password'];a35_0x38a0=function(){return _0x372aac;};return a35_0x38a0();}Object[a35_0x1dedec(0x15d)](exports,a35_0x1dedec(0x14d),{'value':!![]}),exports['AuthService']=void 0x0;const common_1=require('@nestjs/common'),user_service_1=require(a35_0x1dedec(0x15b)),jwt_1=require(a35_0x1dedec(0x14c)),verify_1=require(a35_0x1dedec(0x168));function a35_0x3a9f(_0x563b80,_0x25b28d){const _0x38a0b7=a35_0x38a0();return a35_0x3a9f=function(_0x3a9fb5,_0x53a27f){_0x3a9fb5=_0x3a9fb5-0x14b;let _0x2c6a60=_0x38a0b7[_0x3a9fb5];return _0x2c6a60;},a35_0x3a9f(_0x563b80,_0x25b28d);}let AuthService=class AuthService{constructor(_0x8ac469,_0x1a4faa){this['userService']=_0x8ac469,this['jwtService']=_0x1a4faa;}async[a35_0x1dedec(0x16d)](_0x1d131f,_0x58db5a){const _0x5c6203=a35_0x1dedec,_0x24f556=await this[_0x5c6203(0x153)][_0x5c6203(0x170)](_0x1d131f);if(!_0x24f556)return null;console[_0x5c6203(0x16b)](_0x24f556[_0x5c6203(0x152)],_0x58db5a,'user.password,\x20password');const _0x5f0bae=await(0x0,verify_1[_0x5c6203(0x151)])(_0x58db5a,_0x24f556[_0x5c6203(0x152)]);if(_0x24f556&&_0x5f0bae)return _0x24f556;return null;}async['updatePassword'](_0x2da18a,{newPassword:_0x46caac}){const _0x3ab437=a35_0x1dedec,_0x3d48c3=await(0x0,verify_1[_0x3ab437(0x157)])(_0x46caac);return await this[_0x3ab437(0x153)][_0x3ab437(0x155)](_0x2da18a[_0x3ab437(0x154)],Object['assign'](Object[_0x3ab437(0x158)]({},_0x2da18a),{'password':_0x3d48c3}));}async[a35_0x1dedec(0x160)](_0x15ca72){const _0x575f29=a35_0x1dedec,_0x45843f={'username':_0x15ca72[_0x575f29(0x166)],'sub':_0x15ca72[_0x575f29(0x15e)],'roles':_0x15ca72[_0x575f29(0x14f)],'email':_0x15ca72[_0x575f29(0x15f)]};return{'access_token':this[_0x575f29(0x14b)][_0x575f29(0x165)](_0x45843f)};}};AuthService=__decorate([(0x0,common_1['Injectable'])(),__metadata(a35_0x1dedec(0x16a),[user_service_1['UserService'],jwt_1['JwtService']])],AuthService),exports['AuthService']=AuthService;