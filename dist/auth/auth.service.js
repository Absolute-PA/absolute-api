'use strict';const a35_0x1371a6=a35_0x2649;function a35_0x1e12(){const _0xbb36d1=['_id','__decorate','946905FoFnoN','jwtService','object','./verify','length','assign','../user/user.service','roles','verify','7WKXOzp','@nestjs/jwt','1347945BtJpUv','validateUser','sub','1306808jDpELd','userService','JwtService','function','password','11689ZhUStf','design:paramtypes','3468330ZiyHDF','hash','log','updatePassword','username','AuthService','defineProperty','UserService','login','6514012qtDfaR','5075310kEicHx','email','__esModule','104WPhuMo','63AaACfJ','metadata','__metadata','@nestjs/common','getOwnPropertyDescriptor'];a35_0x1e12=function(){return _0xbb36d1;};return a35_0x1e12();}function a35_0x2649(_0x31d0c0,_0x2c7056){const _0x1e12fd=a35_0x1e12();return a35_0x2649=function(_0x264937,_0x4241f2){_0x264937=_0x264937-0x1bc;let _0x54f49e=_0x1e12fd[_0x264937];return _0x54f49e;},a35_0x2649(_0x31d0c0,_0x2c7056);}(function(_0x125465,_0x5c62e8){const _0x11e800=a35_0x2649,_0x5bd355=_0x125465();while(!![]){try{const _0x4fd1f8=-parseInt(_0x11e800(0x1d5))/0x1*(-parseInt(_0x11e800(0x1e4))/0x2)+-parseInt(_0x11e800(0x1cd))/0x3+-parseInt(_0x11e800(0x1e0))/0x4+parseInt(_0x11e800(0x1c2))/0x5+parseInt(_0x11e800(0x1d7))/0x6*(parseInt(_0x11e800(0x1cb))/0x7)+-parseInt(_0x11e800(0x1d0))/0x8*(-parseInt(_0x11e800(0x1e5))/0x9)+parseInt(_0x11e800(0x1e1))/0xa;if(_0x4fd1f8===_0x5c62e8)break;else _0x5bd355['push'](_0x5bd355['shift']());}catch(_0x2397a3){_0x5bd355['push'](_0x5bd355['shift']());}}}(a35_0x1e12,0xe78d2));var __decorate=this&&this[a35_0x1371a6(0x1c1)]||function(_0x122fb1,_0x2e3a57,_0x1d2163,_0x26bed0){const _0x3d7f1f=a35_0x1371a6;var _0x51c063=arguments[_0x3d7f1f(0x1c6)],_0x6da5ee=_0x51c063<0x3?_0x2e3a57:_0x26bed0===null?_0x26bed0=Object[_0x3d7f1f(0x1bf)](_0x2e3a57,_0x1d2163):_0x26bed0,_0x1ed14e;if(typeof Reflect===_0x3d7f1f(0x1c4)&&typeof Reflect['decorate']===_0x3d7f1f(0x1d3))_0x6da5ee=Reflect['decorate'](_0x122fb1,_0x2e3a57,_0x1d2163,_0x26bed0);else{for(var _0x4cc5d1=_0x122fb1[_0x3d7f1f(0x1c6)]-0x1;_0x4cc5d1>=0x0;_0x4cc5d1--)if(_0x1ed14e=_0x122fb1[_0x4cc5d1])_0x6da5ee=(_0x51c063<0x3?_0x1ed14e(_0x6da5ee):_0x51c063>0x3?_0x1ed14e(_0x2e3a57,_0x1d2163,_0x6da5ee):_0x1ed14e(_0x2e3a57,_0x1d2163))||_0x6da5ee;}return _0x51c063>0x3&&_0x6da5ee&&Object['defineProperty'](_0x2e3a57,_0x1d2163,_0x6da5ee),_0x6da5ee;},__metadata=this&&this[a35_0x1371a6(0x1bd)]||function(_0x460bfe,_0x313b71){const _0x2a60db=a35_0x1371a6;if(typeof Reflect===_0x2a60db(0x1c4)&&typeof Reflect[_0x2a60db(0x1bc)]==='function')return Reflect[_0x2a60db(0x1bc)](_0x460bfe,_0x313b71);};Object[a35_0x1371a6(0x1dd)](exports,a35_0x1371a6(0x1e3),{'value':!![]}),exports[a35_0x1371a6(0x1dc)]=void 0x0;const common_1=require(a35_0x1371a6(0x1be)),user_service_1=require(a35_0x1371a6(0x1c8)),jwt_1=require(a35_0x1371a6(0x1cc)),verify_1=require(a35_0x1371a6(0x1c5));let AuthService=class AuthService{constructor(_0x980442,_0x55a046){const _0x359be3=a35_0x1371a6;this[_0x359be3(0x1d1)]=_0x980442,this[_0x359be3(0x1c3)]=_0x55a046;}async[a35_0x1371a6(0x1ce)](_0x4f9813,_0x16b646){const _0x478183=a35_0x1371a6,_0x74f76d=await this[_0x478183(0x1d1)]['findUser'](_0x4f9813);if(!_0x74f76d)return null;console[_0x478183(0x1d9)](_0x74f76d[_0x478183(0x1d4)],_0x16b646,'user.password,\x20password');const _0x18f3a9=await(0x0,verify_1[_0x478183(0x1ca)])(_0x16b646,_0x74f76d[_0x478183(0x1d4)]);if(_0x74f76d&&_0x18f3a9)return _0x74f76d;return null;}async[a35_0x1371a6(0x1da)](_0x5c6d78,{newPassword:_0x4646b7}){const _0x5ed9fd=a35_0x1371a6,_0x105d00=await(0x0,verify_1[_0x5ed9fd(0x1d8)])(_0x4646b7);return await this[_0x5ed9fd(0x1d1)]['updateUser'](_0x5c6d78[_0x5ed9fd(0x1cf)],Object[_0x5ed9fd(0x1c7)](Object[_0x5ed9fd(0x1c7)]({},_0x5c6d78),{'password':_0x105d00}));}async[a35_0x1371a6(0x1df)](_0x1979be){const _0xe1078b=a35_0x1371a6,_0x29893b={'username':_0x1979be[_0xe1078b(0x1db)],'sub':_0x1979be[_0xe1078b(0x1c0)],'roles':_0x1979be[_0xe1078b(0x1c9)],'email':_0x1979be[_0xe1078b(0x1e2)]};return{'access_token':this[_0xe1078b(0x1c3)]['sign'](_0x29893b)};}};AuthService=__decorate([(0x0,common_1['Injectable'])(),__metadata(a35_0x1371a6(0x1d6),[user_service_1[a35_0x1371a6(0x1de)],jwt_1[a35_0x1371a6(0x1d2)]])],AuthService),exports['AuthService']=AuthService;