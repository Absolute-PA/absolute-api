'use strict';function a33_0x286b(){const _0x135b82=['reflector','Bearer','3981016kgjtWM','decorate','__decorate','1505oncWAf','jwtService','14xWAEDQ','switchToHttp','getHandler','function','9668FsnDYm','env','Reflector','extractTokenFromHeader','metadata','authorization','split','10TzekMp','@nestjs/jwt','__metadata','8765qHHDXg','verifyAsync','@nestjs/core','object','user','1680ZlRyNn','getRequest','UnauthorizedException','3439539OUEmeh','defineProperty','Injectable','1174446WSbqaX','AuthGuard','log','getAllAndOverride','getOwnPropertyDescriptor','JwtService','867GskSWc','design:paramtypes','length','__esModule','getClass','10302633DUVvJm'];a33_0x286b=function(){return _0x135b82;};return a33_0x286b();}const a33_0x5a1ab4=a33_0xd1b0;function a33_0xd1b0(_0x252b56,_0x2622a7){const _0x286b43=a33_0x286b();return a33_0xd1b0=function(_0xd1b071,_0x3ac983){_0xd1b071=_0xd1b071-0x18c;let _0x45a735=_0x286b43[_0xd1b071];return _0x45a735;},a33_0xd1b0(_0x252b56,_0x2622a7);}(function(_0xe7d520,_0x1ee054){const _0x3b5d0f=a33_0xd1b0,_0x3a1d83=_0xe7d520();while(!![]){try{const _0xae1ded=-parseInt(_0x3b5d0f(0x1ab))/0x1*(parseInt(_0x3b5d0f(0x19d))/0x2)+parseInt(_0x3b5d0f(0x190))/0x3*(parseInt(_0x3b5d0f(0x1a1))/0x4)+-parseInt(_0x3b5d0f(0x19b))/0x5*(parseInt(_0x3b5d0f(0x1b0))/0x6)+-parseInt(_0x3b5d0f(0x1b6))/0x7+-parseInt(_0x3b5d0f(0x198))/0x8+parseInt(_0x3b5d0f(0x1b3))/0x9*(-parseInt(_0x3b5d0f(0x1a8))/0xa)+parseInt(_0x3b5d0f(0x195))/0xb;if(_0xae1ded===_0x1ee054)break;else _0x3a1d83['push'](_0x3a1d83['shift']());}catch(_0x45ff59){_0x3a1d83['push'](_0x3a1d83['shift']());}}}(a33_0x286b,0x6be31));var __decorate=this&&this[a33_0x5a1ab4(0x19a)]||function(_0x3ebff5,_0x50473d,_0x11b352,_0x472ef2){const _0x309583=a33_0x5a1ab4;var _0x23d899=arguments[_0x309583(0x192)],_0x3ab363=_0x23d899<0x3?_0x50473d:_0x472ef2===null?_0x472ef2=Object[_0x309583(0x18e)](_0x50473d,_0x11b352):_0x472ef2,_0x105bdf;if(typeof Reflect===_0x309583(0x1ae)&&typeof Reflect[_0x309583(0x199)]===_0x309583(0x1a0))_0x3ab363=Reflect['decorate'](_0x3ebff5,_0x50473d,_0x11b352,_0x472ef2);else{for(var _0x5ef694=_0x3ebff5[_0x309583(0x192)]-0x1;_0x5ef694>=0x0;_0x5ef694--)if(_0x105bdf=_0x3ebff5[_0x5ef694])_0x3ab363=(_0x23d899<0x3?_0x105bdf(_0x3ab363):_0x23d899>0x3?_0x105bdf(_0x50473d,_0x11b352,_0x3ab363):_0x105bdf(_0x50473d,_0x11b352))||_0x3ab363;}return _0x23d899>0x3&&_0x3ab363&&Object[_0x309583(0x1b4)](_0x50473d,_0x11b352,_0x3ab363),_0x3ab363;},__metadata=this&&this[a33_0x5a1ab4(0x1aa)]||function(_0x58b35b,_0x345465){const _0x4a6ee8=a33_0x5a1ab4;if(typeof Reflect===_0x4a6ee8(0x1ae)&&typeof Reflect[_0x4a6ee8(0x1a5)]===_0x4a6ee8(0x1a0))return Reflect['metadata'](_0x58b35b,_0x345465);};Object['defineProperty'](exports,a33_0x5a1ab4(0x193),{'value':!![]}),exports[a33_0x5a1ab4(0x1b7)]=void 0x0;const common_1=require('@nestjs/common'),core_1=require(a33_0x5a1ab4(0x1ad)),jwt_1=require(a33_0x5a1ab4(0x1a9)),public_decorator_1=require('./decorators/public.decorator');let AuthGuard=class AuthGuard{constructor(_0x27bec5,_0x478f78){const _0x385656=a33_0x5a1ab4;this[_0x385656(0x19c)]=_0x27bec5,this[_0x385656(0x196)]=_0x478f78;}async['canActivate'](_0x353be5){const _0x414158=a33_0x5a1ab4,_0x23fb81=this[_0x414158(0x196)][_0x414158(0x18d)](public_decorator_1['IS_PUBLIC_KEY'],[_0x353be5[_0x414158(0x19f)](),_0x353be5[_0x414158(0x194)]()]);if(_0x23fb81)return!![];const _0x13ecae=_0x353be5[_0x414158(0x19e)]()[_0x414158(0x1b1)](),_0x56c53e=this['extractTokenFromHeader'](_0x13ecae);if(!_0x56c53e)throw new common_1['UnauthorizedException']();try{const _0xedddcd=await this['jwtService'][_0x414158(0x1ac)](_0x56c53e,{'secret':process[_0x414158(0x1a2)]['JWT_SECRET']});_0x13ecae[_0x414158(0x1af)]=_0xedddcd;}catch(_0x2b9e88){console[_0x414158(0x18c)](_0x2b9e88);throw new common_1[(_0x414158(0x1b2))]();}return!![];}[a33_0x5a1ab4(0x1a4)](_0x4ed566){const _0x1571f9=a33_0x5a1ab4;var _0x5abcd1,_0xdf6bd2;const [_0x1b0957,_0xd30885]=(_0xdf6bd2=(_0x5abcd1=_0x4ed566['headers'][_0x1571f9(0x1a6)])===null||_0x5abcd1===void 0x0?void 0x0:_0x5abcd1[_0x1571f9(0x1a7)]('\x20'))!==null&&_0xdf6bd2!==void 0x0?_0xdf6bd2:[];return _0x1b0957===_0x1571f9(0x197)?_0xd30885:undefined;}};AuthGuard=__decorate([(0x0,common_1[a33_0x5a1ab4(0x1b5)])(),__metadata(a33_0x5a1ab4(0x191),[jwt_1[a33_0x5a1ab4(0x18f)],core_1[a33_0x5a1ab4(0x1a3)]])],AuthGuard),exports[a33_0x5a1ab4(0x1b7)]=AuthGuard;