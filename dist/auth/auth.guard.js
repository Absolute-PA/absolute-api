'use strict';const a33_0x39f1f8=a33_0x2816;function a33_0x3034(){const _0x5dc1b9=['authorization','__esModule','getOwnPropertyDescriptor','Injectable','1079304DEaPqs','getHandler','jwtService','7wzzuAr','design:paramtypes','metadata','__decorate','defineProperty','495040kxVrVO','2aAKlEO','split','user','extractTokenFromHeader','48719iatczu','165216tCuNcT','reflector','310437LJLLbY','./decorators/public.decorator','getAllAndOverride','function','UnauthorizedException','getClass','decorate','2237712fbsBMf','env','Reflector','Bearer','canActivate','2020500fTLJkF','object','@nestjs/common','70Pifubq','length','JWT_SECRET','getRequest','log','AuthGuard','IS_PUBLIC_KEY'];a33_0x3034=function(){return _0x5dc1b9;};return a33_0x3034();}(function(_0x1786b9,_0x273e3e){const _0x1b9175=a33_0x2816,_0x49e688=_0x1786b9();while(!![]){try{const _0x4c99a9=parseInt(_0x1b9175(0x154))/0x1*(parseInt(_0x1b9175(0x150))/0x2)+parseInt(_0x1b9175(0x155))/0x3+parseInt(_0x1b9175(0x171))/0x4+parseInt(_0x1b9175(0x179))/0x5+-parseInt(_0x1b9175(0x163))/0x6+-parseInt(_0x1b9175(0x174))/0x7*(-parseInt(_0x1b9175(0x15e))/0x8)+parseInt(_0x1b9175(0x157))/0x9*(-parseInt(_0x1b9175(0x166))/0xa);if(_0x4c99a9===_0x273e3e)break;else _0x49e688['push'](_0x49e688['shift']());}catch(_0x28c895){_0x49e688['push'](_0x49e688['shift']());}}}(a33_0x3034,0x2a83a));function a33_0x2816(_0x3657d1,_0x4a65b3){const _0x3034e6=a33_0x3034();return a33_0x2816=function(_0x281611,_0x1f348c){_0x281611=_0x281611-0x150;let _0x47f238=_0x3034e6[_0x281611];return _0x47f238;},a33_0x2816(_0x3657d1,_0x4a65b3);}var __decorate=this&&this[a33_0x39f1f8(0x177)]||function(_0x5c7fb5,_0x387c41,_0x406940,_0x2e08e5){const _0x33c510=a33_0x39f1f8;var _0x34dc34=arguments[_0x33c510(0x167)],_0x2a1a63=_0x34dc34<0x3?_0x387c41:_0x2e08e5===null?_0x2e08e5=Object[_0x33c510(0x16f)](_0x387c41,_0x406940):_0x2e08e5,_0x596a21;if(typeof Reflect===_0x33c510(0x164)&&typeof Reflect['decorate']===_0x33c510(0x15a))_0x2a1a63=Reflect[_0x33c510(0x15d)](_0x5c7fb5,_0x387c41,_0x406940,_0x2e08e5);else{for(var _0x214240=_0x5c7fb5[_0x33c510(0x167)]-0x1;_0x214240>=0x0;_0x214240--)if(_0x596a21=_0x5c7fb5[_0x214240])_0x2a1a63=(_0x34dc34<0x3?_0x596a21(_0x2a1a63):_0x34dc34>0x3?_0x596a21(_0x387c41,_0x406940,_0x2a1a63):_0x596a21(_0x387c41,_0x406940))||_0x2a1a63;}return _0x34dc34>0x3&&_0x2a1a63&&Object[_0x33c510(0x178)](_0x387c41,_0x406940,_0x2a1a63),_0x2a1a63;},__metadata=this&&this['__metadata']||function(_0xbac208,_0x37af18){const _0x35723c=a33_0x39f1f8;if(typeof Reflect===_0x35723c(0x164)&&typeof Reflect[_0x35723c(0x176)]===_0x35723c(0x15a))return Reflect[_0x35723c(0x176)](_0xbac208,_0x37af18);};Object[a33_0x39f1f8(0x178)](exports,a33_0x39f1f8(0x16e),{'value':!![]}),exports[a33_0x39f1f8(0x16b)]=void 0x0;const common_1=require(a33_0x39f1f8(0x165)),core_1=require('@nestjs/core'),jwt_1=require('@nestjs/jwt'),public_decorator_1=require(a33_0x39f1f8(0x158));let AuthGuard=class AuthGuard{constructor(_0x507629,_0x1389f2){const _0x295748=a33_0x39f1f8;this[_0x295748(0x173)]=_0x507629,this[_0x295748(0x156)]=_0x1389f2;}async[a33_0x39f1f8(0x162)](_0x5ddaf3){const _0x191a85=a33_0x39f1f8,_0x5cf478=this[_0x191a85(0x156)][_0x191a85(0x159)](public_decorator_1[_0x191a85(0x16c)],[_0x5ddaf3[_0x191a85(0x172)](),_0x5ddaf3[_0x191a85(0x15c)]()]);if(_0x5cf478)return!![];const _0x2c5e79=_0x5ddaf3['switchToHttp']()[_0x191a85(0x169)](),_0x100a5e=this[_0x191a85(0x153)](_0x2c5e79);if(!_0x100a5e)throw new common_1['UnauthorizedException']();try{const _0x7a0178=await this[_0x191a85(0x173)]['verifyAsync'](_0x100a5e,{'secret':process[_0x191a85(0x15f)][_0x191a85(0x168)]});_0x2c5e79[_0x191a85(0x152)]=_0x7a0178;}catch(_0x1e74af){console[_0x191a85(0x16a)](_0x1e74af);throw new common_1[(_0x191a85(0x15b))]();}return!![];}['extractTokenFromHeader'](_0x2e6f6d){const _0x15c7b9=a33_0x39f1f8;var _0x2db942,_0x27d355;const [_0x3387a0,_0x5bd8b1]=(_0x27d355=(_0x2db942=_0x2e6f6d['headers'][_0x15c7b9(0x16d)])===null||_0x2db942===void 0x0?void 0x0:_0x2db942[_0x15c7b9(0x151)]('\x20'))!==null&&_0x27d355!==void 0x0?_0x27d355:[];return _0x3387a0===_0x15c7b9(0x161)?_0x5bd8b1:undefined;}};AuthGuard=__decorate([(0x0,common_1[a33_0x39f1f8(0x170)])(),__metadata(a33_0x39f1f8(0x175),[jwt_1['JwtService'],core_1[a33_0x39f1f8(0x160)]])],AuthGuard),exports['AuthGuard']=AuthGuard;