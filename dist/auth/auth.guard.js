'use strict';function a33_0x1228(){const _0x4556b3=['log','verifyAsync','./decorators/public.decorator','AuthGuard','616977yHReMU','@nestjs/core','__decorate','Injectable','object','getOwnPropertyDescriptor','3615416KTpJwh','JWT_SECRET','@nestjs/jwt','9294978QXujCV','Bearer','UnauthorizedException','authorization','1638468IyubTu','reflector','getAllAndOverride','length','headers','defineProperty','split','function','canActivate','decorate','__metadata','2059645jlKRPa','@nestjs/common','jwtService','__esModule','IS_PUBLIC_KEY','584082ZjviGp','JwtService','5623542TatfQO','Reflector'];a33_0x1228=function(){return _0x4556b3;};return a33_0x1228();}const a33_0x3fcb13=a33_0x3fa6;(function(_0x160f23,_0x4bdf78){const _0x49a6a9=a33_0x3fa6,_0x543c65=_0x160f23();while(!![]){try{const _0x4f0122=parseInt(_0x49a6a9(0x74))/0x1+-parseInt(_0x49a6a9(0x81))/0x2+-parseInt(_0x49a6a9(0x6c))/0x3+parseInt(_0x49a6a9(0x7a))/0x4+parseInt(_0x49a6a9(0x67))/0x5+parseInt(_0x49a6a9(0x6e))/0x6+-parseInt(_0x49a6a9(0x7d))/0x7;if(_0x4f0122===_0x4bdf78)break;else _0x543c65['push'](_0x543c65['shift']());}catch(_0x555d99){_0x543c65['push'](_0x543c65['shift']());}}}(a33_0x1228,0x80f6b));function a33_0x3fa6(_0x1c7430,_0x93c109){const _0x122864=a33_0x1228();return a33_0x3fa6=function(_0x3fa69b,_0x577dbd){_0x3fa69b=_0x3fa69b-0x64;let _0x35dbbd=_0x122864[_0x3fa69b];return _0x35dbbd;},a33_0x3fa6(_0x1c7430,_0x93c109);}var __decorate=this&&this[a33_0x3fcb13(0x76)]||function(_0xea79c8,_0x43a9f8,_0x918b4c,_0x2d6c30){const _0x1b277f=a33_0x3fcb13;var _0x42de24=arguments[_0x1b277f(0x84)],_0x132a46=_0x42de24<0x3?_0x43a9f8:_0x2d6c30===null?_0x2d6c30=Object[_0x1b277f(0x79)](_0x43a9f8,_0x918b4c):_0x2d6c30,_0x5cfa94;if(typeof Reflect==='object'&&typeof Reflect[_0x1b277f(0x65)]===_0x1b277f(0x88))_0x132a46=Reflect[_0x1b277f(0x65)](_0xea79c8,_0x43a9f8,_0x918b4c,_0x2d6c30);else{for(var _0x3dd16b=_0xea79c8[_0x1b277f(0x84)]-0x1;_0x3dd16b>=0x0;_0x3dd16b--)if(_0x5cfa94=_0xea79c8[_0x3dd16b])_0x132a46=(_0x42de24<0x3?_0x5cfa94(_0x132a46):_0x42de24>0x3?_0x5cfa94(_0x43a9f8,_0x918b4c,_0x132a46):_0x5cfa94(_0x43a9f8,_0x918b4c))||_0x132a46;}return _0x42de24>0x3&&_0x132a46&&Object[_0x1b277f(0x86)](_0x43a9f8,_0x918b4c,_0x132a46),_0x132a46;},__metadata=this&&this[a33_0x3fcb13(0x66)]||function(_0x49b1e7,_0x272c98){const _0x157c0d=a33_0x3fcb13;if(typeof Reflect===_0x157c0d(0x78)&&typeof Reflect['metadata']===_0x157c0d(0x88))return Reflect['metadata'](_0x49b1e7,_0x272c98);};Object[a33_0x3fcb13(0x86)](exports,a33_0x3fcb13(0x6a),{'value':!![]}),exports[a33_0x3fcb13(0x73)]=void 0x0;const common_1=require(a33_0x3fcb13(0x68)),core_1=require(a33_0x3fcb13(0x75)),jwt_1=require(a33_0x3fcb13(0x7c)),public_decorator_1=require(a33_0x3fcb13(0x72));let AuthGuard=class AuthGuard{constructor(_0x1f8b11,_0x1ead7f){const _0x52a9d8=a33_0x3fcb13;this[_0x52a9d8(0x69)]=_0x1f8b11,this[_0x52a9d8(0x82)]=_0x1ead7f;}async[a33_0x3fcb13(0x64)](_0x2f2232){const _0x4247ec=a33_0x3fcb13,_0x1acb30=this[_0x4247ec(0x82)][_0x4247ec(0x83)](public_decorator_1[_0x4247ec(0x6b)],[_0x2f2232['getHandler'](),_0x2f2232['getClass']()]);if(_0x1acb30)return!![];const _0xb7ec14=_0x2f2232['switchToHttp']()['getRequest'](),_0x5754b1=this['extractTokenFromHeader'](_0xb7ec14);if(!_0x5754b1)throw new common_1['UnauthorizedException']();try{const _0x241ff4=await this[_0x4247ec(0x69)][_0x4247ec(0x71)](_0x5754b1,{'secret':process['env'][_0x4247ec(0x7b)]});_0xb7ec14['user']=_0x241ff4;}catch(_0x1cb8c3){console[_0x4247ec(0x70)](_0x1cb8c3);throw new common_1[(_0x4247ec(0x7f))]();}return!![];}['extractTokenFromHeader'](_0x299a5c){const _0x5dfec3=a33_0x3fcb13;var _0x5ccdfd,_0x19f905;const [_0x128f4a,_0x4f6ee0]=(_0x19f905=(_0x5ccdfd=_0x299a5c[_0x5dfec3(0x85)][_0x5dfec3(0x80)])===null||_0x5ccdfd===void 0x0?void 0x0:_0x5ccdfd[_0x5dfec3(0x87)]('\x20'))!==null&&_0x19f905!==void 0x0?_0x19f905:[];return _0x128f4a===_0x5dfec3(0x7e)?_0x4f6ee0:undefined;}};AuthGuard=__decorate([(0x0,common_1[a33_0x3fcb13(0x77)])(),__metadata('design:paramtypes',[jwt_1[a33_0x3fcb13(0x6d)],core_1[a33_0x3fcb13(0x6f)]])],AuthGuard),exports[a33_0x3fcb13(0x73)]=AuthGuard;