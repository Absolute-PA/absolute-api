'use strict';const a120_0x22fe9a=a120_0x2eaf;(function(_0x2ac82f,_0x6c2034){const _0x361b7f=a120_0x2eaf,_0x14322f=_0x2ac82f();while(!![]){try{const _0x38a1a5=-parseInt(_0x361b7f(0xae))/0x1+parseInt(_0x361b7f(0x9b))/0x2*(-parseInt(_0x361b7f(0x82))/0x3)+parseInt(_0x361b7f(0x8a))/0x4*(parseInt(_0x361b7f(0x93))/0x5)+parseInt(_0x361b7f(0x9c))/0x6*(parseInt(_0x361b7f(0x86))/0x7)+-parseInt(_0x361b7f(0xa2))/0x8*(parseInt(_0x361b7f(0xac))/0x9)+parseInt(_0x361b7f(0xb2))/0xa*(parseInt(_0x361b7f(0xa4))/0xb)+-parseInt(_0x361b7f(0x7f))/0xc*(-parseInt(_0x361b7f(0xc5))/0xd);if(_0x38a1a5===_0x6c2034)break;else _0x14322f['push'](_0x14322f['shift']());}catch(_0x33b17f){_0x14322f['push'](_0x14322f['shift']());}}}(a120_0x4e2b,0x410c8));var __decorate=this&&this[a120_0x22fe9a(0xc2)]||function(_0x5339b7,_0x18aed4,_0x12ce45,_0x1c93c5){const _0x2526e6=a120_0x22fe9a;var _0x5238c4=arguments['length'],_0x4559b5=_0x5238c4<0x3?_0x18aed4:_0x1c93c5===null?_0x1c93c5=Object[_0x2526e6(0xa6)](_0x18aed4,_0x12ce45):_0x1c93c5,_0x32ff4f;if(typeof Reflect===_0x2526e6(0x76)&&typeof Reflect[_0x2526e6(0xaf)]==='function')_0x4559b5=Reflect[_0x2526e6(0xaf)](_0x5339b7,_0x18aed4,_0x12ce45,_0x1c93c5);else{for(var _0x288865=_0x5339b7[_0x2526e6(0x7c)]-0x1;_0x288865>=0x0;_0x288865--)if(_0x32ff4f=_0x5339b7[_0x288865])_0x4559b5=(_0x5238c4<0x3?_0x32ff4f(_0x4559b5):_0x5238c4>0x3?_0x32ff4f(_0x18aed4,_0x12ce45,_0x4559b5):_0x32ff4f(_0x18aed4,_0x12ce45))||_0x4559b5;}return _0x5238c4>0x3&&_0x4559b5&&Object[_0x2526e6(0xa0)](_0x18aed4,_0x12ce45,_0x4559b5),_0x4559b5;},__metadata=this&&this[a120_0x22fe9a(0x78)]||function(_0x4c6605,_0x43c0d5){const _0x182d4e=a120_0x22fe9a;if(typeof Reflect===_0x182d4e(0x76)&&typeof Reflect[_0x182d4e(0xc6)]==='function')return Reflect[_0x182d4e(0xc6)](_0x4c6605,_0x43c0d5);},__param=this&&this[a120_0x22fe9a(0xbe)]||function(_0xca51c0,_0x56e281){return function(_0x12c084,_0x56c2d1){_0x56e281(_0x12c084,_0x56c2d1,_0xca51c0);};};Object[a120_0x22fe9a(0xa0)](exports,a120_0x22fe9a(0x9d),{'value':!![]}),exports[a120_0x22fe9a(0xb0)]=void 0x0;function a120_0x2eaf(_0x5c522a,_0x3f2ea7){const _0x4e2b53=a120_0x4e2b();return a120_0x2eaf=function(_0x2eaf73,_0x1f17b4){_0x2eaf73=_0x2eaf73-0x72;let _0x4114a3=_0x4e2b53[_0x2eaf73];return _0x4114a3;},a120_0x2eaf(_0x5c522a,_0x3f2ea7);}function a120_0x4e2b(){const _0x3c6ed7=['SettingController','User','32090QupQlZ','Invalid\x20license\x20key','./dto','findFirst','./dto/user-setting.dto','./setting.service','Body','setting','licenseKey','../auth/enums/role.enum','Post','stderr','__param','../auth/decorators/roles.decorator','update',':id/user-setting','__decorate','maxUser','Role','299aVsIUN','metadata','design:type','Param','@nestjs/common','data','prototype','object','./mappers/setting.mapper','__metadata','Admin','SettingService','initalize','length','validateLicenseKey','../auth/guards/jwt.guard','318672hyKzIY','isExpired','create','656025hIKFYC','log','/update','Viewer','32683nZbEEr','BadRequestException','Get','updateCode','8sBQmcT','../auth/guards/roles.guard','RolesGuard','/kill-jobs','killJobs','settingService','design:returntype','stdin','design:paramtypes','862085JLqlxl','child_process','Success\x20request\x20update\x20app\x20to\x20latest\x20version','isValid','mapSettingDocumentToDto','stdout','UseGuards','Patch','2ELCVMZ','174gOuyMO','__esModule','expiryDate','Controller','defineProperty','updateUserSetting','55392SVhabO','Max\x20user\x20must\x20be\x20a\x20number','143nZccoG','JwtAuthGuard','getOwnPropertyDescriptor','schoolId','UpdateSettingDto','error','Roles','pm2\x20restart\x20startUI\x20startApi','261zUQOdl',':id/license','446829XGbCoV','decorate'];a120_0x4e2b=function(){return _0x3c6ed7;};return a120_0x4e2b();}const common_1=require(a120_0x22fe9a(0x73)),setting_service_1=require(a120_0x22fe9a(0xb7)),dto_1=require(a120_0x22fe9a(0xb4)),roles_decorator_1=require(a120_0x22fe9a(0xbf)),role_enum_1=require(a120_0x22fe9a(0xbb)),jwt_guard_1=require(a120_0x22fe9a(0x7e)),roles_guard_1=require(a120_0x22fe9a(0x8b)),setting_mapper_1=require(a120_0x22fe9a(0x77)),child_process_1=require(a120_0x22fe9a(0x94)),user_setting_dto_1=require(a120_0x22fe9a(0xb6));let SettingController=class SettingController{constructor(_0xc78b52){const _0x3dd708=a120_0x22fe9a;this[_0x3dd708(0x8f)]=_0xc78b52,this['initalize']();}async[a120_0x22fe9a(0xb5)](){const _0x395784=a120_0x22fe9a,_0x5259b2=await this['settingService'][_0x395784(0xb5)](),_0x508782=this[_0x395784(0x8f)][_0x395784(0x7d)](_0x5259b2[_0x395784(0xba)],_0x5259b2['schoolId']);return(0x0,setting_mapper_1[_0x395784(0x97)])(_0x5259b2,_0x508782[_0x395784(0x9e)]);}async[a120_0x22fe9a(0x89)](){const _0x2ac797=a120_0x22fe9a,_0x403ce5=(0x0,child_process_1['exec'])(_0x2ac797(0xab));return console['log'](_0x2ac797(0x95)),_0x403ce5[_0x2ac797(0x98)]['on'](_0x2ac797(0xa9),_0x37b743=>{const _0x31f2ad=_0x2ac797;console[_0x31f2ad(0x83)](_0x37b743);}),_0x403ce5[_0x2ac797(0x91)]['on'](_0x2ac797(0xa9),_0x358a43=>{const _0x5237c8=_0x2ac797;console[_0x5237c8(0x83)](_0x358a43);}),_0x403ce5[_0x2ac797(0xbd)]['on'](_0x2ac797(0x74),_0x5d8646=>{const _0x606e5a=_0x2ac797;console[_0x606e5a(0x83)](_0x5d8646);}),_0x2ac797(0x95);}async[a120_0x22fe9a(0xc0)](_0x3d80a7,_0x197a76){const _0x1a8051=a120_0x22fe9a,_0x22870f=this[_0x1a8051(0x8f)][_0x1a8051(0x7d)](_0x197a76[_0x1a8051(0xba)],_0x197a76[_0x1a8051(0xa7)]);if(!_0x22870f[_0x1a8051(0x96)])throw new common_1[(_0x1a8051(0x87))](_0x1a8051(0xb3));_0x197a76[_0x1a8051(0x80)]=![];const _0x1ce29f=await this[_0x1a8051(0x8f)][_0x1a8051(0xc0)](_0x3d80a7,_0x197a76);return(0x0,setting_mapper_1[_0x1a8051(0x97)])(_0x1ce29f,_0x22870f[_0x1a8051(0x9e)]);}async[a120_0x22fe9a(0xa1)](_0x322571,_0x1b4c92){const _0x2322ef=a120_0x22fe9a;_0x1b4c92[_0x2322ef(0xc3)]=+_0x1b4c92[_0x2322ef(0xc3)];if(isNaN(_0x1b4c92[_0x2322ef(0xc3)]))throw new common_1[(_0x2322ef(0x87))](_0x2322ef(0xa3));const _0x130445=await this[_0x2322ef(0x8f)]['updateUserSetting'](_0x1b4c92);return _0x130445['userSetting'];}async[a120_0x22fe9a(0x8e)](){const _0x123c1f=a120_0x22fe9a;await this['settingService'][_0x123c1f(0x8e)]();}async[a120_0x22fe9a(0x7b)](){const _0x16d4ab=a120_0x22fe9a,_0x6edc9a=await this[_0x16d4ab(0x8f)]['findFirst']();!_0x6edc9a&&await this[_0x16d4ab(0x8f)][_0x16d4ab(0x81)]({'schoolId':'','licenseKey':'','isExpired':!![]});}};__decorate([(0x0,common_1[a120_0x22fe9a(0x88)])('/'),(0x0,common_1[a120_0x22fe9a(0x99)])(jwt_guard_1[a120_0x22fe9a(0xa5)],roles_guard_1[a120_0x22fe9a(0x8c)]),(0x0,roles_decorator_1[a120_0x22fe9a(0xaa)])(role_enum_1[a120_0x22fe9a(0xc4)][a120_0x22fe9a(0x79)],role_enum_1[a120_0x22fe9a(0xc4)][a120_0x22fe9a(0xb1)],role_enum_1[a120_0x22fe9a(0xc4)][a120_0x22fe9a(0x85)]),__metadata('design:type',Function),__metadata(a120_0x22fe9a(0x92),[]),__metadata(a120_0x22fe9a(0x90),Promise)],SettingController[a120_0x22fe9a(0x75)],a120_0x22fe9a(0xb5),null),__decorate([(0x0,common_1[a120_0x22fe9a(0xbc)])(a120_0x22fe9a(0x84)),(0x0,common_1[a120_0x22fe9a(0x99)])(jwt_guard_1[a120_0x22fe9a(0xa5)],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1[a120_0x22fe9a(0xaa)])(role_enum_1['Role']['Admin'],role_enum_1['Role'][a120_0x22fe9a(0xb1)]),__metadata(a120_0x22fe9a(0xc7),Function),__metadata(a120_0x22fe9a(0x92),[]),__metadata(a120_0x22fe9a(0x90),Promise)],SettingController[a120_0x22fe9a(0x75)],a120_0x22fe9a(0x89),null),__decorate([(0x0,common_1['Patch'])(a120_0x22fe9a(0xad)),(0x0,common_1[a120_0x22fe9a(0x99)])(jwt_guard_1[a120_0x22fe9a(0xa5)],roles_guard_1[a120_0x22fe9a(0x8c)]),(0x0,roles_decorator_1[a120_0x22fe9a(0xaa)])(role_enum_1[a120_0x22fe9a(0xc4)][a120_0x22fe9a(0x79)],role_enum_1['Role']['User']),__param(0x0,(0x0,common_1['Param'])('id')),__param(0x1,(0x0,common_1[a120_0x22fe9a(0xb8)])()),__metadata(a120_0x22fe9a(0xc7),Function),__metadata(a120_0x22fe9a(0x92),[String,dto_1[a120_0x22fe9a(0xa8)]]),__metadata('design:returntype',Promise)],SettingController[a120_0x22fe9a(0x75)],a120_0x22fe9a(0xc0),null),__decorate([(0x0,common_1[a120_0x22fe9a(0x9a)])(a120_0x22fe9a(0xc1)),(0x0,common_1[a120_0x22fe9a(0x99)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1[a120_0x22fe9a(0xaa)])(role_enum_1[a120_0x22fe9a(0xc4)]['Master']),__param(0x0,(0x0,common_1[a120_0x22fe9a(0x72)])('id')),__param(0x1,(0x0,common_1[a120_0x22fe9a(0xb8)])()),__metadata('design:type',Function),__metadata(a120_0x22fe9a(0x92),[String,user_setting_dto_1['UserSettingDto']]),__metadata(a120_0x22fe9a(0x90),Promise)],SettingController[a120_0x22fe9a(0x75)],a120_0x22fe9a(0xa1),null),__decorate([(0x0,common_1[a120_0x22fe9a(0xbc)])(a120_0x22fe9a(0x8d)),(0x0,common_1[a120_0x22fe9a(0x99)])(jwt_guard_1[a120_0x22fe9a(0xa5)],roles_guard_1[a120_0x22fe9a(0x8c)]),(0x0,roles_decorator_1['Roles'])(role_enum_1[a120_0x22fe9a(0xc4)]['Admin'],role_enum_1[a120_0x22fe9a(0xc4)][a120_0x22fe9a(0xb1)]),__metadata(a120_0x22fe9a(0xc7),Function),__metadata(a120_0x22fe9a(0x92),[]),__metadata(a120_0x22fe9a(0x90),Promise)],SettingController[a120_0x22fe9a(0x75)],a120_0x22fe9a(0x8e),null),SettingController=__decorate([(0x0,common_1[a120_0x22fe9a(0x9f)])(a120_0x22fe9a(0xb9)),__metadata(a120_0x22fe9a(0x92),[setting_service_1[a120_0x22fe9a(0x7a)]])],SettingController),exports[a120_0x22fe9a(0xb0)]=SettingController;