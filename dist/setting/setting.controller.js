'use strict';const a123_0x3623ad=a123_0x3ee3;(function(_0x4ea0ae,_0x4bc4d5){const _0x1be494=a123_0x3ee3,_0x2f6cab=_0x4ea0ae();while(!![]){try{const _0x1e85fc=parseInt(_0x1be494(0x145))/0x1+-parseInt(_0x1be494(0x13b))/0x2*(parseInt(_0x1be494(0x14e))/0x3)+-parseInt(_0x1be494(0x14b))/0x4+parseInt(_0x1be494(0x12c))/0x5*(parseInt(_0x1be494(0x129))/0x6)+-parseInt(_0x1be494(0x155))/0x7+parseInt(_0x1be494(0x118))/0x8*(parseInt(_0x1be494(0x11a))/0x9)+parseInt(_0x1be494(0x11f))/0xa;if(_0x1e85fc===_0x4bc4d5)break;else _0x2f6cab['push'](_0x2f6cab['shift']());}catch(_0x436ab3){_0x2f6cab['push'](_0x2f6cab['shift']());}}}(a123_0x5544,0xdc572));function a123_0x5544(){const _0x3ba21b=['isExpired','__metadata','create','function','Roles','Viewer','killJobs','updateUserSetting','Admin','metadata','defineProperty','Patch','584mPoeDv','BadRequestException','71451tvoBNc','../auth/guards/jwt.guard','mapSettingDocumentToDto','licenseKey','findFirst','9509980SSXQkq','@nestjs/common','./setting.service','child_process','Body','../auth/decorators/roles.decorator','SettingController','/kill-jobs','stderr','expiryDate','2877756qWwyEG','settingService','Success\x20request\x20update\x20app\x20to\x20latest\x20version','15waeXwf','pm2\x20restart\x20startUI\x20startApi','__param','Max\x20user\x20must\x20be\x20a\x20number','design:paramtypes','log',':id/license','./dto','stdin','decorate','design:returntype','design:type','UserSettingDto','SettingService','../auth/guards/roles.guard','5242ZIMERa','/update',':id/user-setting','update','prototype','UpdateSettingDto','Post','object','./dto/user-setting.dto','validateLicenseKey','1665269wQmQIP','JwtAuthGuard','exec','UseGuards','RolesGuard','Param','5536248cqTGex','Role','schoolId','885oOsMUK','userSetting','maxUser','Master','data','updateCode','error','11024447cnkflT','length','initalize','User','Controller','stdout'];a123_0x5544=function(){return _0x3ba21b;};return a123_0x5544();}var __decorate=this&&this['__decorate']||function(_0x8a7f43,_0x49a03f,_0x157b06,_0x1c189f){const _0x205e7e=a123_0x3ee3;var _0x26532c=arguments[_0x205e7e(0x156)],_0x42aba7=_0x26532c<0x3?_0x49a03f:_0x1c189f===null?_0x1c189f=Object['getOwnPropertyDescriptor'](_0x49a03f,_0x157b06):_0x1c189f,_0x51b113;if(typeof Reflect===_0x205e7e(0x142)&&typeof Reflect[_0x205e7e(0x135)]===_0x205e7e(0x15e))_0x42aba7=Reflect[_0x205e7e(0x135)](_0x8a7f43,_0x49a03f,_0x157b06,_0x1c189f);else{for(var _0x58051f=_0x8a7f43['length']-0x1;_0x58051f>=0x0;_0x58051f--)if(_0x51b113=_0x8a7f43[_0x58051f])_0x42aba7=(_0x26532c<0x3?_0x51b113(_0x42aba7):_0x26532c>0x3?_0x51b113(_0x49a03f,_0x157b06,_0x42aba7):_0x51b113(_0x49a03f,_0x157b06))||_0x42aba7;}return _0x26532c>0x3&&_0x42aba7&&Object[_0x205e7e(0x165)](_0x49a03f,_0x157b06,_0x42aba7),_0x42aba7;},__metadata=this&&this[a123_0x3623ad(0x15c)]||function(_0x5262c8,_0x504034){const _0x65f362=a123_0x3623ad;if(typeof Reflect==='object'&&typeof Reflect[_0x65f362(0x164)]===_0x65f362(0x15e))return Reflect[_0x65f362(0x164)](_0x5262c8,_0x504034);},__param=this&&this[a123_0x3623ad(0x12e)]||function(_0x284700,_0x23b982){return function(_0x293a45,_0x5cd844){_0x23b982(_0x293a45,_0x5cd844,_0x284700);};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a123_0x3623ad(0x125)]=void 0x0;const common_1=require(a123_0x3623ad(0x120)),setting_service_1=require(a123_0x3623ad(0x121)),dto_1=require(a123_0x3623ad(0x133)),roles_decorator_1=require(a123_0x3623ad(0x124)),role_enum_1=require('../auth/enums/role.enum'),jwt_guard_1=require(a123_0x3623ad(0x11b)),roles_guard_1=require(a123_0x3623ad(0x13a)),setting_mapper_1=require('./mappers/setting.mapper'),child_process_1=require(a123_0x3623ad(0x122)),user_setting_dto_1=require(a123_0x3623ad(0x143));function a123_0x3ee3(_0x43d342,_0x2617b2){const _0x55441f=a123_0x5544();return a123_0x3ee3=function(_0x3ee383,_0x5a091d){_0x3ee383=_0x3ee383-0x118;let _0x4b710f=_0x55441f[_0x3ee383];return _0x4b710f;},a123_0x3ee3(_0x43d342,_0x2617b2);}let SettingController=class SettingController{constructor(_0x243223){const _0xca32ac=a123_0x3623ad;this['settingService']=_0x243223,this[_0xca32ac(0x157)]();}async[a123_0x3623ad(0x11e)](){const _0x27f3c5=a123_0x3623ad,_0x598167=await this['settingService'][_0x27f3c5(0x11e)](),_0x54602f=this['settingService'][_0x27f3c5(0x144)](_0x598167[_0x27f3c5(0x11d)],_0x598167[_0x27f3c5(0x14d)]);return(0x0,setting_mapper_1[_0x27f3c5(0x11c)])(_0x598167,_0x54602f[_0x27f3c5(0x128)]);}async[a123_0x3623ad(0x153)](){const _0x3aa1d5=a123_0x3623ad,_0x3abb00=(0x0,child_process_1[_0x3aa1d5(0x147)])(_0x3aa1d5(0x12d));return console[_0x3aa1d5(0x131)](_0x3aa1d5(0x12b)),_0x3abb00[_0x3aa1d5(0x15a)]['on'](_0x3aa1d5(0x154),_0x1bdeba=>{const _0x48fc0c=_0x3aa1d5;console[_0x48fc0c(0x131)](_0x1bdeba);}),_0x3abb00[_0x3aa1d5(0x134)]['on'](_0x3aa1d5(0x154),_0x1b9299=>{const _0x25dc3f=_0x3aa1d5;console[_0x25dc3f(0x131)](_0x1b9299);}),_0x3abb00[_0x3aa1d5(0x127)]['on'](_0x3aa1d5(0x152),_0x43e468=>{const _0x42bc40=_0x3aa1d5;console[_0x42bc40(0x131)](_0x43e468);}),'Success\x20request\x20update\x20app\x20to\x20latest\x20version';}async[a123_0x3623ad(0x13e)](_0x2ff15e,_0x14dd23){const _0x10ddcf=a123_0x3623ad,_0x2416f1=this[_0x10ddcf(0x12a)][_0x10ddcf(0x144)](_0x14dd23[_0x10ddcf(0x11d)],_0x14dd23[_0x10ddcf(0x14d)]);if(!_0x2416f1['isValid'])throw new common_1[(_0x10ddcf(0x119))]('Invalid\x20license\x20key');_0x14dd23[_0x10ddcf(0x15b)]=![];const _0x1129aa=await this[_0x10ddcf(0x12a)][_0x10ddcf(0x13e)](_0x2ff15e,_0x14dd23);return(0x0,setting_mapper_1['mapSettingDocumentToDto'])(_0x1129aa,_0x2416f1[_0x10ddcf(0x128)]);}async[a123_0x3623ad(0x162)](_0xcf0ae0,_0x20c984){const _0x49b105=a123_0x3623ad;_0x20c984[_0x49b105(0x150)]=+_0x20c984[_0x49b105(0x150)];if(isNaN(_0x20c984['maxUser']))throw new common_1[(_0x49b105(0x119))](_0x49b105(0x12f));const _0x48efe3=await this[_0x49b105(0x12a)]['updateUserSetting'](_0x20c984);return _0x48efe3[_0x49b105(0x14f)];}async['killJobs'](){const _0xe63b8e=a123_0x3623ad;await this[_0xe63b8e(0x12a)][_0xe63b8e(0x161)]();}async['initalize'](){const _0x2b1460=a123_0x3623ad,_0x477ca7=await this[_0x2b1460(0x12a)][_0x2b1460(0x11e)]();!_0x477ca7&&await this[_0x2b1460(0x12a)][_0x2b1460(0x15d)]({'schoolId':'','licenseKey':'','isExpired':!![]});}};__decorate([(0x0,common_1['Get'])('/'),(0x0,common_1[a123_0x3623ad(0x148)])(jwt_guard_1[a123_0x3623ad(0x146)],roles_guard_1[a123_0x3623ad(0x149)]),(0x0,roles_decorator_1[a123_0x3623ad(0x15f)])(role_enum_1[a123_0x3623ad(0x14c)][a123_0x3623ad(0x163)],role_enum_1[a123_0x3623ad(0x14c)][a123_0x3623ad(0x158)],role_enum_1[a123_0x3623ad(0x14c)][a123_0x3623ad(0x160)]),__metadata(a123_0x3623ad(0x137),Function),__metadata('design:paramtypes',[]),__metadata(a123_0x3623ad(0x136),Promise)],SettingController[a123_0x3623ad(0x13f)],a123_0x3623ad(0x11e),null),__decorate([(0x0,common_1['Post'])(a123_0x3623ad(0x13c)),(0x0,common_1[a123_0x3623ad(0x148)])(jwt_guard_1[a123_0x3623ad(0x146)],roles_guard_1[a123_0x3623ad(0x149)]),(0x0,roles_decorator_1[a123_0x3623ad(0x15f)])(role_enum_1['Role'][a123_0x3623ad(0x163)],role_enum_1[a123_0x3623ad(0x14c)][a123_0x3623ad(0x158)]),__metadata('design:type',Function),__metadata(a123_0x3623ad(0x130),[]),__metadata(a123_0x3623ad(0x136),Promise)],SettingController['prototype'],a123_0x3623ad(0x153),null),__decorate([(0x0,common_1[a123_0x3623ad(0x166)])(a123_0x3623ad(0x132)),(0x0,common_1[a123_0x3623ad(0x148)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1[a123_0x3623ad(0x15f)])(role_enum_1[a123_0x3623ad(0x14c)][a123_0x3623ad(0x163)],role_enum_1[a123_0x3623ad(0x14c)]['User']),__param(0x0,(0x0,common_1['Param'])('id')),__param(0x1,(0x0,common_1[a123_0x3623ad(0x123)])()),__metadata('design:type',Function),__metadata(a123_0x3623ad(0x130),[String,dto_1[a123_0x3623ad(0x140)]]),__metadata(a123_0x3623ad(0x136),Promise)],SettingController[a123_0x3623ad(0x13f)],'update',null),__decorate([(0x0,common_1[a123_0x3623ad(0x166)])(a123_0x3623ad(0x13d)),(0x0,common_1[a123_0x3623ad(0x148)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a123_0x3623ad(0x149)]),(0x0,roles_decorator_1['Roles'])(role_enum_1['Role'][a123_0x3623ad(0x151)]),__param(0x0,(0x0,common_1[a123_0x3623ad(0x14a)])('id')),__param(0x1,(0x0,common_1['Body'])()),__metadata(a123_0x3623ad(0x137),Function),__metadata(a123_0x3623ad(0x130),[String,user_setting_dto_1[a123_0x3623ad(0x138)]]),__metadata(a123_0x3623ad(0x136),Promise)],SettingController['prototype'],a123_0x3623ad(0x162),null),__decorate([(0x0,common_1[a123_0x3623ad(0x141)])(a123_0x3623ad(0x126)),(0x0,common_1[a123_0x3623ad(0x148)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a123_0x3623ad(0x149)]),(0x0,roles_decorator_1[a123_0x3623ad(0x15f)])(role_enum_1[a123_0x3623ad(0x14c)][a123_0x3623ad(0x163)],role_enum_1[a123_0x3623ad(0x14c)][a123_0x3623ad(0x158)]),__metadata('design:type',Function),__metadata(a123_0x3623ad(0x130),[]),__metadata(a123_0x3623ad(0x136),Promise)],SettingController[a123_0x3623ad(0x13f)],a123_0x3623ad(0x161),null),SettingController=__decorate([(0x0,common_1[a123_0x3623ad(0x159)])('setting'),__metadata(a123_0x3623ad(0x130),[setting_service_1[a123_0x3623ad(0x139)]])],SettingController),exports[a123_0x3623ad(0x125)]=SettingController;