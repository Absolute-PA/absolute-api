'use strict';const a120_0x4d9ea4=a120_0x212d;(function(_0x4f80e4,_0x28344e){const _0x139a6f=a120_0x212d,_0x2a2276=_0x4f80e4();while(!![]){try{const _0x4a898e=-parseInt(_0x139a6f(0x146))/0x1+-parseInt(_0x139a6f(0x12d))/0x2*(parseInt(_0x139a6f(0x12a))/0x3)+-parseInt(_0x139a6f(0x11f))/0x4*(-parseInt(_0x139a6f(0x144))/0x5)+-parseInt(_0x139a6f(0x134))/0x6*(parseInt(_0x139a6f(0x13e))/0x7)+parseInt(_0x139a6f(0x131))/0x8*(parseInt(_0x139a6f(0x153))/0x9)+parseInt(_0x139a6f(0x126))/0xa*(parseInt(_0x139a6f(0x141))/0xb)+-parseInt(_0x139a6f(0x132))/0xc*(-parseInt(_0x139a6f(0x15b))/0xd);if(_0x4a898e===_0x28344e)break;else _0x2a2276['push'](_0x2a2276['shift']());}catch(_0x1308b9){_0x2a2276['push'](_0x2a2276['shift']());}}}(a120_0x1867,0x9cf02));var __decorate=this&&this['__decorate']||function(_0x148c16,_0x31ec08,_0x50dd8a,_0x271fd6){const _0x13f059=a120_0x212d;var _0x3f3924=arguments['length'],_0x4df8c8=_0x3f3924<0x3?_0x31ec08:_0x271fd6===null?_0x271fd6=Object[_0x13f059(0x14d)](_0x31ec08,_0x50dd8a):_0x271fd6,_0x2fe414;if(typeof Reflect==='object'&&typeof Reflect[_0x13f059(0x137)]==='function')_0x4df8c8=Reflect[_0x13f059(0x137)](_0x148c16,_0x31ec08,_0x50dd8a,_0x271fd6);else{for(var _0x202858=_0x148c16['length']-0x1;_0x202858>=0x0;_0x202858--)if(_0x2fe414=_0x148c16[_0x202858])_0x4df8c8=(_0x3f3924<0x3?_0x2fe414(_0x4df8c8):_0x3f3924>0x3?_0x2fe414(_0x31ec08,_0x50dd8a,_0x4df8c8):_0x2fe414(_0x31ec08,_0x50dd8a))||_0x4df8c8;}return _0x3f3924>0x3&&_0x4df8c8&&Object[_0x13f059(0x159)](_0x31ec08,_0x50dd8a,_0x4df8c8),_0x4df8c8;},__metadata=this&&this[a120_0x4d9ea4(0x11b)]||function(_0x5bdb88,_0x2a03af){const _0x415094=a120_0x4d9ea4;if(typeof Reflect===_0x415094(0x123)&&typeof Reflect['metadata']===_0x415094(0x136))return Reflect['metadata'](_0x5bdb88,_0x2a03af);},__param=this&&this['__param']||function(_0x51bdcf,_0x3d9294){return function(_0x152617,_0xb69db6){_0x3d9294(_0x152617,_0xb69db6,_0x51bdcf);};};Object[a120_0x4d9ea4(0x159)](exports,a120_0x4d9ea4(0x156),{'value':!![]}),exports[a120_0x4d9ea4(0x13c)]=void 0x0;const common_1=require(a120_0x4d9ea4(0x143)),setting_service_1=require(a120_0x4d9ea4(0x116)),dto_1=require(a120_0x4d9ea4(0x133)),roles_decorator_1=require(a120_0x4d9ea4(0x158)),role_enum_1=require('../auth/enums/role.enum'),jwt_guard_1=require(a120_0x4d9ea4(0x15d)),roles_guard_1=require('../auth/guards/roles.guard'),setting_mapper_1=require(a120_0x4d9ea4(0x11c)),child_process_1=require(a120_0x4d9ea4(0x138)),user_setting_dto_1=require(a120_0x4d9ea4(0x145));let SettingController=class SettingController{constructor(_0x3e746f){const _0x334972=a120_0x4d9ea4;this['settingService']=_0x3e746f,this[_0x334972(0x119)]();}async['findFirst'](){const _0x53b294=a120_0x4d9ea4,_0x20b5ff=await this[_0x53b294(0x13b)][_0x53b294(0x113)](),_0x3aaeb0=this[_0x53b294(0x13b)][_0x53b294(0x15f)](_0x20b5ff[_0x53b294(0x155)],_0x20b5ff[_0x53b294(0x117)]);return(0x0,setting_mapper_1['mapSettingDocumentToDto'])(_0x20b5ff,_0x3aaeb0['expiryDate']);}async[a120_0x4d9ea4(0x111)](){const _0x93b8e6=a120_0x4d9ea4,_0x2ed58c=(0x0,child_process_1[_0x93b8e6(0x122)])(_0x93b8e6(0x11a));return console[_0x93b8e6(0x15a)]('Success\x20request\x20update\x20app\x20to\x20latest\x20version'),_0x2ed58c[_0x93b8e6(0x13f)]['on'](_0x93b8e6(0x154),_0x44dd13=>{const _0x563a1c=_0x93b8e6;console[_0x563a1c(0x15a)](_0x44dd13);}),_0x2ed58c[_0x93b8e6(0x142)]['on'](_0x93b8e6(0x154),_0x3967e9=>{const _0x1b749b=_0x93b8e6;console[_0x1b749b(0x15a)](_0x3967e9);}),_0x2ed58c['stderr']['on'](_0x93b8e6(0x147),_0x36933d=>{console['log'](_0x36933d);}),'Success\x20request\x20update\x20app\x20to\x20latest\x20version';}async['update'](_0x5b804f,_0x1f43d2){const _0x58608b=a120_0x4d9ea4,_0x602a9f=this[_0x58608b(0x13b)][_0x58608b(0x15f)](_0x1f43d2[_0x58608b(0x155)],_0x1f43d2[_0x58608b(0x117)]);if(!_0x602a9f[_0x58608b(0x149)])throw new common_1[(_0x58608b(0x112))](_0x58608b(0x12b));_0x1f43d2[_0x58608b(0x130)]=![];const _0x3f3b84=await this['settingService'][_0x58608b(0x11d)](_0x5b804f,_0x1f43d2);return(0x0,setting_mapper_1[_0x58608b(0x14c)])(_0x3f3b84,_0x602a9f[_0x58608b(0x139)]);}async[a120_0x4d9ea4(0x129)](_0x12c52d,_0x1a202c){const _0x4e16d5=a120_0x4d9ea4;_0x1a202c['maxUser']=+_0x1a202c[_0x4e16d5(0x140)];if(isNaN(_0x1a202c[_0x4e16d5(0x140)]))throw new common_1['BadRequestException'](_0x4e16d5(0x150));const _0x14bd3e=await this[_0x4e16d5(0x13b)]['updateUserSetting'](_0x1a202c);return _0x14bd3e[_0x4e16d5(0x124)];}async['killJobs'](){const _0x4247f2=a120_0x4d9ea4;await this['settingService'][_0x4247f2(0x12e)]();}async['initalize'](){const _0x212ae7=a120_0x4d9ea4,_0x167a0b=await this[_0x212ae7(0x13b)][_0x212ae7(0x113)]();!_0x167a0b&&await this[_0x212ae7(0x13b)][_0x212ae7(0x13d)]({'schoolId':'','licenseKey':'','isExpired':!![]});}};function a120_0x212d(_0x1124de,_0x5f0641){const _0x18676b=a120_0x1867();return a120_0x212d=function(_0x212d79,_0x49182a){_0x212d79=_0x212d79-0x10f;let _0x3c54a7=_0x18676b[_0x212d79];return _0x3c54a7;},a120_0x212d(_0x1124de,_0x5f0641);}__decorate([(0x0,common_1[a120_0x4d9ea4(0x115)])('/'),(0x0,common_1[a120_0x4d9ea4(0x12c)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a120_0x4d9ea4(0x15e)]),(0x0,roles_decorator_1['Roles'])(role_enum_1[a120_0x4d9ea4(0x125)][a120_0x4d9ea4(0x14a)],role_enum_1[a120_0x4d9ea4(0x125)][a120_0x4d9ea4(0x12f)],role_enum_1[a120_0x4d9ea4(0x125)][a120_0x4d9ea4(0x127)]),__metadata(a120_0x4d9ea4(0x152),Function),__metadata(a120_0x4d9ea4(0x15c),[]),__metadata(a120_0x4d9ea4(0x120),Promise)],SettingController[a120_0x4d9ea4(0x11e)],a120_0x4d9ea4(0x113),null),__decorate([(0x0,common_1[a120_0x4d9ea4(0x10f)])('/update'),(0x0,common_1['UseGuards'])(jwt_guard_1[a120_0x4d9ea4(0x14e)],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1[a120_0x4d9ea4(0x118)])(role_enum_1['Role']['Admin'],role_enum_1['Role'][a120_0x4d9ea4(0x12f)]),__metadata(a120_0x4d9ea4(0x152),Function),__metadata(a120_0x4d9ea4(0x15c),[]),__metadata('design:returntype',Promise)],SettingController[a120_0x4d9ea4(0x11e)],'updateCode',null),__decorate([(0x0,common_1[a120_0x4d9ea4(0x13a)])(a120_0x4d9ea4(0x151)),(0x0,common_1['UseGuards'])(jwt_guard_1[a120_0x4d9ea4(0x14e)],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1['Roles'])(role_enum_1[a120_0x4d9ea4(0x125)]['Admin'],role_enum_1[a120_0x4d9ea4(0x125)][a120_0x4d9ea4(0x12f)]),__param(0x0,(0x0,common_1[a120_0x4d9ea4(0x14b)])('id')),__param(0x1,(0x0,common_1[a120_0x4d9ea4(0x148)])()),__metadata(a120_0x4d9ea4(0x152),Function),__metadata(a120_0x4d9ea4(0x15c),[String,dto_1[a120_0x4d9ea4(0x121)]]),__metadata(a120_0x4d9ea4(0x120),Promise)],SettingController[a120_0x4d9ea4(0x11e)],a120_0x4d9ea4(0x11d),null),__decorate([(0x0,common_1['Patch'])(a120_0x4d9ea4(0x114)),(0x0,common_1[a120_0x4d9ea4(0x12c)])(jwt_guard_1[a120_0x4d9ea4(0x14e)],roles_guard_1[a120_0x4d9ea4(0x15e)]),(0x0,roles_decorator_1[a120_0x4d9ea4(0x118)])(role_enum_1[a120_0x4d9ea4(0x125)][a120_0x4d9ea4(0x135)]),__param(0x0,(0x0,common_1[a120_0x4d9ea4(0x14b)])('id')),__param(0x1,(0x0,common_1[a120_0x4d9ea4(0x148)])()),__metadata(a120_0x4d9ea4(0x152),Function),__metadata(a120_0x4d9ea4(0x15c),[String,user_setting_dto_1[a120_0x4d9ea4(0x157)]]),__metadata(a120_0x4d9ea4(0x120),Promise)],SettingController[a120_0x4d9ea4(0x11e)],a120_0x4d9ea4(0x129),null),__decorate([(0x0,common_1['Post'])(a120_0x4d9ea4(0x14f)),(0x0,common_1[a120_0x4d9ea4(0x12c)])(jwt_guard_1[a120_0x4d9ea4(0x14e)],roles_guard_1[a120_0x4d9ea4(0x15e)]),(0x0,roles_decorator_1['Roles'])(role_enum_1[a120_0x4d9ea4(0x125)][a120_0x4d9ea4(0x14a)],role_enum_1['Role'][a120_0x4d9ea4(0x12f)]),__metadata(a120_0x4d9ea4(0x152),Function),__metadata('design:paramtypes',[]),__metadata(a120_0x4d9ea4(0x120),Promise)],SettingController[a120_0x4d9ea4(0x11e)],a120_0x4d9ea4(0x12e),null),SettingController=__decorate([(0x0,common_1[a120_0x4d9ea4(0x110)])(a120_0x4d9ea4(0x128)),__metadata('design:paramtypes',[setting_service_1['SettingService']])],SettingController),exports[a120_0x4d9ea4(0x13c)]=SettingController;function a120_0x1867(){const _0x524b82=['UserSettingDto','../auth/decorators/roles.decorator','defineProperty','log','442HIesiU','design:paramtypes','../auth/guards/jwt.guard','RolesGuard','validateLicenseKey','Post','Controller','updateCode','BadRequestException','findFirst',':id/user-setting','Get','./setting.service','schoolId','Roles','initalize','pm2\x20restart\x20startUI\x20startApi','__metadata','./mappers/setting.mapper','update','prototype','4kvcFEA','design:returntype','UpdateSettingDto','exec','object','userSetting','Role','40hRShlt','Viewer','setting','updateUserSetting','414KPHqQU','Invalid\x20license\x20key','UseGuards','15124nzZmaU','killJobs','User','isExpired','336fBapix','512868NdiPXU','./dto','6bgralX','Master','function','decorate','child_process','expiryDate','Patch','settingService','SettingController','create','2482074hbCQGv','stdout','maxUser','236137yJAwgS','stdin','@nestjs/common','5377855McYqDd','./dto/user-setting.dto','1108857qZJOsI','data','Body','isValid','Admin','Param','mapSettingDocumentToDto','getOwnPropertyDescriptor','JwtAuthGuard','/kill-jobs','Max\x20user\x20must\x20be\x20a\x20number',':id/license','design:type','114696jOKmrE','error','licenseKey','__esModule'];a120_0x1867=function(){return _0x524b82;};return a120_0x1867();}