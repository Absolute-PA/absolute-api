'use strict';const a120_0x5b52a2=a120_0x4f97;(function(_0x1620e3,_0x1fd63c){const _0xee4a46=a120_0x4f97,_0x21dbfe=_0x1620e3();while(!![]){try{const _0x236cdf=parseInt(_0xee4a46(0x1ff))/0x1*(parseInt(_0xee4a46(0x224))/0x2)+-parseInt(_0xee4a46(0x226))/0x3+-parseInt(_0xee4a46(0x215))/0x4+-parseInt(_0xee4a46(0x20e))/0x5+parseInt(_0xee4a46(0x1e4))/0x6*(-parseInt(_0xee4a46(0x20b))/0x7)+-parseInt(_0xee4a46(0x1fd))/0x8*(-parseInt(_0xee4a46(0x22b))/0x9)+parseInt(_0xee4a46(0x201))/0xa;if(_0x236cdf===_0x1fd63c)break;else _0x21dbfe['push'](_0x21dbfe['shift']());}catch(_0x23110e){_0x21dbfe['push'](_0x21dbfe['shift']());}}}(a120_0x5501,0x781d9));function a120_0x4f97(_0x3f6cb3,_0x4b9ebc){const _0x550100=a120_0x5501();return a120_0x4f97=function(_0x4f976a,_0x406913){_0x4f976a=_0x4f976a-0x1e3;let _0x515a6c=_0x550100[_0x4f976a];return _0x515a6c;},a120_0x4f97(_0x3f6cb3,_0x4b9ebc);}function a120_0x5501(){const _0x16a652=['User','isExpired','function','Success\x20request\x20update\x20app\x20to\x20latest\x20version','1894340fPYubT','Viewer','./dto/user-setting.dto','Body','killJobs','design:returntype','__decorate','design:type','BadRequestException','./dto','Post','settingService','/update','findFirst','decorate','7830djVIyu','userSetting','759630SFrTIY','isValid','metadata','../auth/enums/role.enum','../auth/guards/jwt.guard','1665RzLxAX','__param','expiryDate','updateUserSetting','JwtAuthGuard','update','./setting.service','SettingService','Controller','5413254ulMZPZ','mapSettingDocumentToDto','child_process','Role','maxUser','create','data','updateCode','RolesGuard','Patch','exec','__metadata','Master','defineProperty','stderr','SettingController','stdin','object','licenseKey','stdout','Admin','schoolId','__esModule','Roles','UseGuards','29880uVDCMv','design:paramtypes','144uBBUGD','error','17081570LKPGZR','@nestjs/common','prototype','UpdateSettingDto','Invalid\x20license\x20key',':id/license','validateLicenseKey','getOwnPropertyDescriptor','Max\x20user\x20must\x20be\x20a\x20number','initalize','7aGelyF','pm2\x20restart\x20startUI\x20startApi','Get','4209475sNKdEZ','log','Param'];a120_0x5501=function(){return _0x16a652;};return a120_0x5501();}var __decorate=this&&this[a120_0x5b52a2(0x21b)]||function(_0x309d7e,_0x382a46,_0x5a35b4,_0x5cde54){const _0x491e97=a120_0x5b52a2;var _0x26ab15=arguments['length'],_0x280288=_0x26ab15<0x3?_0x382a46:_0x5cde54===null?_0x5cde54=Object[_0x491e97(0x208)](_0x382a46,_0x5a35b4):_0x5cde54,_0xea6841;if(typeof Reflect==='object'&&typeof Reflect[_0x491e97(0x223)]===_0x491e97(0x213))_0x280288=Reflect[_0x491e97(0x223)](_0x309d7e,_0x382a46,_0x5a35b4,_0x5cde54);else{for(var _0x28dac2=_0x309d7e['length']-0x1;_0x28dac2>=0x0;_0x28dac2--)if(_0xea6841=_0x309d7e[_0x28dac2])_0x280288=(_0x26ab15<0x3?_0xea6841(_0x280288):_0x26ab15>0x3?_0xea6841(_0x382a46,_0x5a35b4,_0x280288):_0xea6841(_0x382a46,_0x5a35b4))||_0x280288;}return _0x26ab15>0x3&&_0x280288&&Object[_0x491e97(0x1f1)](_0x382a46,_0x5a35b4,_0x280288),_0x280288;},__metadata=this&&this[a120_0x5b52a2(0x1ef)]||function(_0x4c5ea4,_0x1e45d9){const _0x240800=a120_0x5b52a2;if(typeof Reflect===_0x240800(0x1f5)&&typeof Reflect[_0x240800(0x228)]===_0x240800(0x213))return Reflect['metadata'](_0x4c5ea4,_0x1e45d9);},__param=this&&this[a120_0x5b52a2(0x22c)]||function(_0x13032f,_0x94268a){return function(_0x457157,_0x1f49e2){_0x94268a(_0x457157,_0x1f49e2,_0x13032f);};};Object['defineProperty'](exports,a120_0x5b52a2(0x1fa),{'value':!![]}),exports[a120_0x5b52a2(0x1f3)]=void 0x0;const common_1=require(a120_0x5b52a2(0x202)),setting_service_1=require(a120_0x5b52a2(0x231)),dto_1=require(a120_0x5b52a2(0x21e)),roles_decorator_1=require('../auth/decorators/roles.decorator'),role_enum_1=require(a120_0x5b52a2(0x229)),jwt_guard_1=require(a120_0x5b52a2(0x22a)),roles_guard_1=require('../auth/guards/roles.guard'),setting_mapper_1=require('./mappers/setting.mapper'),child_process_1=require(a120_0x5b52a2(0x1e6)),user_setting_dto_1=require(a120_0x5b52a2(0x217));let SettingController=class SettingController{constructor(_0x4d80b8){const _0x638fa5=a120_0x5b52a2;this[_0x638fa5(0x220)]=_0x4d80b8,this[_0x638fa5(0x20a)]();}async[a120_0x5b52a2(0x222)](){const _0x58ff5a=a120_0x5b52a2,_0x35fd97=await this[_0x58ff5a(0x220)][_0x58ff5a(0x222)](),_0x2299ee=this[_0x58ff5a(0x220)]['validateLicenseKey'](_0x35fd97[_0x58ff5a(0x1f6)],_0x35fd97['schoolId']);return(0x0,setting_mapper_1[_0x58ff5a(0x1e5)])(_0x35fd97,_0x2299ee[_0x58ff5a(0x22d)]);}async[a120_0x5b52a2(0x1eb)](){const _0x2b379a=a120_0x5b52a2,_0x20c438=(0x0,child_process_1[_0x2b379a(0x1ee)])(_0x2b379a(0x20c));return console[_0x2b379a(0x20f)](_0x2b379a(0x214)),_0x20c438[_0x2b379a(0x1f7)]['on'](_0x2b379a(0x200),_0x226c25=>{const _0x2281b6=_0x2b379a;console[_0x2281b6(0x20f)](_0x226c25);}),_0x20c438[_0x2b379a(0x1f4)]['on'](_0x2b379a(0x200),_0x1a1c15=>{console['log'](_0x1a1c15);}),_0x20c438[_0x2b379a(0x1f2)]['on'](_0x2b379a(0x1ea),_0x1a57a2=>{console['log'](_0x1a57a2);}),_0x2b379a(0x214);}async[a120_0x5b52a2(0x230)](_0x121245,_0x456a9e){const _0x1193bc=a120_0x5b52a2,_0x58e671=this[_0x1193bc(0x220)][_0x1193bc(0x207)](_0x456a9e['licenseKey'],_0x456a9e[_0x1193bc(0x1f9)]);if(!_0x58e671[_0x1193bc(0x227)])throw new common_1['BadRequestException'](_0x1193bc(0x205));_0x456a9e[_0x1193bc(0x212)]=![];const _0x671dbc=await this['settingService'][_0x1193bc(0x230)](_0x121245,_0x456a9e);return(0x0,setting_mapper_1[_0x1193bc(0x1e5)])(_0x671dbc,_0x58e671[_0x1193bc(0x22d)]);}async['updateUserSetting'](_0xa588ee,_0x2da99f){const _0x433f0c=a120_0x5b52a2;_0x2da99f['maxUser']=+_0x2da99f[_0x433f0c(0x1e8)];if(isNaN(_0x2da99f[_0x433f0c(0x1e8)]))throw new common_1[(_0x433f0c(0x21d))](_0x433f0c(0x209));const _0x4947d5=await this[_0x433f0c(0x220)][_0x433f0c(0x22e)](_0x2da99f);return _0x4947d5[_0x433f0c(0x225)];}async[a120_0x5b52a2(0x219)](){const _0xb21093=a120_0x5b52a2;await this[_0xb21093(0x220)][_0xb21093(0x219)]();}async['initalize'](){const _0x47e73f=a120_0x5b52a2,_0x16d917=await this['settingService'][_0x47e73f(0x222)]();!_0x16d917&&await this[_0x47e73f(0x220)][_0x47e73f(0x1e9)]({'schoolId':'','licenseKey':'','isExpired':!![]});}};__decorate([(0x0,common_1[a120_0x5b52a2(0x20d)])('/'),(0x0,common_1[a120_0x5b52a2(0x1fc)])(jwt_guard_1[a120_0x5b52a2(0x22f)],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1[a120_0x5b52a2(0x1fb)])(role_enum_1[a120_0x5b52a2(0x1e7)][a120_0x5b52a2(0x1f8)],role_enum_1['Role']['User'],role_enum_1[a120_0x5b52a2(0x1e7)][a120_0x5b52a2(0x216)]),__metadata(a120_0x5b52a2(0x21c),Function),__metadata(a120_0x5b52a2(0x1fe),[]),__metadata('design:returntype',Promise)],SettingController['prototype'],'findFirst',null),__decorate([(0x0,common_1[a120_0x5b52a2(0x21f)])(a120_0x5b52a2(0x221)),(0x0,common_1[a120_0x5b52a2(0x1fc)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a120_0x5b52a2(0x1ec)]),(0x0,roles_decorator_1[a120_0x5b52a2(0x1fb)])(role_enum_1['Role'][a120_0x5b52a2(0x1f8)],role_enum_1[a120_0x5b52a2(0x1e7)][a120_0x5b52a2(0x211)]),__metadata(a120_0x5b52a2(0x21c),Function),__metadata(a120_0x5b52a2(0x1fe),[]),__metadata(a120_0x5b52a2(0x21a),Promise)],SettingController[a120_0x5b52a2(0x203)],a120_0x5b52a2(0x1eb),null),__decorate([(0x0,common_1[a120_0x5b52a2(0x1ed)])(a120_0x5b52a2(0x206)),(0x0,common_1[a120_0x5b52a2(0x1fc)])(jwt_guard_1[a120_0x5b52a2(0x22f)],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1[a120_0x5b52a2(0x1fb)])(role_enum_1[a120_0x5b52a2(0x1e7)][a120_0x5b52a2(0x1f8)],role_enum_1['Role'][a120_0x5b52a2(0x211)]),__param(0x0,(0x0,common_1['Param'])('id')),__param(0x1,(0x0,common_1[a120_0x5b52a2(0x218)])()),__metadata('design:type',Function),__metadata(a120_0x5b52a2(0x1fe),[String,dto_1[a120_0x5b52a2(0x204)]]),__metadata('design:returntype',Promise)],SettingController[a120_0x5b52a2(0x203)],a120_0x5b52a2(0x230),null),__decorate([(0x0,common_1[a120_0x5b52a2(0x1ed)])(':id/user-setting'),(0x0,common_1[a120_0x5b52a2(0x1fc)])(jwt_guard_1[a120_0x5b52a2(0x22f)],roles_guard_1[a120_0x5b52a2(0x1ec)]),(0x0,roles_decorator_1[a120_0x5b52a2(0x1fb)])(role_enum_1[a120_0x5b52a2(0x1e7)][a120_0x5b52a2(0x1f0)]),__param(0x0,(0x0,common_1[a120_0x5b52a2(0x210)])('id')),__param(0x1,(0x0,common_1[a120_0x5b52a2(0x218)])()),__metadata(a120_0x5b52a2(0x21c),Function),__metadata(a120_0x5b52a2(0x1fe),[String,user_setting_dto_1['UserSettingDto']]),__metadata('design:returntype',Promise)],SettingController['prototype'],a120_0x5b52a2(0x22e),null),__decorate([(0x0,common_1[a120_0x5b52a2(0x21f)])('/kill-jobs'),(0x0,common_1[a120_0x5b52a2(0x1fc)])(jwt_guard_1[a120_0x5b52a2(0x22f)],roles_guard_1[a120_0x5b52a2(0x1ec)]),(0x0,roles_decorator_1[a120_0x5b52a2(0x1fb)])(role_enum_1[a120_0x5b52a2(0x1e7)][a120_0x5b52a2(0x1f8)],role_enum_1[a120_0x5b52a2(0x1e7)][a120_0x5b52a2(0x211)]),__metadata('design:type',Function),__metadata(a120_0x5b52a2(0x1fe),[]),__metadata(a120_0x5b52a2(0x21a),Promise)],SettingController[a120_0x5b52a2(0x203)],a120_0x5b52a2(0x219),null),SettingController=__decorate([(0x0,common_1[a120_0x5b52a2(0x1e3)])('setting'),__metadata(a120_0x5b52a2(0x1fe),[setting_service_1[a120_0x5b52a2(0x232)]])],SettingController),exports['SettingController']=SettingController;