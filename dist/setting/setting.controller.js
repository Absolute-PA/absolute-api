'use strict';const a123_0x2ad03c=a123_0x510e;(function(_0x3e0228,_0xe974d3){const _0x5dea7a=a123_0x510e,_0x452357=_0x3e0228();while(!![]){try{const _0x3c34f3=-parseInt(_0x5dea7a(0xa5))/0x1*(-parseInt(_0x5dea7a(0xc5))/0x2)+parseInt(_0x5dea7a(0xe7))/0x3*(-parseInt(_0x5dea7a(0xa4))/0x4)+-parseInt(_0x5dea7a(0xd5))/0x5*(-parseInt(_0x5dea7a(0xa3))/0x6)+parseInt(_0x5dea7a(0xc9))/0x7*(-parseInt(_0x5dea7a(0xbe))/0x8)+parseInt(_0x5dea7a(0xa2))/0x9*(-parseInt(_0x5dea7a(0xc1))/0xa)+parseInt(_0x5dea7a(0xa8))/0xb*(-parseInt(_0x5dea7a(0xb0))/0xc)+parseInt(_0x5dea7a(0xd9))/0xd;if(_0x3c34f3===_0xe974d3)break;else _0x452357['push'](_0x452357['shift']());}catch(_0x5aa842){_0x452357['push'](_0x452357['shift']());}}}(a123_0x249d,0x75047));function a123_0x510e(_0x471bce,_0x2a3bfc){const _0x249da0=a123_0x249d();return a123_0x510e=function(_0x510ef2,_0x2deaef){_0x510ef2=_0x510ef2-0xa1;let _0x151834=_0x249da0[_0x510ef2];return _0x151834;},a123_0x510e(_0x471bce,_0x2a3bfc);}var __decorate=this&&this[a123_0x2ad03c(0xd2)]||function(_0x14bc21,_0x41f48b,_0x264530,_0x44955a){const _0x34cec8=a123_0x2ad03c;var _0x4eef34=arguments[_0x34cec8(0xca)],_0x4905f1=_0x4eef34<0x3?_0x41f48b:_0x44955a===null?_0x44955a=Object['getOwnPropertyDescriptor'](_0x41f48b,_0x264530):_0x44955a,_0x1813e7;if(typeof Reflect===_0x34cec8(0xaa)&&typeof Reflect['decorate']===_0x34cec8(0xe2))_0x4905f1=Reflect[_0x34cec8(0xea)](_0x14bc21,_0x41f48b,_0x264530,_0x44955a);else{for(var _0x4dcdec=_0x14bc21['length']-0x1;_0x4dcdec>=0x0;_0x4dcdec--)if(_0x1813e7=_0x14bc21[_0x4dcdec])_0x4905f1=(_0x4eef34<0x3?_0x1813e7(_0x4905f1):_0x4eef34>0x3?_0x1813e7(_0x41f48b,_0x264530,_0x4905f1):_0x1813e7(_0x41f48b,_0x264530))||_0x4905f1;}return _0x4eef34>0x3&&_0x4905f1&&Object['defineProperty'](_0x41f48b,_0x264530,_0x4905f1),_0x4905f1;},__metadata=this&&this[a123_0x2ad03c(0xd8)]||function(_0x645baf,_0x5b2ac1){const _0x152de5=a123_0x2ad03c;if(typeof Reflect===_0x152de5(0xaa)&&typeof Reflect['metadata']===_0x152de5(0xe2))return Reflect[_0x152de5(0xc3)](_0x645baf,_0x5b2ac1);},__param=this&&this[a123_0x2ad03c(0xaf)]||function(_0x1012d1,_0x13fd99){return function(_0x49ed3f,_0x13a8d2){_0x13fd99(_0x49ed3f,_0x13a8d2,_0x1012d1);};};Object[a123_0x2ad03c(0xef)](exports,a123_0x2ad03c(0xbb),{'value':!![]}),exports[a123_0x2ad03c(0xe8)]=void 0x0;const common_1=require(a123_0x2ad03c(0xd3)),setting_service_1=require(a123_0x2ad03c(0xb8)),dto_1=require(a123_0x2ad03c(0xe3)),roles_decorator_1=require(a123_0x2ad03c(0xb5)),role_enum_1=require(a123_0x2ad03c(0xa6)),jwt_guard_1=require(a123_0x2ad03c(0xee)),roles_guard_1=require('../auth/guards/roles.guard'),setting_mapper_1=require(a123_0x2ad03c(0xce)),child_process_1=require(a123_0x2ad03c(0xa9)),user_setting_dto_1=require(a123_0x2ad03c(0xc4));let SettingController=class SettingController{constructor(_0x1dfcef){const _0x5e541a=a123_0x2ad03c;this[_0x5e541a(0xc6)]=_0x1dfcef,this['initalize']();}async[a123_0x2ad03c(0xe1)](){const _0xf03379=a123_0x2ad03c,_0x46df29=await this[_0xf03379(0xc6)][_0xf03379(0xe1)](),_0x2513fa=this[_0xf03379(0xc6)]['validateLicenseKey'](_0x46df29[_0xf03379(0xc7)],_0x46df29['schoolId']);return(0x0,setting_mapper_1[_0xf03379(0xb1)])(_0x46df29,_0x2513fa[_0xf03379(0xdb)]);}async[a123_0x2ad03c(0xbf)](){const _0x285592=a123_0x2ad03c,_0x256570=(0x0,child_process_1[_0x285592(0xe5)])(_0x285592(0xa7));return console[_0x285592(0xd4)](_0x285592(0xbd)),_0x256570[_0x285592(0xec)]['on'](_0x285592(0xb7),_0x2dd2d8=>{const _0x16074d=_0x285592;console[_0x16074d(0xd4)](_0x2dd2d8);}),_0x256570[_0x285592(0xab)]['on'](_0x285592(0xb7),_0x5248f1=>{const _0x3b3251=_0x285592;console[_0x3b3251(0xd4)](_0x5248f1);}),_0x256570[_0x285592(0xdd)]['on'](_0x285592(0xbc),_0x4669ee=>{const _0x3d5c01=_0x285592;console[_0x3d5c01(0xd4)](_0x4669ee);}),_0x285592(0xbd);}async['update'](_0xc06061,_0x3d8bc5){const _0x3f8106=a123_0x2ad03c,_0x2c4409=this[_0x3f8106(0xc6)][_0x3f8106(0xd0)](_0x3d8bc5[_0x3f8106(0xc7)],_0x3d8bc5[_0x3f8106(0xcf)]);if(!_0x2c4409['isValid'])throw new common_1[(_0x3f8106(0xd1))](_0x3f8106(0xba));_0x3d8bc5[_0x3f8106(0xc0)]=![];const _0xfa2fad=await this[_0x3f8106(0xc6)][_0x3f8106(0xe9)](_0xc06061,_0x3d8bc5);return(0x0,setting_mapper_1['mapSettingDocumentToDto'])(_0xfa2fad,_0x2c4409[_0x3f8106(0xdb)]);}async['updateUserSetting'](_0x2c06db,_0x51ec29){const _0x45664a=a123_0x2ad03c;_0x51ec29[_0x45664a(0xb4)]=+_0x51ec29['maxUser'];if(isNaN(_0x51ec29[_0x45664a(0xb4)]))throw new common_1[(_0x45664a(0xd1))](_0x45664a(0xc8));const _0x4bbe34=await this[_0x45664a(0xc6)][_0x45664a(0xb3)](_0x51ec29);return _0x4bbe34['userSetting'];}async['killJobs'](){const _0x1c2293=a123_0x2ad03c;await this[_0x1c2293(0xc6)]['killJobs']();}async[a123_0x2ad03c(0xe6)](){const _0x22a10b=a123_0x2ad03c,_0x2a03cb=await this[_0x22a10b(0xc6)][_0x22a10b(0xe1)]();!_0x2a03cb&&await this[_0x22a10b(0xc6)]['create']({'schoolId':'','licenseKey':'','isExpired':!![]});}};function a123_0x249d(){const _0x265f33=['defineProperty','Post','261nLbnFB','4622388NLimgC','68rujmID','646005LyDRTp','../auth/enums/role.enum','pm2\x20restart\x20startUI\x20startApi','33HHCyAJ','child_process','object','stdin','RolesGuard','Get','/update','__param','3072828tPIQkq','mapSettingDocumentToDto','Body','updateUserSetting','maxUser','../auth/decorators/roles.decorator','Patch','error','./setting.service','Param','Invalid\x20license\x20key','__esModule','data','Success\x20request\x20update\x20app\x20to\x20latest\x20version','16wCoYFw','updateCode','isExpired','116090EETMFo','SettingService','metadata','./dto/user-setting.dto','2orLnKJ','settingService','licenseKey','Max\x20user\x20must\x20be\x20a\x20number','1696989RPDLNS','length','Admin','design:type','Master','./mappers/setting.mapper','schoolId','validateLicenseKey','BadRequestException','__decorate','@nestjs/common','log','5sojYzS','UseGuards','design:returntype','__metadata','19003465BjKHpK','design:paramtypes','expiryDate','prototype','stderr','JwtAuthGuard','Role','Roles','findFirst','function','./dto','Viewer','exec','initalize','142797xdjfhu','SettingController','update','decorate','setting','stdout','User','../auth/guards/jwt.guard'];a123_0x249d=function(){return _0x265f33;};return a123_0x249d();}__decorate([(0x0,common_1[a123_0x2ad03c(0xad)])('/'),(0x0,common_1['UseGuards'])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a123_0x2ad03c(0xac)]),(0x0,roles_decorator_1[a123_0x2ad03c(0xe0)])(role_enum_1['Role'][a123_0x2ad03c(0xcb)],role_enum_1[a123_0x2ad03c(0xdf)][a123_0x2ad03c(0xed)],role_enum_1[a123_0x2ad03c(0xdf)][a123_0x2ad03c(0xe4)]),__metadata('design:type',Function),__metadata(a123_0x2ad03c(0xda),[]),__metadata(a123_0x2ad03c(0xd7),Promise)],SettingController['prototype'],a123_0x2ad03c(0xe1),null),__decorate([(0x0,common_1['Post'])(a123_0x2ad03c(0xae)),(0x0,common_1['UseGuards'])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a123_0x2ad03c(0xac)]),(0x0,roles_decorator_1[a123_0x2ad03c(0xe0)])(role_enum_1[a123_0x2ad03c(0xdf)][a123_0x2ad03c(0xcb)],role_enum_1['Role'][a123_0x2ad03c(0xed)]),__metadata('design:type',Function),__metadata('design:paramtypes',[]),__metadata(a123_0x2ad03c(0xd7),Promise)],SettingController[a123_0x2ad03c(0xdc)],a123_0x2ad03c(0xbf),null),__decorate([(0x0,common_1[a123_0x2ad03c(0xb6)])(':id/license'),(0x0,common_1[a123_0x2ad03c(0xd6)])(jwt_guard_1[a123_0x2ad03c(0xde)],roles_guard_1[a123_0x2ad03c(0xac)]),(0x0,roles_decorator_1[a123_0x2ad03c(0xe0)])(role_enum_1[a123_0x2ad03c(0xdf)]['Admin'],role_enum_1[a123_0x2ad03c(0xdf)][a123_0x2ad03c(0xed)]),__param(0x0,(0x0,common_1[a123_0x2ad03c(0xb9)])('id')),__param(0x1,(0x0,common_1['Body'])()),__metadata(a123_0x2ad03c(0xcc),Function),__metadata(a123_0x2ad03c(0xda),[String,dto_1['UpdateSettingDto']]),__metadata('design:returntype',Promise)],SettingController[a123_0x2ad03c(0xdc)],'update',null),__decorate([(0x0,common_1[a123_0x2ad03c(0xb6)])(':id/user-setting'),(0x0,common_1[a123_0x2ad03c(0xd6)])(jwt_guard_1[a123_0x2ad03c(0xde)],roles_guard_1[a123_0x2ad03c(0xac)]),(0x0,roles_decorator_1[a123_0x2ad03c(0xe0)])(role_enum_1[a123_0x2ad03c(0xdf)][a123_0x2ad03c(0xcd)]),__param(0x0,(0x0,common_1[a123_0x2ad03c(0xb9)])('id')),__param(0x1,(0x0,common_1[a123_0x2ad03c(0xb2)])()),__metadata('design:type',Function),__metadata(a123_0x2ad03c(0xda),[String,user_setting_dto_1['UserSettingDto']]),__metadata(a123_0x2ad03c(0xd7),Promise)],SettingController['prototype'],a123_0x2ad03c(0xb3),null),__decorate([(0x0,common_1[a123_0x2ad03c(0xa1)])('/kill-jobs'),(0x0,common_1[a123_0x2ad03c(0xd6)])(jwt_guard_1[a123_0x2ad03c(0xde)],roles_guard_1[a123_0x2ad03c(0xac)]),(0x0,roles_decorator_1[a123_0x2ad03c(0xe0)])(role_enum_1['Role']['Admin'],role_enum_1[a123_0x2ad03c(0xdf)][a123_0x2ad03c(0xed)]),__metadata(a123_0x2ad03c(0xcc),Function),__metadata(a123_0x2ad03c(0xda),[]),__metadata(a123_0x2ad03c(0xd7),Promise)],SettingController[a123_0x2ad03c(0xdc)],'killJobs',null),SettingController=__decorate([(0x0,common_1['Controller'])(a123_0x2ad03c(0xeb)),__metadata('design:paramtypes',[setting_service_1[a123_0x2ad03c(0xc2)]])],SettingController),exports[a123_0x2ad03c(0xe8)]=SettingController;