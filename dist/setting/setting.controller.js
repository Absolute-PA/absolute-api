'use strict';const a120_0x1a210d=a120_0x74e3;(function(_0x4af95a,_0x3e8cc6){const _0x366d22=a120_0x74e3,_0x2dd1a9=_0x4af95a();while(!![]){try{const _0x4d683d=-parseInt(_0x366d22(0xb8))/0x1+parseInt(_0x366d22(0xd5))/0x2*(-parseInt(_0x366d22(0xda))/0x3)+-parseInt(_0x366d22(0xe9))/0x4+parseInt(_0x366d22(0xcb))/0x5*(-parseInt(_0x366d22(0xd8))/0x6)+parseInt(_0x366d22(0xd3))/0x7*(-parseInt(_0x366d22(0xf7))/0x8)+parseInt(_0x366d22(0x101))/0x9+parseInt(_0x366d22(0xe6))/0xa*(parseInt(_0x366d22(0x100))/0xb);if(_0x4d683d===_0x3e8cc6)break;else _0x2dd1a9['push'](_0x2dd1a9['shift']());}catch(_0x36017a){_0x2dd1a9['push'](_0x2dd1a9['shift']());}}}(a120_0x5b98,0xe5d17));function a120_0x74e3(_0x2b1862,_0x435845){const _0x5b98ae=a120_0x5b98();return a120_0x74e3=function(_0x74e394,_0x513937){_0x74e394=_0x74e394-0xb6;let _0x4bd067=_0x5b98ae[_0x74e394];return _0x4bd067;},a120_0x74e3(_0x2b1862,_0x435845);}var __decorate=this&&this[a120_0x1a210d(0xfa)]||function(_0x1fa99b,_0x4fb178,_0x3d13ae,_0x4bb45e){const _0x46cde5=a120_0x1a210d;var _0xc23c24=arguments[_0x46cde5(0xc9)],_0x55715=_0xc23c24<0x3?_0x4fb178:_0x4bb45e===null?_0x4bb45e=Object[_0x46cde5(0xcf)](_0x4fb178,_0x3d13ae):_0x4bb45e,_0x4bb1be;if(typeof Reflect===_0x46cde5(0xc6)&&typeof Reflect[_0x46cde5(0xe8)]===_0x46cde5(0xe4))_0x55715=Reflect[_0x46cde5(0xe8)](_0x1fa99b,_0x4fb178,_0x3d13ae,_0x4bb45e);else{for(var _0x51ab94=_0x1fa99b[_0x46cde5(0xc9)]-0x1;_0x51ab94>=0x0;_0x51ab94--)if(_0x4bb1be=_0x1fa99b[_0x51ab94])_0x55715=(_0xc23c24<0x3?_0x4bb1be(_0x55715):_0xc23c24>0x3?_0x4bb1be(_0x4fb178,_0x3d13ae,_0x55715):_0x4bb1be(_0x4fb178,_0x3d13ae))||_0x55715;}return _0xc23c24>0x3&&_0x55715&&Object[_0x46cde5(0xf5)](_0x4fb178,_0x3d13ae,_0x55715),_0x55715;},__metadata=this&&this[a120_0x1a210d(0xea)]||function(_0x19663b,_0x4e5264){const _0xb05474=a120_0x1a210d;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0xb05474(0xe4))return Reflect['metadata'](_0x19663b,_0x4e5264);},__param=this&&this['__param']||function(_0x1726b5,_0x54e6b1){return function(_0x3d0983,_0x380a8d){_0x54e6b1(_0x3d0983,_0x380a8d,_0x1726b5);};};Object['defineProperty'](exports,a120_0x1a210d(0xf0),{'value':!![]}),exports[a120_0x1a210d(0xba)]=void 0x0;const common_1=require(a120_0x1a210d(0xbe)),setting_service_1=require(a120_0x1a210d(0xb7)),dto_1=require(a120_0x1a210d(0xf4)),roles_decorator_1=require(a120_0x1a210d(0xc5)),role_enum_1=require(a120_0x1a210d(0xee)),jwt_guard_1=require(a120_0x1a210d(0xbc)),roles_guard_1=require('../auth/guards/roles.guard'),setting_mapper_1=require(a120_0x1a210d(0xef)),child_process_1=require(a120_0x1a210d(0xbd)),user_setting_dto_1=require('./dto/user-setting.dto');let SettingController=class SettingController{constructor(_0x2d7463){this['settingService']=_0x2d7463,this['initalize']();}async[a120_0x1a210d(0xca)](){const _0x5cd8eb=a120_0x1a210d,_0x5a05d4=await this['settingService']['findFirst'](),_0x2a0387=this['settingService'][_0x5cd8eb(0xbb)](_0x5a05d4[_0x5cd8eb(0xdb)],_0x5a05d4[_0x5cd8eb(0xd7)]);return(0x0,setting_mapper_1[_0x5cd8eb(0xfd)])(_0x5a05d4,_0x2a0387[_0x5cd8eb(0xde)]);}async[a120_0x1a210d(0xeb)](){const _0x227da3=a120_0x1a210d,_0xf23955=(0x0,child_process_1['exec'])(_0x227da3(0xf3));return console[_0x227da3(0xf9)](_0x227da3(0xd2)),_0xf23955[_0x227da3(0xd0)]['on'](_0x227da3(0xc1),_0x316ecd=>{const _0x3ff14c=_0x227da3;console[_0x3ff14c(0xf9)](_0x316ecd);}),_0xf23955[_0x227da3(0xcc)]['on'](_0x227da3(0xc1),_0x57426c=>{const _0x1261ee=_0x227da3;console[_0x1261ee(0xf9)](_0x57426c);}),_0xf23955[_0x227da3(0xcd)]['on']('data',_0x570258=>{const _0x58a051=_0x227da3;console[_0x58a051(0xf9)](_0x570258);}),_0x227da3(0xd2);}async['update'](_0x2b6112,_0x577bc7){const _0x291984=a120_0x1a210d,_0x684776=this[_0x291984(0xf2)][_0x291984(0xbb)](_0x577bc7['licenseKey'],_0x577bc7[_0x291984(0xd7)]);if(!_0x684776[_0x291984(0xc8)])throw new common_1['BadRequestException'](_0x291984(0xe5));_0x577bc7[_0x291984(0xfe)]=![];const _0x382842=await this['settingService'][_0x291984(0xdc)](_0x2b6112,_0x577bc7);return(0x0,setting_mapper_1['mapSettingDocumentToDto'])(_0x382842,_0x684776[_0x291984(0xde)]);}async['updateUserSetting'](_0x426870,_0xae8f03){const _0x519213=a120_0x1a210d;_0xae8f03[_0x519213(0xe7)]=+_0xae8f03[_0x519213(0xe7)];if(isNaN(_0xae8f03[_0x519213(0xe7)]))throw new common_1['BadRequestException'](_0x519213(0xb9));const _0x308342=await this[_0x519213(0xf2)]['updateUserSetting'](_0xae8f03);return _0x308342[_0x519213(0xbf)];}async[a120_0x1a210d(0xd6)](){const _0x520eb1=a120_0x1a210d;await this[_0x520eb1(0xf2)][_0x520eb1(0xd6)]();}async['initalize'](){const _0x1b8705=a120_0x1a210d,_0x5336cf=await this['settingService'][_0x1b8705(0xca)]();!_0x5336cf&&await this['settingService'][_0x1b8705(0xf8)]({'schoolId':'','licenseKey':'','isExpired':!![]});}};function a120_0x5b98(){const _0x542831=['11bpHApg','13230891loRTsY','Master','Param','Body','./setting.service','224161YsFlMv','Max\x20user\x20must\x20be\x20a\x20number','SettingController','validateLicenseKey','../auth/guards/jwt.guard','child_process','@nestjs/common','userSetting','Role','error','prototype','Admin','UpdateSettingDto','../auth/decorators/roles.decorator','object','JwtAuthGuard','isValid','length','findFirst','334380bZBPlu','stdin','stderr','Controller','getOwnPropertyDescriptor','stdout','Roles','Success\x20request\x20update\x20app\x20to\x20latest\x20version','36617WYxbgZ',':id/user-setting','356698UXLrid','killJobs','schoolId','114fMuAfQ','setting','15gLVAHm','licenseKey','update','UseGuards','expiryDate','Viewer','/kill-jobs','design:type',':id/license','SettingService','function','Invalid\x20license\x20key','52930660LNKjBb','maxUser','decorate','7108212HaRzsh','__metadata','updateCode','/update','UserSettingDto','../auth/enums/role.enum','./mappers/setting.mapper','__esModule','design:paramtypes','settingService','pm2\x20restart\x20startUI\x20startApi','./dto','defineProperty','RolesGuard','2536IQOjPa','create','log','__decorate','User','Post','mapSettingDocumentToDto','isExpired','design:returntype'];a120_0x5b98=function(){return _0x542831;};return a120_0x5b98();}__decorate([(0x0,common_1['Get'])('/'),(0x0,common_1['UseGuards'])(jwt_guard_1[a120_0x1a210d(0xc7)],roles_guard_1[a120_0x1a210d(0xf6)]),(0x0,roles_decorator_1[a120_0x1a210d(0xd1)])(role_enum_1['Role']['Admin'],role_enum_1[a120_0x1a210d(0xc0)][a120_0x1a210d(0xfb)],role_enum_1[a120_0x1a210d(0xc0)][a120_0x1a210d(0xdf)]),__metadata('design:type',Function),__metadata('design:paramtypes',[]),__metadata(a120_0x1a210d(0xff),Promise)],SettingController[a120_0x1a210d(0xc2)],a120_0x1a210d(0xca),null),__decorate([(0x0,common_1[a120_0x1a210d(0xfc)])(a120_0x1a210d(0xec)),(0x0,common_1[a120_0x1a210d(0xdd)])(jwt_guard_1[a120_0x1a210d(0xc7)],roles_guard_1[a120_0x1a210d(0xf6)]),(0x0,roles_decorator_1[a120_0x1a210d(0xd1)])(role_enum_1[a120_0x1a210d(0xc0)][a120_0x1a210d(0xc3)],role_enum_1[a120_0x1a210d(0xc0)][a120_0x1a210d(0xfb)]),__metadata(a120_0x1a210d(0xe1),Function),__metadata(a120_0x1a210d(0xf1),[]),__metadata(a120_0x1a210d(0xff),Promise)],SettingController['prototype'],a120_0x1a210d(0xeb),null),__decorate([(0x0,common_1['Patch'])(a120_0x1a210d(0xe2)),(0x0,common_1[a120_0x1a210d(0xdd)])(jwt_guard_1[a120_0x1a210d(0xc7)],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1[a120_0x1a210d(0xd1)])(role_enum_1[a120_0x1a210d(0xc0)][a120_0x1a210d(0xc3)],role_enum_1[a120_0x1a210d(0xc0)][a120_0x1a210d(0xfb)]),__param(0x0,(0x0,common_1[a120_0x1a210d(0x103)])('id')),__param(0x1,(0x0,common_1['Body'])()),__metadata(a120_0x1a210d(0xe1),Function),__metadata('design:paramtypes',[String,dto_1[a120_0x1a210d(0xc4)]]),__metadata(a120_0x1a210d(0xff),Promise)],SettingController[a120_0x1a210d(0xc2)],'update',null),__decorate([(0x0,common_1['Patch'])(a120_0x1a210d(0xd4)),(0x0,common_1['UseGuards'])(jwt_guard_1[a120_0x1a210d(0xc7)],roles_guard_1[a120_0x1a210d(0xf6)]),(0x0,roles_decorator_1[a120_0x1a210d(0xd1)])(role_enum_1['Role'][a120_0x1a210d(0x102)]),__param(0x0,(0x0,common_1[a120_0x1a210d(0x103)])('id')),__param(0x1,(0x0,common_1[a120_0x1a210d(0xb6)])()),__metadata(a120_0x1a210d(0xe1),Function),__metadata('design:paramtypes',[String,user_setting_dto_1[a120_0x1a210d(0xed)]]),__metadata('design:returntype',Promise)],SettingController[a120_0x1a210d(0xc2)],'updateUserSetting',null),__decorate([(0x0,common_1[a120_0x1a210d(0xfc)])(a120_0x1a210d(0xe0)),(0x0,common_1[a120_0x1a210d(0xdd)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a120_0x1a210d(0xf6)]),(0x0,roles_decorator_1[a120_0x1a210d(0xd1)])(role_enum_1[a120_0x1a210d(0xc0)][a120_0x1a210d(0xc3)],role_enum_1[a120_0x1a210d(0xc0)][a120_0x1a210d(0xfb)]),__metadata(a120_0x1a210d(0xe1),Function),__metadata(a120_0x1a210d(0xf1),[]),__metadata('design:returntype',Promise)],SettingController[a120_0x1a210d(0xc2)],'killJobs',null),SettingController=__decorate([(0x0,common_1[a120_0x1a210d(0xce)])(a120_0x1a210d(0xd9)),__metadata(a120_0x1a210d(0xf1),[setting_service_1[a120_0x1a210d(0xe3)]])],SettingController),exports[a120_0x1a210d(0xba)]=SettingController;