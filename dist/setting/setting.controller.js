'use strict';const a123_0x1acd62=a123_0xd27b;function a123_0xd27b(_0x272fb4,_0x3ba339){const _0x240065=a123_0x2400();return a123_0xd27b=function(_0xd27b6a,_0x4c24c1){_0xd27b6a=_0xd27b6a-0x1d1;let _0x13600d=_0x240065[_0xd27b6a];return _0x13600d;},a123_0xd27b(_0x272fb4,_0x3ba339);}(function(_0x4d1bbe,_0x5a1af4){const _0x488ddf=a123_0xd27b,_0x4a36fe=_0x4d1bbe();while(!![]){try{const _0x5de496=parseInt(_0x488ddf(0x1ea))/0x1+-parseInt(_0x488ddf(0x208))/0x2*(-parseInt(_0x488ddf(0x1e3))/0x3)+parseInt(_0x488ddf(0x1ff))/0x4*(-parseInt(_0x488ddf(0x207))/0x5)+-parseInt(_0x488ddf(0x213))/0x6*(parseInt(_0x488ddf(0x204))/0x7)+-parseInt(_0x488ddf(0x220))/0x8*(-parseInt(_0x488ddf(0x1eb))/0x9)+-parseInt(_0x488ddf(0x1fd))/0xa+-parseInt(_0x488ddf(0x1f8))/0xb;if(_0x5de496===_0x5a1af4)break;else _0x4a36fe['push'](_0x4a36fe['shift']());}catch(_0x31ce9c){_0x4a36fe['push'](_0x4a36fe['shift']());}}}(a123_0x2400,0xb2e5f));function a123_0x2400(){const _0x142e2a=[':id/user-setting','updateCode','UpdateSettingDto','object','defineProperty','setting','BadRequestException','3719793Ydspur','settingService','expiryDate','Get','Post','615660ztUmwZ','updateUserSetting','226276DqjWTp','User','JwtAuthGuard','RolesGuard','function','1766779WfgsHk','../auth/guards/jwt.guard','initalize','65JROvat','2848676SYNdgQ','./dto/user-setting.dto','Roles','length','/update','metadata','Success\x20request\x20update\x20app\x20to\x20latest\x20version','Body','__decorate','log','__param','24FbHnlt','Admin','isValid','error','update',':id/license','SettingService','./dto','Invalid\x20license\x20key','schoolId','data','stdin','child_process','4388080gEOPik','prototype','design:paramtypes','../auth/guards/roles.guard','../auth/enums/role.enum','Param','validateLicenseKey','__esModule','UseGuards','findFirst','UserSettingDto','mapSettingDocumentToDto','licenseKey','Master','Viewer','maxUser','isExpired','killJobs','stdout','3fmZosj','Role','design:returntype','getOwnPropertyDescriptor','design:type','decorate','__metadata','356123lFehxp','18raLYoj','Patch','Controller','pm2\x20restart\x20startUI\x20startApi','SettingController','create'];a123_0x2400=function(){return _0x142e2a;};return a123_0x2400();}var __decorate=this&&this[a123_0x1acd62(0x210)]||function(_0xeea4e5,_0x34bf91,_0x2c0230,_0x1b18e6){const _0x14ec27=a123_0x1acd62;var _0x4e5d78=arguments[_0x14ec27(0x20b)],_0x3985a4=_0x4e5d78<0x3?_0x34bf91:_0x1b18e6===null?_0x1b18e6=Object[_0x14ec27(0x1e6)](_0x34bf91,_0x2c0230):_0x1b18e6,_0x394ae8;if(typeof Reflect===_0x14ec27(0x1f4)&&typeof Reflect['decorate']===_0x14ec27(0x203))_0x3985a4=Reflect[_0x14ec27(0x1e8)](_0xeea4e5,_0x34bf91,_0x2c0230,_0x1b18e6);else{for(var _0x140cf3=_0xeea4e5['length']-0x1;_0x140cf3>=0x0;_0x140cf3--)if(_0x394ae8=_0xeea4e5[_0x140cf3])_0x3985a4=(_0x4e5d78<0x3?_0x394ae8(_0x3985a4):_0x4e5d78>0x3?_0x394ae8(_0x34bf91,_0x2c0230,_0x3985a4):_0x394ae8(_0x34bf91,_0x2c0230))||_0x3985a4;}return _0x4e5d78>0x3&&_0x3985a4&&Object[_0x14ec27(0x1f5)](_0x34bf91,_0x2c0230,_0x3985a4),_0x3985a4;},__metadata=this&&this[a123_0x1acd62(0x1e9)]||function(_0x43c356,_0x1e7840){const _0x4e155a=a123_0x1acd62;if(typeof Reflect==='object'&&typeof Reflect[_0x4e155a(0x20d)]===_0x4e155a(0x203))return Reflect[_0x4e155a(0x20d)](_0x43c356,_0x1e7840);},__param=this&&this[a123_0x1acd62(0x212)]||function(_0xbeccba,_0x150a74){return function(_0x8084e2,_0x327f1a){_0x150a74(_0x8084e2,_0x327f1a,_0xbeccba);};};Object['defineProperty'](exports,a123_0x1acd62(0x1d7),{'value':!![]}),exports[a123_0x1acd62(0x1ef)]=void 0x0;const common_1=require('@nestjs/common'),setting_service_1=require('./setting.service'),dto_1=require(a123_0x1acd62(0x21a)),roles_decorator_1=require('../auth/decorators/roles.decorator'),role_enum_1=require(a123_0x1acd62(0x1d4)),jwt_guard_1=require(a123_0x1acd62(0x205)),roles_guard_1=require(a123_0x1acd62(0x1d3)),setting_mapper_1=require('./mappers/setting.mapper'),child_process_1=require(a123_0x1acd62(0x21f)),user_setting_dto_1=require(a123_0x1acd62(0x209));let SettingController=class SettingController{constructor(_0xf3345f){const _0x1e444f=a123_0x1acd62;this[_0x1e444f(0x1f9)]=_0xf3345f,this[_0x1e444f(0x206)]();}async[a123_0x1acd62(0x1d9)](){const _0x2cbab8=a123_0x1acd62,_0x233a13=await this[_0x2cbab8(0x1f9)][_0x2cbab8(0x1d9)](),_0x238f97=this['settingService'][_0x2cbab8(0x1d6)](_0x233a13[_0x2cbab8(0x1dc)],_0x233a13[_0x2cbab8(0x21c)]);return(0x0,setting_mapper_1['mapSettingDocumentToDto'])(_0x233a13,_0x238f97[_0x2cbab8(0x1fa)]);}async[a123_0x1acd62(0x1f2)](){const _0x3c4833=a123_0x1acd62,_0x3e7f45=(0x0,child_process_1['exec'])(_0x3c4833(0x1ee));return console[_0x3c4833(0x211)]('Success\x20request\x20update\x20app\x20to\x20latest\x20version'),_0x3e7f45[_0x3c4833(0x1e2)]['on'](_0x3c4833(0x216),_0x58faef=>{const _0x15a984=_0x3c4833;console[_0x15a984(0x211)](_0x58faef);}),_0x3e7f45[_0x3c4833(0x21e)]['on'](_0x3c4833(0x216),_0x2058d7=>{const _0x4efb0d=_0x3c4833;console[_0x4efb0d(0x211)](_0x2058d7);}),_0x3e7f45['stderr']['on'](_0x3c4833(0x21d),_0x10f815=>{const _0x117004=_0x3c4833;console[_0x117004(0x211)](_0x10f815);}),_0x3c4833(0x20e);}async[a123_0x1acd62(0x217)](_0x13465f,_0x1117d1){const _0x45d811=a123_0x1acd62,_0x2a13d4=this[_0x45d811(0x1f9)][_0x45d811(0x1d6)](_0x1117d1['licenseKey'],_0x1117d1[_0x45d811(0x21c)]);if(!_0x2a13d4[_0x45d811(0x215)])throw new common_1[(_0x45d811(0x1f7))](_0x45d811(0x21b));_0x1117d1[_0x45d811(0x1e0)]=![];const _0x371b88=await this[_0x45d811(0x1f9)][_0x45d811(0x217)](_0x13465f,_0x1117d1);return(0x0,setting_mapper_1[_0x45d811(0x1db)])(_0x371b88,_0x2a13d4[_0x45d811(0x1fa)]);}async[a123_0x1acd62(0x1fe)](_0x18c448,_0x3297c9){const _0x666ae1=a123_0x1acd62;_0x3297c9[_0x666ae1(0x1df)]=+_0x3297c9['maxUser'];if(isNaN(_0x3297c9[_0x666ae1(0x1df)]))throw new common_1[(_0x666ae1(0x1f7))]('Max\x20user\x20must\x20be\x20a\x20number');const _0x2562bb=await this['settingService'][_0x666ae1(0x1fe)](_0x3297c9);return _0x2562bb['userSetting'];}async[a123_0x1acd62(0x1e1)](){const _0x20fe68=a123_0x1acd62;await this[_0x20fe68(0x1f9)]['killJobs']();}async[a123_0x1acd62(0x206)](){const _0x4683f6=a123_0x1acd62,_0x11b638=await this[_0x4683f6(0x1f9)][_0x4683f6(0x1d9)]();!_0x11b638&&await this[_0x4683f6(0x1f9)][_0x4683f6(0x1f0)]({'schoolId':'','licenseKey':'','isExpired':!![]});}};__decorate([(0x0,common_1[a123_0x1acd62(0x1fb)])('/'),(0x0,common_1[a123_0x1acd62(0x1d8)])(jwt_guard_1[a123_0x1acd62(0x201)],roles_guard_1[a123_0x1acd62(0x202)]),(0x0,roles_decorator_1[a123_0x1acd62(0x20a)])(role_enum_1[a123_0x1acd62(0x1e4)][a123_0x1acd62(0x214)],role_enum_1[a123_0x1acd62(0x1e4)]['User'],role_enum_1[a123_0x1acd62(0x1e4)][a123_0x1acd62(0x1de)]),__metadata('design:type',Function),__metadata(a123_0x1acd62(0x1d2),[]),__metadata(a123_0x1acd62(0x1e5),Promise)],SettingController[a123_0x1acd62(0x1d1)],a123_0x1acd62(0x1d9),null),__decorate([(0x0,common_1['Post'])(a123_0x1acd62(0x20c)),(0x0,common_1[a123_0x1acd62(0x1d8)])(jwt_guard_1[a123_0x1acd62(0x201)],roles_guard_1[a123_0x1acd62(0x202)]),(0x0,roles_decorator_1[a123_0x1acd62(0x20a)])(role_enum_1[a123_0x1acd62(0x1e4)][a123_0x1acd62(0x214)],role_enum_1[a123_0x1acd62(0x1e4)][a123_0x1acd62(0x200)]),__metadata(a123_0x1acd62(0x1e7),Function),__metadata(a123_0x1acd62(0x1d2),[]),__metadata('design:returntype',Promise)],SettingController[a123_0x1acd62(0x1d1)],a123_0x1acd62(0x1f2),null),__decorate([(0x0,common_1[a123_0x1acd62(0x1ec)])(a123_0x1acd62(0x218)),(0x0,common_1[a123_0x1acd62(0x1d8)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1[a123_0x1acd62(0x20a)])(role_enum_1[a123_0x1acd62(0x1e4)][a123_0x1acd62(0x214)],role_enum_1[a123_0x1acd62(0x1e4)][a123_0x1acd62(0x200)]),__param(0x0,(0x0,common_1[a123_0x1acd62(0x1d5)])('id')),__param(0x1,(0x0,common_1['Body'])()),__metadata(a123_0x1acd62(0x1e7),Function),__metadata(a123_0x1acd62(0x1d2),[String,dto_1[a123_0x1acd62(0x1f3)]]),__metadata('design:returntype',Promise)],SettingController[a123_0x1acd62(0x1d1)],a123_0x1acd62(0x217),null),__decorate([(0x0,common_1[a123_0x1acd62(0x1ec)])(a123_0x1acd62(0x1f1)),(0x0,common_1['UseGuards'])(jwt_guard_1[a123_0x1acd62(0x201)],roles_guard_1[a123_0x1acd62(0x202)]),(0x0,roles_decorator_1['Roles'])(role_enum_1[a123_0x1acd62(0x1e4)][a123_0x1acd62(0x1dd)]),__param(0x0,(0x0,common_1['Param'])('id')),__param(0x1,(0x0,common_1[a123_0x1acd62(0x20f)])()),__metadata(a123_0x1acd62(0x1e7),Function),__metadata(a123_0x1acd62(0x1d2),[String,user_setting_dto_1[a123_0x1acd62(0x1da)]]),__metadata(a123_0x1acd62(0x1e5),Promise)],SettingController[a123_0x1acd62(0x1d1)],'updateUserSetting',null),__decorate([(0x0,common_1[a123_0x1acd62(0x1fc)])('/kill-jobs'),(0x0,common_1[a123_0x1acd62(0x1d8)])(jwt_guard_1[a123_0x1acd62(0x201)],roles_guard_1[a123_0x1acd62(0x202)]),(0x0,roles_decorator_1[a123_0x1acd62(0x20a)])(role_enum_1[a123_0x1acd62(0x1e4)]['Admin'],role_enum_1[a123_0x1acd62(0x1e4)]['User']),__metadata(a123_0x1acd62(0x1e7),Function),__metadata(a123_0x1acd62(0x1d2),[]),__metadata(a123_0x1acd62(0x1e5),Promise)],SettingController[a123_0x1acd62(0x1d1)],a123_0x1acd62(0x1e1),null),SettingController=__decorate([(0x0,common_1[a123_0x1acd62(0x1ed)])(a123_0x1acd62(0x1f6)),__metadata(a123_0x1acd62(0x1d2),[setting_service_1[a123_0x1acd62(0x219)]])],SettingController),exports['SettingController']=SettingController;