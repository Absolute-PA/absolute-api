'use strict';const a123_0x22f366=a123_0x2859;(function(_0x880f5c,_0x477cb9){const _0xae52b5=a123_0x2859,_0x5bda21=_0x880f5c();while(!![]){try{const _0xd56445=-parseInt(_0xae52b5(0x19e))/0x1*(-parseInt(_0xae52b5(0x160))/0x2)+-parseInt(_0xae52b5(0x18b))/0x3+parseInt(_0xae52b5(0x15c))/0x4*(-parseInt(_0xae52b5(0x181))/0x5)+-parseInt(_0xae52b5(0x19d))/0x6*(-parseInt(_0xae52b5(0x198))/0x7)+parseInt(_0xae52b5(0x194))/0x8+parseInt(_0xae52b5(0x171))/0x9+-parseInt(_0xae52b5(0x16e))/0xa;if(_0xd56445===_0x477cb9)break;else _0x5bda21['push'](_0x5bda21['shift']());}catch(_0x41e055){_0x5bda21['push'](_0x5bda21['shift']());}}}(a123_0x1d63,0x28f85));function a123_0x2859(_0x719729,_0x4c1fb){const _0x1d6381=a123_0x1d63();return a123_0x2859=function(_0x28595a,_0x24a51b){_0x28595a=_0x28595a-0x158;let _0x53d2ec=_0x1d6381[_0x28595a];return _0x53d2ec;},a123_0x2859(_0x719729,_0x4c1fb);}var __decorate=this&&this[a123_0x22f366(0x179)]||function(_0x463a3c,_0x1ecf3c,_0x3102a0,_0x8af69b){const _0x3ab98c=a123_0x22f366;var _0x15abe1=arguments[_0x3ab98c(0x170)],_0x41b5ec=_0x15abe1<0x3?_0x1ecf3c:_0x8af69b===null?_0x8af69b=Object[_0x3ab98c(0x1a3)](_0x1ecf3c,_0x3102a0):_0x8af69b,_0x22096c;if(typeof Reflect===_0x3ab98c(0x1a0)&&typeof Reflect[_0x3ab98c(0x174)]===_0x3ab98c(0x191))_0x41b5ec=Reflect['decorate'](_0x463a3c,_0x1ecf3c,_0x3102a0,_0x8af69b);else{for(var _0x15f2d6=_0x463a3c[_0x3ab98c(0x170)]-0x1;_0x15f2d6>=0x0;_0x15f2d6--)if(_0x22096c=_0x463a3c[_0x15f2d6])_0x41b5ec=(_0x15abe1<0x3?_0x22096c(_0x41b5ec):_0x15abe1>0x3?_0x22096c(_0x1ecf3c,_0x3102a0,_0x41b5ec):_0x22096c(_0x1ecf3c,_0x3102a0))||_0x41b5ec;}return _0x15abe1>0x3&&_0x41b5ec&&Object[_0x3ab98c(0x15d)](_0x1ecf3c,_0x3102a0,_0x41b5ec),_0x41b5ec;},__metadata=this&&this[a123_0x22f366(0x16d)]||function(_0x2e5d44,_0x3e3e9d){const _0x16fc2d=a123_0x22f366;if(typeof Reflect===_0x16fc2d(0x1a0)&&typeof Reflect[_0x16fc2d(0x16c)]===_0x16fc2d(0x191))return Reflect[_0x16fc2d(0x16c)](_0x2e5d44,_0x3e3e9d);},__param=this&&this['__param']||function(_0x3657db,_0xe24c7f){return function(_0xc9dbf3,_0x100c99){_0xe24c7f(_0xc9dbf3,_0x100c99,_0x3657db);};};Object['defineProperty'](exports,a123_0x22f366(0x1a1),{'value':!![]}),exports['SettingController']=void 0x0;const common_1=require(a123_0x22f366(0x188)),setting_service_1=require(a123_0x22f366(0x16a)),dto_1=require(a123_0x22f366(0x177)),roles_decorator_1=require('../auth/decorators/roles.decorator'),role_enum_1=require('../auth/enums/role.enum'),jwt_guard_1=require(a123_0x22f366(0x192)),roles_guard_1=require(a123_0x22f366(0x19b)),setting_mapper_1=require(a123_0x22f366(0x15b)),child_process_1=require(a123_0x22f366(0x19f)),user_setting_dto_1=require('./dto/user-setting.dto');let SettingController=class SettingController{constructor(_0x9203d9){const _0x1759e1=a123_0x22f366;this[_0x1759e1(0x16f)]=_0x9203d9,this[_0x1759e1(0x162)]();}async[a123_0x22f366(0x18c)](){const _0x1938d7=a123_0x22f366,_0x33d00b=await this[_0x1938d7(0x16f)][_0x1938d7(0x18c)](),_0x4032f9=this[_0x1938d7(0x16f)][_0x1938d7(0x169)](_0x33d00b[_0x1938d7(0x199)],_0x33d00b[_0x1938d7(0x19c)]);return(0x0,setting_mapper_1['mapSettingDocumentToDto'])(_0x33d00b,_0x4032f9['expiryDate']);}async['updateCode'](){const _0x4722ba=a123_0x22f366,_0x191f2b=(0x0,child_process_1['exec'])(_0x4722ba(0x16b));return console[_0x4722ba(0x184)](_0x4722ba(0x15a)),_0x191f2b['stdout']['on'](_0x4722ba(0x167),_0x381554=>{const _0x2a0a78=_0x4722ba;console[_0x2a0a78(0x184)](_0x381554);}),_0x191f2b[_0x4722ba(0x158)]['on'](_0x4722ba(0x167),_0x5d15b8=>{const _0x440fdd=_0x4722ba;console[_0x440fdd(0x184)](_0x5d15b8);}),_0x191f2b[_0x4722ba(0x17d)]['on']('data',_0x245892=>{const _0x539779=_0x4722ba;console[_0x539779(0x184)](_0x245892);}),_0x4722ba(0x15a);}async[a123_0x22f366(0x163)](_0x568e32,_0x2a8aaa){const _0x2ca012=a123_0x22f366,_0x75011b=this['settingService'][_0x2ca012(0x169)](_0x2a8aaa[_0x2ca012(0x199)],_0x2a8aaa[_0x2ca012(0x19c)]);if(!_0x75011b['isValid'])throw new common_1[(_0x2ca012(0x18e))](_0x2ca012(0x1a2));_0x2a8aaa[_0x2ca012(0x159)]=![];const _0x894582=await this[_0x2ca012(0x16f)][_0x2ca012(0x163)](_0x568e32,_0x2a8aaa);return(0x0,setting_mapper_1[_0x2ca012(0x18a)])(_0x894582,_0x75011b[_0x2ca012(0x161)]);}async['updateUserSetting'](_0x5eac97,_0x1a0bac){const _0x46f7c9=a123_0x22f366;_0x1a0bac[_0x46f7c9(0x15e)]=+_0x1a0bac[_0x46f7c9(0x15e)];if(isNaN(_0x1a0bac[_0x46f7c9(0x15e)]))throw new common_1[(_0x46f7c9(0x18e))](_0x46f7c9(0x173));const _0x4ddef0=await this[_0x46f7c9(0x16f)][_0x46f7c9(0x189)](_0x1a0bac);return _0x4ddef0[_0x46f7c9(0x166)];}async['killJobs'](){const _0x2ee04=a123_0x22f366;await this[_0x2ee04(0x16f)][_0x2ee04(0x17e)]();}async[a123_0x22f366(0x162)](){const _0x1867af=a123_0x22f366,_0x58b9ee=await this[_0x1867af(0x16f)][_0x1867af(0x18c)]();!_0x58b9ee&&await this[_0x1867af(0x16f)][_0x1867af(0x17a)]({'schoolId':'','licenseKey':'','isExpired':!![]});}};__decorate([(0x0,common_1['Get'])('/'),(0x0,common_1[a123_0x22f366(0x15f)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a123_0x22f366(0x187)]),(0x0,roles_decorator_1[a123_0x22f366(0x185)])(role_enum_1[a123_0x22f366(0x196)][a123_0x22f366(0x172)],role_enum_1['Role']['User'],role_enum_1[a123_0x22f366(0x196)][a123_0x22f366(0x17c)]),__metadata('design:type',Function),__metadata(a123_0x22f366(0x175),[]),__metadata(a123_0x22f366(0x195),Promise)],SettingController[a123_0x22f366(0x18d)],a123_0x22f366(0x18c),null),__decorate([(0x0,common_1['Post'])(a123_0x22f366(0x178)),(0x0,common_1[a123_0x22f366(0x15f)])(jwt_guard_1[a123_0x22f366(0x19a)],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1[a123_0x22f366(0x185)])(role_enum_1[a123_0x22f366(0x196)][a123_0x22f366(0x172)],role_enum_1['Role'][a123_0x22f366(0x17f)]),__metadata(a123_0x22f366(0x165),Function),__metadata(a123_0x22f366(0x175),[]),__metadata(a123_0x22f366(0x195),Promise)],SettingController[a123_0x22f366(0x18d)],a123_0x22f366(0x176),null),__decorate([(0x0,common_1[a123_0x22f366(0x164)])(':id/license'),(0x0,common_1['UseGuards'])(jwt_guard_1[a123_0x22f366(0x19a)],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1[a123_0x22f366(0x185)])(role_enum_1[a123_0x22f366(0x196)][a123_0x22f366(0x172)],role_enum_1[a123_0x22f366(0x196)][a123_0x22f366(0x17f)]),__param(0x0,(0x0,common_1[a123_0x22f366(0x17b)])('id')),__param(0x1,(0x0,common_1[a123_0x22f366(0x182)])()),__metadata(a123_0x22f366(0x165),Function),__metadata(a123_0x22f366(0x175),[String,dto_1[a123_0x22f366(0x186)]]),__metadata(a123_0x22f366(0x195),Promise)],SettingController[a123_0x22f366(0x18d)],a123_0x22f366(0x163),null),__decorate([(0x0,common_1[a123_0x22f366(0x164)])(a123_0x22f366(0x180)),(0x0,common_1['UseGuards'])(jwt_guard_1[a123_0x22f366(0x19a)],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1[a123_0x22f366(0x185)])(role_enum_1['Role'][a123_0x22f366(0x193)]),__param(0x0,(0x0,common_1[a123_0x22f366(0x17b)])('id')),__param(0x1,(0x0,common_1[a123_0x22f366(0x182)])()),__metadata(a123_0x22f366(0x165),Function),__metadata('design:paramtypes',[String,user_setting_dto_1[a123_0x22f366(0x18f)]]),__metadata(a123_0x22f366(0x195),Promise)],SettingController[a123_0x22f366(0x18d)],'updateUserSetting',null),__decorate([(0x0,common_1[a123_0x22f366(0x190)])(a123_0x22f366(0x183)),(0x0,common_1[a123_0x22f366(0x15f)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a123_0x22f366(0x187)]),(0x0,roles_decorator_1['Roles'])(role_enum_1[a123_0x22f366(0x196)][a123_0x22f366(0x172)],role_enum_1[a123_0x22f366(0x196)][a123_0x22f366(0x17f)]),__metadata(a123_0x22f366(0x165),Function),__metadata(a123_0x22f366(0x175),[]),__metadata(a123_0x22f366(0x195),Promise)],SettingController['prototype'],a123_0x22f366(0x17e),null),SettingController=__decorate([(0x0,common_1['Controller'])(a123_0x22f366(0x197)),__metadata(a123_0x22f366(0x175),[setting_service_1['SettingService']])],SettingController),exports[a123_0x22f366(0x168)]=SettingController;function a123_0x1d63(){const _0x59c26a=['./dto','/update','__decorate','create','Param','Viewer','stderr','killJobs','User',':id/user-setting','545AaILkN','Body','/kill-jobs','log','Roles','UpdateSettingDto','RolesGuard','@nestjs/common','updateUserSetting','mapSettingDocumentToDto','653244IfwZGp','findFirst','prototype','BadRequestException','UserSettingDto','Post','function','../auth/guards/jwt.guard','Master','897952PfZwvg','design:returntype','Role','setting','7zJWMEp','licenseKey','JwtAuthGuard','../auth/guards/roles.guard','schoolId','1637106ENeFGF','15SEjEcd','child_process','object','__esModule','Invalid\x20license\x20key','getOwnPropertyDescriptor','stdin','isExpired','Success\x20request\x20update\x20app\x20to\x20latest\x20version','./mappers/setting.mapper','4804HVDZYC','defineProperty','maxUser','UseGuards','41256XhJLjq','expiryDate','initalize','update','Patch','design:type','userSetting','error','SettingController','validateLicenseKey','./setting.service','pm2\x20restart\x20startUI\x20startApi','metadata','__metadata','3353290XMGBXB','settingService','length','1415556YuHOPq','Admin','Max\x20user\x20must\x20be\x20a\x20number','decorate','design:paramtypes','updateCode'];a123_0x1d63=function(){return _0x59c26a;};return a123_0x1d63();}