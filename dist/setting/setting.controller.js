'use strict';const a120_0x1e0795=a120_0x46a9;function a120_0x46a9(_0x359479,_0x2746a5){const _0x282bdc=a120_0x282b();return a120_0x46a9=function(_0x46a969,_0x56715c){_0x46a969=_0x46a969-0x11c;let _0x18dc19=_0x282bdc[_0x46a969];return _0x18dc19;},a120_0x46a9(_0x359479,_0x2746a5);}(function(_0x48d410,_0x1bfe2a){const _0x3f5fbd=a120_0x46a9,_0x264029=_0x48d410();while(!![]){try{const _0x134e6b=-parseInt(_0x3f5fbd(0x121))/0x1*(parseInt(_0x3f5fbd(0x132))/0x2)+parseInt(_0x3f5fbd(0x133))/0x3+-parseInt(_0x3f5fbd(0x145))/0x4+parseInt(_0x3f5fbd(0x138))/0x5*(-parseInt(_0x3f5fbd(0x12c))/0x6)+-parseInt(_0x3f5fbd(0x11e))/0x7+-parseInt(_0x3f5fbd(0x126))/0x8*(-parseInt(_0x3f5fbd(0x13b))/0x9)+-parseInt(_0x3f5fbd(0x146))/0xa*(-parseInt(_0x3f5fbd(0x124))/0xb);if(_0x134e6b===_0x1bfe2a)break;else _0x264029['push'](_0x264029['shift']());}catch(_0x5d9c2e){_0x264029['push'](_0x264029['shift']());}}}(a120_0x282b,0xcddaf));var __decorate=this&&this[a120_0x1e0795(0x151)]||function(_0x28f7c8,_0x417056,_0xe1e74a,_0x15e9aa){const _0x1b0dfb=a120_0x1e0795;var _0x2ce936=arguments['length'],_0x41a003=_0x2ce936<0x3?_0x417056:_0x15e9aa===null?_0x15e9aa=Object[_0x1b0dfb(0x11f)](_0x417056,_0xe1e74a):_0x15e9aa,_0x5a8011;if(typeof Reflect===_0x1b0dfb(0x169)&&typeof Reflect['decorate']===_0x1b0dfb(0x153))_0x41a003=Reflect[_0x1b0dfb(0x15d)](_0x28f7c8,_0x417056,_0xe1e74a,_0x15e9aa);else{for(var _0x158706=_0x28f7c8[_0x1b0dfb(0x144)]-0x1;_0x158706>=0x0;_0x158706--)if(_0x5a8011=_0x28f7c8[_0x158706])_0x41a003=(_0x2ce936<0x3?_0x5a8011(_0x41a003):_0x2ce936>0x3?_0x5a8011(_0x417056,_0xe1e74a,_0x41a003):_0x5a8011(_0x417056,_0xe1e74a))||_0x41a003;}return _0x2ce936>0x3&&_0x41a003&&Object[_0x1b0dfb(0x130)](_0x417056,_0xe1e74a,_0x41a003),_0x41a003;},__metadata=this&&this[a120_0x1e0795(0x13d)]||function(_0x53c832,_0x572a80){const _0x4d8546=a120_0x1e0795;if(typeof Reflect===_0x4d8546(0x169)&&typeof Reflect[_0x4d8546(0x141)]==='function')return Reflect[_0x4d8546(0x141)](_0x53c832,_0x572a80);},__param=this&&this[a120_0x1e0795(0x143)]||function(_0x5dd455,_0x418c9a){return function(_0x35cf0c,_0x42aadb){_0x418c9a(_0x35cf0c,_0x42aadb,_0x5dd455);};};function a120_0x282b(){const _0x178164=['348oyJEcl','259686MXBapp','licenseKey','design:paramtypes',':id/license','../auth/guards/jwt.guard','20JzoIlJ','SettingController','initalize','18FSqCFN','Body','__metadata','UpdateSettingDto','Role','update','metadata','@nestjs/common','__param','length','6107992rRdFnz','11006240FRCMIV','isExpired','Roles','pm2\x20restart\x20startUI\x20startApi','__esModule','stdin','Viewer','UseGuards','schoolId','Param','stdout','__decorate','../auth/guards/roles.guard','function','Post','Get','Patch','JwtAuthGuard','User','error','design:returntype','../auth/enums/role.enum','userSetting','decorate','killJobs','mapSettingDocumentToDto','../auth/decorators/roles.decorator','settingService','design:type','/kill-jobs','Max\x20user\x20must\x20be\x20a\x20number','updateCode','prototype','Success\x20request\x20update\x20app\x20to\x20latest\x20version','Admin','object','expiryDate','log','stderr','9498783kRxruq','getOwnPropertyDescriptor','validateLicenseKey','4905EKRaQL','data','SettingService','33IawIBP','setting','4970104AYFCvH','./setting.service','maxUser','BadRequestException','RolesGuard','updateUserSetting','75510khmnuY','./mappers/setting.mapper','Invalid\x20license\x20key','findFirst','defineProperty',':id/user-setting'];a120_0x282b=function(){return _0x178164;};return a120_0x282b();}Object['defineProperty'](exports,a120_0x1e0795(0x14a),{'value':!![]}),exports[a120_0x1e0795(0x139)]=void 0x0;const common_1=require(a120_0x1e0795(0x142)),setting_service_1=require(a120_0x1e0795(0x127)),dto_1=require('./dto'),roles_decorator_1=require(a120_0x1e0795(0x160)),role_enum_1=require(a120_0x1e0795(0x15b)),jwt_guard_1=require(a120_0x1e0795(0x137)),roles_guard_1=require(a120_0x1e0795(0x152)),setting_mapper_1=require(a120_0x1e0795(0x12d)),child_process_1=require('child_process'),user_setting_dto_1=require('./dto/user-setting.dto');let SettingController=class SettingController{constructor(_0x34918a){const _0x2e6983=a120_0x1e0795;this['settingService']=_0x34918a,this[_0x2e6983(0x13a)]();}async[a120_0x1e0795(0x12f)](){const _0x3fcf7c=a120_0x1e0795,_0xc2f0d=await this[_0x3fcf7c(0x161)][_0x3fcf7c(0x12f)](),_0x10bb47=this['settingService'][_0x3fcf7c(0x120)](_0xc2f0d[_0x3fcf7c(0x134)],_0xc2f0d['schoolId']);return(0x0,setting_mapper_1[_0x3fcf7c(0x15f)])(_0xc2f0d,_0x10bb47['expiryDate']);}async[a120_0x1e0795(0x165)](){const _0x5dbe64=a120_0x1e0795,_0x1953d5=(0x0,child_process_1['exec'])(_0x5dbe64(0x149));return console['log'](_0x5dbe64(0x167)),_0x1953d5[_0x5dbe64(0x150)]['on'](_0x5dbe64(0x159),_0x50768e=>{const _0x5dc7d7=_0x5dbe64;console[_0x5dc7d7(0x11c)](_0x50768e);}),_0x1953d5[_0x5dbe64(0x14b)]['on'](_0x5dbe64(0x159),_0x24d574=>{const _0x201411=_0x5dbe64;console[_0x201411(0x11c)](_0x24d574);}),_0x1953d5[_0x5dbe64(0x11d)]['on'](_0x5dbe64(0x122),_0x48e89f=>{console['log'](_0x48e89f);}),_0x5dbe64(0x167);}async[a120_0x1e0795(0x140)](_0x597aa4,_0x2984e5){const _0x1240d8=a120_0x1e0795,_0xf0244=this[_0x1240d8(0x161)]['validateLicenseKey'](_0x2984e5['licenseKey'],_0x2984e5[_0x1240d8(0x14e)]);if(!_0xf0244['isValid'])throw new common_1['BadRequestException'](_0x1240d8(0x12e));_0x2984e5[_0x1240d8(0x147)]=![];const _0x19856d=await this['settingService'][_0x1240d8(0x140)](_0x597aa4,_0x2984e5);return(0x0,setting_mapper_1[_0x1240d8(0x15f)])(_0x19856d,_0xf0244[_0x1240d8(0x16a)]);}async[a120_0x1e0795(0x12b)](_0xffa44f,_0x27b60c){const _0x41917e=a120_0x1e0795;_0x27b60c[_0x41917e(0x128)]=+_0x27b60c[_0x41917e(0x128)];if(isNaN(_0x27b60c[_0x41917e(0x128)]))throw new common_1[(_0x41917e(0x129))](_0x41917e(0x164));const _0x4d18bc=await this[_0x41917e(0x161)][_0x41917e(0x12b)](_0x27b60c);return _0x4d18bc[_0x41917e(0x15c)];}async[a120_0x1e0795(0x15e)](){const _0x13927c=a120_0x1e0795;await this[_0x13927c(0x161)][_0x13927c(0x15e)]();}async[a120_0x1e0795(0x13a)](){const _0x2cf52a=a120_0x1e0795,_0x265e3e=await this[_0x2cf52a(0x161)][_0x2cf52a(0x12f)]();!_0x265e3e&&await this['settingService']['create']({'schoolId':'','licenseKey':'','isExpired':!![]});}};__decorate([(0x0,common_1[a120_0x1e0795(0x155)])('/'),(0x0,common_1[a120_0x1e0795(0x14d)])(jwt_guard_1[a120_0x1e0795(0x157)],roles_guard_1[a120_0x1e0795(0x12a)]),(0x0,roles_decorator_1[a120_0x1e0795(0x148)])(role_enum_1[a120_0x1e0795(0x13f)][a120_0x1e0795(0x168)],role_enum_1[a120_0x1e0795(0x13f)][a120_0x1e0795(0x158)],role_enum_1[a120_0x1e0795(0x13f)][a120_0x1e0795(0x14c)]),__metadata(a120_0x1e0795(0x162),Function),__metadata(a120_0x1e0795(0x135),[]),__metadata('design:returntype',Promise)],SettingController[a120_0x1e0795(0x166)],'findFirst',null),__decorate([(0x0,common_1[a120_0x1e0795(0x154)])('/update'),(0x0,common_1[a120_0x1e0795(0x14d)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a120_0x1e0795(0x12a)]),(0x0,roles_decorator_1[a120_0x1e0795(0x148)])(role_enum_1[a120_0x1e0795(0x13f)][a120_0x1e0795(0x168)],role_enum_1[a120_0x1e0795(0x13f)][a120_0x1e0795(0x158)]),__metadata(a120_0x1e0795(0x162),Function),__metadata(a120_0x1e0795(0x135),[]),__metadata('design:returntype',Promise)],SettingController['prototype'],a120_0x1e0795(0x165),null),__decorate([(0x0,common_1[a120_0x1e0795(0x156)])(a120_0x1e0795(0x136)),(0x0,common_1[a120_0x1e0795(0x14d)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1['Roles'])(role_enum_1[a120_0x1e0795(0x13f)][a120_0x1e0795(0x168)],role_enum_1['Role']['User']),__param(0x0,(0x0,common_1[a120_0x1e0795(0x14f)])('id')),__param(0x1,(0x0,common_1[a120_0x1e0795(0x13c)])()),__metadata(a120_0x1e0795(0x162),Function),__metadata(a120_0x1e0795(0x135),[String,dto_1[a120_0x1e0795(0x13e)]]),__metadata(a120_0x1e0795(0x15a),Promise)],SettingController[a120_0x1e0795(0x166)],'update',null),__decorate([(0x0,common_1[a120_0x1e0795(0x156)])(a120_0x1e0795(0x131)),(0x0,common_1[a120_0x1e0795(0x14d)])(jwt_guard_1[a120_0x1e0795(0x157)],roles_guard_1[a120_0x1e0795(0x12a)]),(0x0,roles_decorator_1['Roles'])(role_enum_1['Role']['Master']),__param(0x0,(0x0,common_1[a120_0x1e0795(0x14f)])('id')),__param(0x1,(0x0,common_1[a120_0x1e0795(0x13c)])()),__metadata('design:type',Function),__metadata(a120_0x1e0795(0x135),[String,user_setting_dto_1['UserSettingDto']]),__metadata(a120_0x1e0795(0x15a),Promise)],SettingController['prototype'],a120_0x1e0795(0x12b),null),__decorate([(0x0,common_1['Post'])(a120_0x1e0795(0x163)),(0x0,common_1['UseGuards'])(jwt_guard_1[a120_0x1e0795(0x157)],roles_guard_1[a120_0x1e0795(0x12a)]),(0x0,roles_decorator_1[a120_0x1e0795(0x148)])(role_enum_1['Role'][a120_0x1e0795(0x168)],role_enum_1['Role'][a120_0x1e0795(0x158)]),__metadata(a120_0x1e0795(0x162),Function),__metadata(a120_0x1e0795(0x135),[]),__metadata(a120_0x1e0795(0x15a),Promise)],SettingController[a120_0x1e0795(0x166)],'killJobs',null),SettingController=__decorate([(0x0,common_1['Controller'])(a120_0x1e0795(0x125)),__metadata(a120_0x1e0795(0x135),[setting_service_1[a120_0x1e0795(0x123)]])],SettingController),exports[a120_0x1e0795(0x139)]=SettingController;