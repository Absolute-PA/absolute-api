'use strict';const a123_0x34136d=a123_0x14eb;(function(_0x44fcce,_0x17c168){const _0x1f9104=a123_0x14eb,_0x40e7bd=_0x44fcce();while(!![]){try{const _0x4d0fd4=-parseInt(_0x1f9104(0x149))/0x1+-parseInt(_0x1f9104(0x157))/0x2*(-parseInt(_0x1f9104(0x12f))/0x3)+-parseInt(_0x1f9104(0x13c))/0x4*(parseInt(_0x1f9104(0x137))/0x5)+parseInt(_0x1f9104(0x158))/0x6*(-parseInt(_0x1f9104(0x143))/0x7)+parseInt(_0x1f9104(0x139))/0x8*(parseInt(_0x1f9104(0x13b))/0x9)+parseInt(_0x1f9104(0x12d))/0xa+-parseInt(_0x1f9104(0x119))/0xb*(parseInt(_0x1f9104(0x14f))/0xc);if(_0x4d0fd4===_0x17c168)break;else _0x40e7bd['push'](_0x40e7bd['shift']());}catch(_0x240f37){_0x40e7bd['push'](_0x40e7bd['shift']());}}}(a123_0x1818,0x43497));var __decorate=this&&this['__decorate']||function(_0xb113d6,_0xaf2f4e,_0xd74def,_0x31bd0e){const _0x5aea78=a123_0x14eb;var _0x226d7d=arguments[_0x5aea78(0x14e)],_0x4bc5f1=_0x226d7d<0x3?_0xaf2f4e:_0x31bd0e===null?_0x31bd0e=Object[_0x5aea78(0x124)](_0xaf2f4e,_0xd74def):_0x31bd0e,_0x50c175;if(typeof Reflect===_0x5aea78(0x145)&&typeof Reflect[_0x5aea78(0x12c)]==='function')_0x4bc5f1=Reflect[_0x5aea78(0x12c)](_0xb113d6,_0xaf2f4e,_0xd74def,_0x31bd0e);else{for(var _0x3871ef=_0xb113d6[_0x5aea78(0x14e)]-0x1;_0x3871ef>=0x0;_0x3871ef--)if(_0x50c175=_0xb113d6[_0x3871ef])_0x4bc5f1=(_0x226d7d<0x3?_0x50c175(_0x4bc5f1):_0x226d7d>0x3?_0x50c175(_0xaf2f4e,_0xd74def,_0x4bc5f1):_0x50c175(_0xaf2f4e,_0xd74def))||_0x4bc5f1;}return _0x226d7d>0x3&&_0x4bc5f1&&Object[_0x5aea78(0x123)](_0xaf2f4e,_0xd74def,_0x4bc5f1),_0x4bc5f1;},__metadata=this&&this[a123_0x34136d(0x116)]||function(_0x52030f,_0x1b4ed8){const _0x46f953=a123_0x34136d;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x46f953(0x138))return Reflect[_0x46f953(0x129)](_0x52030f,_0x1b4ed8);},__param=this&&this['__param']||function(_0x3b18c6,_0x357884){return function(_0x2b3c66,_0x3ad0dc){_0x357884(_0x2b3c66,_0x3ad0dc,_0x3b18c6);};};function a123_0x1818(){const _0x58d2f0=['updateCode','UpdateSettingDto','Invalid\x20license\x20key','design:paramtypes','findFirst','335035dTmUlx','function','1192wLEJls','setting','11439jBHCjK','20VHLPbl','User','SettingService','Master','UseGuards','initalize','BadRequestException','3633vFmGcq','./dto','object','Success\x20request\x20update\x20app\x20to\x20latest\x20version','./setting.service','design:returntype','40176KJxbtw','maxUser','error','Max\x20user\x20must\x20be\x20a\x20number','killJobs','length','12DAlWlH','Viewer','mapSettingDocumentToDto','Get','stdin','isValid','RolesGuard','update','40862nkMctq','432gQKbKT','validateLicenseKey','userSetting','/kill-jobs','Post','create',':id/license','JwtAuthGuard','prototype','Role','__metadata','@nestjs/common','/update','1630398SLDIQQ','Roles','child_process','settingService','isExpired','Controller','licenseKey',':id/user-setting','updateUserSetting','expiryDate','defineProperty','getOwnPropertyDescriptor','log','Body','Param','schoolId','metadata','design:type','Patch','decorate','3814220AnzpMP','./mappers/setting.mapper','39tgEHiT','stdout','Admin'];a123_0x1818=function(){return _0x58d2f0;};return a123_0x1818();}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['SettingController']=void 0x0;function a123_0x14eb(_0x3d5b7f,_0x42b55e){const _0x1818c8=a123_0x1818();return a123_0x14eb=function(_0x14ebd1,_0x1bda73){_0x14ebd1=_0x14ebd1-0x112;let _0x41ad2c=_0x1818c8[_0x14ebd1];return _0x41ad2c;},a123_0x14eb(_0x3d5b7f,_0x42b55e);}const common_1=require(a123_0x34136d(0x117)),setting_service_1=require(a123_0x34136d(0x147)),dto_1=require(a123_0x34136d(0x144)),roles_decorator_1=require('../auth/decorators/roles.decorator'),role_enum_1=require('../auth/enums/role.enum'),jwt_guard_1=require('../auth/guards/jwt.guard'),roles_guard_1=require('../auth/guards/roles.guard'),setting_mapper_1=require(a123_0x34136d(0x12e)),child_process_1=require(a123_0x34136d(0x11b)),user_setting_dto_1=require('./dto/user-setting.dto');let SettingController=class SettingController{constructor(_0x456795){const _0x51fa35=a123_0x34136d;this[_0x51fa35(0x11c)]=_0x456795,this[_0x51fa35(0x141)]();}async[a123_0x34136d(0x136)](){const _0x4a18c1=a123_0x34136d,_0x6ed047=await this[_0x4a18c1(0x11c)][_0x4a18c1(0x136)](),_0x241328=this[_0x4a18c1(0x11c)][_0x4a18c1(0x159)](_0x6ed047[_0x4a18c1(0x11f)],_0x6ed047[_0x4a18c1(0x128)]);return(0x0,setting_mapper_1[_0x4a18c1(0x151)])(_0x6ed047,_0x241328[_0x4a18c1(0x122)]);}async[a123_0x34136d(0x132)](){const _0x31221b=a123_0x34136d,_0x237e75=(0x0,child_process_1['exec'])('pm2\x20restart\x20startUI\x20startApi');return console[_0x31221b(0x125)](_0x31221b(0x146)),_0x237e75[_0x31221b(0x130)]['on'](_0x31221b(0x14b),_0x58b362=>{const _0x4c85a9=_0x31221b;console[_0x4c85a9(0x125)](_0x58b362);}),_0x237e75[_0x31221b(0x153)]['on']('error',_0x12b6b0=>{const _0x1de387=_0x31221b;console[_0x1de387(0x125)](_0x12b6b0);}),_0x237e75['stderr']['on']('data',_0x15e93b=>{console['log'](_0x15e93b);}),_0x31221b(0x146);}async[a123_0x34136d(0x156)](_0xd4b2c3,_0x3eabfc){const _0x519122=a123_0x34136d,_0x24ae4c=this[_0x519122(0x11c)][_0x519122(0x159)](_0x3eabfc[_0x519122(0x11f)],_0x3eabfc[_0x519122(0x128)]);if(!_0x24ae4c[_0x519122(0x154)])throw new common_1[(_0x519122(0x142))](_0x519122(0x134));_0x3eabfc[_0x519122(0x11d)]=![];const _0x224754=await this[_0x519122(0x11c)][_0x519122(0x156)](_0xd4b2c3,_0x3eabfc);return(0x0,setting_mapper_1[_0x519122(0x151)])(_0x224754,_0x24ae4c[_0x519122(0x122)]);}async[a123_0x34136d(0x121)](_0x5a48dd,_0xcb0918){const _0xd3cdee=a123_0x34136d;_0xcb0918[_0xd3cdee(0x14a)]=+_0xcb0918[_0xd3cdee(0x14a)];if(isNaN(_0xcb0918[_0xd3cdee(0x14a)]))throw new common_1[(_0xd3cdee(0x142))](_0xd3cdee(0x14c));const _0x1b6b3c=await this[_0xd3cdee(0x11c)]['updateUserSetting'](_0xcb0918);return _0x1b6b3c[_0xd3cdee(0x15a)];}async[a123_0x34136d(0x14d)](){const _0x132293=a123_0x34136d;await this[_0x132293(0x11c)]['killJobs']();}async[a123_0x34136d(0x141)](){const _0x3031a0=a123_0x34136d,_0x3afd8f=await this[_0x3031a0(0x11c)][_0x3031a0(0x136)]();!_0x3afd8f&&await this['settingService'][_0x3031a0(0x15d)]({'schoolId':'','licenseKey':'','isExpired':!![]});}};__decorate([(0x0,common_1[a123_0x34136d(0x152)])('/'),(0x0,common_1[a123_0x34136d(0x140)])(jwt_guard_1[a123_0x34136d(0x113)],roles_guard_1[a123_0x34136d(0x155)]),(0x0,roles_decorator_1[a123_0x34136d(0x11a)])(role_enum_1['Role'][a123_0x34136d(0x131)],role_enum_1['Role'][a123_0x34136d(0x13d)],role_enum_1[a123_0x34136d(0x115)][a123_0x34136d(0x150)]),__metadata(a123_0x34136d(0x12a),Function),__metadata(a123_0x34136d(0x135),[]),__metadata(a123_0x34136d(0x148),Promise)],SettingController[a123_0x34136d(0x114)],'findFirst',null),__decorate([(0x0,common_1[a123_0x34136d(0x15c)])(a123_0x34136d(0x118)),(0x0,common_1[a123_0x34136d(0x140)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a123_0x34136d(0x155)]),(0x0,roles_decorator_1['Roles'])(role_enum_1[a123_0x34136d(0x115)][a123_0x34136d(0x131)],role_enum_1[a123_0x34136d(0x115)][a123_0x34136d(0x13d)]),__metadata(a123_0x34136d(0x12a),Function),__metadata(a123_0x34136d(0x135),[]),__metadata(a123_0x34136d(0x148),Promise)],SettingController[a123_0x34136d(0x114)],a123_0x34136d(0x132),null),__decorate([(0x0,common_1[a123_0x34136d(0x12b)])(a123_0x34136d(0x112)),(0x0,common_1[a123_0x34136d(0x140)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a123_0x34136d(0x155)]),(0x0,roles_decorator_1[a123_0x34136d(0x11a)])(role_enum_1[a123_0x34136d(0x115)]['Admin'],role_enum_1[a123_0x34136d(0x115)][a123_0x34136d(0x13d)]),__param(0x0,(0x0,common_1[a123_0x34136d(0x127)])('id')),__param(0x1,(0x0,common_1['Body'])()),__metadata(a123_0x34136d(0x12a),Function),__metadata('design:paramtypes',[String,dto_1[a123_0x34136d(0x133)]]),__metadata(a123_0x34136d(0x148),Promise)],SettingController[a123_0x34136d(0x114)],a123_0x34136d(0x156),null),__decorate([(0x0,common_1[a123_0x34136d(0x12b)])(a123_0x34136d(0x120)),(0x0,common_1['UseGuards'])(jwt_guard_1[a123_0x34136d(0x113)],roles_guard_1[a123_0x34136d(0x155)]),(0x0,roles_decorator_1[a123_0x34136d(0x11a)])(role_enum_1[a123_0x34136d(0x115)][a123_0x34136d(0x13f)]),__param(0x0,(0x0,common_1[a123_0x34136d(0x127)])('id')),__param(0x1,(0x0,common_1[a123_0x34136d(0x126)])()),__metadata('design:type',Function),__metadata(a123_0x34136d(0x135),[String,user_setting_dto_1['UserSettingDto']]),__metadata('design:returntype',Promise)],SettingController[a123_0x34136d(0x114)],a123_0x34136d(0x121),null),__decorate([(0x0,common_1['Post'])(a123_0x34136d(0x15b)),(0x0,common_1['UseGuards'])(jwt_guard_1[a123_0x34136d(0x113)],roles_guard_1[a123_0x34136d(0x155)]),(0x0,roles_decorator_1[a123_0x34136d(0x11a)])(role_enum_1[a123_0x34136d(0x115)]['Admin'],role_enum_1[a123_0x34136d(0x115)]['User']),__metadata(a123_0x34136d(0x12a),Function),__metadata(a123_0x34136d(0x135),[]),__metadata(a123_0x34136d(0x148),Promise)],SettingController['prototype'],a123_0x34136d(0x14d),null),SettingController=__decorate([(0x0,common_1[a123_0x34136d(0x11e)])(a123_0x34136d(0x13a)),__metadata('design:paramtypes',[setting_service_1[a123_0x34136d(0x13e)]])],SettingController),exports['SettingController']=SettingController;