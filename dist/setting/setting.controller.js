'use strict';const a120_0x1ba347=a120_0xc6f1;function a120_0xc6f1(_0x4137d3,_0x1f3ced){const _0x4b8e9f=a120_0x4b8e();return a120_0xc6f1=function(_0xc6f13c,_0x2e7a43){_0xc6f13c=_0xc6f13c-0xc6;let _0x2b3e55=_0x4b8e9f[_0xc6f13c];return _0x2b3e55;},a120_0xc6f1(_0x4137d3,_0x1f3ced);}(function(_0x52aba6,_0x3f934e){const _0x228984=a120_0xc6f1,_0x5a0c4e=_0x52aba6();while(!![]){try{const _0x237f88=parseInt(_0x228984(0xda))/0x1+parseInt(_0x228984(0xfa))/0x2+-parseInt(_0x228984(0xf8))/0x3+parseInt(_0x228984(0xc7))/0x4+parseInt(_0x228984(0xe1))/0x5+-parseInt(_0x228984(0xf3))/0x6*(-parseInt(_0x228984(0x10b))/0x7)+-parseInt(_0x228984(0xc6))/0x8;if(_0x237f88===_0x3f934e)break;else _0x5a0c4e['push'](_0x5a0c4e['shift']());}catch(_0xeec72e){_0x5a0c4e['push'](_0x5a0c4e['shift']());}}}(a120_0x4b8e,0x4af80));var __decorate=this&&this[a120_0x1ba347(0xde)]||function(_0x28616d,_0x34467f,_0x3b59a5,_0xf3cc7f){const _0x4d9a48=a120_0x1ba347;var _0x4c8480=arguments['length'],_0x553373=_0x4c8480<0x3?_0x34467f:_0xf3cc7f===null?_0xf3cc7f=Object[_0x4d9a48(0xfc)](_0x34467f,_0x3b59a5):_0xf3cc7f,_0x2c7b9d;if(typeof Reflect===_0x4d9a48(0xe3)&&typeof Reflect['decorate']===_0x4d9a48(0x108))_0x553373=Reflect[_0x4d9a48(0xe8)](_0x28616d,_0x34467f,_0x3b59a5,_0xf3cc7f);else{for(var _0x29a1d4=_0x28616d['length']-0x1;_0x29a1d4>=0x0;_0x29a1d4--)if(_0x2c7b9d=_0x28616d[_0x29a1d4])_0x553373=(_0x4c8480<0x3?_0x2c7b9d(_0x553373):_0x4c8480>0x3?_0x2c7b9d(_0x34467f,_0x3b59a5,_0x553373):_0x2c7b9d(_0x34467f,_0x3b59a5))||_0x553373;}return _0x4c8480>0x3&&_0x553373&&Object['defineProperty'](_0x34467f,_0x3b59a5,_0x553373),_0x553373;},__metadata=this&&this['__metadata']||function(_0x251644,_0xa2d02){const _0x10cd6e=a120_0x1ba347;if(typeof Reflect===_0x10cd6e(0xe3)&&typeof Reflect['metadata']==='function')return Reflect['metadata'](_0x251644,_0xa2d02);},__param=this&&this[a120_0x1ba347(0xd7)]||function(_0x3089dd,_0x38249b){return function(_0x3826d6,_0x3c2987){_0x38249b(_0x3826d6,_0x3c2987,_0x3089dd);};};Object[a120_0x1ba347(0xf1)](exports,a120_0x1ba347(0x10c),{'value':!![]}),exports['SettingController']=void 0x0;const common_1=require(a120_0x1ba347(0xee)),setting_service_1=require(a120_0x1ba347(0xd2)),dto_1=require(a120_0x1ba347(0xf6)),roles_decorator_1=require(a120_0x1ba347(0xdf)),role_enum_1=require(a120_0x1ba347(0xe6)),jwt_guard_1=require(a120_0x1ba347(0x10a)),roles_guard_1=require(a120_0x1ba347(0xd0)),setting_mapper_1=require(a120_0x1ba347(0xdd)),child_process_1=require(a120_0x1ba347(0xca)),user_setting_dto_1=require(a120_0x1ba347(0xd1));function a120_0x4b8e(){const _0x4dd5c8=['mapSettingDocumentToDto','919116OYjbHP','Role','getOwnPropertyDescriptor','update','Admin','Master','pm2\x20restart\x20startUI\x20startApi','RolesGuard','Max\x20user\x20must\x20be\x20a\x20number','prototype','isValid','stderr','log','settingService','function','JwtAuthGuard','../auth/guards/jwt.guard','652183DKmyZC','__esModule','findFirst','killJobs','setting','userSetting','design:paramtypes','Param','Invalid\x20license\x20key','5542848SqkGWW','23796kALjCM','error','stdout','child_process','Get','BadRequestException','UserSettingDto','UseGuards','Post','../auth/guards/roles.guard','./dto/user-setting.dto','./setting.service','User','updateUserSetting','isExpired','/update','__param','Body','data','300603YKOQnz','Roles','maxUser','./mappers/setting.mapper','__decorate','../auth/decorators/roles.decorator','validateLicenseKey','2787905swoBEZ','create','object','exec','design:returntype','../auth/enums/role.enum','design:type','decorate','schoolId','updateCode','Viewer',':id/license','stdin','@nestjs/common','SettingController','Success\x20request\x20update\x20app\x20to\x20latest\x20version','defineProperty','initalize','12oCBYcW','licenseKey','expiryDate','./dto','Patch','1530303fNYbTb'];a120_0x4b8e=function(){return _0x4dd5c8;};return a120_0x4b8e();}let SettingController=class SettingController{constructor(_0x25633b){const _0x58cf6b=a120_0x1ba347;this['settingService']=_0x25633b,this[_0x58cf6b(0xf2)]();}async[a120_0x1ba347(0x10d)](){const _0x428602=a120_0x1ba347,_0x30668f=await this[_0x428602(0x107)][_0x428602(0x10d)](),_0x4d6aa4=this['settingService'][_0x428602(0xe0)](_0x30668f[_0x428602(0xf4)],_0x30668f[_0x428602(0xe9)]);return(0x0,setting_mapper_1['mapSettingDocumentToDto'])(_0x30668f,_0x4d6aa4[_0x428602(0xf5)]);}async[a120_0x1ba347(0xea)](){const _0x231027=a120_0x1ba347,_0x2880f1=(0x0,child_process_1[_0x231027(0xe4)])(_0x231027(0x100));return console[_0x231027(0x106)](_0x231027(0xf0)),_0x2880f1[_0x231027(0xc9)]['on'](_0x231027(0xc8),_0x1b1ce2=>{const _0x240467=_0x231027;console[_0x240467(0x106)](_0x1b1ce2);}),_0x2880f1[_0x231027(0xed)]['on'](_0x231027(0xc8),_0x5d93c0=>{const _0x21385c=_0x231027;console[_0x21385c(0x106)](_0x5d93c0);}),_0x2880f1[_0x231027(0x105)]['on'](_0x231027(0xd9),_0x5b7db0=>{const _0x1dbc19=_0x231027;console[_0x1dbc19(0x106)](_0x5b7db0);}),_0x231027(0xf0);}async[a120_0x1ba347(0xfd)](_0x4925c8,_0x4bc927){const _0x8889f4=a120_0x1ba347,_0xf7993b=this[_0x8889f4(0x107)][_0x8889f4(0xe0)](_0x4bc927[_0x8889f4(0xf4)],_0x4bc927['schoolId']);if(!_0xf7993b[_0x8889f4(0x104)])throw new common_1[(_0x8889f4(0xcc))](_0x8889f4(0x113));_0x4bc927[_0x8889f4(0xd5)]=![];const _0x384034=await this[_0x8889f4(0x107)][_0x8889f4(0xfd)](_0x4925c8,_0x4bc927);return(0x0,setting_mapper_1[_0x8889f4(0xf9)])(_0x384034,_0xf7993b[_0x8889f4(0xf5)]);}async[a120_0x1ba347(0xd4)](_0x1b6e8e,_0x3794bb){const _0x3bc906=a120_0x1ba347;_0x3794bb[_0x3bc906(0xdc)]=+_0x3794bb[_0x3bc906(0xdc)];if(isNaN(_0x3794bb[_0x3bc906(0xdc)]))throw new common_1['BadRequestException'](_0x3bc906(0x102));const _0x3c5fca=await this['settingService'][_0x3bc906(0xd4)](_0x3794bb);return _0x3c5fca[_0x3bc906(0x110)];}async[a120_0x1ba347(0x10e)](){const _0x27c848=a120_0x1ba347;await this[_0x27c848(0x107)][_0x27c848(0x10e)]();}async[a120_0x1ba347(0xf2)](){const _0x4c04ca=a120_0x1ba347,_0x25f45a=await this[_0x4c04ca(0x107)][_0x4c04ca(0x10d)]();!_0x25f45a&&await this[_0x4c04ca(0x107)][_0x4c04ca(0xe2)]({'schoolId':'','licenseKey':'','isExpired':!![]});}};__decorate([(0x0,common_1[a120_0x1ba347(0xcb)])('/'),(0x0,common_1['UseGuards'])(jwt_guard_1[a120_0x1ba347(0x109)],roles_guard_1[a120_0x1ba347(0x101)]),(0x0,roles_decorator_1[a120_0x1ba347(0xdb)])(role_enum_1[a120_0x1ba347(0xfb)]['Admin'],role_enum_1[a120_0x1ba347(0xfb)]['User'],role_enum_1[a120_0x1ba347(0xfb)][a120_0x1ba347(0xeb)]),__metadata(a120_0x1ba347(0xe7),Function),__metadata(a120_0x1ba347(0x111),[]),__metadata(a120_0x1ba347(0xe5),Promise)],SettingController[a120_0x1ba347(0x103)],'findFirst',null),__decorate([(0x0,common_1[a120_0x1ba347(0xcf)])(a120_0x1ba347(0xd6)),(0x0,common_1[a120_0x1ba347(0xce)])(jwt_guard_1[a120_0x1ba347(0x109)],roles_guard_1[a120_0x1ba347(0x101)]),(0x0,roles_decorator_1[a120_0x1ba347(0xdb)])(role_enum_1['Role'][a120_0x1ba347(0xfe)],role_enum_1[a120_0x1ba347(0xfb)][a120_0x1ba347(0xd3)]),__metadata(a120_0x1ba347(0xe7),Function),__metadata(a120_0x1ba347(0x111),[]),__metadata(a120_0x1ba347(0xe5),Promise)],SettingController[a120_0x1ba347(0x103)],a120_0x1ba347(0xea),null),__decorate([(0x0,common_1['Patch'])(a120_0x1ba347(0xec)),(0x0,common_1[a120_0x1ba347(0xce)])(jwt_guard_1[a120_0x1ba347(0x109)],roles_guard_1[a120_0x1ba347(0x101)]),(0x0,roles_decorator_1['Roles'])(role_enum_1[a120_0x1ba347(0xfb)][a120_0x1ba347(0xfe)],role_enum_1[a120_0x1ba347(0xfb)]['User']),__param(0x0,(0x0,common_1[a120_0x1ba347(0x112)])('id')),__param(0x1,(0x0,common_1['Body'])()),__metadata(a120_0x1ba347(0xe7),Function),__metadata(a120_0x1ba347(0x111),[String,dto_1['UpdateSettingDto']]),__metadata(a120_0x1ba347(0xe5),Promise)],SettingController['prototype'],a120_0x1ba347(0xfd),null),__decorate([(0x0,common_1[a120_0x1ba347(0xf7)])(':id/user-setting'),(0x0,common_1[a120_0x1ba347(0xce)])(jwt_guard_1[a120_0x1ba347(0x109)],roles_guard_1[a120_0x1ba347(0x101)]),(0x0,roles_decorator_1[a120_0x1ba347(0xdb)])(role_enum_1['Role'][a120_0x1ba347(0xff)]),__param(0x0,(0x0,common_1[a120_0x1ba347(0x112)])('id')),__param(0x1,(0x0,common_1[a120_0x1ba347(0xd8)])()),__metadata('design:type',Function),__metadata(a120_0x1ba347(0x111),[String,user_setting_dto_1[a120_0x1ba347(0xcd)]]),__metadata(a120_0x1ba347(0xe5),Promise)],SettingController[a120_0x1ba347(0x103)],a120_0x1ba347(0xd4),null),__decorate([(0x0,common_1[a120_0x1ba347(0xcf)])('/kill-jobs'),(0x0,common_1[a120_0x1ba347(0xce)])(jwt_guard_1[a120_0x1ba347(0x109)],roles_guard_1[a120_0x1ba347(0x101)]),(0x0,roles_decorator_1[a120_0x1ba347(0xdb)])(role_enum_1['Role'][a120_0x1ba347(0xfe)],role_enum_1[a120_0x1ba347(0xfb)][a120_0x1ba347(0xd3)]),__metadata(a120_0x1ba347(0xe7),Function),__metadata(a120_0x1ba347(0x111),[]),__metadata(a120_0x1ba347(0xe5),Promise)],SettingController[a120_0x1ba347(0x103)],a120_0x1ba347(0x10e),null),SettingController=__decorate([(0x0,common_1['Controller'])(a120_0x1ba347(0x10f)),__metadata(a120_0x1ba347(0x111),[setting_service_1['SettingService']])],SettingController),exports[a120_0x1ba347(0xef)]=SettingController;