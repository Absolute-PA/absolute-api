'use strict';function a123_0x2aac(_0x39e13c,_0x3f9fe7){const _0x1708eb=a123_0x1708();return a123_0x2aac=function(_0x2aac77,_0x3d632b){_0x2aac77=_0x2aac77-0xad;let _0xa95b25=_0x1708eb[_0x2aac77];return _0xa95b25;},a123_0x2aac(_0x39e13c,_0x3f9fe7);}const a123_0xe5ac33=a123_0x2aac;(function(_0x752da,_0x4afba9){const _0x216252=a123_0x2aac,_0x41c7a6=_0x752da();while(!![]){try{const _0x37fd05=-parseInt(_0x216252(0xbe))/0x1*(-parseInt(_0x216252(0xd7))/0x2)+-parseInt(_0x216252(0xb6))/0x3*(-parseInt(_0x216252(0xd4))/0x4)+parseInt(_0x216252(0xb4))/0x5+parseInt(_0x216252(0xdb))/0x6*(parseInt(_0x216252(0xe7))/0x7)+parseInt(_0x216252(0xf6))/0x8+parseInt(_0x216252(0xcc))/0x9+-parseInt(_0x216252(0xb5))/0xa*(parseInt(_0x216252(0xc4))/0xb);if(_0x37fd05===_0x4afba9)break;else _0x41c7a6['push'](_0x41c7a6['shift']());}catch(_0x4bf2b5){_0x41c7a6['push'](_0x41c7a6['shift']());}}}(a123_0x1708,0x9f94b));function a123_0x1708(){const _0x2da5af=['BadRequestException','SettingService','length','findFirst','8XalxSX','validateLicenseKey','Master','2169810PddYZB','isExpired','stdout','Body','1860660DgWiWt','Post','/kill-jobs','licenseKey','data','design:returntype','expiryDate','./dto/user-setting.dto','Max\x20user\x20must\x20be\x20a\x20number','../auth/guards/roles.guard','killJobs','RolesGuard','21awZGAr','userSetting','Get','Role','isValid','Success\x20request\x20update\x20app\x20to\x20latest\x20version','UseGuards','updateCode','settingService','log','design:paramtypes','create','exec','./setting.service','../auth/enums/role.enum','344312EjjZRo','child_process','update','__decorate','__esModule','UpdateSettingDto',':id/license','mapSettingDocumentToDto','6048530DazeBa','130Mwnvgs','1690296tICzKL','SettingController','./mappers/setting.mapper','metadata','__param','object','User','schoolId','1YvgFNZ','error','JwtAuthGuard','decorate','initalize','design:type','3431428cCkSYJ','Admin','updateUserSetting','Roles','@nestjs/common','prototype','./dto','setting','2827107ACZtxJ','maxUser','stdin','function'];a123_0x1708=function(){return _0x2da5af;};return a123_0x1708();}var __decorate=this&&this[a123_0xe5ac33(0xaf)]||function(_0x513e1d,_0x1cef36,_0x290c54,_0x426cf0){const _0x5b0e7=a123_0xe5ac33;var _0x137b59=arguments['length'],_0x250b55=_0x137b59<0x3?_0x1cef36:_0x426cf0===null?_0x426cf0=Object['getOwnPropertyDescriptor'](_0x1cef36,_0x290c54):_0x426cf0,_0x4f1fdb;if(typeof Reflect===_0x5b0e7(0xbb)&&typeof Reflect[_0x5b0e7(0xc1)]===_0x5b0e7(0xcf))_0x250b55=Reflect['decorate'](_0x513e1d,_0x1cef36,_0x290c54,_0x426cf0);else{for(var _0x44b876=_0x513e1d[_0x5b0e7(0xd2)]-0x1;_0x44b876>=0x0;_0x44b876--)if(_0x4f1fdb=_0x513e1d[_0x44b876])_0x250b55=(_0x137b59<0x3?_0x4f1fdb(_0x250b55):_0x137b59>0x3?_0x4f1fdb(_0x1cef36,_0x290c54,_0x250b55):_0x4f1fdb(_0x1cef36,_0x290c54))||_0x250b55;}return _0x137b59>0x3&&_0x250b55&&Object['defineProperty'](_0x1cef36,_0x290c54,_0x250b55),_0x250b55;},__metadata=this&&this['__metadata']||function(_0x3a7da7,_0x359cd5){const _0x106d08=a123_0xe5ac33;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x106d08(0xcf))return Reflect[_0x106d08(0xb9)](_0x3a7da7,_0x359cd5);},__param=this&&this[a123_0xe5ac33(0xba)]||function(_0x368a80,_0x2f8fc1){return function(_0x140ead,_0x4e0fcd){_0x2f8fc1(_0x140ead,_0x4e0fcd,_0x368a80);};};Object['defineProperty'](exports,a123_0xe5ac33(0xb0),{'value':!![]}),exports[a123_0xe5ac33(0xb7)]=void 0x0;const common_1=require(a123_0xe5ac33(0xc8)),setting_service_1=require(a123_0xe5ac33(0xf4)),dto_1=require(a123_0xe5ac33(0xca)),roles_decorator_1=require('../auth/decorators/roles.decorator'),role_enum_1=require(a123_0xe5ac33(0xf5)),jwt_guard_1=require('../auth/guards/jwt.guard'),roles_guard_1=require(a123_0xe5ac33(0xe4)),setting_mapper_1=require(a123_0xe5ac33(0xb8)),child_process_1=require(a123_0xe5ac33(0xad)),user_setting_dto_1=require(a123_0xe5ac33(0xe2));let SettingController=class SettingController{constructor(_0x3e3419){const _0x18bc99=a123_0xe5ac33;this['settingService']=_0x3e3419,this[_0x18bc99(0xc2)]();}async[a123_0xe5ac33(0xd3)](){const _0x298f78=a123_0xe5ac33,_0x3802df=await this['settingService'][_0x298f78(0xd3)](),_0x18644d=this[_0x298f78(0xef)][_0x298f78(0xd5)](_0x3802df[_0x298f78(0xde)],_0x3802df[_0x298f78(0xbd)]);return(0x0,setting_mapper_1[_0x298f78(0xb3)])(_0x3802df,_0x18644d[_0x298f78(0xe1)]);}async[a123_0xe5ac33(0xee)](){const _0x16f3db=a123_0xe5ac33,_0x25ed9e=(0x0,child_process_1[_0x16f3db(0xf3)])('pm2\x20restart\x20startUI\x20startApi');return console[_0x16f3db(0xf0)](_0x16f3db(0xec)),_0x25ed9e[_0x16f3db(0xd9)]['on'](_0x16f3db(0xbf),_0x2a66c0=>{console['log'](_0x2a66c0);}),_0x25ed9e[_0x16f3db(0xce)]['on']('error',_0x10fcbb=>{console['log'](_0x10fcbb);}),_0x25ed9e['stderr']['on'](_0x16f3db(0xdf),_0x38a59f=>{const _0xf941ef=_0x16f3db;console[_0xf941ef(0xf0)](_0x38a59f);}),_0x16f3db(0xec);}async[a123_0xe5ac33(0xae)](_0x5dc3a7,_0x33f158){const _0x565a89=a123_0xe5ac33,_0x2cc07c=this['settingService'][_0x565a89(0xd5)](_0x33f158['licenseKey'],_0x33f158[_0x565a89(0xbd)]);if(!_0x2cc07c[_0x565a89(0xeb)])throw new common_1[(_0x565a89(0xd0))]('Invalid\x20license\x20key');_0x33f158[_0x565a89(0xd8)]=![];const _0x4ac59f=await this[_0x565a89(0xef)][_0x565a89(0xae)](_0x5dc3a7,_0x33f158);return(0x0,setting_mapper_1[_0x565a89(0xb3)])(_0x4ac59f,_0x2cc07c[_0x565a89(0xe1)]);}async[a123_0xe5ac33(0xc6)](_0x5dfcf6,_0x121f90){const _0x34e416=a123_0xe5ac33;_0x121f90[_0x34e416(0xcd)]=+_0x121f90[_0x34e416(0xcd)];if(isNaN(_0x121f90['maxUser']))throw new common_1[(_0x34e416(0xd0))](_0x34e416(0xe3));const _0x576460=await this[_0x34e416(0xef)]['updateUserSetting'](_0x121f90);return _0x576460[_0x34e416(0xe8)];}async[a123_0xe5ac33(0xe5)](){const _0x523865=a123_0xe5ac33;await this[_0x523865(0xef)][_0x523865(0xe5)]();}async[a123_0xe5ac33(0xc2)](){const _0x3c9462=a123_0xe5ac33,_0x33b7f9=await this[_0x3c9462(0xef)][_0x3c9462(0xd3)]();!_0x33b7f9&&await this['settingService'][_0x3c9462(0xf2)]({'schoolId':'','licenseKey':'','isExpired':!![]});}};__decorate([(0x0,common_1[a123_0xe5ac33(0xe9)])('/'),(0x0,common_1[a123_0xe5ac33(0xed)])(jwt_guard_1[a123_0xe5ac33(0xc0)],roles_guard_1[a123_0xe5ac33(0xe6)]),(0x0,roles_decorator_1['Roles'])(role_enum_1[a123_0xe5ac33(0xea)]['Admin'],role_enum_1[a123_0xe5ac33(0xea)][a123_0xe5ac33(0xbc)],role_enum_1[a123_0xe5ac33(0xea)]['Viewer']),__metadata(a123_0xe5ac33(0xc3),Function),__metadata(a123_0xe5ac33(0xf1),[]),__metadata(a123_0xe5ac33(0xe0),Promise)],SettingController['prototype'],a123_0xe5ac33(0xd3),null),__decorate([(0x0,common_1[a123_0xe5ac33(0xdc)])('/update'),(0x0,common_1['UseGuards'])(jwt_guard_1['JwtAuthGuard'],roles_guard_1[a123_0xe5ac33(0xe6)]),(0x0,roles_decorator_1['Roles'])(role_enum_1[a123_0xe5ac33(0xea)][a123_0xe5ac33(0xc5)],role_enum_1[a123_0xe5ac33(0xea)][a123_0xe5ac33(0xbc)]),__metadata('design:type',Function),__metadata('design:paramtypes',[]),__metadata('design:returntype',Promise)],SettingController[a123_0xe5ac33(0xc9)],a123_0xe5ac33(0xee),null),__decorate([(0x0,common_1['Patch'])(a123_0xe5ac33(0xb2)),(0x0,common_1[a123_0xe5ac33(0xed)])(jwt_guard_1['JwtAuthGuard'],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1['Roles'])(role_enum_1[a123_0xe5ac33(0xea)][a123_0xe5ac33(0xc5)],role_enum_1[a123_0xe5ac33(0xea)][a123_0xe5ac33(0xbc)]),__param(0x0,(0x0,common_1['Param'])('id')),__param(0x1,(0x0,common_1['Body'])()),__metadata(a123_0xe5ac33(0xc3),Function),__metadata(a123_0xe5ac33(0xf1),[String,dto_1[a123_0xe5ac33(0xb1)]]),__metadata(a123_0xe5ac33(0xe0),Promise)],SettingController['prototype'],a123_0xe5ac33(0xae),null),__decorate([(0x0,common_1['Patch'])(':id/user-setting'),(0x0,common_1[a123_0xe5ac33(0xed)])(jwt_guard_1[a123_0xe5ac33(0xc0)],roles_guard_1[a123_0xe5ac33(0xe6)]),(0x0,roles_decorator_1[a123_0xe5ac33(0xc7)])(role_enum_1['Role'][a123_0xe5ac33(0xd6)]),__param(0x0,(0x0,common_1['Param'])('id')),__param(0x1,(0x0,common_1[a123_0xe5ac33(0xda)])()),__metadata(a123_0xe5ac33(0xc3),Function),__metadata(a123_0xe5ac33(0xf1),[String,user_setting_dto_1['UserSettingDto']]),__metadata('design:returntype',Promise)],SettingController[a123_0xe5ac33(0xc9)],a123_0xe5ac33(0xc6),null),__decorate([(0x0,common_1[a123_0xe5ac33(0xdc)])(a123_0xe5ac33(0xdd)),(0x0,common_1['UseGuards'])(jwt_guard_1[a123_0xe5ac33(0xc0)],roles_guard_1['RolesGuard']),(0x0,roles_decorator_1[a123_0xe5ac33(0xc7)])(role_enum_1[a123_0xe5ac33(0xea)][a123_0xe5ac33(0xc5)],role_enum_1[a123_0xe5ac33(0xea)][a123_0xe5ac33(0xbc)]),__metadata(a123_0xe5ac33(0xc3),Function),__metadata(a123_0xe5ac33(0xf1),[]),__metadata(a123_0xe5ac33(0xe0),Promise)],SettingController[a123_0xe5ac33(0xc9)],a123_0xe5ac33(0xe5),null),SettingController=__decorate([(0x0,common_1['Controller'])(a123_0xe5ac33(0xcb)),__metadata('design:paramtypes',[setting_service_1[a123_0xe5ac33(0xd1)]])],SettingController),exports[a123_0xe5ac33(0xb7)]=SettingController;